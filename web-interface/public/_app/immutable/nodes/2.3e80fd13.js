var Wh=Object.defineProperty;var Hh=(r,t,e)=>t in r?Wh(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var rn=(r,t,e)=>(Hh(r,typeof t!="symbol"?t+"":t,e),e);import{S as mn,i as yn,s as wn,J as A0,k as oe,q as Oe,a as Ke,l as ae,m as me,r as Le,h as Ot,c as Ve,K as Jo,n as Lt,L as ta,b as Qe,G as gt,M as _r,u as Un,N as C0,H as Pe,e as dn,p as Zn,O as Ar,P as B0,Q as Kh,w as ss,R as os,y as Nr,T as Vh,z as Ur,A as $r,U as as,g as vr,d as wr,B as Pr,v as Gh,f as Yh,V as zh}from"../chunks/index.1cf8b3b8.js";var qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Vr(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){if(this instanceof n){var a=[null];a.push.apply(a,arguments);var i=Function.bind.apply(t,a);return new i}return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var a=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return r[n]}})}),e}var M0={},Ni={};Ni.byteLength=Qh;Ni.toByteArray=tu;Ni.fromByteArray=nu;var Fr=[],dr=[],Zh=typeof Uint8Array<"u"?Uint8Array:Array,fs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var nn=0,Xh=fs.length;nn<Xh;++nn)Fr[nn]=fs[nn],dr[fs.charCodeAt(nn)]=nn;dr["-".charCodeAt(0)]=62;dr["_".charCodeAt(0)]=63;function _0(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function Qh(r){var t=_0(r),e=t[0],n=t[1];return(e+n)*3/4-n}function Jh(r,t,e){return(t+e)*3/4-e}function tu(r){var t,e=_0(r),n=e[0],a=e[1],i=new Zh(Jh(r,n,a)),d=0,b=a>0?n-4:n,C;for(C=0;C<b;C+=4)t=dr[r.charCodeAt(C)]<<18|dr[r.charCodeAt(C+1)]<<12|dr[r.charCodeAt(C+2)]<<6|dr[r.charCodeAt(C+3)],i[d++]=t>>16&255,i[d++]=t>>8&255,i[d++]=t&255;return a===2&&(t=dr[r.charCodeAt(C)]<<2|dr[r.charCodeAt(C+1)]>>4,i[d++]=t&255),a===1&&(t=dr[r.charCodeAt(C)]<<10|dr[r.charCodeAt(C+1)]<<4|dr[r.charCodeAt(C+2)]>>2,i[d++]=t>>8&255,i[d++]=t&255),i}function eu(r){return Fr[r>>18&63]+Fr[r>>12&63]+Fr[r>>6&63]+Fr[r&63]}function ru(r,t,e){for(var n,a=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),a.push(eu(n));return a.join("")}function nu(r){for(var t,e=r.length,n=e%3,a=[],i=16383,d=0,b=e-n;d<b;d+=i)a.push(ru(r,d,d+i>b?b:d+i));return n===1?(t=r[e-1],a.push(Fr[t>>2]+Fr[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],a.push(Fr[t>>10]+Fr[t>>4&63]+Fr[t<<2&63]+"=")),a.join("")}var to={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */to.read=function(r,t,e,n,a){var i,d,b=a*8-n-1,C=(1<<b)-1,D=C>>1,T=-7,O=e?a-1:0,k=e?-1:1,G=r[t+O];for(O+=k,i=G&(1<<-T)-1,G>>=-T,T+=b;T>0;i=i*256+r[t+O],O+=k,T-=8);for(d=i&(1<<-T)-1,i>>=-T,T+=n;T>0;d=d*256+r[t+O],O+=k,T-=8);if(i===0)i=1-D;else{if(i===C)return d?NaN:(G?-1:1)*(1/0);d=d+Math.pow(2,n),i=i-D}return(G?-1:1)*d*Math.pow(2,i-n)};to.write=function(r,t,e,n,a,i){var d,b,C,D=i*8-a-1,T=(1<<D)-1,O=T>>1,k=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=n?0:i-1,st=n?1:-1,ft=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,d=T):(d=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-d))<1&&(d--,C*=2),d+O>=1?t+=k/C:t+=k*Math.pow(2,1-O),t*C>=2&&(d++,C/=2),d+O>=T?(b=0,d=T):d+O>=1?(b=(t*C-1)*Math.pow(2,a),d=d+O):(b=t*Math.pow(2,O-1)*Math.pow(2,a),d=0));a>=8;r[e+G]=b&255,G+=st,b/=256,a-=8);for(d=d<<a|b,D+=a;D>0;r[e+G]=d&255,G+=st,d/=256,D-=8);r[e+G-st]|=ft*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=Ni,e=to,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=b,r.SlowBuffer=wt,r.INSPECT_MAX_BYTES=50;const a=2147483647;r.kMaxLength=a,b.TYPED_ARRAY_SUPPORT=i(),!b.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const M=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(M,x),M.foo()===42}catch{return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.buffer}}),Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(b.isBuffer(this))return this.byteOffset}});function d(M){if(M>a)throw new RangeError('The value "'+M+'" is invalid for option "size"');const x=new Uint8Array(M);return Object.setPrototypeOf(x,b.prototype),x}function b(M,x,E){if(typeof M=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(M)}return C(M,x,E)}b.poolSize=8192;function C(M,x,E){if(typeof M=="string")return k(M,x);if(ArrayBuffer.isView(M))return st(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(de(M,ArrayBuffer)||M&&de(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(M,SharedArrayBuffer)||M&&de(M.buffer,SharedArrayBuffer)))return ft(M,x,E);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const I=M.valueOf&&M.valueOf();if(I!=null&&I!==M)return b.from(I,x,E);const U=it(M);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return b.from(M[Symbol.toPrimitive]("string"),x,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}b.from=function(M,x,E){return C(M,x,E)},Object.setPrototypeOf(b.prototype,Uint8Array.prototype),Object.setPrototypeOf(b,Uint8Array);function D(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function T(M,x,E){return D(M),M<=0?d(M):x!==void 0?typeof E=="string"?d(M).fill(x,E):d(M).fill(x):d(M)}b.alloc=function(M,x,E){return T(M,x,E)};function O(M){return D(M),d(M<0?0:lt(M)|0)}b.allocUnsafe=function(M){return O(M)},b.allocUnsafeSlow=function(M){return O(M)};function k(M,x){if((typeof x!="string"||x==="")&&(x="utf8"),!b.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const E=tt(M,x)|0;let I=d(E);const U=I.write(M,x);return U!==E&&(I=I.slice(0,U)),I}function G(M){const x=M.length<0?0:lt(M.length)|0,E=d(x);for(let I=0;I<x;I+=1)E[I]=M[I]&255;return E}function st(M){if(de(M,Uint8Array)){const x=new Uint8Array(M);return ft(x.buffer,x.byteOffset,x.byteLength)}return G(M)}function ft(M,x,E){if(x<0||M.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<x+(E||0))throw new RangeError('"length" is outside of buffer bounds');let I;return x===void 0&&E===void 0?I=new Uint8Array(M):E===void 0?I=new Uint8Array(M,x):I=new Uint8Array(M,x,E),Object.setPrototypeOf(I,b.prototype),I}function it(M){if(b.isBuffer(M)){const x=lt(M.length)|0,E=d(x);return E.length===0||M.copy(E,0,0,x),E}if(M.length!==void 0)return typeof M.length!="number"||St(M.length)?d(0):G(M);if(M.type==="Buffer"&&Array.isArray(M.data))return G(M.data)}function lt(M){if(M>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return M|0}function wt(M){return+M!=M&&(M=0),b.alloc(+M)}b.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==b.prototype},b.compare=function(x,E){if(de(x,Uint8Array)&&(x=b.from(x,x.offset,x.byteLength)),de(E,Uint8Array)&&(E=b.from(E,E.offset,E.byteLength)),!b.isBuffer(x)||!b.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===E)return 0;let I=x.length,U=E.length;for(let $=0,q=Math.min(I,U);$<q;++$)if(x[$]!==E[$]){I=x[$],U=E[$];break}return I<U?-1:U<I?1:0},b.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(x,E){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return b.alloc(0);let I;if(E===void 0)for(E=0,I=0;I<x.length;++I)E+=x[I].length;const U=b.allocUnsafe(E);let $=0;for(I=0;I<x.length;++I){let q=x[I];if(de(q,Uint8Array))$+q.length>U.length?(b.isBuffer(q)||(q=b.from(q)),q.copy(U,$)):Uint8Array.prototype.set.call(U,q,$);else if(b.isBuffer(q))q.copy(U,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=q.length}return U};function tt(M,x){if(b.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||de(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const E=M.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&E===0)return 0;let U=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return Dt(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return Ft(M).length;default:if(U)return I?-1:Dt(M).length;x=(""+x).toLowerCase(),U=!0}}b.byteLength=tt;function K(M,x,E){let I=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,x>>>=0,E<=x))return"";for(M||(M="utf8");;)switch(M){case"hex":return f(this,x,E);case"utf8":case"utf-8":return h(this,x,E);case"ascii":return w(this,x,E);case"latin1":case"binary":return p(this,x,E);case"base64":return s(this,x,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c(this,x,E);default:if(I)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),I=!0}}b.prototype._isBuffer=!0;function Q(M,x,E){const I=M[x];M[x]=M[E],M[E]=I}b.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<x;E+=2)Q(this,E,E+1);return this},b.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<x;E+=4)Q(this,E,E+3),Q(this,E+1,E+2);return this},b.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<x;E+=8)Q(this,E,E+7),Q(this,E+1,E+6),Q(this,E+2,E+5),Q(this,E+3,E+4);return this},b.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?h(this,0,x):K.apply(this,arguments)},b.prototype.toLocaleString=b.prototype.toString,b.prototype.equals=function(x){if(!b.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:b.compare(this,x)===0},b.prototype.inspect=function(){let x="";const E=r.INSPECT_MAX_BYTES;return x=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(x+=" ... "),"<Buffer "+x+">"},n&&(b.prototype[n]=b.prototype.inspect),b.prototype.compare=function(x,E,I,U,$){if(de(x,Uint8Array)&&(x=b.from(x,x.offset,x.byteLength)),!b.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(E===void 0&&(E=0),I===void 0&&(I=x?x.length:0),U===void 0&&(U=0),$===void 0&&($=this.length),E<0||I>x.length||U<0||$>this.length)throw new RangeError("out of range index");if(U>=$&&E>=I)return 0;if(U>=$)return-1;if(E>=I)return 1;if(E>>>=0,I>>>=0,U>>>=0,$>>>=0,this===x)return 0;let q=$-U,Mt=I-E;const ot=Math.min(q,Mt),Et=this.slice(U,$),Yt=x.slice(E,I);for(let et=0;et<ot;++et)if(Et[et]!==Yt[et]){q=Et[et],Mt=Yt[et];break}return q<Mt?-1:Mt<q?1:0};function mt(M,x,E,I,U){if(M.length===0)return-1;if(typeof E=="string"?(I=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,St(E)&&(E=U?0:M.length-1),E<0&&(E=M.length+E),E>=M.length){if(U)return-1;E=M.length-1}else if(E<0)if(U)E=0;else return-1;if(typeof x=="string"&&(x=b.from(x,I)),b.isBuffer(x))return x.length===0?-1:Ct(M,x,E,I,U);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(M,x,E):Uint8Array.prototype.lastIndexOf.call(M,x,E):Ct(M,[x],E,I,U);throw new TypeError("val must be string, number or Buffer")}function Ct(M,x,E,I,U){let $=1,q=M.length,Mt=x.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(M.length<2||x.length<2)return-1;$=2,q/=2,Mt/=2,E/=2}function ot(Yt,et){return $===1?Yt[et]:Yt.readUInt16BE(et*$)}let Et;if(U){let Yt=-1;for(Et=E;Et<q;Et++)if(ot(M,Et)===ot(x,Yt===-1?0:Et-Yt)){if(Yt===-1&&(Yt=Et),Et-Yt+1===Mt)return Yt*$}else Yt!==-1&&(Et-=Et-Yt),Yt=-1}else for(E+Mt>q&&(E=q-Mt),Et=E;Et>=0;Et--){let Yt=!0;for(let et=0;et<Mt;et++)if(ot(M,Et+et)!==ot(x,et)){Yt=!1;break}if(Yt)return Et}return-1}b.prototype.includes=function(x,E,I){return this.indexOf(x,E,I)!==-1},b.prototype.indexOf=function(x,E,I){return mt(this,x,E,I,!0)},b.prototype.lastIndexOf=function(x,E,I){return mt(this,x,E,I,!1)};function ct(M,x,E,I){E=Number(E)||0;const U=M.length-E;I?(I=Number(I),I>U&&(I=U)):I=U;const $=x.length;I>$/2&&(I=$/2);let q;for(q=0;q<I;++q){const Mt=parseInt(x.substr(q*2,2),16);if(St(Mt))return q;M[E+q]=Mt}return q}function Kt(M,x,E,I){return Xt(Dt(x,M.length-E),M,E,I)}function y(M,x,E,I){return Xt(ne(x),M,E,I)}function o(M,x,E,I){return Xt(Ft(x),M,E,I)}function l(M,x,E,I){return Xt(Ee(x,M.length-E),M,E,I)}b.prototype.write=function(x,E,I,U){if(E===void 0)U="utf8",I=this.length,E=0;else if(I===void 0&&typeof E=="string")U=E,I=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(I)?(I=I>>>0,U===void 0&&(U="utf8")):(U=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-E;if((I===void 0||I>$)&&(I=$),x.length>0&&(I<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");U||(U="utf8");let q=!1;for(;;)switch(U){case"hex":return ct(this,x,E,I);case"utf8":case"utf-8":return Kt(this,x,E,I);case"ascii":case"latin1":case"binary":return y(this,x,E,I);case"base64":return o(this,x,E,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l(this,x,E,I);default:if(q)throw new TypeError("Unknown encoding: "+U);U=(""+U).toLowerCase(),q=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function s(M,x,E){return x===0&&E===M.length?t.fromByteArray(M):t.fromByteArray(M.slice(x,E))}function h(M,x,E){E=Math.min(M.length,E);const I=[];let U=x;for(;U<E;){const $=M[U];let q=null,Mt=$>239?4:$>223?3:$>191?2:1;if(U+Mt<=E){let ot,Et,Yt,et;switch(Mt){case 1:$<128&&(q=$);break;case 2:ot=M[U+1],(ot&192)===128&&(et=($&31)<<6|ot&63,et>127&&(q=et));break;case 3:ot=M[U+1],Et=M[U+2],(ot&192)===128&&(Et&192)===128&&(et=($&15)<<12|(ot&63)<<6|Et&63,et>2047&&(et<55296||et>57343)&&(q=et));break;case 4:ot=M[U+1],Et=M[U+2],Yt=M[U+3],(ot&192)===128&&(Et&192)===128&&(Yt&192)===128&&(et=($&15)<<18|(ot&63)<<12|(Et&63)<<6|Yt&63,et>65535&&et<1114112&&(q=et))}}q===null?(q=65533,Mt=1):q>65535&&(q-=65536,I.push(q>>>10&1023|55296),q=56320|q&1023),I.push(q),U+=Mt}return v(I)}const u=4096;function v(M){const x=M.length;if(x<=u)return String.fromCharCode.apply(String,M);let E="",I=0;for(;I<x;)E+=String.fromCharCode.apply(String,M.slice(I,I+=u));return E}function w(M,x,E){let I="";E=Math.min(M.length,E);for(let U=x;U<E;++U)I+=String.fromCharCode(M[U]&127);return I}function p(M,x,E){let I="";E=Math.min(M.length,E);for(let U=x;U<E;++U)I+=String.fromCharCode(M[U]);return I}function f(M,x,E){const I=M.length;(!x||x<0)&&(x=0),(!E||E<0||E>I)&&(E=I);let U="";for(let $=x;$<E;++$)U+=te[M[$]];return U}function c(M,x,E){const I=M.slice(x,E);let U="";for(let $=0;$<I.length-1;$+=2)U+=String.fromCharCode(I[$]+I[$+1]*256);return U}b.prototype.slice=function(x,E){const I=this.length;x=~~x,E=E===void 0?I:~~E,x<0?(x+=I,x<0&&(x=0)):x>I&&(x=I),E<0?(E+=I,E<0&&(E=0)):E>I&&(E=I),E<x&&(E=x);const U=this.subarray(x,E);return Object.setPrototypeOf(U,b.prototype),U};function m(M,x,E){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+x>E)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(x,E,I){x=x>>>0,E=E>>>0,I||m(x,E,this.length);let U=this[x],$=1,q=0;for(;++q<E&&($*=256);)U+=this[x+q]*$;return U},b.prototype.readUintBE=b.prototype.readUIntBE=function(x,E,I){x=x>>>0,E=E>>>0,I||m(x,E,this.length);let U=this[x+--E],$=1;for(;E>0&&($*=256);)U+=this[x+--E]*$;return U},b.prototype.readUint8=b.prototype.readUInt8=function(x,E){return x=x>>>0,E||m(x,1,this.length),this[x]},b.prototype.readUint16LE=b.prototype.readUInt16LE=function(x,E){return x=x>>>0,E||m(x,2,this.length),this[x]|this[x+1]<<8},b.prototype.readUint16BE=b.prototype.readUInt16BE=function(x,E){return x=x>>>0,E||m(x,2,this.length),this[x]<<8|this[x+1]},b.prototype.readUint32LE=b.prototype.readUInt32LE=function(x,E){return x=x>>>0,E||m(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},b.prototype.readUint32BE=b.prototype.readUInt32BE=function(x,E){return x=x>>>0,E||m(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},b.prototype.readBigUInt64LE=ye(function(x){x=x>>>0,xe(x,"offset");const E=this[x],I=this[x+7];(E===void 0||I===void 0)&&_t(x,this.length-8);const U=E+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,$=this[++x]+this[++x]*2**8+this[++x]*2**16+I*2**24;return BigInt(U)+(BigInt($)<<BigInt(32))}),b.prototype.readBigUInt64BE=ye(function(x){x=x>>>0,xe(x,"offset");const E=this[x],I=this[x+7];(E===void 0||I===void 0)&&_t(x,this.length-8);const U=E*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],$=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+I;return(BigInt(U)<<BigInt(32))+BigInt($)}),b.prototype.readIntLE=function(x,E,I){x=x>>>0,E=E>>>0,I||m(x,E,this.length);let U=this[x],$=1,q=0;for(;++q<E&&($*=256);)U+=this[x+q]*$;return $*=128,U>=$&&(U-=Math.pow(2,8*E)),U},b.prototype.readIntBE=function(x,E,I){x=x>>>0,E=E>>>0,I||m(x,E,this.length);let U=E,$=1,q=this[x+--U];for(;U>0&&($*=256);)q+=this[x+--U]*$;return $*=128,q>=$&&(q-=Math.pow(2,8*E)),q},b.prototype.readInt8=function(x,E){return x=x>>>0,E||m(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},b.prototype.readInt16LE=function(x,E){x=x>>>0,E||m(x,2,this.length);const I=this[x]|this[x+1]<<8;return I&32768?I|4294901760:I},b.prototype.readInt16BE=function(x,E){x=x>>>0,E||m(x,2,this.length);const I=this[x+1]|this[x]<<8;return I&32768?I|4294901760:I},b.prototype.readInt32LE=function(x,E){return x=x>>>0,E||m(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},b.prototype.readInt32BE=function(x,E){return x=x>>>0,E||m(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},b.prototype.readBigInt64LE=ye(function(x){x=x>>>0,xe(x,"offset");const E=this[x],I=this[x+7];(E===void 0||I===void 0)&&_t(x,this.length-8);const U=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(I<<24);return(BigInt(U)<<BigInt(32))+BigInt(E+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),b.prototype.readBigInt64BE=ye(function(x){x=x>>>0,xe(x,"offset");const E=this[x],I=this[x+7];(E===void 0||I===void 0)&&_t(x,this.length-8);const U=(E<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(U)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+I)}),b.prototype.readFloatLE=function(x,E){return x=x>>>0,E||m(x,4,this.length),e.read(this,x,!0,23,4)},b.prototype.readFloatBE=function(x,E){return x=x>>>0,E||m(x,4,this.length),e.read(this,x,!1,23,4)},b.prototype.readDoubleLE=function(x,E){return x=x>>>0,E||m(x,8,this.length),e.read(this,x,!0,52,8)},b.prototype.readDoubleBE=function(x,E){return x=x>>>0,E||m(x,8,this.length),e.read(this,x,!1,52,8)};function B(M,x,E,I,U,$){if(!b.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>U||x<$)throw new RangeError('"value" argument is out of bounds');if(E+I>M.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(x,E,I,U){if(x=+x,E=E>>>0,I=I>>>0,!U){const Mt=Math.pow(2,8*I)-1;B(this,x,E,I,Mt,0)}let $=1,q=0;for(this[E]=x&255;++q<I&&($*=256);)this[E+q]=x/$&255;return E+I},b.prototype.writeUintBE=b.prototype.writeUIntBE=function(x,E,I,U){if(x=+x,E=E>>>0,I=I>>>0,!U){const Mt=Math.pow(2,8*I)-1;B(this,x,E,I,Mt,0)}let $=I-1,q=1;for(this[E+$]=x&255;--$>=0&&(q*=256);)this[E+$]=x/q&255;return E+I},b.prototype.writeUint8=b.prototype.writeUInt8=function(x,E,I){return x=+x,E=E>>>0,I||B(this,x,E,1,255,0),this[E]=x&255,E+1},b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(x,E,I){return x=+x,E=E>>>0,I||B(this,x,E,2,65535,0),this[E]=x&255,this[E+1]=x>>>8,E+2},b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(x,E,I){return x=+x,E=E>>>0,I||B(this,x,E,2,65535,0),this[E]=x>>>8,this[E+1]=x&255,E+2},b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(x,E,I){return x=+x,E=E>>>0,I||B(this,x,E,4,4294967295,0),this[E+3]=x>>>24,this[E+2]=x>>>16,this[E+1]=x>>>8,this[E]=x&255,E+4},b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(x,E,I){return x=+x,E=E>>>0,I||B(this,x,E,4,4294967295,0),this[E]=x>>>24,this[E+1]=x>>>16,this[E+2]=x>>>8,this[E+3]=x&255,E+4};function P(M,x,E,I,U){Zt(x,I,U,M,E,7);let $=Number(x&BigInt(4294967295));M[E++]=$,$=$>>8,M[E++]=$,$=$>>8,M[E++]=$,$=$>>8,M[E++]=$;let q=Number(x>>BigInt(32)&BigInt(4294967295));return M[E++]=q,q=q>>8,M[E++]=q,q=q>>8,M[E++]=q,q=q>>8,M[E++]=q,E}function j(M,x,E,I,U){Zt(x,I,U,M,E,7);let $=Number(x&BigInt(4294967295));M[E+7]=$,$=$>>8,M[E+6]=$,$=$>>8,M[E+5]=$,$=$>>8,M[E+4]=$;let q=Number(x>>BigInt(32)&BigInt(4294967295));return M[E+3]=q,q=q>>8,M[E+2]=q,q=q>>8,M[E+1]=q,q=q>>8,M[E]=q,E+8}b.prototype.writeBigUInt64LE=ye(function(x,E=0){return P(this,x,E,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeBigUInt64BE=ye(function(x,E=0){return j(this,x,E,BigInt(0),BigInt("0xffffffffffffffff"))}),b.prototype.writeIntLE=function(x,E,I,U){if(x=+x,E=E>>>0,!U){const ot=Math.pow(2,8*I-1);B(this,x,E,I,ot-1,-ot)}let $=0,q=1,Mt=0;for(this[E]=x&255;++$<I&&(q*=256);)x<0&&Mt===0&&this[E+$-1]!==0&&(Mt=1),this[E+$]=(x/q>>0)-Mt&255;return E+I},b.prototype.writeIntBE=function(x,E,I,U){if(x=+x,E=E>>>0,!U){const ot=Math.pow(2,8*I-1);B(this,x,E,I,ot-1,-ot)}let $=I-1,q=1,Mt=0;for(this[E+$]=x&255;--$>=0&&(q*=256);)x<0&&Mt===0&&this[E+$+1]!==0&&(Mt=1),this[E+$]=(x/q>>0)-Mt&255;return E+I},b.prototype.writeInt8=function(x,E,I){return x=+x,E=E>>>0,I||B(this,x,E,1,127,-128),x<0&&(x=255+x+1),this[E]=x&255,E+1},b.prototype.writeInt16LE=function(x,E,I){return x=+x,E=E>>>0,I||B(this,x,E,2,32767,-32768),this[E]=x&255,this[E+1]=x>>>8,E+2},b.prototype.writeInt16BE=function(x,E,I){return x=+x,E=E>>>0,I||B(this,x,E,2,32767,-32768),this[E]=x>>>8,this[E+1]=x&255,E+2},b.prototype.writeInt32LE=function(x,E,I){return x=+x,E=E>>>0,I||B(this,x,E,4,2147483647,-2147483648),this[E]=x&255,this[E+1]=x>>>8,this[E+2]=x>>>16,this[E+3]=x>>>24,E+4},b.prototype.writeInt32BE=function(x,E,I){return x=+x,E=E>>>0,I||B(this,x,E,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[E]=x>>>24,this[E+1]=x>>>16,this[E+2]=x>>>8,this[E+3]=x&255,E+4},b.prototype.writeBigInt64LE=ye(function(x,E=0){return P(this,x,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),b.prototype.writeBigInt64BE=ye(function(x,E=0){return j(this,x,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function H(M,x,E,I,U,$){if(E+I>M.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function ht(M,x,E,I,U){return x=+x,E=E>>>0,U||H(M,x,E,4),e.write(M,x,E,I,23,4),E+4}b.prototype.writeFloatLE=function(x,E,I){return ht(this,x,E,!0,I)},b.prototype.writeFloatBE=function(x,E,I){return ht(this,x,E,!1,I)};function re(M,x,E,I,U){return x=+x,E=E>>>0,U||H(M,x,E,8),e.write(M,x,E,I,52,8),E+8}b.prototype.writeDoubleLE=function(x,E,I){return re(this,x,E,!0,I)},b.prototype.writeDoubleBE=function(x,E,I){return re(this,x,E,!1,I)},b.prototype.copy=function(x,E,I,U){if(!b.isBuffer(x))throw new TypeError("argument should be a Buffer");if(I||(I=0),!U&&U!==0&&(U=this.length),E>=x.length&&(E=x.length),E||(E=0),U>0&&U<I&&(U=I),U===I||x.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("sourceEnd out of bounds");U>this.length&&(U=this.length),x.length-E<U-I&&(U=x.length-E+I);const $=U-I;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,I,U):Uint8Array.prototype.set.call(x,this.subarray(I,U),E),$},b.prototype.fill=function(x,E,I,U){if(typeof x=="string"){if(typeof E=="string"?(U=E,E=0,I=this.length):typeof I=="string"&&(U=I,I=this.length),U!==void 0&&typeof U!="string")throw new TypeError("encoding must be a string");if(typeof U=="string"&&!b.isEncoding(U))throw new TypeError("Unknown encoding: "+U);if(x.length===1){const q=x.charCodeAt(0);(U==="utf8"&&q<128||U==="latin1")&&(x=q)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(E<0||this.length<E||this.length<I)throw new RangeError("Out of range index");if(I<=E)return this;E=E>>>0,I=I===void 0?this.length:I>>>0,x||(x=0);let $;if(typeof x=="number")for($=E;$<I;++$)this[$]=x;else{const q=b.isBuffer(x)?x:b.from(x,U),Mt=q.length;if(Mt===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for($=0;$<I-E;++$)this[$+E]=q[$%Mt]}return this};const ut={};function Pt(M,x,E){ut[M]=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code(U){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:U,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}Pt("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pt("ERR_INVALID_ARG_TYPE",function(M,x){return`The "${M}" argument must be of type number. Received type ${typeof x}`},TypeError),Pt("ERR_OUT_OF_RANGE",function(M,x,E){let I=`The value of "${M}" is out of range.`,U=E;return Number.isInteger(E)&&Math.abs(E)>2**32?U=Ae(String(E)):typeof E=="bigint"&&(U=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(U=Ae(U)),U+="n"),I+=` It must be ${x}. Received ${U}`,I},RangeError);function Ae(M){let x="",E=M.length;const I=M[0]==="-"?1:0;for(;E>=I+4;E-=3)x=`_${M.slice(E-3,E)}${x}`;return`${M.slice(0,E)}${x}`}function Rt(M,x,E){xe(x,"offset"),(M[x]===void 0||M[x+E]===void 0)&&_t(x,M.length-(E+1))}function Zt(M,x,E,I,U,$){if(M>E||M<x){const q=typeof x=="bigint"?"n":"";let Mt;throw $>3?x===0||x===BigInt(0)?Mt=`>= 0${q} and < 2${q} ** ${($+1)*8}${q}`:Mt=`>= -(2${q} ** ${($+1)*8-1}${q}) and < 2 ** ${($+1)*8-1}${q}`:Mt=`>= ${x}${q} and <= ${E}${q}`,new ut.ERR_OUT_OF_RANGE("value",Mt,M)}Rt(I,U,$)}function xe(M,x){if(typeof M!="number")throw new ut.ERR_INVALID_ARG_TYPE(x,"number",M)}function _t(M,x,E){throw Math.floor(M)!==M?(xe(M,E),new ut.ERR_OUT_OF_RANGE(E||"offset","an integer",M)):x<0?new ut.ERR_BUFFER_OUT_OF_BOUNDS:new ut.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${x}`,M)}const ie=/[^+/0-9A-Za-z-_]/g;function Se(M){if(M=M.split("=")[0],M=M.trim().replace(ie,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function Dt(M,x){x=x||1/0;let E;const I=M.length;let U=null;const $=[];for(let q=0;q<I;++q){if(E=M.charCodeAt(q),E>55295&&E<57344){if(!U){if(E>56319){(x-=3)>-1&&$.push(239,191,189);continue}else if(q+1===I){(x-=3)>-1&&$.push(239,191,189);continue}U=E;continue}if(E<56320){(x-=3)>-1&&$.push(239,191,189),U=E;continue}E=(U-55296<<10|E-56320)+65536}else U&&(x-=3)>-1&&$.push(239,191,189);if(U=null,E<128){if((x-=1)<0)break;$.push(E)}else if(E<2048){if((x-=2)<0)break;$.push(E>>6|192,E&63|128)}else if(E<65536){if((x-=3)<0)break;$.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((x-=4)<0)break;$.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return $}function ne(M){const x=[];for(let E=0;E<M.length;++E)x.push(M.charCodeAt(E)&255);return x}function Ee(M,x){let E,I,U;const $=[];for(let q=0;q<M.length&&!((x-=2)<0);++q)E=M.charCodeAt(q),I=E>>8,U=E%256,$.push(U),$.push(I);return $}function Ft(M){return t.toByteArray(Se(M))}function Xt(M,x,E,I){let U;for(U=0;U<I&&!(U+E>=x.length||U>=M.length);++U)x[U+E]=M[U];return U}function de(M,x){return M instanceof x||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===x.name}function St(M){return M!==M}const te=function(){const M="0123456789abcdef",x=new Array(256);for(let E=0;E<16;++E){const I=E*16;for(let U=0;U<16;++U)x[I+U]=M[E]+M[U]}return x}();function ye(M){return typeof BigInt>"u"?It:M}function It(){throw new Error("BigInt not supported")}})(M0);const iu=!0,su=!1;globalThis&&(globalThis.Buffer=M0.Buffer);const tE=Object.freeze(Object.defineProperty({__proto__:null,prerender:iu,ssr:su},Symbol.toStringTag,{value:"Module"}));var br={},Ui={},sr=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof sr<"u"&&sr,lr={searchParams:"URLSearchParams"in sr,iterable:"Symbol"in sr&&"iterator"in Symbol,blob:"FileReader"in sr&&"Blob"in sr&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in sr,arrayBuffer:"ArrayBuffer"in sr};function ou(r){return r&&DataView.prototype.isPrototypeOf(r)}if(lr.arrayBuffer)var au=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],fu=ArrayBuffer.isView||function(r){return r&&au.indexOf(Object.prototype.toString.call(r))>-1};function qn(r){if(typeof r!="string"&&(r=String(r)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(r)||r==="")throw new TypeError('Invalid character in header field name: "'+r+'"');return r.toLowerCase()}function eo(r){return typeof r!="string"&&(r=String(r)),r}function ro(r){var t={next:function(){var e=r.shift();return{done:e===void 0,value:e}}};return lr.iterable&&(t[Symbol.iterator]=function(){return t}),t}function Je(r){this.map={},r instanceof Je?r.forEach(function(t,e){this.append(e,t)},this):Array.isArray(r)?r.forEach(function(t){this.append(t[0],t[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(t){this.append(t,r[t])},this)}Je.prototype.append=function(r,t){r=qn(r),t=eo(t);var e=this.map[r];this.map[r]=e?e+", "+t:t};Je.prototype.delete=function(r){delete this.map[qn(r)]};Je.prototype.get=function(r){return r=qn(r),this.has(r)?this.map[r]:null};Je.prototype.has=function(r){return this.map.hasOwnProperty(qn(r))};Je.prototype.set=function(r,t){this.map[qn(r)]=eo(t)};Je.prototype.forEach=function(r,t){for(var e in this.map)this.map.hasOwnProperty(e)&&r.call(t,this.map[e],e,this)};Je.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),ro(r)};Je.prototype.values=function(){var r=[];return this.forEach(function(t){r.push(t)}),ro(r)};Je.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),ro(r)};lr.iterable&&(Je.prototype[Symbol.iterator]=Je.prototype.entries);function ls(r){if(r.bodyUsed)return Promise.reject(new TypeError("Already read"));r.bodyUsed=!0}function F0(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function lu(r){var t=new FileReader,e=F0(t);return t.readAsArrayBuffer(r),e}function hu(r){var t=new FileReader,e=F0(t);return t.readAsText(r),e}function uu(r){for(var t=new Uint8Array(r),e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t[n]);return e.join("")}function ea(r){if(r.slice)return r.slice(0);var t=new Uint8Array(r.byteLength);return t.set(new Uint8Array(r)),t.buffer}function S0(){return this.bodyUsed=!1,this._initBody=function(r){this.bodyUsed=this.bodyUsed,this._bodyInit=r,r?typeof r=="string"?this._bodyText=r:lr.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:lr.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:lr.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():lr.arrayBuffer&&lr.blob&&ou(r)?(this._bodyArrayBuffer=ea(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):lr.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||fu(r))?this._bodyArrayBuffer=ea(r):this._bodyText=r=Object.prototype.toString.call(r):this._bodyText="",this.headers.get("content-type")||(typeof r=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):lr.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},lr.blob&&(this.blob=function(){var r=ls(this);if(r)return r;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var r=ls(this);return r||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(lu)}),this.text=function(){var r=ls(this);if(r)return r;if(this._bodyBlob)return hu(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(uu(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},lr.formData&&(this.formData=function(){return this.text().then(pu)}),this.json=function(){return this.text().then(JSON.parse)},this}var cu=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function du(r){var t=r.toUpperCase();return cu.indexOf(t)>-1?t:r}function Jr(r,t){if(!(this instanceof Jr))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{};var e=t.body;if(r instanceof Jr){if(r.bodyUsed)throw new TypeError("Already read");this.url=r.url,this.credentials=r.credentials,t.headers||(this.headers=new Je(r.headers)),this.method=r.method,this.mode=r.mode,this.signal=r.signal,!e&&r._bodyInit!=null&&(e=r._bodyInit,r.bodyUsed=!0)}else this.url=String(r);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new Je(t.headers)),this.method=du(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&e)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(e),(this.method==="GET"||this.method==="HEAD")&&(t.cache==="no-store"||t.cache==="no-cache")){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+new Date().getTime());else{var a=/\?/;this.url+=(a.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Jr.prototype.clone=function(){return new Jr(this,{body:this._bodyInit})};function pu(r){var t=new FormData;return r.trim().split("&").forEach(function(e){if(e){var n=e.split("="),a=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(a),decodeURIComponent(i))}}),t}function vu(r){var t=new Je,e=r.replace(/\r?\n[\t ]+/g," ");return e.split("\r").map(function(n){return n.indexOf(`
`)===0?n.substr(1,n.length):n}).forEach(function(n){var a=n.split(":"),i=a.shift().trim();if(i){var d=a.join(":").trim();t.append(i,d)}}),t}S0.call(Jr.prototype);function Sr(r,t){if(!(this instanceof Sr))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=t.status===void 0?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===void 0?"":""+t.statusText,this.headers=new Je(t.headers),this.url=t.url||"",this._initBody(r)}S0.call(Sr.prototype);Sr.prototype.clone=function(){return new Sr(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Je(this.headers),url:this.url})};Sr.error=function(){var r=new Sr(null,{status:0,statusText:""});return r.type="error",r};var gu=[301,302,303,307,308];Sr.redirect=function(r,t){if(gu.indexOf(t)===-1)throw new RangeError("Invalid status code");return new Sr(null,{status:t,headers:{location:r}})};var Xr=sr.DOMException;try{new Xr}catch{Xr=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},Xr.prototype=Object.create(Error.prototype),Xr.prototype.constructor=Xr}function D0(r,t){return new Promise(function(e,n){var a=new Jr(r,t);if(a.signal&&a.signal.aborted)return n(new Xr("Aborted","AbortError"));var i=new XMLHttpRequest;function d(){i.abort()}i.onload=function(){var C={status:i.status,statusText:i.statusText,headers:vu(i.getAllResponseHeaders()||"")};C.url="responseURL"in i?i.responseURL:C.headers.get("X-Request-URL");var D="response"in i?i.response:i.responseText;setTimeout(function(){e(new Sr(D,C))},0)},i.onerror=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},i.onabort=function(){setTimeout(function(){n(new Xr("Aborted","AbortError"))},0)};function b(C){try{return C===""&&sr.location.href?sr.location.href:C}catch{return C}}i.open(a.method,b(a.url),!0),a.credentials==="include"?i.withCredentials=!0:a.credentials==="omit"&&(i.withCredentials=!1),"responseType"in i&&(lr.blob?i.responseType="blob":lr.arrayBuffer&&a.headers.get("Content-Type")&&a.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(i.responseType="arraybuffer")),t&&typeof t.headers=="object"&&!(t.headers instanceof Je)?Object.getOwnPropertyNames(t.headers).forEach(function(C){i.setRequestHeader(C,eo(t.headers[C]))}):a.headers.forEach(function(C,D){i.setRequestHeader(D,C)}),a.signal&&(a.signal.addEventListener("abort",d),i.onreadystatechange=function(){i.readyState===4&&a.signal.removeEventListener("abort",d)}),i.send(typeof a._bodyInit>"u"?null:a._bodyInit)})}D0.polyfill=!0;sr.fetch||(sr.fetch=D0,sr.Headers=Je,sr.Request=Jr,sr.Response=Sr);self.fetch.bind(self);var mu=qr&&qr.__awaiter||function(r,t,e,n){function a(i){return i instanceof e?i:new e(function(d){d(i)})}return new(e||(e=Promise))(function(i,d){function b(T){try{D(n.next(T))}catch(O){d(O)}}function C(T){try{D(n.throw(T))}catch(O){d(O)}}function D(T){T.done?i(T.value):a(T.value).then(b,C)}D((n=n.apply(r,t||[])).next())})};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.Nodes=void 0;class yu{constructor(){this.nodeIndex=-1,this.committee=new Set,this.topology=[],this.initTime=0}init(t){return mu(this,void 0,void 0,function*(){this.nodeIndex=-1,this.committee.clear(),this.topology=[],this.initTime=Date.now();let e=[];try{e=yield(yield fetch(t)).json()}catch(n){throw new Error(`exception in fetch(${t}): ${n}`)}for(const n of e)n.Healthy==="1"&&this.topology.push(n);if(this.topology.length===0)throw new Error(`no healthy nodes in ${t}`)})}getHealthyFor(t){var e;const n=[];for(const a of this.topology)a.Weight>0&&(!((e=a.Mngr)===null||e===void 0)&&e.health[t])&&n.push(a);return n}}Ui.Nodes=yu;const wu="@orbs-network/ton-access",bu="2.3.3",xu="Unthrottled anonymous RPC access to TON blockchain via a robust decentralized network",Eu="lib/index.js",Au="lib/index.js",Cu="lib/index.d.ts",Bu=["lib/**/*"],Mu={test:"env mocha -r ts-node/register test/**/*.ts","test:v2":"env mocha -r ts-node/register test/ton-v2.ts","test:v4":"env mocha -r ts-node/register test/ton-v4.ts",cleanup:"rimraf ./lib","build:web:reg":"esbuild ./lib/web.js --bundle  --sourcemap --target=es2015 --outfile=./dist/index.js","build:web:min":"esbuild ./lib/web.js --bundle  --minify    --target=es2015 --outfile=./dist/index.min.js","build:web":"rimraf ./dist && npm run build:web:reg && npm run build:web:min",build:"npm run lint && rimraf ./lib && tsc && npm run build:web",format:'prettier --write "src/**/*.ts"',lint:"tslint -p tsconfig.json",prepare:"npm run build",prepublishOnly:"npm test && npm run lint",preversion:"npm run lint",version:"npm run format && git add -A src",postversion:"git push && git push --tags"},_u={type:"git",url:"git+https://github.com/orbs-network/ton-access.git"},Fu="yuval@orbs.com",Su="MIT",Du={url:"https://github.com/orbs-network/ton-access/issues"},Iu="https://github.com/orbs-network/ton-access#readme",Tu={"isomorphic-fetch":"^3.0.0"},Ru={"@types/bn.js":"^5.1.1","@types/chai":"^4.3.4","@types/isomorphic-fetch":"^0.0.36","@types/mocha":"^10.0.0",buffer:"^6.0.3",chai:"^4.3.7",esbuild:"^0.15.14",mocha:"^10.1.0",prettier:"^2.7.1",rimraf:"^3.0.2",ton:"^12.1.3","ton-lite-client":"npm:@truecarry/ton-lite-client@^1.6.1",tonweb:"^0.0.58","ts-node":"^10.9.1",tslib:"^2.4.0",tslint:"^6.1.3","tslint-config-prettier":"^1.18.0"},Nu={name:wu,version:bu,description:xu,source:Eu,main:Au,types:Cu,files:Bu,scripts:Mu,repository:_u,author:Fu,license:Su,bugs:Du,homepage:Iu,dependencies:Tu,devDependencies:Ru};var bn=qr&&qr.__awaiter||function(r,t,e,n){function a(i){return i instanceof e?i:new e(function(d){d(i)})}return new(e||(e=Promise))(function(i,d){function b(T){try{D(n.next(T))}catch(O){d(O)}}function C(T){try{D(n.throw(T))}catch(O){d(O)}}function D(T){T.done?i(T.value):a(T.value).then(b,C)}D((n=n.apply(r,t||[])).next())})};Object.defineProperty(br,"__esModule",{value:!0});br.getHttpV4Endpoint=br.getHttpV4Endpoints=N0=br.getHttpEndpoint=br.getHttpEndpoints=br.Access=void 0;const Uu=Ui;class I0{constructor(){this.host="ton.access.orbs.network",this.urlVersion=1,this.nodes=new Uu.Nodes}init(){return bn(this,void 0,void 0,function*(){const t=Nu;yield this.nodes.init(`https://${this.host}/mngr/nodes?npm_version=${t.version}`)})}makeProtonet(t,e){let n="";switch(t){case"toncenter-api-v2":n+="v2-";break;case"ton-api-v4":n+="v4-";break}return n+=e,n}weightedRandom(t){let e=0;for(const i of t)e+=i.Weight;const n=Math.floor(Math.random()*e);let a=0;for(const i of t){if(n>=a&&n<a+i.Weight)return i;a+=i.Weight}}buildUrls(t,e,n,a){n||(n=""),e||(e="toncenter-api-v2"),t||(t="mainnet"),n.length&&(n=n.replace(/^\/+/,""));const i=[],d=this.makeProtonet(e,t);let b=this.nodes.getHealthyFor(d);if(!(b!=null&&b.length))throw new Error(`no healthy nodes for ${d}`);if(a&&b.length){const C=this.weightedRandom(b);if(C)b=[C];else throw new Error("weightedRandom return empty")}for(const C of b){let D=`https://${this.host}/${C.NodeId}/${this.urlVersion}/${t}/${e}`;n.length&&(D+=`/${n}`),i.push(D)}return i}}br.Access=I0;function T0(r,t,e,n){return bn(this,void 0,void 0,function*(){const a=new I0;return yield a.init(),a.buildUrls(r,t,e,n)})}function R0(r,t){return bn(this,void 0,void 0,function*(){const e=r!=null&&r.network?r.network:"mainnet";let n="jsonRPC";return(r==null?void 0:r.protocol)==="rest"&&(n=""),yield T0(e,"toncenter-api-v2",n,t)})}br.getHttpEndpoints=R0;function $u(r){return bn(this,void 0,void 0,function*(){return(yield R0(r,!0))[0]})}var N0=br.getHttpEndpoint=$u;function U0(r,t){return bn(this,void 0,void 0,function*(){const e=r!=null&&r.network?r.network:"mainnet";if((r==null?void 0:r.protocol)==="json-rpc")throw Error("config.protocol json-rpc is not supported for getTonApiV4Endpoints");return yield T0(e,"ton-api-v4","",t)})}br.getHttpV4Endpoints=U0;function Pu(r){return bn(this,void 0,void 0,function*(){return(yield U0(r,!0))[0]})}br.getHttpV4Endpoint=Pu;var no={exports:{}};const Ou={},Lu=Object.freeze(Object.defineProperty({__proto__:null,default:Ou},Symbol.toStringTag,{value:"Module"})),io=Vr(Lu);no.exports;(function(r){(function(t,e){function n(l,s){if(!l)throw new Error(s||"Assertion failed")}function a(l,s){l.super_=s;var h=function(){};h.prototype=s.prototype,l.prototype=new h,l.prototype.constructor=l}function i(l,s,h){if(i.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,l!==null&&((s==="le"||s==="be")&&(h=s,s=10),this._init(l||0,s||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var d;try{d=io.Buffer}catch{}i.isBN=function(s){return s instanceof i?!0:s!==null&&typeof s=="object"&&s.constructor.wordSize===i.wordSize&&Array.isArray(s.words)},i.max=function(s,h){return s.cmp(h)>0?s:h},i.min=function(s,h){return s.cmp(h)<0?s:h},i.prototype._init=function(s,h,u){if(typeof s=="number")return this._initNumber(s,h,u);if(typeof s=="object")return this._initArray(s,h,u);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),s=s.toString().replace(/\s+/g,"");var v=0;s[0]==="-"&&v++,h===16?this._parseHex(s,v):this._parseBase(s,h,v),s[0]==="-"&&(this.negative=1),this._strip(),u==="le"&&this._initArray(this.toArray(),h,u)},i.prototype._initNumber=function(s,h,u){s<0&&(this.negative=1,s=-s),s<67108864?(this.words=[s&67108863],this.length=1):s<4503599627370496?(this.words=[s&67108863,s/67108864&67108863],this.length=2):(n(s<9007199254740992),this.words=[s&67108863,s/67108864&67108863,1],this.length=3),u==="le"&&this._initArray(this.toArray(),h,u)},i.prototype._initArray=function(s,h,u){if(n(typeof s.length=="number"),s.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(s.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var w,p,f=0;if(u==="be")for(v=s.length-1,w=0;v>=0;v-=3)p=s[v]|s[v-1]<<8|s[v-2]<<16,this.words[w]|=p<<f&67108863,this.words[w+1]=p>>>26-f&67108863,f+=24,f>=26&&(f-=26,w++);else if(u==="le")for(v=0,w=0;v<s.length;v+=3)p=s[v]|s[v+1]<<8|s[v+2]<<16,this.words[w]|=p<<f&67108863,this.words[w+1]=p>>>26-f&67108863,f+=24,f>=26&&(f-=26,w++);return this._strip()};function b(l,s,h){for(var u=0,v=Math.min(l.length,h),w=0,p=s;p<v;p++){var f=l.charCodeAt(p)-48;u<<=4;var c;f>=49&&f<=54?c=f-49+10:f>=17&&f<=22?c=f-17+10:c=f,u|=c,w|=c}return n(!(w&240),"Invalid character in "+l),u}i.prototype._parseHex=function(s,h){this.length=Math.ceil((s.length-h)/6),this.words=new Array(this.length);for(var u=0;u<this.length;u++)this.words[u]=0;var v,w,p=0;for(u=s.length-6,v=0;u>=h;u-=6)w=b(s,u,u+6),this.words[v]|=w<<p&67108863,this.words[v+1]|=w>>>26-p&4194303,p+=24,p>=26&&(p-=26,v++);u+6!==h&&(w=b(s,h,u+6),this.words[v]|=w<<p&67108863,this.words[v+1]|=w>>>26-p&4194303),this._strip()};function C(l,s,h,u){for(var v=0,w=0,p=Math.min(l.length,h),f=s;f<p;f++){var c=l.charCodeAt(f)-48;v*=u,c>=49?w=c-49+10:c>=17?w=c-17+10:w=c,n(c>=0&&w<u,"Invalid character"),v+=w}return v}i.prototype._parseBase=function(s,h,u){this.words=[0],this.length=1;for(var v=0,w=1;w<=67108863;w*=h)v++;v--,w=w/h|0;for(var p=s.length-u,f=p%v,c=Math.min(p,p-f)+u,m=0,B=u;B<c;B+=v)m=C(s,B,B+v,h),this.imuln(w),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(f!==0){var P=1;for(m=C(s,B,s.length,h),B=0;B<f;B++)P*=h;this.imuln(P),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}},i.prototype.copy=function(s){s.words=new Array(this.length);for(var h=0;h<this.length;h++)s.words[h]=this.words[h];s.length=this.length,s.negative=this.negative,s.red=this.red};function D(l,s){l.words=s.words,l.length=s.length,l.negative=s.negative,l.red=s.red}i.prototype._move=function(s){D(s,this)},i.prototype.clone=function(){var s=new i(null);return this.copy(s),s},i.prototype._expand=function(s){for(;this.length<s;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function"?i.prototype[Symbol.for("nodejs.util.inspect.custom")]=T:i.prototype.inspect=T;function T(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var O=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],G=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(s,h){s=s||10,h=h|0||1;var u;if(s===16||s==="hex"){u="";for(var v=0,w=0,p=0;p<this.length;p++){var f=this.words[p],c=((f<<v|w)&16777215).toString(16);w=f>>>24-v&16777215,w!==0||p!==this.length-1?u=O[6-c.length]+c+u:u=c+u,v+=2,v>=26&&(v-=26,p--)}for(w!==0&&(u=w.toString(16)+u);u.length%h!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}if(s===(s|0)&&s>=2&&s<=36){var m=k[s],B=G[s];u="";var P=this.clone();for(P.negative=0;!P.isZero();){var j=P.modrn(B).toString(s);P=P.idivn(B),P.isZero()?u=j+u:u=O[m-j.length]+j+u}for(this.isZero()&&(u="0"+u);u.length%h!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var s=this.words[0];return this.length===2?s+=this.words[1]*67108864:this.length===3&&this.words[2]===1?s+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-s:s},i.prototype.toJSON=function(){return this.toString(16,2)},d&&(i.prototype.toBuffer=function(s,h){return this.toArrayLike(d,s,h)}),i.prototype.toArray=function(s,h){return this.toArrayLike(Array,s,h)};var st=function(s,h){return s.allocUnsafe?s.allocUnsafe(h):new s(h)};i.prototype.toArrayLike=function(s,h,u){this._strip();var v=this.byteLength(),w=u||Math.max(1,v);n(v<=w,"byte array longer than desired length"),n(w>0,"Requested array length <= 0");var p=st(s,w),f=h==="le"?"LE":"BE";return this["_toArrayLike"+f](p,v),p},i.prototype._toArrayLikeLE=function(s,h){for(var u=0,v=0,w=0,p=0;w<this.length;w++){var f=this.words[w]<<p|v;s[u++]=f&255,u<s.length&&(s[u++]=f>>8&255),u<s.length&&(s[u++]=f>>16&255),p===6?(u<s.length&&(s[u++]=f>>24&255),v=0,p=0):(v=f>>>24,p+=2)}if(u<s.length)for(s[u++]=v;u<s.length;)s[u++]=0},i.prototype._toArrayLikeBE=function(s,h){for(var u=s.length-1,v=0,w=0,p=0;w<this.length;w++){var f=this.words[w]<<p|v;s[u--]=f&255,u>=0&&(s[u--]=f>>8&255),u>=0&&(s[u--]=f>>16&255),p===6?(u>=0&&(s[u--]=f>>24&255),v=0,p=0):(v=f>>>24,p+=2)}if(u>=0)for(s[u--]=v;u>=0;)s[u--]=0},Math.clz32?i.prototype._countBits=function(s){return 32-Math.clz32(s)}:i.prototype._countBits=function(s){var h=s,u=0;return h>=4096&&(u+=13,h>>>=13),h>=64&&(u+=7,h>>>=7),h>=8&&(u+=4,h>>>=4),h>=2&&(u+=2,h>>>=2),u+h},i.prototype._zeroBits=function(s){if(s===0)return 26;var h=s,u=0;return h&8191||(u+=13,h>>>=13),h&127||(u+=7,h>>>=7),h&15||(u+=4,h>>>=4),h&3||(u+=2,h>>>=2),h&1||u++,u},i.prototype.bitLength=function(){var s=this.words[this.length-1],h=this._countBits(s);return(this.length-1)*26+h};function ft(l){for(var s=new Array(l.bitLength()),h=0;h<s.length;h++){var u=h/26|0,v=h%26;s[h]=l.words[u]>>>v&1}return s}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var s=0,h=0;h<this.length;h++){var u=this._zeroBits(this.words[h]);if(s+=u,u!==26)break}return s},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(s){return this.negative!==0?this.abs().inotn(s).iaddn(1):this.clone()},i.prototype.fromTwos=function(s){return this.testn(s-1)?this.notn(s).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(s){for(;this.length<s.length;)this.words[this.length++]=0;for(var h=0;h<s.length;h++)this.words[h]=this.words[h]|s.words[h];return this._strip()},i.prototype.ior=function(s){return n((this.negative|s.negative)===0),this.iuor(s)},i.prototype.or=function(s){return this.length>s.length?this.clone().ior(s):s.clone().ior(this)},i.prototype.uor=function(s){return this.length>s.length?this.clone().iuor(s):s.clone().iuor(this)},i.prototype.iuand=function(s){var h;this.length>s.length?h=s:h=this;for(var u=0;u<h.length;u++)this.words[u]=this.words[u]&s.words[u];return this.length=h.length,this._strip()},i.prototype.iand=function(s){return n((this.negative|s.negative)===0),this.iuand(s)},i.prototype.and=function(s){return this.length>s.length?this.clone().iand(s):s.clone().iand(this)},i.prototype.uand=function(s){return this.length>s.length?this.clone().iuand(s):s.clone().iuand(this)},i.prototype.iuxor=function(s){var h,u;this.length>s.length?(h=this,u=s):(h=s,u=this);for(var v=0;v<u.length;v++)this.words[v]=h.words[v]^u.words[v];if(this!==h)for(;v<h.length;v++)this.words[v]=h.words[v];return this.length=h.length,this._strip()},i.prototype.ixor=function(s){return n((this.negative|s.negative)===0),this.iuxor(s)},i.prototype.xor=function(s){return this.length>s.length?this.clone().ixor(s):s.clone().ixor(this)},i.prototype.uxor=function(s){return this.length>s.length?this.clone().iuxor(s):s.clone().iuxor(this)},i.prototype.inotn=function(s){n(typeof s=="number"&&s>=0);var h=Math.ceil(s/26)|0,u=s%26;this._expand(h),u>0&&h--;for(var v=0;v<h;v++)this.words[v]=~this.words[v]&67108863;return u>0&&(this.words[v]=~this.words[v]&67108863>>26-u),this._strip()},i.prototype.notn=function(s){return this.clone().inotn(s)},i.prototype.setn=function(s,h){n(typeof s=="number"&&s>=0);var u=s/26|0,v=s%26;return this._expand(u+1),h?this.words[u]=this.words[u]|1<<v:this.words[u]=this.words[u]&~(1<<v),this._strip()},i.prototype.iadd=function(s){var h;if(this.negative!==0&&s.negative===0)return this.negative=0,h=this.isub(s),this.negative^=1,this._normSign();if(this.negative===0&&s.negative!==0)return s.negative=0,h=this.isub(s),s.negative=1,h._normSign();var u,v;this.length>s.length?(u=this,v=s):(u=s,v=this);for(var w=0,p=0;p<v.length;p++)h=(u.words[p]|0)+(v.words[p]|0)+w,this.words[p]=h&67108863,w=h>>>26;for(;w!==0&&p<u.length;p++)h=(u.words[p]|0)+w,this.words[p]=h&67108863,w=h>>>26;if(this.length=u.length,w!==0)this.words[this.length]=w,this.length++;else if(u!==this)for(;p<u.length;p++)this.words[p]=u.words[p];return this},i.prototype.add=function(s){var h;return s.negative!==0&&this.negative===0?(s.negative=0,h=this.sub(s),s.negative^=1,h):s.negative===0&&this.negative!==0?(this.negative=0,h=s.sub(this),this.negative=1,h):this.length>s.length?this.clone().iadd(s):s.clone().iadd(this)},i.prototype.isub=function(s){if(s.negative!==0){s.negative=0;var h=this.iadd(s);return s.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(s),this.negative=1,this._normSign();var u=this.cmp(s);if(u===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,w;u>0?(v=this,w=s):(v=s,w=this);for(var p=0,f=0;f<w.length;f++)h=(v.words[f]|0)-(w.words[f]|0)+p,p=h>>26,this.words[f]=h&67108863;for(;p!==0&&f<v.length;f++)h=(v.words[f]|0)+p,p=h>>26,this.words[f]=h&67108863;if(p===0&&f<v.length&&v!==this)for(;f<v.length;f++)this.words[f]=v.words[f];return this.length=Math.max(this.length,f),v!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(s){return this.clone().isub(s)};function it(l,s,h){h.negative=s.negative^l.negative;var u=l.length+s.length|0;h.length=u,u=u-1|0;var v=l.words[0]|0,w=s.words[0]|0,p=v*w,f=p&67108863,c=p/67108864|0;h.words[0]=f;for(var m=1;m<u;m++){for(var B=c>>>26,P=c&67108863,j=Math.min(m,s.length-1),H=Math.max(0,m-l.length+1);H<=j;H++){var ht=m-H|0;v=l.words[ht]|0,w=s.words[H]|0,p=v*w+P,B+=p/67108864|0,P=p&67108863}h.words[m]=P|0,c=B|0}return c!==0?h.words[m]=c|0:h.length--,h._strip()}var lt=function(s,h,u){var v=s.words,w=h.words,p=u.words,f=0,c,m,B,P=v[0]|0,j=P&8191,H=P>>>13,ht=v[1]|0,re=ht&8191,ut=ht>>>13,Pt=v[2]|0,Ae=Pt&8191,Rt=Pt>>>13,Zt=v[3]|0,xe=Zt&8191,_t=Zt>>>13,ie=v[4]|0,Se=ie&8191,Dt=ie>>>13,ne=v[5]|0,Ee=ne&8191,Ft=ne>>>13,Xt=v[6]|0,de=Xt&8191,St=Xt>>>13,te=v[7]|0,ye=te&8191,It=te>>>13,M=v[8]|0,x=M&8191,E=M>>>13,I=v[9]|0,U=I&8191,$=I>>>13,q=w[0]|0,Mt=q&8191,ot=q>>>13,Et=w[1]|0,Yt=Et&8191,et=Et>>>13,ee=w[2]|0,De=ee&8191,Ut=ee>>>13,fe=w[3]|0,Ne=fe&8191,Bt=fe>>>13,Qt=w[4]|0,Me=Qt&8191,Nt=Qt>>>13,se=w[5]|0,Ie=se&8191,$t=se>>>13,jt=w[6]|0,Te=jt&8191,A=jt>>>13,_=w[7]|0,F=_&8191,g=_>>>13,S=w[8]|0,L=S&8191,N=S>>>13,W=w[9]|0,z=W&8191,at=W>>>13;u.negative=s.negative^h.negative,u.length=19,c=Math.imul(j,Mt),m=Math.imul(j,ot),m=m+Math.imul(H,Mt)|0,B=Math.imul(H,ot);var pt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(pt>>>26)|0,pt&=67108863,c=Math.imul(re,Mt),m=Math.imul(re,ot),m=m+Math.imul(ut,Mt)|0,B=Math.imul(ut,ot),c=c+Math.imul(j,Yt)|0,m=m+Math.imul(j,et)|0,m=m+Math.imul(H,Yt)|0,B=B+Math.imul(H,et)|0;var le=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(le>>>26)|0,le&=67108863,c=Math.imul(Ae,Mt),m=Math.imul(Ae,ot),m=m+Math.imul(Rt,Mt)|0,B=Math.imul(Rt,ot),c=c+Math.imul(re,Yt)|0,m=m+Math.imul(re,et)|0,m=m+Math.imul(ut,Yt)|0,B=B+Math.imul(ut,et)|0,c=c+Math.imul(j,De)|0,m=m+Math.imul(j,Ut)|0,m=m+Math.imul(H,De)|0,B=B+Math.imul(H,Ut)|0;var yt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(yt>>>26)|0,yt&=67108863,c=Math.imul(xe,Mt),m=Math.imul(xe,ot),m=m+Math.imul(_t,Mt)|0,B=Math.imul(_t,ot),c=c+Math.imul(Ae,Yt)|0,m=m+Math.imul(Ae,et)|0,m=m+Math.imul(Rt,Yt)|0,B=B+Math.imul(Rt,et)|0,c=c+Math.imul(re,De)|0,m=m+Math.imul(re,Ut)|0,m=m+Math.imul(ut,De)|0,B=B+Math.imul(ut,Ut)|0,c=c+Math.imul(j,Ne)|0,m=m+Math.imul(j,Bt)|0,m=m+Math.imul(H,Ne)|0,B=B+Math.imul(H,Bt)|0;var kt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(kt>>>26)|0,kt&=67108863,c=Math.imul(Se,Mt),m=Math.imul(Se,ot),m=m+Math.imul(Dt,Mt)|0,B=Math.imul(Dt,ot),c=c+Math.imul(xe,Yt)|0,m=m+Math.imul(xe,et)|0,m=m+Math.imul(_t,Yt)|0,B=B+Math.imul(_t,et)|0,c=c+Math.imul(Ae,De)|0,m=m+Math.imul(Ae,Ut)|0,m=m+Math.imul(Rt,De)|0,B=B+Math.imul(Rt,Ut)|0,c=c+Math.imul(re,Ne)|0,m=m+Math.imul(re,Bt)|0,m=m+Math.imul(ut,Ne)|0,B=B+Math.imul(ut,Bt)|0,c=c+Math.imul(j,Me)|0,m=m+Math.imul(j,Nt)|0,m=m+Math.imul(H,Me)|0,B=B+Math.imul(H,Nt)|0;var qt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(qt>>>26)|0,qt&=67108863,c=Math.imul(Ee,Mt),m=Math.imul(Ee,ot),m=m+Math.imul(Ft,Mt)|0,B=Math.imul(Ft,ot),c=c+Math.imul(Se,Yt)|0,m=m+Math.imul(Se,et)|0,m=m+Math.imul(Dt,Yt)|0,B=B+Math.imul(Dt,et)|0,c=c+Math.imul(xe,De)|0,m=m+Math.imul(xe,Ut)|0,m=m+Math.imul(_t,De)|0,B=B+Math.imul(_t,Ut)|0,c=c+Math.imul(Ae,Ne)|0,m=m+Math.imul(Ae,Bt)|0,m=m+Math.imul(Rt,Ne)|0,B=B+Math.imul(Rt,Bt)|0,c=c+Math.imul(re,Me)|0,m=m+Math.imul(re,Nt)|0,m=m+Math.imul(ut,Me)|0,B=B+Math.imul(ut,Nt)|0,c=c+Math.imul(j,Ie)|0,m=m+Math.imul(j,$t)|0,m=m+Math.imul(H,Ie)|0,B=B+Math.imul(H,$t)|0;var zt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(zt>>>26)|0,zt&=67108863,c=Math.imul(de,Mt),m=Math.imul(de,ot),m=m+Math.imul(St,Mt)|0,B=Math.imul(St,ot),c=c+Math.imul(Ee,Yt)|0,m=m+Math.imul(Ee,et)|0,m=m+Math.imul(Ft,Yt)|0,B=B+Math.imul(Ft,et)|0,c=c+Math.imul(Se,De)|0,m=m+Math.imul(Se,Ut)|0,m=m+Math.imul(Dt,De)|0,B=B+Math.imul(Dt,Ut)|0,c=c+Math.imul(xe,Ne)|0,m=m+Math.imul(xe,Bt)|0,m=m+Math.imul(_t,Ne)|0,B=B+Math.imul(_t,Bt)|0,c=c+Math.imul(Ae,Me)|0,m=m+Math.imul(Ae,Nt)|0,m=m+Math.imul(Rt,Me)|0,B=B+Math.imul(Rt,Nt)|0,c=c+Math.imul(re,Ie)|0,m=m+Math.imul(re,$t)|0,m=m+Math.imul(ut,Ie)|0,B=B+Math.imul(ut,$t)|0,c=c+Math.imul(j,Te)|0,m=m+Math.imul(j,A)|0,m=m+Math.imul(H,Te)|0,B=B+Math.imul(H,A)|0;var Gt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,c=Math.imul(ye,Mt),m=Math.imul(ye,ot),m=m+Math.imul(It,Mt)|0,B=Math.imul(It,ot),c=c+Math.imul(de,Yt)|0,m=m+Math.imul(de,et)|0,m=m+Math.imul(St,Yt)|0,B=B+Math.imul(St,et)|0,c=c+Math.imul(Ee,De)|0,m=m+Math.imul(Ee,Ut)|0,m=m+Math.imul(Ft,De)|0,B=B+Math.imul(Ft,Ut)|0,c=c+Math.imul(Se,Ne)|0,m=m+Math.imul(Se,Bt)|0,m=m+Math.imul(Dt,Ne)|0,B=B+Math.imul(Dt,Bt)|0,c=c+Math.imul(xe,Me)|0,m=m+Math.imul(xe,Nt)|0,m=m+Math.imul(_t,Me)|0,B=B+Math.imul(_t,Nt)|0,c=c+Math.imul(Ae,Ie)|0,m=m+Math.imul(Ae,$t)|0,m=m+Math.imul(Rt,Ie)|0,B=B+Math.imul(Rt,$t)|0,c=c+Math.imul(re,Te)|0,m=m+Math.imul(re,A)|0,m=m+Math.imul(ut,Te)|0,B=B+Math.imul(ut,A)|0,c=c+Math.imul(j,F)|0,m=m+Math.imul(j,g)|0,m=m+Math.imul(H,F)|0,B=B+Math.imul(H,g)|0;var Wt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,c=Math.imul(x,Mt),m=Math.imul(x,ot),m=m+Math.imul(E,Mt)|0,B=Math.imul(E,ot),c=c+Math.imul(ye,Yt)|0,m=m+Math.imul(ye,et)|0,m=m+Math.imul(It,Yt)|0,B=B+Math.imul(It,et)|0,c=c+Math.imul(de,De)|0,m=m+Math.imul(de,Ut)|0,m=m+Math.imul(St,De)|0,B=B+Math.imul(St,Ut)|0,c=c+Math.imul(Ee,Ne)|0,m=m+Math.imul(Ee,Bt)|0,m=m+Math.imul(Ft,Ne)|0,B=B+Math.imul(Ft,Bt)|0,c=c+Math.imul(Se,Me)|0,m=m+Math.imul(Se,Nt)|0,m=m+Math.imul(Dt,Me)|0,B=B+Math.imul(Dt,Nt)|0,c=c+Math.imul(xe,Ie)|0,m=m+Math.imul(xe,$t)|0,m=m+Math.imul(_t,Ie)|0,B=B+Math.imul(_t,$t)|0,c=c+Math.imul(Ae,Te)|0,m=m+Math.imul(Ae,A)|0,m=m+Math.imul(Rt,Te)|0,B=B+Math.imul(Rt,A)|0,c=c+Math.imul(re,F)|0,m=m+Math.imul(re,g)|0,m=m+Math.imul(ut,F)|0,B=B+Math.imul(ut,g)|0,c=c+Math.imul(j,L)|0,m=m+Math.imul(j,N)|0,m=m+Math.imul(H,L)|0,B=B+Math.imul(H,N)|0;var Vt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,c=Math.imul(U,Mt),m=Math.imul(U,ot),m=m+Math.imul($,Mt)|0,B=Math.imul($,ot),c=c+Math.imul(x,Yt)|0,m=m+Math.imul(x,et)|0,m=m+Math.imul(E,Yt)|0,B=B+Math.imul(E,et)|0,c=c+Math.imul(ye,De)|0,m=m+Math.imul(ye,Ut)|0,m=m+Math.imul(It,De)|0,B=B+Math.imul(It,Ut)|0,c=c+Math.imul(de,Ne)|0,m=m+Math.imul(de,Bt)|0,m=m+Math.imul(St,Ne)|0,B=B+Math.imul(St,Bt)|0,c=c+Math.imul(Ee,Me)|0,m=m+Math.imul(Ee,Nt)|0,m=m+Math.imul(Ft,Me)|0,B=B+Math.imul(Ft,Nt)|0,c=c+Math.imul(Se,Ie)|0,m=m+Math.imul(Se,$t)|0,m=m+Math.imul(Dt,Ie)|0,B=B+Math.imul(Dt,$t)|0,c=c+Math.imul(xe,Te)|0,m=m+Math.imul(xe,A)|0,m=m+Math.imul(_t,Te)|0,B=B+Math.imul(_t,A)|0,c=c+Math.imul(Ae,F)|0,m=m+Math.imul(Ae,g)|0,m=m+Math.imul(Rt,F)|0,B=B+Math.imul(Rt,g)|0,c=c+Math.imul(re,L)|0,m=m+Math.imul(re,N)|0,m=m+Math.imul(ut,L)|0,B=B+Math.imul(ut,N)|0,c=c+Math.imul(j,z)|0,m=m+Math.imul(j,at)|0,m=m+Math.imul(H,z)|0,B=B+Math.imul(H,at)|0;var Ht=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,c=Math.imul(U,Yt),m=Math.imul(U,et),m=m+Math.imul($,Yt)|0,B=Math.imul($,et),c=c+Math.imul(x,De)|0,m=m+Math.imul(x,Ut)|0,m=m+Math.imul(E,De)|0,B=B+Math.imul(E,Ut)|0,c=c+Math.imul(ye,Ne)|0,m=m+Math.imul(ye,Bt)|0,m=m+Math.imul(It,Ne)|0,B=B+Math.imul(It,Bt)|0,c=c+Math.imul(de,Me)|0,m=m+Math.imul(de,Nt)|0,m=m+Math.imul(St,Me)|0,B=B+Math.imul(St,Nt)|0,c=c+Math.imul(Ee,Ie)|0,m=m+Math.imul(Ee,$t)|0,m=m+Math.imul(Ft,Ie)|0,B=B+Math.imul(Ft,$t)|0,c=c+Math.imul(Se,Te)|0,m=m+Math.imul(Se,A)|0,m=m+Math.imul(Dt,Te)|0,B=B+Math.imul(Dt,A)|0,c=c+Math.imul(xe,F)|0,m=m+Math.imul(xe,g)|0,m=m+Math.imul(_t,F)|0,B=B+Math.imul(_t,g)|0,c=c+Math.imul(Ae,L)|0,m=m+Math.imul(Ae,N)|0,m=m+Math.imul(Rt,L)|0,B=B+Math.imul(Rt,N)|0,c=c+Math.imul(re,z)|0,m=m+Math.imul(re,at)|0,m=m+Math.imul(ut,z)|0,B=B+Math.imul(ut,at)|0;var bt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(bt>>>26)|0,bt&=67108863,c=Math.imul(U,De),m=Math.imul(U,Ut),m=m+Math.imul($,De)|0,B=Math.imul($,Ut),c=c+Math.imul(x,Ne)|0,m=m+Math.imul(x,Bt)|0,m=m+Math.imul(E,Ne)|0,B=B+Math.imul(E,Bt)|0,c=c+Math.imul(ye,Me)|0,m=m+Math.imul(ye,Nt)|0,m=m+Math.imul(It,Me)|0,B=B+Math.imul(It,Nt)|0,c=c+Math.imul(de,Ie)|0,m=m+Math.imul(de,$t)|0,m=m+Math.imul(St,Ie)|0,B=B+Math.imul(St,$t)|0,c=c+Math.imul(Ee,Te)|0,m=m+Math.imul(Ee,A)|0,m=m+Math.imul(Ft,Te)|0,B=B+Math.imul(Ft,A)|0,c=c+Math.imul(Se,F)|0,m=m+Math.imul(Se,g)|0,m=m+Math.imul(Dt,F)|0,B=B+Math.imul(Dt,g)|0,c=c+Math.imul(xe,L)|0,m=m+Math.imul(xe,N)|0,m=m+Math.imul(_t,L)|0,B=B+Math.imul(_t,N)|0,c=c+Math.imul(Ae,z)|0,m=m+Math.imul(Ae,at)|0,m=m+Math.imul(Rt,z)|0,B=B+Math.imul(Rt,at)|0;var Tt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,c=Math.imul(U,Ne),m=Math.imul(U,Bt),m=m+Math.imul($,Ne)|0,B=Math.imul($,Bt),c=c+Math.imul(x,Me)|0,m=m+Math.imul(x,Nt)|0,m=m+Math.imul(E,Me)|0,B=B+Math.imul(E,Nt)|0,c=c+Math.imul(ye,Ie)|0,m=m+Math.imul(ye,$t)|0,m=m+Math.imul(It,Ie)|0,B=B+Math.imul(It,$t)|0,c=c+Math.imul(de,Te)|0,m=m+Math.imul(de,A)|0,m=m+Math.imul(St,Te)|0,B=B+Math.imul(St,A)|0,c=c+Math.imul(Ee,F)|0,m=m+Math.imul(Ee,g)|0,m=m+Math.imul(Ft,F)|0,B=B+Math.imul(Ft,g)|0,c=c+Math.imul(Se,L)|0,m=m+Math.imul(Se,N)|0,m=m+Math.imul(Dt,L)|0,B=B+Math.imul(Dt,N)|0,c=c+Math.imul(xe,z)|0,m=m+Math.imul(xe,at)|0,m=m+Math.imul(_t,z)|0,B=B+Math.imul(_t,at)|0;var vt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(vt>>>26)|0,vt&=67108863,c=Math.imul(U,Me),m=Math.imul(U,Nt),m=m+Math.imul($,Me)|0,B=Math.imul($,Nt),c=c+Math.imul(x,Ie)|0,m=m+Math.imul(x,$t)|0,m=m+Math.imul(E,Ie)|0,B=B+Math.imul(E,$t)|0,c=c+Math.imul(ye,Te)|0,m=m+Math.imul(ye,A)|0,m=m+Math.imul(It,Te)|0,B=B+Math.imul(It,A)|0,c=c+Math.imul(de,F)|0,m=m+Math.imul(de,g)|0,m=m+Math.imul(St,F)|0,B=B+Math.imul(St,g)|0,c=c+Math.imul(Ee,L)|0,m=m+Math.imul(Ee,N)|0,m=m+Math.imul(Ft,L)|0,B=B+Math.imul(Ft,N)|0,c=c+Math.imul(Se,z)|0,m=m+Math.imul(Se,at)|0,m=m+Math.imul(Dt,z)|0,B=B+Math.imul(Dt,at)|0;var xt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(xt>>>26)|0,xt&=67108863,c=Math.imul(U,Ie),m=Math.imul(U,$t),m=m+Math.imul($,Ie)|0,B=Math.imul($,$t),c=c+Math.imul(x,Te)|0,m=m+Math.imul(x,A)|0,m=m+Math.imul(E,Te)|0,B=B+Math.imul(E,A)|0,c=c+Math.imul(ye,F)|0,m=m+Math.imul(ye,g)|0,m=m+Math.imul(It,F)|0,B=B+Math.imul(It,g)|0,c=c+Math.imul(de,L)|0,m=m+Math.imul(de,N)|0,m=m+Math.imul(St,L)|0,B=B+Math.imul(St,N)|0,c=c+Math.imul(Ee,z)|0,m=m+Math.imul(Ee,at)|0,m=m+Math.imul(Ft,z)|0,B=B+Math.imul(Ft,at)|0;var At=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(At>>>26)|0,At&=67108863,c=Math.imul(U,Te),m=Math.imul(U,A),m=m+Math.imul($,Te)|0,B=Math.imul($,A),c=c+Math.imul(x,F)|0,m=m+Math.imul(x,g)|0,m=m+Math.imul(E,F)|0,B=B+Math.imul(E,g)|0,c=c+Math.imul(ye,L)|0,m=m+Math.imul(ye,N)|0,m=m+Math.imul(It,L)|0,B=B+Math.imul(It,N)|0,c=c+Math.imul(de,z)|0,m=m+Math.imul(de,at)|0,m=m+Math.imul(St,z)|0,B=B+Math.imul(St,at)|0;var dt=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(dt>>>26)|0,dt&=67108863,c=Math.imul(U,F),m=Math.imul(U,g),m=m+Math.imul($,F)|0,B=Math.imul($,g),c=c+Math.imul(x,L)|0,m=m+Math.imul(x,N)|0,m=m+Math.imul(E,L)|0,B=B+Math.imul(E,N)|0,c=c+Math.imul(ye,z)|0,m=m+Math.imul(ye,at)|0,m=m+Math.imul(It,z)|0,B=B+Math.imul(It,at)|0;var V=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(V>>>26)|0,V&=67108863,c=Math.imul(U,L),m=Math.imul(U,N),m=m+Math.imul($,L)|0,B=Math.imul($,N),c=c+Math.imul(x,z)|0,m=m+Math.imul(x,at)|0,m=m+Math.imul(E,z)|0,B=B+Math.imul(E,at)|0;var Y=(f+c|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Y>>>26)|0,Y&=67108863,c=Math.imul(U,z),m=Math.imul(U,at),m=m+Math.imul($,z)|0,B=Math.imul($,at);var J=(f+c|0)+((m&8191)<<13)|0;return f=(B+(m>>>13)|0)+(J>>>26)|0,J&=67108863,p[0]=pt,p[1]=le,p[2]=yt,p[3]=kt,p[4]=qt,p[5]=zt,p[6]=Gt,p[7]=Wt,p[8]=Vt,p[9]=Ht,p[10]=bt,p[11]=Tt,p[12]=vt,p[13]=xt,p[14]=At,p[15]=dt,p[16]=V,p[17]=Y,p[18]=J,f!==0&&(p[19]=f,u.length++),u};Math.imul||(lt=it);function wt(l,s,h){h.negative=s.negative^l.negative,h.length=l.length+s.length;for(var u=0,v=0,w=0;w<h.length-1;w++){var p=v;v=0;for(var f=u&67108863,c=Math.min(w,s.length-1),m=Math.max(0,w-l.length+1);m<=c;m++){var B=w-m,P=l.words[B]|0,j=s.words[m]|0,H=P*j,ht=H&67108863;p=p+(H/67108864|0)|0,ht=ht+f|0,f=ht&67108863,p=p+(ht>>>26)|0,v+=p>>>26,p&=67108863}h.words[w]=f,u=p,p=v}return u!==0?h.words[w]=u:h.length--,h._strip()}function tt(l,s,h){return wt(l,s,h)}i.prototype.mulTo=function(s,h){var u,v=this.length+s.length;return this.length===10&&s.length===10?u=lt(this,s,h):v<63?u=it(this,s,h):v<1024?u=wt(this,s,h):u=tt(this,s,h),u},i.prototype.mul=function(s){var h=new i(null);return h.words=new Array(this.length+s.length),this.mulTo(s,h)},i.prototype.mulf=function(s){var h=new i(null);return h.words=new Array(this.length+s.length),tt(this,s,h)},i.prototype.imul=function(s){return this.clone().mulTo(s,this)},i.prototype.imuln=function(s){var h=s<0;h&&(s=-s),n(typeof s=="number"),n(s<67108864);for(var u=0,v=0;v<this.length;v++){var w=(this.words[v]|0)*s,p=(w&67108863)+(u&67108863);u>>=26,u+=w/67108864|0,u+=p>>>26,this.words[v]=p&67108863}return u!==0&&(this.words[v]=u,this.length++),h?this.ineg():this},i.prototype.muln=function(s){return this.clone().imuln(s)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(s){var h=ft(s);if(h.length===0)return new i(1);for(var u=this,v=0;v<h.length&&h[v]===0;v++,u=u.sqr());if(++v<h.length)for(var w=u.sqr();v<h.length;v++,w=w.sqr())h[v]!==0&&(u=u.mul(w));return u},i.prototype.iushln=function(s){n(typeof s=="number"&&s>=0);var h=s%26,u=(s-h)/26,v=67108863>>>26-h<<26-h,w;if(h!==0){var p=0;for(w=0;w<this.length;w++){var f=this.words[w]&v,c=(this.words[w]|0)-f<<h;this.words[w]=c|p,p=f>>>26-h}p&&(this.words[w]=p,this.length++)}if(u!==0){for(w=this.length-1;w>=0;w--)this.words[w+u]=this.words[w];for(w=0;w<u;w++)this.words[w]=0;this.length+=u}return this._strip()},i.prototype.ishln=function(s){return n(this.negative===0),this.iushln(s)},i.prototype.iushrn=function(s,h,u){n(typeof s=="number"&&s>=0);var v;h?v=(h-h%26)/26:v=0;var w=s%26,p=Math.min((s-w)/26,this.length),f=67108863^67108863>>>w<<w,c=u;if(v-=p,v=Math.max(0,v),c){for(var m=0;m<p;m++)c.words[m]=this.words[m];c.length=p}if(p!==0)if(this.length>p)for(this.length-=p,m=0;m<this.length;m++)this.words[m]=this.words[m+p];else this.words[0]=0,this.length=1;var B=0;for(m=this.length-1;m>=0&&(B!==0||m>=v);m--){var P=this.words[m]|0;this.words[m]=B<<26-w|P>>>w,B=P&f}return c&&B!==0&&(c.words[c.length++]=B),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(s,h,u){return n(this.negative===0),this.iushrn(s,h,u)},i.prototype.shln=function(s){return this.clone().ishln(s)},i.prototype.ushln=function(s){return this.clone().iushln(s)},i.prototype.shrn=function(s){return this.clone().ishrn(s)},i.prototype.ushrn=function(s){return this.clone().iushrn(s)},i.prototype.testn=function(s){n(typeof s=="number"&&s>=0);var h=s%26,u=(s-h)/26,v=1<<h;if(this.length<=u)return!1;var w=this.words[u];return!!(w&v)},i.prototype.imaskn=function(s){n(typeof s=="number"&&s>=0);var h=s%26,u=(s-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=u)return this;if(h!==0&&u++,this.length=Math.min(u,this.length),h!==0){var v=67108863^67108863>>>h<<h;this.words[this.length-1]&=v}return this._strip()},i.prototype.maskn=function(s){return this.clone().imaskn(s)},i.prototype.iaddn=function(s){return n(typeof s=="number"),n(s<67108864),s<0?this.isubn(-s):this.negative!==0?this.length===1&&(this.words[0]|0)<=s?(this.words[0]=s-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(s),this.negative=1,this):this._iaddn(s)},i.prototype._iaddn=function(s){this.words[0]+=s;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(s){if(n(typeof s=="number"),n(s<67108864),s<0)return this.iaddn(-s);if(this.negative!==0)return this.negative=0,this.iaddn(s),this.negative=1,this;if(this.words[0]-=s,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(s){return this.clone().iaddn(s)},i.prototype.subn=function(s){return this.clone().isubn(s)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(s,h,u){var v=s.length+u,w;this._expand(v);var p,f=0;for(w=0;w<s.length;w++){p=(this.words[w+u]|0)+f;var c=(s.words[w]|0)*h;p-=c&67108863,f=(p>>26)-(c/67108864|0),this.words[w+u]=p&67108863}for(;w<this.length-u;w++)p=(this.words[w+u]|0)+f,f=p>>26,this.words[w+u]=p&67108863;if(f===0)return this._strip();for(n(f===-1),f=0,w=0;w<this.length;w++)p=-(this.words[w]|0)+f,f=p>>26,this.words[w]=p&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(s,h){var u=this.length-s.length,v=this.clone(),w=s,p=w.words[w.length-1]|0,f=this._countBits(p);u=26-f,u!==0&&(w=w.ushln(u),v.iushln(u),p=w.words[w.length-1]|0);var c=v.length-w.length,m;if(h!=="mod"){m=new i(null),m.length=c+1,m.words=new Array(m.length);for(var B=0;B<m.length;B++)m.words[B]=0}var P=v.clone()._ishlnsubmul(w,1,c);P.negative===0&&(v=P,m&&(m.words[c]=1));for(var j=c-1;j>=0;j--){var H=(v.words[w.length+j]|0)*67108864+(v.words[w.length+j-1]|0);for(H=Math.min(H/p|0,67108863),v._ishlnsubmul(w,H,j);v.negative!==0;)H--,v.negative=0,v._ishlnsubmul(w,1,j),v.isZero()||(v.negative^=1);m&&(m.words[j]=H)}return m&&m._strip(),v._strip(),h!=="div"&&u!==0&&v.iushrn(u),{div:m||null,mod:v}},i.prototype.divmod=function(s,h,u){if(n(!s.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,w,p;return this.negative!==0&&s.negative===0?(p=this.neg().divmod(s,h),h!=="mod"&&(v=p.div.neg()),h!=="div"&&(w=p.mod.neg(),u&&w.negative!==0&&w.iadd(s)),{div:v,mod:w}):this.negative===0&&s.negative!==0?(p=this.divmod(s.neg(),h),h!=="mod"&&(v=p.div.neg()),{div:v,mod:p.mod}):this.negative&s.negative?(p=this.neg().divmod(s.neg(),h),h!=="div"&&(w=p.mod.neg(),u&&w.negative!==0&&w.isub(s)),{div:p.div,mod:w}):s.length>this.length||this.cmp(s)<0?{div:new i(0),mod:this}:s.length===1?h==="div"?{div:this.divn(s.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(s.words[0]))}:{div:this.divn(s.words[0]),mod:new i(this.modrn(s.words[0]))}:this._wordDiv(s,h)},i.prototype.div=function(s){return this.divmod(s,"div",!1).div},i.prototype.mod=function(s){return this.divmod(s,"mod",!1).mod},i.prototype.umod=function(s){return this.divmod(s,"mod",!0).mod},i.prototype.divRound=function(s){var h=this.divmod(s);if(h.mod.isZero())return h.div;var u=h.div.negative!==0?h.mod.isub(s):h.mod,v=s.ushrn(1),w=s.andln(1),p=u.cmp(v);return p<0||w===1&&p===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(s){var h=s<0;h&&(s=-s),n(s<=67108863);for(var u=(1<<26)%s,v=0,w=this.length-1;w>=0;w--)v=(u*v+(this.words[w]|0))%s;return h?-v:v},i.prototype.modn=function(s){return this.modrn(s)},i.prototype.idivn=function(s){var h=s<0;h&&(s=-s),n(s<=67108863);for(var u=0,v=this.length-1;v>=0;v--){var w=(this.words[v]|0)+u*67108864;this.words[v]=w/s|0,u=w%s}return this._strip(),h?this.ineg():this},i.prototype.divn=function(s){return this.clone().idivn(s)},i.prototype.egcd=function(s){n(s.negative===0),n(!s.isZero());var h=this,u=s.clone();h.negative!==0?h=h.umod(s):h=h.clone();for(var v=new i(1),w=new i(0),p=new i(0),f=new i(1),c=0;h.isEven()&&u.isEven();)h.iushrn(1),u.iushrn(1),++c;for(var m=u.clone(),B=h.clone();!h.isZero();){for(var P=0,j=1;!(h.words[0]&j)&&P<26;++P,j<<=1);if(P>0)for(h.iushrn(P);P-- >0;)(v.isOdd()||w.isOdd())&&(v.iadd(m),w.isub(B)),v.iushrn(1),w.iushrn(1);for(var H=0,ht=1;!(u.words[0]&ht)&&H<26;++H,ht<<=1);if(H>0)for(u.iushrn(H);H-- >0;)(p.isOdd()||f.isOdd())&&(p.iadd(m),f.isub(B)),p.iushrn(1),f.iushrn(1);h.cmp(u)>=0?(h.isub(u),v.isub(p),w.isub(f)):(u.isub(h),p.isub(v),f.isub(w))}return{a:p,b:f,gcd:u.iushln(c)}},i.prototype._invmp=function(s){n(s.negative===0),n(!s.isZero());var h=this,u=s.clone();h.negative!==0?h=h.umod(s):h=h.clone();for(var v=new i(1),w=new i(0),p=u.clone();h.cmpn(1)>0&&u.cmpn(1)>0;){for(var f=0,c=1;!(h.words[0]&c)&&f<26;++f,c<<=1);if(f>0)for(h.iushrn(f);f-- >0;)v.isOdd()&&v.iadd(p),v.iushrn(1);for(var m=0,B=1;!(u.words[0]&B)&&m<26;++m,B<<=1);if(m>0)for(u.iushrn(m);m-- >0;)w.isOdd()&&w.iadd(p),w.iushrn(1);h.cmp(u)>=0?(h.isub(u),v.isub(w)):(u.isub(h),w.isub(v))}var P;return h.cmpn(1)===0?P=v:P=w,P.cmpn(0)<0&&P.iadd(s),P},i.prototype.gcd=function(s){if(this.isZero())return s.abs();if(s.isZero())return this.abs();var h=this.clone(),u=s.clone();h.negative=0,u.negative=0;for(var v=0;h.isEven()&&u.isEven();v++)h.iushrn(1),u.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;u.isEven();)u.iushrn(1);var w=h.cmp(u);if(w<0){var p=h;h=u,u=p}else if(w===0||u.cmpn(1)===0)break;h.isub(u)}while(!0);return u.iushln(v)},i.prototype.invm=function(s){return this.egcd(s).a.umod(s)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(s){return this.words[0]&s},i.prototype.bincn=function(s){n(typeof s=="number");var h=s%26,u=(s-h)/26,v=1<<h;if(this.length<=u)return this._expand(u+1),this.words[u]|=v,this;for(var w=v,p=u;w!==0&&p<this.length;p++){var f=this.words[p]|0;f+=w,w=f>>>26,f&=67108863,this.words[p]=f}return w!==0&&(this.words[p]=w,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(s){var h=s<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var u;if(this.length>1)u=1;else{h&&(s=-s),n(s<=67108863,"Number is too big");var v=this.words[0]|0;u=v===s?0:v<s?-1:1}return this.negative!==0?-u|0:u},i.prototype.cmp=function(s){if(this.negative!==0&&s.negative===0)return-1;if(this.negative===0&&s.negative!==0)return 1;var h=this.ucmp(s);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(s){if(this.length>s.length)return 1;if(this.length<s.length)return-1;for(var h=0,u=this.length-1;u>=0;u--){var v=this.words[u]|0,w=s.words[u]|0;if(v!==w){v<w?h=-1:v>w&&(h=1);break}}return h},i.prototype.gtn=function(s){return this.cmpn(s)===1},i.prototype.gt=function(s){return this.cmp(s)===1},i.prototype.gten=function(s){return this.cmpn(s)>=0},i.prototype.gte=function(s){return this.cmp(s)>=0},i.prototype.ltn=function(s){return this.cmpn(s)===-1},i.prototype.lt=function(s){return this.cmp(s)===-1},i.prototype.lten=function(s){return this.cmpn(s)<=0},i.prototype.lte=function(s){return this.cmp(s)<=0},i.prototype.eqn=function(s){return this.cmpn(s)===0},i.prototype.eq=function(s){return this.cmp(s)===0},i.red=function(s){return new y(s)},i.prototype.toRed=function(s){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),s.convertTo(this)._forceRed(s)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(s){return this.red=s,this},i.prototype.forceRed=function(s){return n(!this.red,"Already a number in reduction context"),this._forceRed(s)},i.prototype.redAdd=function(s){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,s)},i.prototype.redIAdd=function(s){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,s)},i.prototype.redSub=function(s){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,s)},i.prototype.redISub=function(s){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,s)},i.prototype.redShl=function(s){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,s)},i.prototype.redMul=function(s){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.mul(this,s)},i.prototype.redIMul=function(s){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,s),this.red.imul(this,s)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(s){return n(this.red&&!s.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,s)};var K={k256:null,p224:null,p192:null,p25519:null};function Q(l,s){this.name=l,this.p=new i(s,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Q.prototype._tmp=function(){var s=new i(null);return s.words=new Array(Math.ceil(this.n/13)),s},Q.prototype.ireduce=function(s){var h=s,u;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),u=h.bitLength();while(u>this.n);var v=u<this.n?-1:h.ucmp(this.p);return v===0?(h.words[0]=0,h.length=1):v>0?h.isub(this.p):h._strip(),h},Q.prototype.split=function(s,h){s.iushrn(this.n,0,h)},Q.prototype.imulK=function(s){return s.imul(this.k)};function mt(){Q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(mt,Q),mt.prototype.split=function(s,h){for(var u=4194303,v=Math.min(s.length,9),w=0;w<v;w++)h.words[w]=s.words[w];if(h.length=v,s.length<=9){s.words[0]=0,s.length=1;return}var p=s.words[9];for(h.words[h.length++]=p&u,w=10;w<s.length;w++){var f=s.words[w]|0;s.words[w-10]=(f&u)<<4|p>>>22,p=f}p>>>=22,s.words[w-10]=p,p===0&&s.length>10?s.length-=10:s.length-=9},mt.prototype.imulK=function(s){s.words[s.length]=0,s.words[s.length+1]=0,s.length+=2;for(var h=0,u=0;u<s.length;u++){var v=s.words[u]|0;h+=v*977,s.words[u]=h&67108863,h=v*64+(h/67108864|0)}return s.words[s.length-1]===0&&(s.length--,s.words[s.length-1]===0&&s.length--),s};function Ct(){Q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(Ct,Q);function ct(){Q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(ct,Q);function Kt(){Q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(Kt,Q),Kt.prototype.imulK=function(s){for(var h=0,u=0;u<s.length;u++){var v=(s.words[u]|0)*19+h,w=v&67108863;v>>>=26,s.words[u]=w,h=v}return h!==0&&(s.words[s.length++]=h),s},i._prime=function(s){if(K[s])return K[s];var h;if(s==="k256")h=new mt;else if(s==="p224")h=new Ct;else if(s==="p192")h=new ct;else if(s==="p25519")h=new Kt;else throw new Error("Unknown prime "+s);return K[s]=h,h};function y(l){if(typeof l=="string"){var s=i._prime(l);this.m=s.p,this.prime=s}else n(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}y.prototype._verify1=function(s){n(s.negative===0,"red works only with positives"),n(s.red,"red works only with red numbers")},y.prototype._verify2=function(s,h){n((s.negative|h.negative)===0,"red works only with positives"),n(s.red&&s.red===h.red,"red works only with red numbers")},y.prototype.imod=function(s){return this.prime?this.prime.ireduce(s)._forceRed(this):(D(s,s.umod(this.m)._forceRed(this)),s)},y.prototype.neg=function(s){return s.isZero()?s.clone():this.m.sub(s)._forceRed(this)},y.prototype.add=function(s,h){this._verify2(s,h);var u=s.add(h);return u.cmp(this.m)>=0&&u.isub(this.m),u._forceRed(this)},y.prototype.iadd=function(s,h){this._verify2(s,h);var u=s.iadd(h);return u.cmp(this.m)>=0&&u.isub(this.m),u},y.prototype.sub=function(s,h){this._verify2(s,h);var u=s.sub(h);return u.cmpn(0)<0&&u.iadd(this.m),u._forceRed(this)},y.prototype.isub=function(s,h){this._verify2(s,h);var u=s.isub(h);return u.cmpn(0)<0&&u.iadd(this.m),u},y.prototype.shl=function(s,h){return this._verify1(s),this.imod(s.ushln(h))},y.prototype.imul=function(s,h){return this._verify2(s,h),this.imod(s.imul(h))},y.prototype.mul=function(s,h){return this._verify2(s,h),this.imod(s.mul(h))},y.prototype.isqr=function(s){return this.imul(s,s.clone())},y.prototype.sqr=function(s){return this.mul(s,s)},y.prototype.sqrt=function(s){if(s.isZero())return s.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var u=this.m.add(new i(1)).iushrn(2);return this.pow(s,u)}for(var v=this.m.subn(1),w=0;!v.isZero()&&v.andln(1)===0;)w++,v.iushrn(1);n(!v.isZero());var p=new i(1).toRed(this),f=p.redNeg(),c=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new i(2*m*m).toRed(this);this.pow(m,c).cmp(f)!==0;)m.redIAdd(f);for(var B=this.pow(m,v),P=this.pow(s,v.addn(1).iushrn(1)),j=this.pow(s,v),H=w;j.cmp(p)!==0;){for(var ht=j,re=0;ht.cmp(p)!==0;re++)ht=ht.redSqr();n(re<H);var ut=this.pow(B,new i(1).iushln(H-re-1));P=P.redMul(ut),B=ut.redSqr(),j=j.redMul(B),H=re}return P},y.prototype.invm=function(s){var h=s._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},y.prototype.pow=function(s,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return s.clone();var u=4,v=new Array(1<<u);v[0]=new i(1).toRed(this),v[1]=s;for(var w=2;w<v.length;w++)v[w]=this.mul(v[w-1],s);var p=v[0],f=0,c=0,m=h.bitLength()%26;for(m===0&&(m=26),w=h.length-1;w>=0;w--){for(var B=h.words[w],P=m-1;P>=0;P--){var j=B>>P&1;if(p!==v[0]&&(p=this.sqr(p)),j===0&&f===0){c=0;continue}f<<=1,f|=j,c++,!(c!==u&&(w!==0||P!==0))&&(p=this.mul(p,v[f]),c=0,f=0)}m=26}return p},y.prototype.convertTo=function(s){var h=s.umod(this.m);return h===s?h.clone():h},y.prototype.convertFrom=function(s){var h=s.clone();return h.red=null,h},i.mont=function(s){return new o(s)};function o(l){y.call(this,l),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(o,y),o.prototype.convertTo=function(s){return this.imod(s.ushln(this.shift))},o.prototype.convertFrom=function(s){var h=this.imod(s.mul(this.rinv));return h.red=null,h},o.prototype.imul=function(s,h){if(s.isZero()||h.isZero())return s.words[0]=0,s.length=1,s;var u=s.imul(h),v=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=u.isub(v).iushrn(this.shift),p=w;return w.cmp(this.m)>=0?p=w.isub(this.m):w.cmpn(0)<0&&(p=w.iadd(this.m)),p._forceRed(this)},o.prototype.mul=function(s,h){if(s.isZero()||h.isZero())return new i(0)._forceRed(this);var u=s.mul(h),v=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),w=u.isub(v).iushrn(this.shift),p=w;return w.cmp(this.m)>=0?p=w.isub(this.m):w.cmpn(0)<0&&(p=w.iadd(this.m)),p._forceRed(this)},o.prototype.invm=function(s){var h=this.imod(s._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,qr)})(no);var ku=no.exports;function so(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $0={exports:{}};(function(r){(function(t){var e=function(A){var _,F=new Float64Array(16);if(A)for(_=0;_<A.length;_++)F[_]=A[_];return F},n=function(){throw new Error("no PRNG")},a=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var d=e(),b=e([1]),C=e([56129,1]),D=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),T=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),O=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),k=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),G=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function st(A,_,F,g){A[_]=F>>24&255,A[_+1]=F>>16&255,A[_+2]=F>>8&255,A[_+3]=F&255,A[_+4]=g>>24&255,A[_+5]=g>>16&255,A[_+6]=g>>8&255,A[_+7]=g&255}function ft(A,_,F,g,S){var L,N=0;for(L=0;L<S;L++)N|=A[_+L]^F[g+L];return(1&N-1>>>8)-1}function it(A,_,F,g){return ft(A,_,F,g,16)}function lt(A,_,F,g){return ft(A,_,F,g,32)}function wt(A,_,F,g){for(var S=g[0]&255|(g[1]&255)<<8|(g[2]&255)<<16|(g[3]&255)<<24,L=F[0]&255|(F[1]&255)<<8|(F[2]&255)<<16|(F[3]&255)<<24,N=F[4]&255|(F[5]&255)<<8|(F[6]&255)<<16|(F[7]&255)<<24,W=F[8]&255|(F[9]&255)<<8|(F[10]&255)<<16|(F[11]&255)<<24,z=F[12]&255|(F[13]&255)<<8|(F[14]&255)<<16|(F[15]&255)<<24,at=g[4]&255|(g[5]&255)<<8|(g[6]&255)<<16|(g[7]&255)<<24,pt=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,le=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,yt=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,kt=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,qt=g[8]&255|(g[9]&255)<<8|(g[10]&255)<<16|(g[11]&255)<<24,zt=F[16]&255|(F[17]&255)<<8|(F[18]&255)<<16|(F[19]&255)<<24,Gt=F[20]&255|(F[21]&255)<<8|(F[22]&255)<<16|(F[23]&255)<<24,Wt=F[24]&255|(F[25]&255)<<8|(F[26]&255)<<16|(F[27]&255)<<24,Vt=F[28]&255|(F[29]&255)<<8|(F[30]&255)<<16|(F[31]&255)<<24,Ht=g[12]&255|(g[13]&255)<<8|(g[14]&255)<<16|(g[15]&255)<<24,bt=S,Tt=L,vt=N,xt=W,At=z,dt=at,V=pt,Y=le,J=yt,Z=kt,X=qt,nt=zt,Jt=Gt,he=Wt,pe=Vt,ue=Ht,R,we=0;we<20;we+=2)R=bt+Jt|0,At^=R<<7|R>>>32-7,R=At+bt|0,J^=R<<9|R>>>32-9,R=J+At|0,Jt^=R<<13|R>>>32-13,R=Jt+J|0,bt^=R<<18|R>>>32-18,R=dt+Tt|0,Z^=R<<7|R>>>32-7,R=Z+dt|0,he^=R<<9|R>>>32-9,R=he+Z|0,Tt^=R<<13|R>>>32-13,R=Tt+he|0,dt^=R<<18|R>>>32-18,R=X+V|0,pe^=R<<7|R>>>32-7,R=pe+X|0,vt^=R<<9|R>>>32-9,R=vt+pe|0,V^=R<<13|R>>>32-13,R=V+vt|0,X^=R<<18|R>>>32-18,R=ue+nt|0,xt^=R<<7|R>>>32-7,R=xt+ue|0,Y^=R<<9|R>>>32-9,R=Y+xt|0,nt^=R<<13|R>>>32-13,R=nt+Y|0,ue^=R<<18|R>>>32-18,R=bt+xt|0,Tt^=R<<7|R>>>32-7,R=Tt+bt|0,vt^=R<<9|R>>>32-9,R=vt+Tt|0,xt^=R<<13|R>>>32-13,R=xt+vt|0,bt^=R<<18|R>>>32-18,R=dt+At|0,V^=R<<7|R>>>32-7,R=V+dt|0,Y^=R<<9|R>>>32-9,R=Y+V|0,At^=R<<13|R>>>32-13,R=At+Y|0,dt^=R<<18|R>>>32-18,R=X+Z|0,nt^=R<<7|R>>>32-7,R=nt+X|0,J^=R<<9|R>>>32-9,R=J+nt|0,Z^=R<<13|R>>>32-13,R=Z+J|0,X^=R<<18|R>>>32-18,R=ue+pe|0,Jt^=R<<7|R>>>32-7,R=Jt+ue|0,he^=R<<9|R>>>32-9,R=he+Jt|0,pe^=R<<13|R>>>32-13,R=pe+he|0,ue^=R<<18|R>>>32-18;bt=bt+S|0,Tt=Tt+L|0,vt=vt+N|0,xt=xt+W|0,At=At+z|0,dt=dt+at|0,V=V+pt|0,Y=Y+le|0,J=J+yt|0,Z=Z+kt|0,X=X+qt|0,nt=nt+zt|0,Jt=Jt+Gt|0,he=he+Wt|0,pe=pe+Vt|0,ue=ue+Ht|0,A[0]=bt>>>0&255,A[1]=bt>>>8&255,A[2]=bt>>>16&255,A[3]=bt>>>24&255,A[4]=Tt>>>0&255,A[5]=Tt>>>8&255,A[6]=Tt>>>16&255,A[7]=Tt>>>24&255,A[8]=vt>>>0&255,A[9]=vt>>>8&255,A[10]=vt>>>16&255,A[11]=vt>>>24&255,A[12]=xt>>>0&255,A[13]=xt>>>8&255,A[14]=xt>>>16&255,A[15]=xt>>>24&255,A[16]=At>>>0&255,A[17]=At>>>8&255,A[18]=At>>>16&255,A[19]=At>>>24&255,A[20]=dt>>>0&255,A[21]=dt>>>8&255,A[22]=dt>>>16&255,A[23]=dt>>>24&255,A[24]=V>>>0&255,A[25]=V>>>8&255,A[26]=V>>>16&255,A[27]=V>>>24&255,A[28]=Y>>>0&255,A[29]=Y>>>8&255,A[30]=Y>>>16&255,A[31]=Y>>>24&255,A[32]=J>>>0&255,A[33]=J>>>8&255,A[34]=J>>>16&255,A[35]=J>>>24&255,A[36]=Z>>>0&255,A[37]=Z>>>8&255,A[38]=Z>>>16&255,A[39]=Z>>>24&255,A[40]=X>>>0&255,A[41]=X>>>8&255,A[42]=X>>>16&255,A[43]=X>>>24&255,A[44]=nt>>>0&255,A[45]=nt>>>8&255,A[46]=nt>>>16&255,A[47]=nt>>>24&255,A[48]=Jt>>>0&255,A[49]=Jt>>>8&255,A[50]=Jt>>>16&255,A[51]=Jt>>>24&255,A[52]=he>>>0&255,A[53]=he>>>8&255,A[54]=he>>>16&255,A[55]=he>>>24&255,A[56]=pe>>>0&255,A[57]=pe>>>8&255,A[58]=pe>>>16&255,A[59]=pe>>>24&255,A[60]=ue>>>0&255,A[61]=ue>>>8&255,A[62]=ue>>>16&255,A[63]=ue>>>24&255}function tt(A,_,F,g){for(var S=g[0]&255|(g[1]&255)<<8|(g[2]&255)<<16|(g[3]&255)<<24,L=F[0]&255|(F[1]&255)<<8|(F[2]&255)<<16|(F[3]&255)<<24,N=F[4]&255|(F[5]&255)<<8|(F[6]&255)<<16|(F[7]&255)<<24,W=F[8]&255|(F[9]&255)<<8|(F[10]&255)<<16|(F[11]&255)<<24,z=F[12]&255|(F[13]&255)<<8|(F[14]&255)<<16|(F[15]&255)<<24,at=g[4]&255|(g[5]&255)<<8|(g[6]&255)<<16|(g[7]&255)<<24,pt=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,le=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,yt=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,kt=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,qt=g[8]&255|(g[9]&255)<<8|(g[10]&255)<<16|(g[11]&255)<<24,zt=F[16]&255|(F[17]&255)<<8|(F[18]&255)<<16|(F[19]&255)<<24,Gt=F[20]&255|(F[21]&255)<<8|(F[22]&255)<<16|(F[23]&255)<<24,Wt=F[24]&255|(F[25]&255)<<8|(F[26]&255)<<16|(F[27]&255)<<24,Vt=F[28]&255|(F[29]&255)<<8|(F[30]&255)<<16|(F[31]&255)<<24,Ht=g[12]&255|(g[13]&255)<<8|(g[14]&255)<<16|(g[15]&255)<<24,bt=S,Tt=L,vt=N,xt=W,At=z,dt=at,V=pt,Y=le,J=yt,Z=kt,X=qt,nt=zt,Jt=Gt,he=Wt,pe=Vt,ue=Ht,R,we=0;we<20;we+=2)R=bt+Jt|0,At^=R<<7|R>>>32-7,R=At+bt|0,J^=R<<9|R>>>32-9,R=J+At|0,Jt^=R<<13|R>>>32-13,R=Jt+J|0,bt^=R<<18|R>>>32-18,R=dt+Tt|0,Z^=R<<7|R>>>32-7,R=Z+dt|0,he^=R<<9|R>>>32-9,R=he+Z|0,Tt^=R<<13|R>>>32-13,R=Tt+he|0,dt^=R<<18|R>>>32-18,R=X+V|0,pe^=R<<7|R>>>32-7,R=pe+X|0,vt^=R<<9|R>>>32-9,R=vt+pe|0,V^=R<<13|R>>>32-13,R=V+vt|0,X^=R<<18|R>>>32-18,R=ue+nt|0,xt^=R<<7|R>>>32-7,R=xt+ue|0,Y^=R<<9|R>>>32-9,R=Y+xt|0,nt^=R<<13|R>>>32-13,R=nt+Y|0,ue^=R<<18|R>>>32-18,R=bt+xt|0,Tt^=R<<7|R>>>32-7,R=Tt+bt|0,vt^=R<<9|R>>>32-9,R=vt+Tt|0,xt^=R<<13|R>>>32-13,R=xt+vt|0,bt^=R<<18|R>>>32-18,R=dt+At|0,V^=R<<7|R>>>32-7,R=V+dt|0,Y^=R<<9|R>>>32-9,R=Y+V|0,At^=R<<13|R>>>32-13,R=At+Y|0,dt^=R<<18|R>>>32-18,R=X+Z|0,nt^=R<<7|R>>>32-7,R=nt+X|0,J^=R<<9|R>>>32-9,R=J+nt|0,Z^=R<<13|R>>>32-13,R=Z+J|0,X^=R<<18|R>>>32-18,R=ue+pe|0,Jt^=R<<7|R>>>32-7,R=Jt+ue|0,he^=R<<9|R>>>32-9,R=he+Jt|0,pe^=R<<13|R>>>32-13,R=pe+he|0,ue^=R<<18|R>>>32-18;A[0]=bt>>>0&255,A[1]=bt>>>8&255,A[2]=bt>>>16&255,A[3]=bt>>>24&255,A[4]=dt>>>0&255,A[5]=dt>>>8&255,A[6]=dt>>>16&255,A[7]=dt>>>24&255,A[8]=X>>>0&255,A[9]=X>>>8&255,A[10]=X>>>16&255,A[11]=X>>>24&255,A[12]=ue>>>0&255,A[13]=ue>>>8&255,A[14]=ue>>>16&255,A[15]=ue>>>24&255,A[16]=V>>>0&255,A[17]=V>>>8&255,A[18]=V>>>16&255,A[19]=V>>>24&255,A[20]=Y>>>0&255,A[21]=Y>>>8&255,A[22]=Y>>>16&255,A[23]=Y>>>24&255,A[24]=J>>>0&255,A[25]=J>>>8&255,A[26]=J>>>16&255,A[27]=J>>>24&255,A[28]=Z>>>0&255,A[29]=Z>>>8&255,A[30]=Z>>>16&255,A[31]=Z>>>24&255}function K(A,_,F,g){wt(A,_,F,g)}function Q(A,_,F,g){tt(A,_,F,g)}var mt=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Ct(A,_,F,g,S,L,N){var W=new Uint8Array(16),z=new Uint8Array(64),at,pt;for(pt=0;pt<16;pt++)W[pt]=0;for(pt=0;pt<8;pt++)W[pt]=L[pt];for(;S>=64;){for(K(z,W,N,mt),pt=0;pt<64;pt++)A[_+pt]=F[g+pt]^z[pt];for(at=1,pt=8;pt<16;pt++)at=at+(W[pt]&255)|0,W[pt]=at&255,at>>>=8;S-=64,_+=64,g+=64}if(S>0)for(K(z,W,N,mt),pt=0;pt<S;pt++)A[_+pt]=F[g+pt]^z[pt];return 0}function ct(A,_,F,g,S){var L=new Uint8Array(16),N=new Uint8Array(64),W,z;for(z=0;z<16;z++)L[z]=0;for(z=0;z<8;z++)L[z]=g[z];for(;F>=64;){for(K(N,L,S,mt),z=0;z<64;z++)A[_+z]=N[z];for(W=1,z=8;z<16;z++)W=W+(L[z]&255)|0,L[z]=W&255,W>>>=8;F-=64,_+=64}if(F>0)for(K(N,L,S,mt),z=0;z<F;z++)A[_+z]=N[z];return 0}function Kt(A,_,F,g,S){var L=new Uint8Array(32);Q(L,g,S,mt);for(var N=new Uint8Array(8),W=0;W<8;W++)N[W]=g[W+16];return ct(A,_,F,N,L)}function y(A,_,F,g,S,L,N){var W=new Uint8Array(32);Q(W,L,N,mt);for(var z=new Uint8Array(8),at=0;at<8;at++)z[at]=L[at+16];return Ct(A,_,F,g,S,z,W)}var o=function(A){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var _,F,g,S,L,N,W,z;_=A[0]&255|(A[1]&255)<<8,this.r[0]=_&8191,F=A[2]&255|(A[3]&255)<<8,this.r[1]=(_>>>13|F<<3)&8191,g=A[4]&255|(A[5]&255)<<8,this.r[2]=(F>>>10|g<<6)&7939,S=A[6]&255|(A[7]&255)<<8,this.r[3]=(g>>>7|S<<9)&8191,L=A[8]&255|(A[9]&255)<<8,this.r[4]=(S>>>4|L<<12)&255,this.r[5]=L>>>1&8190,N=A[10]&255|(A[11]&255)<<8,this.r[6]=(L>>>14|N<<2)&8191,W=A[12]&255|(A[13]&255)<<8,this.r[7]=(N>>>11|W<<5)&8065,z=A[14]&255|(A[15]&255)<<8,this.r[8]=(W>>>8|z<<8)&8191,this.r[9]=z>>>5&127,this.pad[0]=A[16]&255|(A[17]&255)<<8,this.pad[1]=A[18]&255|(A[19]&255)<<8,this.pad[2]=A[20]&255|(A[21]&255)<<8,this.pad[3]=A[22]&255|(A[23]&255)<<8,this.pad[4]=A[24]&255|(A[25]&255)<<8,this.pad[5]=A[26]&255|(A[27]&255)<<8,this.pad[6]=A[28]&255|(A[29]&255)<<8,this.pad[7]=A[30]&255|(A[31]&255)<<8};o.prototype.blocks=function(A,_,F){for(var g=this.fin?0:2048,S,L,N,W,z,at,pt,le,yt,kt,qt,zt,Gt,Wt,Vt,Ht,bt,Tt,vt,xt=this.h[0],At=this.h[1],dt=this.h[2],V=this.h[3],Y=this.h[4],J=this.h[5],Z=this.h[6],X=this.h[7],nt=this.h[8],Jt=this.h[9],he=this.r[0],pe=this.r[1],ue=this.r[2],R=this.r[3],we=this.r[4],_e=this.r[5],Fe=this.r[6],ve=this.r[7],Ce=this.r[8],Be=this.r[9];F>=16;)S=A[_+0]&255|(A[_+1]&255)<<8,xt+=S&8191,L=A[_+2]&255|(A[_+3]&255)<<8,At+=(S>>>13|L<<3)&8191,N=A[_+4]&255|(A[_+5]&255)<<8,dt+=(L>>>10|N<<6)&8191,W=A[_+6]&255|(A[_+7]&255)<<8,V+=(N>>>7|W<<9)&8191,z=A[_+8]&255|(A[_+9]&255)<<8,Y+=(W>>>4|z<<12)&8191,J+=z>>>1&8191,at=A[_+10]&255|(A[_+11]&255)<<8,Z+=(z>>>14|at<<2)&8191,pt=A[_+12]&255|(A[_+13]&255)<<8,X+=(at>>>11|pt<<5)&8191,le=A[_+14]&255|(A[_+15]&255)<<8,nt+=(pt>>>8|le<<8)&8191,Jt+=le>>>5|g,yt=0,kt=yt,kt+=xt*he,kt+=At*(5*Be),kt+=dt*(5*Ce),kt+=V*(5*ve),kt+=Y*(5*Fe),yt=kt>>>13,kt&=8191,kt+=J*(5*_e),kt+=Z*(5*we),kt+=X*(5*R),kt+=nt*(5*ue),kt+=Jt*(5*pe),yt+=kt>>>13,kt&=8191,qt=yt,qt+=xt*pe,qt+=At*he,qt+=dt*(5*Be),qt+=V*(5*Ce),qt+=Y*(5*ve),yt=qt>>>13,qt&=8191,qt+=J*(5*Fe),qt+=Z*(5*_e),qt+=X*(5*we),qt+=nt*(5*R),qt+=Jt*(5*ue),yt+=qt>>>13,qt&=8191,zt=yt,zt+=xt*ue,zt+=At*pe,zt+=dt*he,zt+=V*(5*Be),zt+=Y*(5*Ce),yt=zt>>>13,zt&=8191,zt+=J*(5*ve),zt+=Z*(5*Fe),zt+=X*(5*_e),zt+=nt*(5*we),zt+=Jt*(5*R),yt+=zt>>>13,zt&=8191,Gt=yt,Gt+=xt*R,Gt+=At*ue,Gt+=dt*pe,Gt+=V*he,Gt+=Y*(5*Be),yt=Gt>>>13,Gt&=8191,Gt+=J*(5*Ce),Gt+=Z*(5*ve),Gt+=X*(5*Fe),Gt+=nt*(5*_e),Gt+=Jt*(5*we),yt+=Gt>>>13,Gt&=8191,Wt=yt,Wt+=xt*we,Wt+=At*R,Wt+=dt*ue,Wt+=V*pe,Wt+=Y*he,yt=Wt>>>13,Wt&=8191,Wt+=J*(5*Be),Wt+=Z*(5*Ce),Wt+=X*(5*ve),Wt+=nt*(5*Fe),Wt+=Jt*(5*_e),yt+=Wt>>>13,Wt&=8191,Vt=yt,Vt+=xt*_e,Vt+=At*we,Vt+=dt*R,Vt+=V*ue,Vt+=Y*pe,yt=Vt>>>13,Vt&=8191,Vt+=J*he,Vt+=Z*(5*Be),Vt+=X*(5*Ce),Vt+=nt*(5*ve),Vt+=Jt*(5*Fe),yt+=Vt>>>13,Vt&=8191,Ht=yt,Ht+=xt*Fe,Ht+=At*_e,Ht+=dt*we,Ht+=V*R,Ht+=Y*ue,yt=Ht>>>13,Ht&=8191,Ht+=J*pe,Ht+=Z*he,Ht+=X*(5*Be),Ht+=nt*(5*Ce),Ht+=Jt*(5*ve),yt+=Ht>>>13,Ht&=8191,bt=yt,bt+=xt*ve,bt+=At*Fe,bt+=dt*_e,bt+=V*we,bt+=Y*R,yt=bt>>>13,bt&=8191,bt+=J*ue,bt+=Z*pe,bt+=X*he,bt+=nt*(5*Be),bt+=Jt*(5*Ce),yt+=bt>>>13,bt&=8191,Tt=yt,Tt+=xt*Ce,Tt+=At*ve,Tt+=dt*Fe,Tt+=V*_e,Tt+=Y*we,yt=Tt>>>13,Tt&=8191,Tt+=J*R,Tt+=Z*ue,Tt+=X*pe,Tt+=nt*he,Tt+=Jt*(5*Be),yt+=Tt>>>13,Tt&=8191,vt=yt,vt+=xt*Be,vt+=At*Ce,vt+=dt*ve,vt+=V*Fe,vt+=Y*_e,yt=vt>>>13,vt&=8191,vt+=J*we,vt+=Z*R,vt+=X*ue,vt+=nt*pe,vt+=Jt*he,yt+=vt>>>13,vt&=8191,yt=(yt<<2)+yt|0,yt=yt+kt|0,kt=yt&8191,yt=yt>>>13,qt+=yt,xt=kt,At=qt,dt=zt,V=Gt,Y=Wt,J=Vt,Z=Ht,X=bt,nt=Tt,Jt=vt,_+=16,F-=16;this.h[0]=xt,this.h[1]=At,this.h[2]=dt,this.h[3]=V,this.h[4]=Y,this.h[5]=J,this.h[6]=Z,this.h[7]=X,this.h[8]=nt,this.h[9]=Jt},o.prototype.finish=function(A,_){var F=new Uint16Array(10),g,S,L,N;if(this.leftover){for(N=this.leftover,this.buffer[N++]=1;N<16;N++)this.buffer[N]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(g=this.h[1]>>>13,this.h[1]&=8191,N=2;N<10;N++)this.h[N]+=g,g=this.h[N]>>>13,this.h[N]&=8191;for(this.h[0]+=g*5,g=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=g,g=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=g,F[0]=this.h[0]+5,g=F[0]>>>13,F[0]&=8191,N=1;N<10;N++)F[N]=this.h[N]+g,g=F[N]>>>13,F[N]&=8191;for(F[9]-=8192,S=(g^1)-1,N=0;N<10;N++)F[N]&=S;for(S=~S,N=0;N<10;N++)this.h[N]=this.h[N]&S|F[N];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,L=this.h[0]+this.pad[0],this.h[0]=L&65535,N=1;N<8;N++)L=(this.h[N]+this.pad[N]|0)+(L>>>16)|0,this.h[N]=L&65535;A[_+0]=this.h[0]>>>0&255,A[_+1]=this.h[0]>>>8&255,A[_+2]=this.h[1]>>>0&255,A[_+3]=this.h[1]>>>8&255,A[_+4]=this.h[2]>>>0&255,A[_+5]=this.h[2]>>>8&255,A[_+6]=this.h[3]>>>0&255,A[_+7]=this.h[3]>>>8&255,A[_+8]=this.h[4]>>>0&255,A[_+9]=this.h[4]>>>8&255,A[_+10]=this.h[5]>>>0&255,A[_+11]=this.h[5]>>>8&255,A[_+12]=this.h[6]>>>0&255,A[_+13]=this.h[6]>>>8&255,A[_+14]=this.h[7]>>>0&255,A[_+15]=this.h[7]>>>8&255},o.prototype.update=function(A,_,F){var g,S;if(this.leftover){for(S=16-this.leftover,S>F&&(S=F),g=0;g<S;g++)this.buffer[this.leftover+g]=A[_+g];if(F-=S,_+=S,this.leftover+=S,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(F>=16&&(S=F-F%16,this.blocks(A,_,S),_+=S,F-=S),F){for(g=0;g<F;g++)this.buffer[this.leftover+g]=A[_+g];this.leftover+=F}};function l(A,_,F,g,S,L){var N=new o(L);return N.update(F,g,S),N.finish(A,_),0}function s(A,_,F,g,S,L){var N=new Uint8Array(16);return l(N,0,F,g,S,L),it(A,_,N,0)}function h(A,_,F,g,S){var L;if(F<32)return-1;for(y(A,0,_,0,F,g,S),l(A,16,A,32,F-32,A),L=0;L<16;L++)A[L]=0;return 0}function u(A,_,F,g,S){var L,N=new Uint8Array(32);if(F<32||(Kt(N,0,32,g,S),s(_,16,_,32,F-32,N)!==0))return-1;for(y(A,0,_,0,F,g,S),L=0;L<32;L++)A[L]=0;return 0}function v(A,_){var F;for(F=0;F<16;F++)A[F]=_[F]|0}function w(A){var _,F,g=1;for(_=0;_<16;_++)F=A[_]+g+65535,g=Math.floor(F/65536),A[_]=F-g*65536;A[0]+=g-1+37*(g-1)}function p(A,_,F){for(var g,S=~(F-1),L=0;L<16;L++)g=S&(A[L]^_[L]),A[L]^=g,_[L]^=g}function f(A,_){var F,g,S,L=e(),N=e();for(F=0;F<16;F++)N[F]=_[F];for(w(N),w(N),w(N),g=0;g<2;g++){for(L[0]=N[0]-65517,F=1;F<15;F++)L[F]=N[F]-65535-(L[F-1]>>16&1),L[F-1]&=65535;L[15]=N[15]-32767-(L[14]>>16&1),S=L[15]>>16&1,L[14]&=65535,p(N,L,1-S)}for(F=0;F<16;F++)A[2*F]=N[F]&255,A[2*F+1]=N[F]>>8}function c(A,_){var F=new Uint8Array(32),g=new Uint8Array(32);return f(F,A),f(g,_),lt(F,0,g,0)}function m(A){var _=new Uint8Array(32);return f(_,A),_[0]&1}function B(A,_){var F;for(F=0;F<16;F++)A[F]=_[2*F]+(_[2*F+1]<<8);A[15]&=32767}function P(A,_,F){for(var g=0;g<16;g++)A[g]=_[g]+F[g]}function j(A,_,F){for(var g=0;g<16;g++)A[g]=_[g]-F[g]}function H(A,_,F){var g,S,L=0,N=0,W=0,z=0,at=0,pt=0,le=0,yt=0,kt=0,qt=0,zt=0,Gt=0,Wt=0,Vt=0,Ht=0,bt=0,Tt=0,vt=0,xt=0,At=0,dt=0,V=0,Y=0,J=0,Z=0,X=0,nt=0,Jt=0,he=0,pe=0,ue=0,R=F[0],we=F[1],_e=F[2],Fe=F[3],ve=F[4],Ce=F[5],Be=F[6],Ye=F[7],Re=F[8],qe=F[9],We=F[10],He=F[11],Xe=F[12],rr=F[13],nr=F[14],ir=F[15];g=_[0],L+=g*R,N+=g*we,W+=g*_e,z+=g*Fe,at+=g*ve,pt+=g*Ce,le+=g*Be,yt+=g*Ye,kt+=g*Re,qt+=g*qe,zt+=g*We,Gt+=g*He,Wt+=g*Xe,Vt+=g*rr,Ht+=g*nr,bt+=g*ir,g=_[1],N+=g*R,W+=g*we,z+=g*_e,at+=g*Fe,pt+=g*ve,le+=g*Ce,yt+=g*Be,kt+=g*Ye,qt+=g*Re,zt+=g*qe,Gt+=g*We,Wt+=g*He,Vt+=g*Xe,Ht+=g*rr,bt+=g*nr,Tt+=g*ir,g=_[2],W+=g*R,z+=g*we,at+=g*_e,pt+=g*Fe,le+=g*ve,yt+=g*Ce,kt+=g*Be,qt+=g*Ye,zt+=g*Re,Gt+=g*qe,Wt+=g*We,Vt+=g*He,Ht+=g*Xe,bt+=g*rr,Tt+=g*nr,vt+=g*ir,g=_[3],z+=g*R,at+=g*we,pt+=g*_e,le+=g*Fe,yt+=g*ve,kt+=g*Ce,qt+=g*Be,zt+=g*Ye,Gt+=g*Re,Wt+=g*qe,Vt+=g*We,Ht+=g*He,bt+=g*Xe,Tt+=g*rr,vt+=g*nr,xt+=g*ir,g=_[4],at+=g*R,pt+=g*we,le+=g*_e,yt+=g*Fe,kt+=g*ve,qt+=g*Ce,zt+=g*Be,Gt+=g*Ye,Wt+=g*Re,Vt+=g*qe,Ht+=g*We,bt+=g*He,Tt+=g*Xe,vt+=g*rr,xt+=g*nr,At+=g*ir,g=_[5],pt+=g*R,le+=g*we,yt+=g*_e,kt+=g*Fe,qt+=g*ve,zt+=g*Ce,Gt+=g*Be,Wt+=g*Ye,Vt+=g*Re,Ht+=g*qe,bt+=g*We,Tt+=g*He,vt+=g*Xe,xt+=g*rr,At+=g*nr,dt+=g*ir,g=_[6],le+=g*R,yt+=g*we,kt+=g*_e,qt+=g*Fe,zt+=g*ve,Gt+=g*Ce,Wt+=g*Be,Vt+=g*Ye,Ht+=g*Re,bt+=g*qe,Tt+=g*We,vt+=g*He,xt+=g*Xe,At+=g*rr,dt+=g*nr,V+=g*ir,g=_[7],yt+=g*R,kt+=g*we,qt+=g*_e,zt+=g*Fe,Gt+=g*ve,Wt+=g*Ce,Vt+=g*Be,Ht+=g*Ye,bt+=g*Re,Tt+=g*qe,vt+=g*We,xt+=g*He,At+=g*Xe,dt+=g*rr,V+=g*nr,Y+=g*ir,g=_[8],kt+=g*R,qt+=g*we,zt+=g*_e,Gt+=g*Fe,Wt+=g*ve,Vt+=g*Ce,Ht+=g*Be,bt+=g*Ye,Tt+=g*Re,vt+=g*qe,xt+=g*We,At+=g*He,dt+=g*Xe,V+=g*rr,Y+=g*nr,J+=g*ir,g=_[9],qt+=g*R,zt+=g*we,Gt+=g*_e,Wt+=g*Fe,Vt+=g*ve,Ht+=g*Ce,bt+=g*Be,Tt+=g*Ye,vt+=g*Re,xt+=g*qe,At+=g*We,dt+=g*He,V+=g*Xe,Y+=g*rr,J+=g*nr,Z+=g*ir,g=_[10],zt+=g*R,Gt+=g*we,Wt+=g*_e,Vt+=g*Fe,Ht+=g*ve,bt+=g*Ce,Tt+=g*Be,vt+=g*Ye,xt+=g*Re,At+=g*qe,dt+=g*We,V+=g*He,Y+=g*Xe,J+=g*rr,Z+=g*nr,X+=g*ir,g=_[11],Gt+=g*R,Wt+=g*we,Vt+=g*_e,Ht+=g*Fe,bt+=g*ve,Tt+=g*Ce,vt+=g*Be,xt+=g*Ye,At+=g*Re,dt+=g*qe,V+=g*We,Y+=g*He,J+=g*Xe,Z+=g*rr,X+=g*nr,nt+=g*ir,g=_[12],Wt+=g*R,Vt+=g*we,Ht+=g*_e,bt+=g*Fe,Tt+=g*ve,vt+=g*Ce,xt+=g*Be,At+=g*Ye,dt+=g*Re,V+=g*qe,Y+=g*We,J+=g*He,Z+=g*Xe,X+=g*rr,nt+=g*nr,Jt+=g*ir,g=_[13],Vt+=g*R,Ht+=g*we,bt+=g*_e,Tt+=g*Fe,vt+=g*ve,xt+=g*Ce,At+=g*Be,dt+=g*Ye,V+=g*Re,Y+=g*qe,J+=g*We,Z+=g*He,X+=g*Xe,nt+=g*rr,Jt+=g*nr,he+=g*ir,g=_[14],Ht+=g*R,bt+=g*we,Tt+=g*_e,vt+=g*Fe,xt+=g*ve,At+=g*Ce,dt+=g*Be,V+=g*Ye,Y+=g*Re,J+=g*qe,Z+=g*We,X+=g*He,nt+=g*Xe,Jt+=g*rr,he+=g*nr,pe+=g*ir,g=_[15],bt+=g*R,Tt+=g*we,vt+=g*_e,xt+=g*Fe,At+=g*ve,dt+=g*Ce,V+=g*Be,Y+=g*Ye,J+=g*Re,Z+=g*qe,X+=g*We,nt+=g*He,Jt+=g*Xe,he+=g*rr,pe+=g*nr,ue+=g*ir,L+=38*Tt,N+=38*vt,W+=38*xt,z+=38*At,at+=38*dt,pt+=38*V,le+=38*Y,yt+=38*J,kt+=38*Z,qt+=38*X,zt+=38*nt,Gt+=38*Jt,Wt+=38*he,Vt+=38*pe,Ht+=38*ue,S=1,g=L+S+65535,S=Math.floor(g/65536),L=g-S*65536,g=N+S+65535,S=Math.floor(g/65536),N=g-S*65536,g=W+S+65535,S=Math.floor(g/65536),W=g-S*65536,g=z+S+65535,S=Math.floor(g/65536),z=g-S*65536,g=at+S+65535,S=Math.floor(g/65536),at=g-S*65536,g=pt+S+65535,S=Math.floor(g/65536),pt=g-S*65536,g=le+S+65535,S=Math.floor(g/65536),le=g-S*65536,g=yt+S+65535,S=Math.floor(g/65536),yt=g-S*65536,g=kt+S+65535,S=Math.floor(g/65536),kt=g-S*65536,g=qt+S+65535,S=Math.floor(g/65536),qt=g-S*65536,g=zt+S+65535,S=Math.floor(g/65536),zt=g-S*65536,g=Gt+S+65535,S=Math.floor(g/65536),Gt=g-S*65536,g=Wt+S+65535,S=Math.floor(g/65536),Wt=g-S*65536,g=Vt+S+65535,S=Math.floor(g/65536),Vt=g-S*65536,g=Ht+S+65535,S=Math.floor(g/65536),Ht=g-S*65536,g=bt+S+65535,S=Math.floor(g/65536),bt=g-S*65536,L+=S-1+37*(S-1),S=1,g=L+S+65535,S=Math.floor(g/65536),L=g-S*65536,g=N+S+65535,S=Math.floor(g/65536),N=g-S*65536,g=W+S+65535,S=Math.floor(g/65536),W=g-S*65536,g=z+S+65535,S=Math.floor(g/65536),z=g-S*65536,g=at+S+65535,S=Math.floor(g/65536),at=g-S*65536,g=pt+S+65535,S=Math.floor(g/65536),pt=g-S*65536,g=le+S+65535,S=Math.floor(g/65536),le=g-S*65536,g=yt+S+65535,S=Math.floor(g/65536),yt=g-S*65536,g=kt+S+65535,S=Math.floor(g/65536),kt=g-S*65536,g=qt+S+65535,S=Math.floor(g/65536),qt=g-S*65536,g=zt+S+65535,S=Math.floor(g/65536),zt=g-S*65536,g=Gt+S+65535,S=Math.floor(g/65536),Gt=g-S*65536,g=Wt+S+65535,S=Math.floor(g/65536),Wt=g-S*65536,g=Vt+S+65535,S=Math.floor(g/65536),Vt=g-S*65536,g=Ht+S+65535,S=Math.floor(g/65536),Ht=g-S*65536,g=bt+S+65535,S=Math.floor(g/65536),bt=g-S*65536,L+=S-1+37*(S-1),A[0]=L,A[1]=N,A[2]=W,A[3]=z,A[4]=at,A[5]=pt,A[6]=le,A[7]=yt,A[8]=kt,A[9]=qt,A[10]=zt,A[11]=Gt,A[12]=Wt,A[13]=Vt,A[14]=Ht,A[15]=bt}function ht(A,_){H(A,_,_)}function re(A,_){var F=e(),g;for(g=0;g<16;g++)F[g]=_[g];for(g=253;g>=0;g--)ht(F,F),g!==2&&g!==4&&H(F,F,_);for(g=0;g<16;g++)A[g]=F[g]}function ut(A,_){var F=e(),g;for(g=0;g<16;g++)F[g]=_[g];for(g=250;g>=0;g--)ht(F,F),g!==1&&H(F,F,_);for(g=0;g<16;g++)A[g]=F[g]}function Pt(A,_,F){var g=new Uint8Array(32),S=new Float64Array(80),L,N,W=e(),z=e(),at=e(),pt=e(),le=e(),yt=e();for(N=0;N<31;N++)g[N]=_[N];for(g[31]=_[31]&127|64,g[0]&=248,B(S,F),N=0;N<16;N++)z[N]=S[N],pt[N]=W[N]=at[N]=0;for(W[0]=pt[0]=1,N=254;N>=0;--N)L=g[N>>>3]>>>(N&7)&1,p(W,z,L),p(at,pt,L),P(le,W,at),j(W,W,at),P(at,z,pt),j(z,z,pt),ht(pt,le),ht(yt,W),H(W,at,W),H(at,z,le),P(le,W,at),j(W,W,at),ht(z,W),j(at,pt,yt),H(W,at,C),P(W,W,pt),H(at,at,W),H(W,pt,yt),H(pt,z,S),ht(z,le),p(W,z,L),p(at,pt,L);for(N=0;N<16;N++)S[N+16]=W[N],S[N+32]=at[N],S[N+48]=z[N],S[N+64]=pt[N];var kt=S.subarray(32),qt=S.subarray(16);return re(kt,kt),H(qt,qt,kt),f(A,qt),0}function Ae(A,_){return Pt(A,_,i)}function Rt(A,_){return n(_,32),Ae(A,_)}function Zt(A,_,F){var g=new Uint8Array(32);return Pt(g,F,_),Q(A,a,g,mt)}var xe=h,_t=u;function ie(A,_,F,g,S,L){var N=new Uint8Array(32);return Zt(N,S,L),xe(A,_,F,g,N)}function Se(A,_,F,g,S,L){var N=new Uint8Array(32);return Zt(N,S,L),_t(A,_,F,g,N)}var Dt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ne(A,_,F,g){for(var S=new Int32Array(16),L=new Int32Array(16),N,W,z,at,pt,le,yt,kt,qt,zt,Gt,Wt,Vt,Ht,bt,Tt,vt,xt,At,dt,V,Y,J,Z,X,nt,Jt=A[0],he=A[1],pe=A[2],ue=A[3],R=A[4],we=A[5],_e=A[6],Fe=A[7],ve=_[0],Ce=_[1],Be=_[2],Ye=_[3],Re=_[4],qe=_[5],We=_[6],He=_[7],Xe=0;g>=128;){for(At=0;At<16;At++)dt=8*At+Xe,S[At]=F[dt+0]<<24|F[dt+1]<<16|F[dt+2]<<8|F[dt+3],L[At]=F[dt+4]<<24|F[dt+5]<<16|F[dt+6]<<8|F[dt+7];for(At=0;At<80;At++)if(N=Jt,W=he,z=pe,at=ue,pt=R,le=we,yt=_e,kt=Fe,qt=ve,zt=Ce,Gt=Be,Wt=Ye,Vt=Re,Ht=qe,bt=We,Tt=He,V=Fe,Y=He,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=(R>>>14|Re<<32-14)^(R>>>18|Re<<32-18)^(Re>>>41-32|R<<32-(41-32)),Y=(Re>>>14|R<<32-14)^(Re>>>18|R<<32-18)^(R>>>41-32|Re<<32-(41-32)),J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,V=R&we^~R&_e,Y=Re&qe^~Re&We,J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,V=Dt[At*2],Y=Dt[At*2+1],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,V=S[At%16],Y=L[At%16],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,vt=X&65535|nt<<16,xt=J&65535|Z<<16,V=vt,Y=xt,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=(Jt>>>28|ve<<32-28)^(ve>>>34-32|Jt<<32-(34-32))^(ve>>>39-32|Jt<<32-(39-32)),Y=(ve>>>28|Jt<<32-28)^(Jt>>>34-32|ve<<32-(34-32))^(Jt>>>39-32|ve<<32-(39-32)),J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,V=Jt&he^Jt&pe^he&pe,Y=ve&Ce^ve&Be^Ce&Be,J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,kt=X&65535|nt<<16,Tt=J&65535|Z<<16,V=at,Y=Wt,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=vt,Y=xt,J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,at=X&65535|nt<<16,Wt=J&65535|Z<<16,he=N,pe=W,ue=z,R=at,we=pt,_e=le,Fe=yt,Jt=kt,Ce=qt,Be=zt,Ye=Gt,Re=Wt,qe=Vt,We=Ht,He=bt,ve=Tt,At%16===15)for(dt=0;dt<16;dt++)V=S[dt],Y=L[dt],J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=S[(dt+9)%16],Y=L[(dt+9)%16],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,vt=S[(dt+1)%16],xt=L[(dt+1)%16],V=(vt>>>1|xt<<32-1)^(vt>>>8|xt<<32-8)^vt>>>7,Y=(xt>>>1|vt<<32-1)^(xt>>>8|vt<<32-8)^(xt>>>7|vt<<32-7),J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,vt=S[(dt+14)%16],xt=L[(dt+14)%16],V=(vt>>>19|xt<<32-19)^(xt>>>61-32|vt<<32-(61-32))^vt>>>6,Y=(xt>>>19|vt<<32-19)^(vt>>>61-32|xt<<32-(61-32))^(xt>>>6|vt<<32-6),J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,S[dt]=X&65535|nt<<16,L[dt]=J&65535|Z<<16;V=Jt,Y=ve,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=A[0],Y=_[0],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,A[0]=Jt=X&65535|nt<<16,_[0]=ve=J&65535|Z<<16,V=he,Y=Ce,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=A[1],Y=_[1],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,A[1]=he=X&65535|nt<<16,_[1]=Ce=J&65535|Z<<16,V=pe,Y=Be,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=A[2],Y=_[2],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,A[2]=pe=X&65535|nt<<16,_[2]=Be=J&65535|Z<<16,V=ue,Y=Ye,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=A[3],Y=_[3],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,A[3]=ue=X&65535|nt<<16,_[3]=Ye=J&65535|Z<<16,V=R,Y=Re,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=A[4],Y=_[4],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,A[4]=R=X&65535|nt<<16,_[4]=Re=J&65535|Z<<16,V=we,Y=qe,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=A[5],Y=_[5],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,A[5]=we=X&65535|nt<<16,_[5]=qe=J&65535|Z<<16,V=_e,Y=We,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=A[6],Y=_[6],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,A[6]=_e=X&65535|nt<<16,_[6]=We=J&65535|Z<<16,V=Fe,Y=He,J=Y&65535,Z=Y>>>16,X=V&65535,nt=V>>>16,V=A[7],Y=_[7],J+=Y&65535,Z+=Y>>>16,X+=V&65535,nt+=V>>>16,Z+=J>>>16,X+=Z>>>16,nt+=X>>>16,A[7]=Fe=X&65535|nt<<16,_[7]=He=J&65535|Z<<16,Xe+=128,g-=128}return g}function Ee(A,_,F){var g=new Int32Array(8),S=new Int32Array(8),L=new Uint8Array(256),N,W=F;for(g[0]=1779033703,g[1]=3144134277,g[2]=1013904242,g[3]=2773480762,g[4]=1359893119,g[5]=2600822924,g[6]=528734635,g[7]=1541459225,S[0]=4089235720,S[1]=2227873595,S[2]=4271175723,S[3]=1595750129,S[4]=2917565137,S[5]=725511199,S[6]=4215389547,S[7]=327033209,ne(g,S,_,F),F%=128,N=0;N<F;N++)L[N]=_[W-F+N];for(L[F]=128,F=256-128*(F<112?1:0),L[F-9]=0,st(L,F-8,W/536870912|0,W<<3),ne(g,S,L,F),N=0;N<8;N++)st(A,8*N,g[N],S[N]);return 0}function Ft(A,_){var F=e(),g=e(),S=e(),L=e(),N=e(),W=e(),z=e(),at=e(),pt=e();j(F,A[1],A[0]),j(pt,_[1],_[0]),H(F,F,pt),P(g,A[0],A[1]),P(pt,_[0],_[1]),H(g,g,pt),H(S,A[3],_[3]),H(S,S,T),H(L,A[2],_[2]),P(L,L,L),j(N,g,F),j(W,L,S),P(z,L,S),P(at,g,F),H(A[0],N,W),H(A[1],at,z),H(A[2],z,W),H(A[3],N,at)}function Xt(A,_,F){var g;for(g=0;g<4;g++)p(A[g],_[g],F)}function de(A,_){var F=e(),g=e(),S=e();re(S,_[2]),H(F,_[0],S),H(g,_[1],S),f(A,g),A[31]^=m(F)<<7}function St(A,_,F){var g,S;for(v(A[0],d),v(A[1],b),v(A[2],b),v(A[3],d),S=255;S>=0;--S)g=F[S/8|0]>>(S&7)&1,Xt(A,_,g),Ft(_,A),Ft(A,A),Xt(A,_,g)}function te(A,_){var F=[e(),e(),e(),e()];v(F[0],O),v(F[1],k),v(F[2],b),H(F[3],O,k),St(A,F,_)}function ye(A,_,F){var g=new Uint8Array(64),S=[e(),e(),e(),e()],L;for(F||n(_,32),Ee(g,_,32),g[0]&=248,g[31]&=127,g[31]|=64,te(S,g),de(A,S),L=0;L<32;L++)_[L+32]=A[L];return 0}var It=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function M(A,_){var F,g,S,L;for(g=63;g>=32;--g){for(F=0,S=g-32,L=g-12;S<L;++S)_[S]+=F-16*_[g]*It[S-(g-32)],F=Math.floor((_[S]+128)/256),_[S]-=F*256;_[S]+=F,_[g]=0}for(F=0,S=0;S<32;S++)_[S]+=F-(_[31]>>4)*It[S],F=_[S]>>8,_[S]&=255;for(S=0;S<32;S++)_[S]-=F*It[S];for(g=0;g<32;g++)_[g+1]+=_[g]>>8,A[g]=_[g]&255}function x(A){var _=new Float64Array(64),F;for(F=0;F<64;F++)_[F]=A[F];for(F=0;F<64;F++)A[F]=0;M(A,_)}function E(A,_,F,g){var S=new Uint8Array(64),L=new Uint8Array(64),N=new Uint8Array(64),W,z,at=new Float64Array(64),pt=[e(),e(),e(),e()];Ee(S,g,32),S[0]&=248,S[31]&=127,S[31]|=64;var le=F+64;for(W=0;W<F;W++)A[64+W]=_[W];for(W=0;W<32;W++)A[32+W]=S[32+W];for(Ee(N,A.subarray(32),F+32),x(N),te(pt,N),de(A,pt),W=32;W<64;W++)A[W]=g[W];for(Ee(L,A,F+64),x(L),W=0;W<64;W++)at[W]=0;for(W=0;W<32;W++)at[W]=N[W];for(W=0;W<32;W++)for(z=0;z<32;z++)at[W+z]+=L[W]*S[z];return M(A.subarray(32),at),le}function I(A,_){var F=e(),g=e(),S=e(),L=e(),N=e(),W=e(),z=e();return v(A[2],b),B(A[1],_),ht(S,A[1]),H(L,S,D),j(S,S,A[2]),P(L,A[2],L),ht(N,L),ht(W,N),H(z,W,N),H(F,z,S),H(F,F,L),ut(F,F),H(F,F,S),H(F,F,L),H(F,F,L),H(A[0],F,L),ht(g,A[0]),H(g,g,L),c(g,S)&&H(A[0],A[0],G),ht(g,A[0]),H(g,g,L),c(g,S)?-1:(m(A[0])===_[31]>>7&&j(A[0],d,A[0]),H(A[3],A[0],A[1]),0)}function U(A,_,F,g){var S,L=new Uint8Array(32),N=new Uint8Array(64),W=[e(),e(),e(),e()],z=[e(),e(),e(),e()];if(F<64||I(z,g))return-1;for(S=0;S<F;S++)A[S]=_[S];for(S=0;S<32;S++)A[S+32]=g[S];if(Ee(N,A,F),x(N),St(W,z,N),te(z,_.subarray(32)),Ft(W,z),de(L,W),F-=64,lt(_,0,L,0)){for(S=0;S<F;S++)A[S]=0;return-1}for(S=0;S<F;S++)A[S]=_[S+64];return F}var $=32,q=24,Mt=32,ot=16,Et=32,Yt=32,et=32,ee=32,De=32,Ut=q,fe=Mt,Ne=ot,Bt=64,Qt=32,Me=64,Nt=32,se=64;t.lowlevel={crypto_core_hsalsa20:Q,crypto_stream_xor:y,crypto_stream:Kt,crypto_stream_salsa20_xor:Ct,crypto_stream_salsa20:ct,crypto_onetimeauth:l,crypto_onetimeauth_verify:s,crypto_verify_16:it,crypto_verify_32:lt,crypto_secretbox:h,crypto_secretbox_open:u,crypto_scalarmult:Pt,crypto_scalarmult_base:Ae,crypto_box_beforenm:Zt,crypto_box_afternm:xe,crypto_box:ie,crypto_box_open:Se,crypto_box_keypair:Rt,crypto_hash:Ee,crypto_sign:E,crypto_sign_keypair:ye,crypto_sign_open:U,crypto_secretbox_KEYBYTES:$,crypto_secretbox_NONCEBYTES:q,crypto_secretbox_ZEROBYTES:Mt,crypto_secretbox_BOXZEROBYTES:ot,crypto_scalarmult_BYTES:Et,crypto_scalarmult_SCALARBYTES:Yt,crypto_box_PUBLICKEYBYTES:et,crypto_box_SECRETKEYBYTES:ee,crypto_box_BEFORENMBYTES:De,crypto_box_NONCEBYTES:Ut,crypto_box_ZEROBYTES:fe,crypto_box_BOXZEROBYTES:Ne,crypto_sign_BYTES:Bt,crypto_sign_PUBLICKEYBYTES:Qt,crypto_sign_SECRETKEYBYTES:Me,crypto_sign_SEEDBYTES:Nt,crypto_hash_BYTES:se,gf:e,D,L:It,pack25519:f,unpack25519:B,M:H,A:P,S:ht,Z:j,pow2523:ut,add:Ft,set25519:v,modL:M,scalarmult:St,scalarbase:te};function Ie(A,_){if(A.length!==$)throw new Error("bad key size");if(_.length!==q)throw new Error("bad nonce size")}function $t(A,_){if(A.length!==et)throw new Error("bad public key size");if(_.length!==ee)throw new Error("bad secret key size")}function jt(){for(var A=0;A<arguments.length;A++)if(!(arguments[A]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Te(A){for(var _=0;_<A.length;_++)A[_]=0}t.randomBytes=function(A){var _=new Uint8Array(A);return n(_,A),_},t.secretbox=function(A,_,F){jt(A,_,F),Ie(F,_);for(var g=new Uint8Array(Mt+A.length),S=new Uint8Array(g.length),L=0;L<A.length;L++)g[L+Mt]=A[L];return h(S,g,g.length,_,F),S.subarray(ot)},t.secretbox.open=function(A,_,F){jt(A,_,F),Ie(F,_);for(var g=new Uint8Array(ot+A.length),S=new Uint8Array(g.length),L=0;L<A.length;L++)g[L+ot]=A[L];return g.length<32||u(S,g,g.length,_,F)!==0?null:S.subarray(Mt)},t.secretbox.keyLength=$,t.secretbox.nonceLength=q,t.secretbox.overheadLength=ot,t.scalarMult=function(A,_){if(jt(A,_),A.length!==Yt)throw new Error("bad n size");if(_.length!==Et)throw new Error("bad p size");var F=new Uint8Array(Et);return Pt(F,A,_),F},t.scalarMult.base=function(A){if(jt(A),A.length!==Yt)throw new Error("bad n size");var _=new Uint8Array(Et);return Ae(_,A),_},t.scalarMult.scalarLength=Yt,t.scalarMult.groupElementLength=Et,t.box=function(A,_,F,g){var S=t.box.before(F,g);return t.secretbox(A,_,S)},t.box.before=function(A,_){jt(A,_),$t(A,_);var F=new Uint8Array(De);return Zt(F,A,_),F},t.box.after=t.secretbox,t.box.open=function(A,_,F,g){var S=t.box.before(F,g);return t.secretbox.open(A,_,S)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var A=new Uint8Array(et),_=new Uint8Array(ee);return Rt(A,_),{publicKey:A,secretKey:_}},t.box.keyPair.fromSecretKey=function(A){if(jt(A),A.length!==ee)throw new Error("bad secret key size");var _=new Uint8Array(et);return Ae(_,A),{publicKey:_,secretKey:new Uint8Array(A)}},t.box.publicKeyLength=et,t.box.secretKeyLength=ee,t.box.sharedKeyLength=De,t.box.nonceLength=Ut,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(A,_){if(jt(A,_),_.length!==Me)throw new Error("bad secret key size");var F=new Uint8Array(Bt+A.length);return E(F,A,A.length,_),F},t.sign.open=function(A,_){if(jt(A,_),_.length!==Qt)throw new Error("bad public key size");var F=new Uint8Array(A.length),g=U(F,A,A.length,_);if(g<0)return null;for(var S=new Uint8Array(g),L=0;L<S.length;L++)S[L]=F[L];return S},t.sign.detached=function(A,_){for(var F=t.sign(A,_),g=new Uint8Array(Bt),S=0;S<g.length;S++)g[S]=F[S];return g},t.sign.detached.verify=function(A,_,F){if(jt(A,_,F),_.length!==Bt)throw new Error("bad signature size");if(F.length!==Qt)throw new Error("bad public key size");var g=new Uint8Array(Bt+A.length),S=new Uint8Array(Bt+A.length),L;for(L=0;L<Bt;L++)g[L]=_[L];for(L=0;L<A.length;L++)g[L+Bt]=A[L];return U(S,g,g.length,F)>=0},t.sign.keyPair=function(){var A=new Uint8Array(Qt),_=new Uint8Array(Me);return ye(A,_),{publicKey:A,secretKey:_}},t.sign.keyPair.fromSecretKey=function(A){if(jt(A),A.length!==Me)throw new Error("bad secret key size");for(var _=new Uint8Array(Qt),F=0;F<_.length;F++)_[F]=A[32+F];return{publicKey:_,secretKey:new Uint8Array(A)}},t.sign.keyPair.fromSeed=function(A){if(jt(A),A.length!==Nt)throw new Error("bad seed size");for(var _=new Uint8Array(Qt),F=new Uint8Array(Me),g=0;g<32;g++)F[g]=A[g];return ye(_,F,!0),{publicKey:_,secretKey:F}},t.sign.publicKeyLength=Qt,t.sign.secretKeyLength=Me,t.sign.seedLength=Nt,t.sign.signatureLength=Bt,t.hash=function(A){jt(A);var _=new Uint8Array(se);return Ee(_,A,A.length),_},t.hash.hashLength=se,t.verify=function(A,_){return jt(A,_),A.length===0||_.length===0||A.length!==_.length?!1:ft(A,0,_,0,A.length)===0},t.setPRNG=function(A){n=A},function(){var A=typeof self<"u"?self.crypto||self.msCrypto:null;if(A&&A.getRandomValues){var _=65536;t.setPRNG(function(F,g){var S,L=new Uint8Array(g);for(S=0;S<g;S+=_)A.getRandomValues(L.subarray(S,S+Math.min(g-S,_)));for(S=0;S<g;S++)F[S]=L[S];Te(L)})}else typeof so<"u"&&(A=io,A&&A.randomBytes&&t.setPRNG(function(F,g){var S,L=A.randomBytes(g);for(S=0;S<g;S++)F[S]=L[S];Te(L)}))}()})(r.exports?r.exports:self.nacl=self.nacl||{})})($0);var P0=$0.exports;const Xn=jn(P0);var oo={exports:{}};oo.exports;(function(r){(function(t,e){function n(y,o){if(!y)throw new Error(o||"Assertion failed")}function a(y,o){y.super_=o;var l=function(){};l.prototype=o.prototype,y.prototype=new l,y.prototype.constructor=y}function i(y,o,l){if(i.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((o==="le"||o==="be")&&(l=o,o=10),this._init(y||0,o||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var d;try{d=so("buffer").Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,l){return o.cmp(l)>0?o:l},i.min=function(o,l){return o.cmp(l)<0?o:l},i.prototype._init=function(o,l,s){if(typeof o=="number")return this._initNumber(o,l,s);if(typeof o=="object")return this._initArray(o,l,s);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),o=o.toString().replace(/\s+/g,"");var h=0;o[0]==="-"&&h++,l===16?this._parseHex(o,h):this._parseBase(o,l,h),o[0]==="-"&&(this.negative=1),this.strip(),s==="le"&&this._initArray(this.toArray(),l,s)},i.prototype._initNumber=function(o,l,s){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),s==="le"&&this._initArray(this.toArray(),l,s)},i.prototype._initArray=function(o,l,s){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var u,v,w=0;if(s==="be")for(h=o.length-1,u=0;h>=0;h-=3)v=o[h]|o[h-1]<<8|o[h-2]<<16,this.words[u]|=v<<w&67108863,this.words[u+1]=v>>>26-w&67108863,w+=24,w>=26&&(w-=26,u++);else if(s==="le")for(h=0,u=0;h<o.length;h+=3)v=o[h]|o[h+1]<<8|o[h+2]<<16,this.words[u]|=v<<w&67108863,this.words[u+1]=v>>>26-w&67108863,w+=24,w>=26&&(w-=26,u++);return this.strip()};function b(y,o,l){for(var s=0,h=Math.min(y.length,l),u=o;u<h;u++){var v=y.charCodeAt(u)-48;s<<=4,v>=49&&v<=54?s|=v-49+10:v>=17&&v<=22?s|=v-17+10:s|=v&15}return s}i.prototype._parseHex=function(o,l){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var h,u,v=0;for(s=o.length-6,h=0;s>=l;s-=6)u=b(o,s,s+6),this.words[h]|=u<<v&67108863,this.words[h+1]|=u>>>26-v&4194303,v+=24,v>=26&&(v-=26,h++);s+6!==l&&(u=b(o,l,s+6),this.words[h]|=u<<v&67108863,this.words[h+1]|=u>>>26-v&4194303),this.strip()};function C(y,o,l,s){for(var h=0,u=Math.min(y.length,l),v=o;v<u;v++){var w=y.charCodeAt(v)-48;h*=s,w>=49?h+=w-49+10:w>=17?h+=w-17+10:h+=w}return h}i.prototype._parseBase=function(o,l,s){this.words=[0],this.length=1;for(var h=0,u=1;u<=67108863;u*=l)h++;h--,u=u/l|0;for(var v=o.length-s,w=v%h,p=Math.min(v,v-w)+s,f=0,c=s;c<p;c+=h)f=C(o,c,c+h,l),this.imuln(u),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(w!==0){var m=1;for(f=C(o,c,o.length,l),c=0;c<w;c++)m*=l;this.imuln(m),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}},i.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,l){o=o||10,l=l|0||1;var s;if(o===16||o==="hex"){s="";for(var h=0,u=0,v=0;v<this.length;v++){var w=this.words[v],p=((w<<h|u)&16777215).toString(16);u=w>>>24-h&16777215,u!==0||v!==this.length-1?s=D[6-p.length]+p+s:s=p+s,h+=2,h>=26&&(h-=26,v--)}for(u!==0&&(s=u.toString(16)+s);s.length%l!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}if(o===(o|0)&&o>=2&&o<=36){var f=T[o],c=O[o];s="";var m=this.clone();for(m.negative=0;!m.isZero();){var B=m.modn(c).toString(o);m=m.idivn(c),m.isZero()?s=B+s:s=D[f-B.length]+B+s}for(this.isZero()&&(s="0"+s);s.length%l!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,l){return n(typeof d<"u"),this.toArrayLike(d,o,l)},i.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)},i.prototype.toArrayLike=function(o,l,s){var h=this.byteLength(),u=s||Math.max(1,h);n(h<=u,"byte array longer than desired length"),n(u>0,"Requested array length <= 0"),this.strip();var v=l==="le",w=new o(u),p,f,c=this.clone();if(v){for(f=0;!c.isZero();f++)p=c.andln(255),c.iushrn(8),w[f]=p;for(;f<u;f++)w[f]=0}else{for(f=0;f<u-h;f++)w[f]=0;for(f=0;!c.isZero();f++)p=c.andln(255),c.iushrn(8),w[u-f-1]=p}return w},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var l=o,s=0;return l>=4096&&(s+=13,l>>>=13),l>=64&&(s+=7,l>>>=7),l>=8&&(s+=4,l>>>=4),l>=2&&(s+=2,l>>>=2),s+l},i.prototype._zeroBits=function(o){if(o===0)return 26;var l=o,s=0;return l&8191||(s+=13,l>>>=13),l&127||(s+=7,l>>>=7),l&15||(s+=4,l>>>=4),l&3||(s+=2,l>>>=2),l&1||s++,s},i.prototype.bitLength=function(){var o=this.words[this.length-1],l=this._countBits(o);return(this.length-1)*26+l};function k(y){for(var o=new Array(y.bitLength()),l=0;l<o.length;l++){var s=l/26|0,h=l%26;o[l]=(y.words[s]&1<<h)>>>h}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var s=this._zeroBits(this.words[l]);if(o+=s,s!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this.strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var l;this.length>o.length?l=o:l=this;for(var s=0;s<l.length;s++)this.words[s]=this.words[s]&o.words[s];return this.length=l.length,this.strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var l,s;this.length>o.length?(l=this,s=o):(l=o,s=this);for(var h=0;h<s.length;h++)this.words[h]=l.words[h]^s.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var l=Math.ceil(o/26)|0,s=o%26;this._expand(l),s>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return s>0&&(this.words[h]=~this.words[h]&67108863>>26-s),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,l){n(typeof o=="number"&&o>=0);var s=o/26|0,h=o%26;return this._expand(s+1),l?this.words[s]=this.words[s]|1<<h:this.words[s]=this.words[s]&~(1<<h),this.strip()},i.prototype.iadd=function(o){var l;if(this.negative!==0&&o.negative===0)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();var s,h;this.length>o.length?(s=this,h=o):(s=o,h=this);for(var u=0,v=0;v<h.length;v++)l=(s.words[v]|0)+(h.words[v]|0)+u,this.words[v]=l&67108863,u=l>>>26;for(;u!==0&&v<s.length;v++)l=(s.words[v]|0)+u,this.words[v]=l&67108863,u=l>>>26;if(this.length=s.length,u!==0)this.words[this.length]=u,this.length++;else if(s!==this)for(;v<s.length;v++)this.words[v]=s.words[v];return this},i.prototype.add=function(o){var l;return o.negative!==0&&this.negative===0?(o.negative=0,l=this.sub(o),o.negative^=1,l):o.negative===0&&this.negative!==0?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var s=this.cmp(o);if(s===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,u;s>0?(h=this,u=o):(h=o,u=this);for(var v=0,w=0;w<u.length;w++)l=(h.words[w]|0)-(u.words[w]|0)+v,v=l>>26,this.words[w]=l&67108863;for(;v!==0&&w<h.length;w++)l=(h.words[w]|0)+v,v=l>>26,this.words[w]=l&67108863;if(v===0&&w<h.length&&h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=Math.max(this.length,w),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function G(y,o,l){l.negative=o.negative^y.negative;var s=y.length+o.length|0;l.length=s,s=s-1|0;var h=y.words[0]|0,u=o.words[0]|0,v=h*u,w=v&67108863,p=v/67108864|0;l.words[0]=w;for(var f=1;f<s;f++){for(var c=p>>>26,m=p&67108863,B=Math.min(f,o.length-1),P=Math.max(0,f-y.length+1);P<=B;P++){var j=f-P|0;h=y.words[j]|0,u=o.words[P]|0,v=h*u+m,c+=v/67108864|0,m=v&67108863}l.words[f]=m|0,p=c|0}return p!==0?l.words[f]=p|0:l.length--,l.strip()}var st=function(o,l,s){var h=o.words,u=l.words,v=s.words,w=0,p,f,c,m=h[0]|0,B=m&8191,P=m>>>13,j=h[1]|0,H=j&8191,ht=j>>>13,re=h[2]|0,ut=re&8191,Pt=re>>>13,Ae=h[3]|0,Rt=Ae&8191,Zt=Ae>>>13,xe=h[4]|0,_t=xe&8191,ie=xe>>>13,Se=h[5]|0,Dt=Se&8191,ne=Se>>>13,Ee=h[6]|0,Ft=Ee&8191,Xt=Ee>>>13,de=h[7]|0,St=de&8191,te=de>>>13,ye=h[8]|0,It=ye&8191,M=ye>>>13,x=h[9]|0,E=x&8191,I=x>>>13,U=u[0]|0,$=U&8191,q=U>>>13,Mt=u[1]|0,ot=Mt&8191,Et=Mt>>>13,Yt=u[2]|0,et=Yt&8191,ee=Yt>>>13,De=u[3]|0,Ut=De&8191,fe=De>>>13,Ne=u[4]|0,Bt=Ne&8191,Qt=Ne>>>13,Me=u[5]|0,Nt=Me&8191,se=Me>>>13,Ie=u[6]|0,$t=Ie&8191,jt=Ie>>>13,Te=u[7]|0,A=Te&8191,_=Te>>>13,F=u[8]|0,g=F&8191,S=F>>>13,L=u[9]|0,N=L&8191,W=L>>>13;s.negative=o.negative^l.negative,s.length=19,p=Math.imul(B,$),f=Math.imul(B,q),f=f+Math.imul(P,$)|0,c=Math.imul(P,q);var z=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(z>>>26)|0,z&=67108863,p=Math.imul(H,$),f=Math.imul(H,q),f=f+Math.imul(ht,$)|0,c=Math.imul(ht,q),p=p+Math.imul(B,ot)|0,f=f+Math.imul(B,Et)|0,f=f+Math.imul(P,ot)|0,c=c+Math.imul(P,Et)|0;var at=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(at>>>26)|0,at&=67108863,p=Math.imul(ut,$),f=Math.imul(ut,q),f=f+Math.imul(Pt,$)|0,c=Math.imul(Pt,q),p=p+Math.imul(H,ot)|0,f=f+Math.imul(H,Et)|0,f=f+Math.imul(ht,ot)|0,c=c+Math.imul(ht,Et)|0,p=p+Math.imul(B,et)|0,f=f+Math.imul(B,ee)|0,f=f+Math.imul(P,et)|0,c=c+Math.imul(P,ee)|0;var pt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(pt>>>26)|0,pt&=67108863,p=Math.imul(Rt,$),f=Math.imul(Rt,q),f=f+Math.imul(Zt,$)|0,c=Math.imul(Zt,q),p=p+Math.imul(ut,ot)|0,f=f+Math.imul(ut,Et)|0,f=f+Math.imul(Pt,ot)|0,c=c+Math.imul(Pt,Et)|0,p=p+Math.imul(H,et)|0,f=f+Math.imul(H,ee)|0,f=f+Math.imul(ht,et)|0,c=c+Math.imul(ht,ee)|0,p=p+Math.imul(B,Ut)|0,f=f+Math.imul(B,fe)|0,f=f+Math.imul(P,Ut)|0,c=c+Math.imul(P,fe)|0;var le=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(le>>>26)|0,le&=67108863,p=Math.imul(_t,$),f=Math.imul(_t,q),f=f+Math.imul(ie,$)|0,c=Math.imul(ie,q),p=p+Math.imul(Rt,ot)|0,f=f+Math.imul(Rt,Et)|0,f=f+Math.imul(Zt,ot)|0,c=c+Math.imul(Zt,Et)|0,p=p+Math.imul(ut,et)|0,f=f+Math.imul(ut,ee)|0,f=f+Math.imul(Pt,et)|0,c=c+Math.imul(Pt,ee)|0,p=p+Math.imul(H,Ut)|0,f=f+Math.imul(H,fe)|0,f=f+Math.imul(ht,Ut)|0,c=c+Math.imul(ht,fe)|0,p=p+Math.imul(B,Bt)|0,f=f+Math.imul(B,Qt)|0,f=f+Math.imul(P,Bt)|0,c=c+Math.imul(P,Qt)|0;var yt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(yt>>>26)|0,yt&=67108863,p=Math.imul(Dt,$),f=Math.imul(Dt,q),f=f+Math.imul(ne,$)|0,c=Math.imul(ne,q),p=p+Math.imul(_t,ot)|0,f=f+Math.imul(_t,Et)|0,f=f+Math.imul(ie,ot)|0,c=c+Math.imul(ie,Et)|0,p=p+Math.imul(Rt,et)|0,f=f+Math.imul(Rt,ee)|0,f=f+Math.imul(Zt,et)|0,c=c+Math.imul(Zt,ee)|0,p=p+Math.imul(ut,Ut)|0,f=f+Math.imul(ut,fe)|0,f=f+Math.imul(Pt,Ut)|0,c=c+Math.imul(Pt,fe)|0,p=p+Math.imul(H,Bt)|0,f=f+Math.imul(H,Qt)|0,f=f+Math.imul(ht,Bt)|0,c=c+Math.imul(ht,Qt)|0,p=p+Math.imul(B,Nt)|0,f=f+Math.imul(B,se)|0,f=f+Math.imul(P,Nt)|0,c=c+Math.imul(P,se)|0;var kt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(kt>>>26)|0,kt&=67108863,p=Math.imul(Ft,$),f=Math.imul(Ft,q),f=f+Math.imul(Xt,$)|0,c=Math.imul(Xt,q),p=p+Math.imul(Dt,ot)|0,f=f+Math.imul(Dt,Et)|0,f=f+Math.imul(ne,ot)|0,c=c+Math.imul(ne,Et)|0,p=p+Math.imul(_t,et)|0,f=f+Math.imul(_t,ee)|0,f=f+Math.imul(ie,et)|0,c=c+Math.imul(ie,ee)|0,p=p+Math.imul(Rt,Ut)|0,f=f+Math.imul(Rt,fe)|0,f=f+Math.imul(Zt,Ut)|0,c=c+Math.imul(Zt,fe)|0,p=p+Math.imul(ut,Bt)|0,f=f+Math.imul(ut,Qt)|0,f=f+Math.imul(Pt,Bt)|0,c=c+Math.imul(Pt,Qt)|0,p=p+Math.imul(H,Nt)|0,f=f+Math.imul(H,se)|0,f=f+Math.imul(ht,Nt)|0,c=c+Math.imul(ht,se)|0,p=p+Math.imul(B,$t)|0,f=f+Math.imul(B,jt)|0,f=f+Math.imul(P,$t)|0,c=c+Math.imul(P,jt)|0;var qt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(qt>>>26)|0,qt&=67108863,p=Math.imul(St,$),f=Math.imul(St,q),f=f+Math.imul(te,$)|0,c=Math.imul(te,q),p=p+Math.imul(Ft,ot)|0,f=f+Math.imul(Ft,Et)|0,f=f+Math.imul(Xt,ot)|0,c=c+Math.imul(Xt,Et)|0,p=p+Math.imul(Dt,et)|0,f=f+Math.imul(Dt,ee)|0,f=f+Math.imul(ne,et)|0,c=c+Math.imul(ne,ee)|0,p=p+Math.imul(_t,Ut)|0,f=f+Math.imul(_t,fe)|0,f=f+Math.imul(ie,Ut)|0,c=c+Math.imul(ie,fe)|0,p=p+Math.imul(Rt,Bt)|0,f=f+Math.imul(Rt,Qt)|0,f=f+Math.imul(Zt,Bt)|0,c=c+Math.imul(Zt,Qt)|0,p=p+Math.imul(ut,Nt)|0,f=f+Math.imul(ut,se)|0,f=f+Math.imul(Pt,Nt)|0,c=c+Math.imul(Pt,se)|0,p=p+Math.imul(H,$t)|0,f=f+Math.imul(H,jt)|0,f=f+Math.imul(ht,$t)|0,c=c+Math.imul(ht,jt)|0,p=p+Math.imul(B,A)|0,f=f+Math.imul(B,_)|0,f=f+Math.imul(P,A)|0,c=c+Math.imul(P,_)|0;var zt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(zt>>>26)|0,zt&=67108863,p=Math.imul(It,$),f=Math.imul(It,q),f=f+Math.imul(M,$)|0,c=Math.imul(M,q),p=p+Math.imul(St,ot)|0,f=f+Math.imul(St,Et)|0,f=f+Math.imul(te,ot)|0,c=c+Math.imul(te,Et)|0,p=p+Math.imul(Ft,et)|0,f=f+Math.imul(Ft,ee)|0,f=f+Math.imul(Xt,et)|0,c=c+Math.imul(Xt,ee)|0,p=p+Math.imul(Dt,Ut)|0,f=f+Math.imul(Dt,fe)|0,f=f+Math.imul(ne,Ut)|0,c=c+Math.imul(ne,fe)|0,p=p+Math.imul(_t,Bt)|0,f=f+Math.imul(_t,Qt)|0,f=f+Math.imul(ie,Bt)|0,c=c+Math.imul(ie,Qt)|0,p=p+Math.imul(Rt,Nt)|0,f=f+Math.imul(Rt,se)|0,f=f+Math.imul(Zt,Nt)|0,c=c+Math.imul(Zt,se)|0,p=p+Math.imul(ut,$t)|0,f=f+Math.imul(ut,jt)|0,f=f+Math.imul(Pt,$t)|0,c=c+Math.imul(Pt,jt)|0,p=p+Math.imul(H,A)|0,f=f+Math.imul(H,_)|0,f=f+Math.imul(ht,A)|0,c=c+Math.imul(ht,_)|0,p=p+Math.imul(B,g)|0,f=f+Math.imul(B,S)|0,f=f+Math.imul(P,g)|0,c=c+Math.imul(P,S)|0;var Gt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,p=Math.imul(E,$),f=Math.imul(E,q),f=f+Math.imul(I,$)|0,c=Math.imul(I,q),p=p+Math.imul(It,ot)|0,f=f+Math.imul(It,Et)|0,f=f+Math.imul(M,ot)|0,c=c+Math.imul(M,Et)|0,p=p+Math.imul(St,et)|0,f=f+Math.imul(St,ee)|0,f=f+Math.imul(te,et)|0,c=c+Math.imul(te,ee)|0,p=p+Math.imul(Ft,Ut)|0,f=f+Math.imul(Ft,fe)|0,f=f+Math.imul(Xt,Ut)|0,c=c+Math.imul(Xt,fe)|0,p=p+Math.imul(Dt,Bt)|0,f=f+Math.imul(Dt,Qt)|0,f=f+Math.imul(ne,Bt)|0,c=c+Math.imul(ne,Qt)|0,p=p+Math.imul(_t,Nt)|0,f=f+Math.imul(_t,se)|0,f=f+Math.imul(ie,Nt)|0,c=c+Math.imul(ie,se)|0,p=p+Math.imul(Rt,$t)|0,f=f+Math.imul(Rt,jt)|0,f=f+Math.imul(Zt,$t)|0,c=c+Math.imul(Zt,jt)|0,p=p+Math.imul(ut,A)|0,f=f+Math.imul(ut,_)|0,f=f+Math.imul(Pt,A)|0,c=c+Math.imul(Pt,_)|0,p=p+Math.imul(H,g)|0,f=f+Math.imul(H,S)|0,f=f+Math.imul(ht,g)|0,c=c+Math.imul(ht,S)|0,p=p+Math.imul(B,N)|0,f=f+Math.imul(B,W)|0,f=f+Math.imul(P,N)|0,c=c+Math.imul(P,W)|0;var Wt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,p=Math.imul(E,ot),f=Math.imul(E,Et),f=f+Math.imul(I,ot)|0,c=Math.imul(I,Et),p=p+Math.imul(It,et)|0,f=f+Math.imul(It,ee)|0,f=f+Math.imul(M,et)|0,c=c+Math.imul(M,ee)|0,p=p+Math.imul(St,Ut)|0,f=f+Math.imul(St,fe)|0,f=f+Math.imul(te,Ut)|0,c=c+Math.imul(te,fe)|0,p=p+Math.imul(Ft,Bt)|0,f=f+Math.imul(Ft,Qt)|0,f=f+Math.imul(Xt,Bt)|0,c=c+Math.imul(Xt,Qt)|0,p=p+Math.imul(Dt,Nt)|0,f=f+Math.imul(Dt,se)|0,f=f+Math.imul(ne,Nt)|0,c=c+Math.imul(ne,se)|0,p=p+Math.imul(_t,$t)|0,f=f+Math.imul(_t,jt)|0,f=f+Math.imul(ie,$t)|0,c=c+Math.imul(ie,jt)|0,p=p+Math.imul(Rt,A)|0,f=f+Math.imul(Rt,_)|0,f=f+Math.imul(Zt,A)|0,c=c+Math.imul(Zt,_)|0,p=p+Math.imul(ut,g)|0,f=f+Math.imul(ut,S)|0,f=f+Math.imul(Pt,g)|0,c=c+Math.imul(Pt,S)|0,p=p+Math.imul(H,N)|0,f=f+Math.imul(H,W)|0,f=f+Math.imul(ht,N)|0,c=c+Math.imul(ht,W)|0;var Vt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,p=Math.imul(E,et),f=Math.imul(E,ee),f=f+Math.imul(I,et)|0,c=Math.imul(I,ee),p=p+Math.imul(It,Ut)|0,f=f+Math.imul(It,fe)|0,f=f+Math.imul(M,Ut)|0,c=c+Math.imul(M,fe)|0,p=p+Math.imul(St,Bt)|0,f=f+Math.imul(St,Qt)|0,f=f+Math.imul(te,Bt)|0,c=c+Math.imul(te,Qt)|0,p=p+Math.imul(Ft,Nt)|0,f=f+Math.imul(Ft,se)|0,f=f+Math.imul(Xt,Nt)|0,c=c+Math.imul(Xt,se)|0,p=p+Math.imul(Dt,$t)|0,f=f+Math.imul(Dt,jt)|0,f=f+Math.imul(ne,$t)|0,c=c+Math.imul(ne,jt)|0,p=p+Math.imul(_t,A)|0,f=f+Math.imul(_t,_)|0,f=f+Math.imul(ie,A)|0,c=c+Math.imul(ie,_)|0,p=p+Math.imul(Rt,g)|0,f=f+Math.imul(Rt,S)|0,f=f+Math.imul(Zt,g)|0,c=c+Math.imul(Zt,S)|0,p=p+Math.imul(ut,N)|0,f=f+Math.imul(ut,W)|0,f=f+Math.imul(Pt,N)|0,c=c+Math.imul(Pt,W)|0;var Ht=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,p=Math.imul(E,Ut),f=Math.imul(E,fe),f=f+Math.imul(I,Ut)|0,c=Math.imul(I,fe),p=p+Math.imul(It,Bt)|0,f=f+Math.imul(It,Qt)|0,f=f+Math.imul(M,Bt)|0,c=c+Math.imul(M,Qt)|0,p=p+Math.imul(St,Nt)|0,f=f+Math.imul(St,se)|0,f=f+Math.imul(te,Nt)|0,c=c+Math.imul(te,se)|0,p=p+Math.imul(Ft,$t)|0,f=f+Math.imul(Ft,jt)|0,f=f+Math.imul(Xt,$t)|0,c=c+Math.imul(Xt,jt)|0,p=p+Math.imul(Dt,A)|0,f=f+Math.imul(Dt,_)|0,f=f+Math.imul(ne,A)|0,c=c+Math.imul(ne,_)|0,p=p+Math.imul(_t,g)|0,f=f+Math.imul(_t,S)|0,f=f+Math.imul(ie,g)|0,c=c+Math.imul(ie,S)|0,p=p+Math.imul(Rt,N)|0,f=f+Math.imul(Rt,W)|0,f=f+Math.imul(Zt,N)|0,c=c+Math.imul(Zt,W)|0;var bt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(bt>>>26)|0,bt&=67108863,p=Math.imul(E,Bt),f=Math.imul(E,Qt),f=f+Math.imul(I,Bt)|0,c=Math.imul(I,Qt),p=p+Math.imul(It,Nt)|0,f=f+Math.imul(It,se)|0,f=f+Math.imul(M,Nt)|0,c=c+Math.imul(M,se)|0,p=p+Math.imul(St,$t)|0,f=f+Math.imul(St,jt)|0,f=f+Math.imul(te,$t)|0,c=c+Math.imul(te,jt)|0,p=p+Math.imul(Ft,A)|0,f=f+Math.imul(Ft,_)|0,f=f+Math.imul(Xt,A)|0,c=c+Math.imul(Xt,_)|0,p=p+Math.imul(Dt,g)|0,f=f+Math.imul(Dt,S)|0,f=f+Math.imul(ne,g)|0,c=c+Math.imul(ne,S)|0,p=p+Math.imul(_t,N)|0,f=f+Math.imul(_t,W)|0,f=f+Math.imul(ie,N)|0,c=c+Math.imul(ie,W)|0;var Tt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,p=Math.imul(E,Nt),f=Math.imul(E,se),f=f+Math.imul(I,Nt)|0,c=Math.imul(I,se),p=p+Math.imul(It,$t)|0,f=f+Math.imul(It,jt)|0,f=f+Math.imul(M,$t)|0,c=c+Math.imul(M,jt)|0,p=p+Math.imul(St,A)|0,f=f+Math.imul(St,_)|0,f=f+Math.imul(te,A)|0,c=c+Math.imul(te,_)|0,p=p+Math.imul(Ft,g)|0,f=f+Math.imul(Ft,S)|0,f=f+Math.imul(Xt,g)|0,c=c+Math.imul(Xt,S)|0,p=p+Math.imul(Dt,N)|0,f=f+Math.imul(Dt,W)|0,f=f+Math.imul(ne,N)|0,c=c+Math.imul(ne,W)|0;var vt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(vt>>>26)|0,vt&=67108863,p=Math.imul(E,$t),f=Math.imul(E,jt),f=f+Math.imul(I,$t)|0,c=Math.imul(I,jt),p=p+Math.imul(It,A)|0,f=f+Math.imul(It,_)|0,f=f+Math.imul(M,A)|0,c=c+Math.imul(M,_)|0,p=p+Math.imul(St,g)|0,f=f+Math.imul(St,S)|0,f=f+Math.imul(te,g)|0,c=c+Math.imul(te,S)|0,p=p+Math.imul(Ft,N)|0,f=f+Math.imul(Ft,W)|0,f=f+Math.imul(Xt,N)|0,c=c+Math.imul(Xt,W)|0;var xt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(xt>>>26)|0,xt&=67108863,p=Math.imul(E,A),f=Math.imul(E,_),f=f+Math.imul(I,A)|0,c=Math.imul(I,_),p=p+Math.imul(It,g)|0,f=f+Math.imul(It,S)|0,f=f+Math.imul(M,g)|0,c=c+Math.imul(M,S)|0,p=p+Math.imul(St,N)|0,f=f+Math.imul(St,W)|0,f=f+Math.imul(te,N)|0,c=c+Math.imul(te,W)|0;var At=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(At>>>26)|0,At&=67108863,p=Math.imul(E,g),f=Math.imul(E,S),f=f+Math.imul(I,g)|0,c=Math.imul(I,S),p=p+Math.imul(It,N)|0,f=f+Math.imul(It,W)|0,f=f+Math.imul(M,N)|0,c=c+Math.imul(M,W)|0;var dt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(dt>>>26)|0,dt&=67108863,p=Math.imul(E,N),f=Math.imul(E,W),f=f+Math.imul(I,N)|0,c=Math.imul(I,W);var V=(w+p|0)+((f&8191)<<13)|0;return w=(c+(f>>>13)|0)+(V>>>26)|0,V&=67108863,v[0]=z,v[1]=at,v[2]=pt,v[3]=le,v[4]=yt,v[5]=kt,v[6]=qt,v[7]=zt,v[8]=Gt,v[9]=Wt,v[10]=Vt,v[11]=Ht,v[12]=bt,v[13]=Tt,v[14]=vt,v[15]=xt,v[16]=At,v[17]=dt,v[18]=V,w!==0&&(v[19]=w,s.length++),s};Math.imul||(st=G);function ft(y,o,l){l.negative=o.negative^y.negative,l.length=y.length+o.length;for(var s=0,h=0,u=0;u<l.length-1;u++){var v=h;h=0;for(var w=s&67108863,p=Math.min(u,o.length-1),f=Math.max(0,u-y.length+1);f<=p;f++){var c=u-f,m=y.words[c]|0,B=o.words[f]|0,P=m*B,j=P&67108863;v=v+(P/67108864|0)|0,j=j+w|0,w=j&67108863,v=v+(j>>>26)|0,h+=v>>>26,v&=67108863}l.words[u]=w,s=v,v=h}return s!==0?l.words[u]=s:l.length--,l.strip()}function it(y,o,l){var s=new lt;return s.mulp(y,o,l)}i.prototype.mulTo=function(o,l){var s,h=this.length+o.length;return this.length===10&&o.length===10?s=st(this,o,l):h<63?s=G(this,o,l):h<1024?s=ft(this,o,l):s=it(this,o,l),s};function lt(y,o){this.x=y,this.y=o}lt.prototype.makeRBT=function(o){for(var l=new Array(o),s=i.prototype._countBits(o)-1,h=0;h<o;h++)l[h]=this.revBin(h,s,o);return l},lt.prototype.revBin=function(o,l,s){if(o===0||o===s-1)return o;for(var h=0,u=0;u<l;u++)h|=(o&1)<<l-u-1,o>>=1;return h},lt.prototype.permute=function(o,l,s,h,u,v){for(var w=0;w<v;w++)h[w]=l[o[w]],u[w]=s[o[w]]},lt.prototype.transform=function(o,l,s,h,u,v){this.permute(v,o,l,s,h,u);for(var w=1;w<u;w<<=1)for(var p=w<<1,f=Math.cos(2*Math.PI/p),c=Math.sin(2*Math.PI/p),m=0;m<u;m+=p)for(var B=f,P=c,j=0;j<w;j++){var H=s[m+j],ht=h[m+j],re=s[m+j+w],ut=h[m+j+w],Pt=B*re-P*ut;ut=B*ut+P*re,re=Pt,s[m+j]=H+re,h[m+j]=ht+ut,s[m+j+w]=H-re,h[m+j+w]=ht-ut,j!==p&&(Pt=f*B-c*P,P=f*P+c*B,B=Pt)}},lt.prototype.guessLen13b=function(o,l){var s=Math.max(l,o)|1,h=s&1,u=0;for(s=s/2|0;s;s=s>>>1)u++;return 1<<u+1+h},lt.prototype.conjugate=function(o,l,s){if(!(s<=1))for(var h=0;h<s/2;h++){var u=o[h];o[h]=o[s-h-1],o[s-h-1]=u,u=l[h],l[h]=-l[s-h-1],l[s-h-1]=-u}},lt.prototype.normalize13b=function(o,l){for(var s=0,h=0;h<l/2;h++){var u=Math.round(o[2*h+1]/l)*8192+Math.round(o[2*h]/l)+s;o[h]=u&67108863,u<67108864?s=0:s=u/67108864|0}return o},lt.prototype.convert13b=function(o,l,s,h){for(var u=0,v=0;v<l;v++)u=u+(o[v]|0),s[2*v]=u&8191,u=u>>>13,s[2*v+1]=u&8191,u=u>>>13;for(v=2*l;v<h;++v)s[v]=0;n(u===0),n((u&-8192)===0)},lt.prototype.stub=function(o){for(var l=new Array(o),s=0;s<o;s++)l[s]=0;return l},lt.prototype.mulp=function(o,l,s){var h=2*this.guessLen13b(o.length,l.length),u=this.makeRBT(h),v=this.stub(h),w=new Array(h),p=new Array(h),f=new Array(h),c=new Array(h),m=new Array(h),B=new Array(h),P=s.words;P.length=h,this.convert13b(o.words,o.length,w,h),this.convert13b(l.words,l.length,c,h),this.transform(w,v,p,f,h,u),this.transform(c,v,m,B,h,u);for(var j=0;j<h;j++){var H=p[j]*m[j]-f[j]*B[j];f[j]=p[j]*B[j]+f[j]*m[j],p[j]=H}return this.conjugate(p,f,h),this.transform(p,f,P,v,h,u),this.conjugate(P,v,h),this.normalize13b(P,h),s.negative=o.negative^l.negative,s.length=o.length+l.length,s.strip()},i.prototype.mul=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},i.prototype.mulf=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),it(this,o,l)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){n(typeof o=="number"),n(o<67108864);for(var l=0,s=0;s<this.length;s++){var h=(this.words[s]|0)*o,u=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=u>>>26,this.words[s]=u&67108863}return l!==0&&(this.words[s]=l,this.length++),this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var l=k(o);if(l.length===0)return new i(1);for(var s=this,h=0;h<l.length&&l[h]===0;h++,s=s.sqr());if(++h<l.length)for(var u=s.sqr();h<l.length;h++,u=u.sqr())l[h]!==0&&(s=s.mul(u));return s},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var l=o%26,s=(o-l)/26,h=67108863>>>26-l<<26-l,u;if(l!==0){var v=0;for(u=0;u<this.length;u++){var w=this.words[u]&h,p=(this.words[u]|0)-w<<l;this.words[u]=p|v,v=w>>>26-l}v&&(this.words[u]=v,this.length++)}if(s!==0){for(u=this.length-1;u>=0;u--)this.words[u+s]=this.words[u];for(u=0;u<s;u++)this.words[u]=0;this.length+=s}return this.strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,l,s){n(typeof o=="number"&&o>=0);var h;l?h=(l-l%26)/26:h=0;var u=o%26,v=Math.min((o-u)/26,this.length),w=67108863^67108863>>>u<<u,p=s;if(h-=v,h=Math.max(0,h),p){for(var f=0;f<v;f++)p.words[f]=this.words[f];p.length=v}if(v!==0)if(this.length>v)for(this.length-=v,f=0;f<this.length;f++)this.words[f]=this.words[f+v];else this.words[0]=0,this.length=1;var c=0;for(f=this.length-1;f>=0&&(c!==0||f>=h);f--){var m=this.words[f]|0;this.words[f]=c<<26-u|m>>>u,c=m&w}return p&&c!==0&&(p.words[p.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,l,s){return n(this.negative===0),this.iushrn(o,l,s)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var l=o%26,s=(o-l)/26,h=1<<l;if(this.length<=s)return!1;var u=this.words[s];return!!(u&h)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var l=o%26,s=(o-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=s)return this;if(l!==0&&s++,this.length=Math.min(s,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,l,s){var h=o.length+s,u;this._expand(h);var v,w=0;for(u=0;u<o.length;u++){v=(this.words[u+s]|0)+w;var p=(o.words[u]|0)*l;v-=p&67108863,w=(v>>26)-(p/67108864|0),this.words[u+s]=v&67108863}for(;u<this.length-s;u++)v=(this.words[u+s]|0)+w,w=v>>26,this.words[u+s]=v&67108863;if(w===0)return this.strip();for(n(w===-1),w=0,u=0;u<this.length;u++)v=-(this.words[u]|0)+w,w=v>>26,this.words[u]=v&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,l){var s=this.length-o.length,h=this.clone(),u=o,v=u.words[u.length-1]|0,w=this._countBits(v);s=26-w,s!==0&&(u=u.ushln(s),h.iushln(s),v=u.words[u.length-1]|0);var p=h.length-u.length,f;if(l!=="mod"){f=new i(null),f.length=p+1,f.words=new Array(f.length);for(var c=0;c<f.length;c++)f.words[c]=0}var m=h.clone()._ishlnsubmul(u,1,p);m.negative===0&&(h=m,f&&(f.words[p]=1));for(var B=p-1;B>=0;B--){var P=(h.words[u.length+B]|0)*67108864+(h.words[u.length+B-1]|0);for(P=Math.min(P/v|0,67108863),h._ishlnsubmul(u,P,B);h.negative!==0;)P--,h.negative=0,h._ishlnsubmul(u,1,B),h.isZero()||(h.negative^=1);f&&(f.words[B]=P)}return f&&f.strip(),h.strip(),l!=="div"&&s!==0&&h.iushrn(s),{div:f||null,mod:h}},i.prototype.divmod=function(o,l,s){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,u,v;return this.negative!==0&&o.negative===0?(v=this.neg().divmod(o,l),l!=="mod"&&(h=v.div.neg()),l!=="div"&&(u=v.mod.neg(),s&&u.negative!==0&&u.iadd(o)),{div:h,mod:u}):this.negative===0&&o.negative!==0?(v=this.divmod(o.neg(),l),l!=="mod"&&(h=v.div.neg()),{div:h,mod:v.mod}):this.negative&o.negative?(v=this.neg().divmod(o.neg(),l),l!=="div"&&(u=v.mod.neg(),s&&u.negative!==0&&u.isub(o)),{div:v.div,mod:u}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?l==="div"?{div:this.divn(o.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,l)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var s=l.div.negative!==0?l.mod.isub(o):l.mod,h=o.ushrn(1),u=o.andln(1),v=s.cmp(h);return v<0||u===1&&v===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(o){n(o<=67108863);for(var l=(1<<26)%o,s=0,h=this.length-1;h>=0;h--)s=(l*s+(this.words[h]|0))%o;return s},i.prototype.idivn=function(o){n(o<=67108863);for(var l=0,s=this.length-1;s>=0;s--){var h=(this.words[s]|0)+l*67108864;this.words[s]=h/o|0,l=h%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var l=this,s=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var h=new i(1),u=new i(0),v=new i(0),w=new i(1),p=0;l.isEven()&&s.isEven();)l.iushrn(1),s.iushrn(1),++p;for(var f=s.clone(),c=l.clone();!l.isZero();){for(var m=0,B=1;!(l.words[0]&B)&&m<26;++m,B<<=1);if(m>0)for(l.iushrn(m);m-- >0;)(h.isOdd()||u.isOdd())&&(h.iadd(f),u.isub(c)),h.iushrn(1),u.iushrn(1);for(var P=0,j=1;!(s.words[0]&j)&&P<26;++P,j<<=1);if(P>0)for(s.iushrn(P);P-- >0;)(v.isOdd()||w.isOdd())&&(v.iadd(f),w.isub(c)),v.iushrn(1),w.iushrn(1);l.cmp(s)>=0?(l.isub(s),h.isub(v),u.isub(w)):(s.isub(l),v.isub(h),w.isub(u))}return{a:v,b:w,gcd:s.iushln(p)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var l=this,s=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var h=new i(1),u=new i(0),v=s.clone();l.cmpn(1)>0&&s.cmpn(1)>0;){for(var w=0,p=1;!(l.words[0]&p)&&w<26;++w,p<<=1);if(w>0)for(l.iushrn(w);w-- >0;)h.isOdd()&&h.iadd(v),h.iushrn(1);for(var f=0,c=1;!(s.words[0]&c)&&f<26;++f,c<<=1);if(f>0)for(s.iushrn(f);f-- >0;)u.isOdd()&&u.iadd(v),u.iushrn(1);l.cmp(s)>=0?(l.isub(s),h.isub(u)):(s.isub(l),u.isub(h))}var m;return l.cmpn(1)===0?m=h:m=u,m.cmpn(0)<0&&m.iadd(o),m},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),s=o.clone();l.negative=0,s.negative=0;for(var h=0;l.isEven()&&s.isEven();h++)l.iushrn(1),s.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;s.isEven();)s.iushrn(1);var u=l.cmp(s);if(u<0){var v=l;l=s,s=v}else if(u===0||s.cmpn(1)===0)break;l.isub(s)}while(!0);return s.iushln(h)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var l=o%26,s=(o-l)/26,h=1<<l;if(this.length<=s)return this._expand(s+1),this.words[s]|=h,this;for(var u=h,v=s;u!==0&&v<this.length;v++){var w=this.words[v]|0;w+=u,u=w>>>26,w&=67108863,this.words[v]=w}return u!==0&&(this.words[v]=u,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var l=o<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var s;if(this.length>1)s=1;else{l&&(o=-o),n(o<=67108863,"Number is too big");var h=this.words[0]|0;s=h===o?0:h<o?-1:1}return this.negative!==0?-s|0:s},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var l=this.ucmp(o);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,s=this.length-1;s>=0;s--){var h=this.words[s]|0,u=o.words[s]|0;if(h!==u){h<u?l=-1:h>u&&(l=1);break}}return l},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new ct(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var wt={k256:null,p224:null,p192:null,p25519:null};function tt(y,o){this.name=y,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}tt.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},tt.prototype.ireduce=function(o){var l=o,s;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),s=l.bitLength();while(s>this.n);var h=s<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip(),l},tt.prototype.split=function(o,l){o.iushrn(this.n,0,l)},tt.prototype.imulK=function(o){return o.imul(this.k)};function K(){tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(K,tt),K.prototype.split=function(o,l){for(var s=4194303,h=Math.min(o.length,9),u=0;u<h;u++)l.words[u]=o.words[u];if(l.length=h,o.length<=9){o.words[0]=0,o.length=1;return}var v=o.words[9];for(l.words[l.length++]=v&s,u=10;u<o.length;u++){var w=o.words[u]|0;o.words[u-10]=(w&s)<<4|v>>>22,v=w}v>>>=22,o.words[u-10]=v,v===0&&o.length>10?o.length-=10:o.length-=9},K.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,s=0;s<o.length;s++){var h=o.words[s]|0;l+=h*977,o.words[s]=l&67108863,l=h*64+(l/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function Q(){tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(Q,tt);function mt(){tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(mt,tt);function Ct(){tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(Ct,tt),Ct.prototype.imulK=function(o){for(var l=0,s=0;s<o.length;s++){var h=(o.words[s]|0)*19+l,u=h&67108863;h>>>=26,o.words[s]=u,l=h}return l!==0&&(o.words[o.length++]=l),o},i._prime=function(o){if(wt[o])return wt[o];var l;if(o==="k256")l=new K;else if(o==="p224")l=new Q;else if(o==="p192")l=new mt;else if(o==="p25519")l=new Ct;else throw new Error("Unknown prime "+o);return wt[o]=l,l};function ct(y){if(typeof y=="string"){var o=i._prime(y);this.m=o.p,this.prime=o}else n(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}ct.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},ct.prototype._verify2=function(o,l){n((o.negative|l.negative)===0,"red works only with positives"),n(o.red&&o.red===l.red,"red works only with red numbers")},ct.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},ct.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},ct.prototype.add=function(o,l){this._verify2(o,l);var s=o.add(l);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},ct.prototype.iadd=function(o,l){this._verify2(o,l);var s=o.iadd(l);return s.cmp(this.m)>=0&&s.isub(this.m),s},ct.prototype.sub=function(o,l){this._verify2(o,l);var s=o.sub(l);return s.cmpn(0)<0&&s.iadd(this.m),s._forceRed(this)},ct.prototype.isub=function(o,l){this._verify2(o,l);var s=o.isub(l);return s.cmpn(0)<0&&s.iadd(this.m),s},ct.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},ct.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},ct.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},ct.prototype.isqr=function(o){return this.imul(o,o.clone())},ct.prototype.sqr=function(o){return this.mul(o,o)},ct.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var s=this.m.add(new i(1)).iushrn(2);return this.pow(o,s)}for(var h=this.m.subn(1),u=0;!h.isZero()&&h.andln(1)===0;)u++,h.iushrn(1);n(!h.isZero());var v=new i(1).toRed(this),w=v.redNeg(),p=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,p).cmp(w)!==0;)f.redIAdd(w);for(var c=this.pow(f,h),m=this.pow(o,h.addn(1).iushrn(1)),B=this.pow(o,h),P=u;B.cmp(v)!==0;){for(var j=B,H=0;j.cmp(v)!==0;H++)j=j.redSqr();n(H<P);var ht=this.pow(c,new i(1).iushln(P-H-1));m=m.redMul(ht),c=ht.redSqr(),B=B.redMul(c),P=H}return m},ct.prototype.invm=function(o){var l=o._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},ct.prototype.pow=function(o,l){if(l.isZero())return new i(1);if(l.cmpn(1)===0)return o.clone();var s=4,h=new Array(1<<s);h[0]=new i(1).toRed(this),h[1]=o;for(var u=2;u<h.length;u++)h[u]=this.mul(h[u-1],o);var v=h[0],w=0,p=0,f=l.bitLength()%26;for(f===0&&(f=26),u=l.length-1;u>=0;u--){for(var c=l.words[u],m=f-1;m>=0;m--){var B=c>>m&1;if(v!==h[0]&&(v=this.sqr(v)),B===0&&w===0){p=0;continue}w<<=1,w|=B,p++,!(p!==s&&(u!==0||m!==0))&&(v=this.mul(v,h[w]),p=0,w=0)}f=26}return v},ct.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},ct.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},i.mont=function(o){return new Kt(o)};function Kt(y){ct.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(Kt,ct),Kt.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Kt.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},Kt.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var s=o.imul(l),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=s.isub(h).iushrn(this.shift),v=u;return u.cmp(this.m)>=0?v=u.isub(this.m):u.cmpn(0)<0&&(v=u.iadd(this.m)),v._forceRed(this)},Kt.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new i(0)._forceRed(this);var s=o.mul(l),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=s.isub(h).iushrn(this.shift),v=u;return u.cmp(this.m)>=0?v=u.isub(this.m):u.cmpn(0)<0&&(v=u.iadd(this.m)),v._forceRed(this)},Kt.prototype.invm=function(o){var l=this.imod(o._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,qr)})(oo);var ju=oo.exports,ao={exports:{}};ao.exports;(function(r){(function(t,e){function n(y,o){if(!y)throw new Error(o||"Assertion failed")}function a(y,o){y.super_=o;var l=function(){};l.prototype=o.prototype,y.prototype=new l,y.prototype.constructor=y}function i(y,o,l){if(i.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((o==="le"||o==="be")&&(l=o,o=10),this._init(y||0,o||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var d;try{d=so("buffer").Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,l){return o.cmp(l)>0?o:l},i.min=function(o,l){return o.cmp(l)<0?o:l},i.prototype._init=function(o,l,s){if(typeof o=="number")return this._initNumber(o,l,s);if(typeof o=="object")return this._initArray(o,l,s);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),o=o.toString().replace(/\s+/g,"");var h=0;o[0]==="-"&&h++,l===16?this._parseHex(o,h):this._parseBase(o,l,h),o[0]==="-"&&(this.negative=1),this.strip(),s==="le"&&this._initArray(this.toArray(),l,s)},i.prototype._initNumber=function(o,l,s){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),s==="le"&&this._initArray(this.toArray(),l,s)},i.prototype._initArray=function(o,l,s){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var u,v,w=0;if(s==="be")for(h=o.length-1,u=0;h>=0;h-=3)v=o[h]|o[h-1]<<8|o[h-2]<<16,this.words[u]|=v<<w&67108863,this.words[u+1]=v>>>26-w&67108863,w+=24,w>=26&&(w-=26,u++);else if(s==="le")for(h=0,u=0;h<o.length;h+=3)v=o[h]|o[h+1]<<8|o[h+2]<<16,this.words[u]|=v<<w&67108863,this.words[u+1]=v>>>26-w&67108863,w+=24,w>=26&&(w-=26,u++);return this.strip()};function b(y,o,l){for(var s=0,h=Math.min(y.length,l),u=o;u<h;u++){var v=y.charCodeAt(u)-48;s<<=4,v>=49&&v<=54?s|=v-49+10:v>=17&&v<=22?s|=v-17+10:s|=v&15}return s}i.prototype._parseHex=function(o,l){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var h,u,v=0;for(s=o.length-6,h=0;s>=l;s-=6)u=b(o,s,s+6),this.words[h]|=u<<v&67108863,this.words[h+1]|=u>>>26-v&4194303,v+=24,v>=26&&(v-=26,h++);s+6!==l&&(u=b(o,l,s+6),this.words[h]|=u<<v&67108863,this.words[h+1]|=u>>>26-v&4194303),this.strip()};function C(y,o,l,s){for(var h=0,u=Math.min(y.length,l),v=o;v<u;v++){var w=y.charCodeAt(v)-48;h*=s,w>=49?h+=w-49+10:w>=17?h+=w-17+10:h+=w}return h}i.prototype._parseBase=function(o,l,s){this.words=[0],this.length=1;for(var h=0,u=1;u<=67108863;u*=l)h++;h--,u=u/l|0;for(var v=o.length-s,w=v%h,p=Math.min(v,v-w)+s,f=0,c=s;c<p;c+=h)f=C(o,c,c+h,l),this.imuln(u),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(w!==0){var m=1;for(f=C(o,c,o.length,l),c=0;c<w;c++)m*=l;this.imuln(m),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}},i.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var D=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],T=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,l){o=o||10,l=l|0||1;var s;if(o===16||o==="hex"){s="";for(var h=0,u=0,v=0;v<this.length;v++){var w=this.words[v],p=((w<<h|u)&16777215).toString(16);u=w>>>24-h&16777215,u!==0||v!==this.length-1?s=D[6-p.length]+p+s:s=p+s,h+=2,h>=26&&(h-=26,v--)}for(u!==0&&(s=u.toString(16)+s);s.length%l!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}if(o===(o|0)&&o>=2&&o<=36){var f=T[o],c=O[o];s="";var m=this.clone();for(m.negative=0;!m.isZero();){var B=m.modn(c).toString(o);m=m.idivn(c),m.isZero()?s=B+s:s=D[f-B.length]+B+s}for(this.isZero()&&(s="0"+s);s.length%l!==0;)s="0"+s;return this.negative!==0&&(s="-"+s),s}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,l){return n(typeof d<"u"),this.toArrayLike(d,o,l)},i.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)},i.prototype.toArrayLike=function(o,l,s){var h=this.byteLength(),u=s||Math.max(1,h);n(h<=u,"byte array longer than desired length"),n(u>0,"Requested array length <= 0"),this.strip();var v=l==="le",w=new o(u),p,f,c=this.clone();if(v){for(f=0;!c.isZero();f++)p=c.andln(255),c.iushrn(8),w[f]=p;for(;f<u;f++)w[f]=0}else{for(f=0;f<u-h;f++)w[f]=0;for(f=0;!c.isZero();f++)p=c.andln(255),c.iushrn(8),w[u-f-1]=p}return w},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var l=o,s=0;return l>=4096&&(s+=13,l>>>=13),l>=64&&(s+=7,l>>>=7),l>=8&&(s+=4,l>>>=4),l>=2&&(s+=2,l>>>=2),s+l},i.prototype._zeroBits=function(o){if(o===0)return 26;var l=o,s=0;return l&8191||(s+=13,l>>>=13),l&127||(s+=7,l>>>=7),l&15||(s+=4,l>>>=4),l&3||(s+=2,l>>>=2),l&1||s++,s},i.prototype.bitLength=function(){var o=this.words[this.length-1],l=this._countBits(o);return(this.length-1)*26+l};function k(y){for(var o=new Array(y.bitLength()),l=0;l<o.length;l++){var s=l/26|0,h=l%26;o[l]=(y.words[s]&1<<h)>>>h}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var s=this._zeroBits(this.words[l]);if(o+=s,s!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this.strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var l;this.length>o.length?l=o:l=this;for(var s=0;s<l.length;s++)this.words[s]=this.words[s]&o.words[s];return this.length=l.length,this.strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var l,s;this.length>o.length?(l=this,s=o):(l=o,s=this);for(var h=0;h<s.length;h++)this.words[h]=l.words[h]^s.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var l=Math.ceil(o/26)|0,s=o%26;this._expand(l),s>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return s>0&&(this.words[h]=~this.words[h]&67108863>>26-s),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,l){n(typeof o=="number"&&o>=0);var s=o/26|0,h=o%26;return this._expand(s+1),l?this.words[s]=this.words[s]|1<<h:this.words[s]=this.words[s]&~(1<<h),this.strip()},i.prototype.iadd=function(o){var l;if(this.negative!==0&&o.negative===0)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();var s,h;this.length>o.length?(s=this,h=o):(s=o,h=this);for(var u=0,v=0;v<h.length;v++)l=(s.words[v]|0)+(h.words[v]|0)+u,this.words[v]=l&67108863,u=l>>>26;for(;u!==0&&v<s.length;v++)l=(s.words[v]|0)+u,this.words[v]=l&67108863,u=l>>>26;if(this.length=s.length,u!==0)this.words[this.length]=u,this.length++;else if(s!==this)for(;v<s.length;v++)this.words[v]=s.words[v];return this},i.prototype.add=function(o){var l;return o.negative!==0&&this.negative===0?(o.negative=0,l=this.sub(o),o.negative^=1,l):o.negative===0&&this.negative!==0?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var s=this.cmp(o);if(s===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,u;s>0?(h=this,u=o):(h=o,u=this);for(var v=0,w=0;w<u.length;w++)l=(h.words[w]|0)-(u.words[w]|0)+v,v=l>>26,this.words[w]=l&67108863;for(;v!==0&&w<h.length;w++)l=(h.words[w]|0)+v,v=l>>26,this.words[w]=l&67108863;if(v===0&&w<h.length&&h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=Math.max(this.length,w),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function G(y,o,l){l.negative=o.negative^y.negative;var s=y.length+o.length|0;l.length=s,s=s-1|0;var h=y.words[0]|0,u=o.words[0]|0,v=h*u,w=v&67108863,p=v/67108864|0;l.words[0]=w;for(var f=1;f<s;f++){for(var c=p>>>26,m=p&67108863,B=Math.min(f,o.length-1),P=Math.max(0,f-y.length+1);P<=B;P++){var j=f-P|0;h=y.words[j]|0,u=o.words[P]|0,v=h*u+m,c+=v/67108864|0,m=v&67108863}l.words[f]=m|0,p=c|0}return p!==0?l.words[f]=p|0:l.length--,l.strip()}var st=function(o,l,s){var h=o.words,u=l.words,v=s.words,w=0,p,f,c,m=h[0]|0,B=m&8191,P=m>>>13,j=h[1]|0,H=j&8191,ht=j>>>13,re=h[2]|0,ut=re&8191,Pt=re>>>13,Ae=h[3]|0,Rt=Ae&8191,Zt=Ae>>>13,xe=h[4]|0,_t=xe&8191,ie=xe>>>13,Se=h[5]|0,Dt=Se&8191,ne=Se>>>13,Ee=h[6]|0,Ft=Ee&8191,Xt=Ee>>>13,de=h[7]|0,St=de&8191,te=de>>>13,ye=h[8]|0,It=ye&8191,M=ye>>>13,x=h[9]|0,E=x&8191,I=x>>>13,U=u[0]|0,$=U&8191,q=U>>>13,Mt=u[1]|0,ot=Mt&8191,Et=Mt>>>13,Yt=u[2]|0,et=Yt&8191,ee=Yt>>>13,De=u[3]|0,Ut=De&8191,fe=De>>>13,Ne=u[4]|0,Bt=Ne&8191,Qt=Ne>>>13,Me=u[5]|0,Nt=Me&8191,se=Me>>>13,Ie=u[6]|0,$t=Ie&8191,jt=Ie>>>13,Te=u[7]|0,A=Te&8191,_=Te>>>13,F=u[8]|0,g=F&8191,S=F>>>13,L=u[9]|0,N=L&8191,W=L>>>13;s.negative=o.negative^l.negative,s.length=19,p=Math.imul(B,$),f=Math.imul(B,q),f=f+Math.imul(P,$)|0,c=Math.imul(P,q);var z=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(z>>>26)|0,z&=67108863,p=Math.imul(H,$),f=Math.imul(H,q),f=f+Math.imul(ht,$)|0,c=Math.imul(ht,q),p=p+Math.imul(B,ot)|0,f=f+Math.imul(B,Et)|0,f=f+Math.imul(P,ot)|0,c=c+Math.imul(P,Et)|0;var at=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(at>>>26)|0,at&=67108863,p=Math.imul(ut,$),f=Math.imul(ut,q),f=f+Math.imul(Pt,$)|0,c=Math.imul(Pt,q),p=p+Math.imul(H,ot)|0,f=f+Math.imul(H,Et)|0,f=f+Math.imul(ht,ot)|0,c=c+Math.imul(ht,Et)|0,p=p+Math.imul(B,et)|0,f=f+Math.imul(B,ee)|0,f=f+Math.imul(P,et)|0,c=c+Math.imul(P,ee)|0;var pt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(pt>>>26)|0,pt&=67108863,p=Math.imul(Rt,$),f=Math.imul(Rt,q),f=f+Math.imul(Zt,$)|0,c=Math.imul(Zt,q),p=p+Math.imul(ut,ot)|0,f=f+Math.imul(ut,Et)|0,f=f+Math.imul(Pt,ot)|0,c=c+Math.imul(Pt,Et)|0,p=p+Math.imul(H,et)|0,f=f+Math.imul(H,ee)|0,f=f+Math.imul(ht,et)|0,c=c+Math.imul(ht,ee)|0,p=p+Math.imul(B,Ut)|0,f=f+Math.imul(B,fe)|0,f=f+Math.imul(P,Ut)|0,c=c+Math.imul(P,fe)|0;var le=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(le>>>26)|0,le&=67108863,p=Math.imul(_t,$),f=Math.imul(_t,q),f=f+Math.imul(ie,$)|0,c=Math.imul(ie,q),p=p+Math.imul(Rt,ot)|0,f=f+Math.imul(Rt,Et)|0,f=f+Math.imul(Zt,ot)|0,c=c+Math.imul(Zt,Et)|0,p=p+Math.imul(ut,et)|0,f=f+Math.imul(ut,ee)|0,f=f+Math.imul(Pt,et)|0,c=c+Math.imul(Pt,ee)|0,p=p+Math.imul(H,Ut)|0,f=f+Math.imul(H,fe)|0,f=f+Math.imul(ht,Ut)|0,c=c+Math.imul(ht,fe)|0,p=p+Math.imul(B,Bt)|0,f=f+Math.imul(B,Qt)|0,f=f+Math.imul(P,Bt)|0,c=c+Math.imul(P,Qt)|0;var yt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(yt>>>26)|0,yt&=67108863,p=Math.imul(Dt,$),f=Math.imul(Dt,q),f=f+Math.imul(ne,$)|0,c=Math.imul(ne,q),p=p+Math.imul(_t,ot)|0,f=f+Math.imul(_t,Et)|0,f=f+Math.imul(ie,ot)|0,c=c+Math.imul(ie,Et)|0,p=p+Math.imul(Rt,et)|0,f=f+Math.imul(Rt,ee)|0,f=f+Math.imul(Zt,et)|0,c=c+Math.imul(Zt,ee)|0,p=p+Math.imul(ut,Ut)|0,f=f+Math.imul(ut,fe)|0,f=f+Math.imul(Pt,Ut)|0,c=c+Math.imul(Pt,fe)|0,p=p+Math.imul(H,Bt)|0,f=f+Math.imul(H,Qt)|0,f=f+Math.imul(ht,Bt)|0,c=c+Math.imul(ht,Qt)|0,p=p+Math.imul(B,Nt)|0,f=f+Math.imul(B,se)|0,f=f+Math.imul(P,Nt)|0,c=c+Math.imul(P,se)|0;var kt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(kt>>>26)|0,kt&=67108863,p=Math.imul(Ft,$),f=Math.imul(Ft,q),f=f+Math.imul(Xt,$)|0,c=Math.imul(Xt,q),p=p+Math.imul(Dt,ot)|0,f=f+Math.imul(Dt,Et)|0,f=f+Math.imul(ne,ot)|0,c=c+Math.imul(ne,Et)|0,p=p+Math.imul(_t,et)|0,f=f+Math.imul(_t,ee)|0,f=f+Math.imul(ie,et)|0,c=c+Math.imul(ie,ee)|0,p=p+Math.imul(Rt,Ut)|0,f=f+Math.imul(Rt,fe)|0,f=f+Math.imul(Zt,Ut)|0,c=c+Math.imul(Zt,fe)|0,p=p+Math.imul(ut,Bt)|0,f=f+Math.imul(ut,Qt)|0,f=f+Math.imul(Pt,Bt)|0,c=c+Math.imul(Pt,Qt)|0,p=p+Math.imul(H,Nt)|0,f=f+Math.imul(H,se)|0,f=f+Math.imul(ht,Nt)|0,c=c+Math.imul(ht,se)|0,p=p+Math.imul(B,$t)|0,f=f+Math.imul(B,jt)|0,f=f+Math.imul(P,$t)|0,c=c+Math.imul(P,jt)|0;var qt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(qt>>>26)|0,qt&=67108863,p=Math.imul(St,$),f=Math.imul(St,q),f=f+Math.imul(te,$)|0,c=Math.imul(te,q),p=p+Math.imul(Ft,ot)|0,f=f+Math.imul(Ft,Et)|0,f=f+Math.imul(Xt,ot)|0,c=c+Math.imul(Xt,Et)|0,p=p+Math.imul(Dt,et)|0,f=f+Math.imul(Dt,ee)|0,f=f+Math.imul(ne,et)|0,c=c+Math.imul(ne,ee)|0,p=p+Math.imul(_t,Ut)|0,f=f+Math.imul(_t,fe)|0,f=f+Math.imul(ie,Ut)|0,c=c+Math.imul(ie,fe)|0,p=p+Math.imul(Rt,Bt)|0,f=f+Math.imul(Rt,Qt)|0,f=f+Math.imul(Zt,Bt)|0,c=c+Math.imul(Zt,Qt)|0,p=p+Math.imul(ut,Nt)|0,f=f+Math.imul(ut,se)|0,f=f+Math.imul(Pt,Nt)|0,c=c+Math.imul(Pt,se)|0,p=p+Math.imul(H,$t)|0,f=f+Math.imul(H,jt)|0,f=f+Math.imul(ht,$t)|0,c=c+Math.imul(ht,jt)|0,p=p+Math.imul(B,A)|0,f=f+Math.imul(B,_)|0,f=f+Math.imul(P,A)|0,c=c+Math.imul(P,_)|0;var zt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(zt>>>26)|0,zt&=67108863,p=Math.imul(It,$),f=Math.imul(It,q),f=f+Math.imul(M,$)|0,c=Math.imul(M,q),p=p+Math.imul(St,ot)|0,f=f+Math.imul(St,Et)|0,f=f+Math.imul(te,ot)|0,c=c+Math.imul(te,Et)|0,p=p+Math.imul(Ft,et)|0,f=f+Math.imul(Ft,ee)|0,f=f+Math.imul(Xt,et)|0,c=c+Math.imul(Xt,ee)|0,p=p+Math.imul(Dt,Ut)|0,f=f+Math.imul(Dt,fe)|0,f=f+Math.imul(ne,Ut)|0,c=c+Math.imul(ne,fe)|0,p=p+Math.imul(_t,Bt)|0,f=f+Math.imul(_t,Qt)|0,f=f+Math.imul(ie,Bt)|0,c=c+Math.imul(ie,Qt)|0,p=p+Math.imul(Rt,Nt)|0,f=f+Math.imul(Rt,se)|0,f=f+Math.imul(Zt,Nt)|0,c=c+Math.imul(Zt,se)|0,p=p+Math.imul(ut,$t)|0,f=f+Math.imul(ut,jt)|0,f=f+Math.imul(Pt,$t)|0,c=c+Math.imul(Pt,jt)|0,p=p+Math.imul(H,A)|0,f=f+Math.imul(H,_)|0,f=f+Math.imul(ht,A)|0,c=c+Math.imul(ht,_)|0,p=p+Math.imul(B,g)|0,f=f+Math.imul(B,S)|0,f=f+Math.imul(P,g)|0,c=c+Math.imul(P,S)|0;var Gt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,p=Math.imul(E,$),f=Math.imul(E,q),f=f+Math.imul(I,$)|0,c=Math.imul(I,q),p=p+Math.imul(It,ot)|0,f=f+Math.imul(It,Et)|0,f=f+Math.imul(M,ot)|0,c=c+Math.imul(M,Et)|0,p=p+Math.imul(St,et)|0,f=f+Math.imul(St,ee)|0,f=f+Math.imul(te,et)|0,c=c+Math.imul(te,ee)|0,p=p+Math.imul(Ft,Ut)|0,f=f+Math.imul(Ft,fe)|0,f=f+Math.imul(Xt,Ut)|0,c=c+Math.imul(Xt,fe)|0,p=p+Math.imul(Dt,Bt)|0,f=f+Math.imul(Dt,Qt)|0,f=f+Math.imul(ne,Bt)|0,c=c+Math.imul(ne,Qt)|0,p=p+Math.imul(_t,Nt)|0,f=f+Math.imul(_t,se)|0,f=f+Math.imul(ie,Nt)|0,c=c+Math.imul(ie,se)|0,p=p+Math.imul(Rt,$t)|0,f=f+Math.imul(Rt,jt)|0,f=f+Math.imul(Zt,$t)|0,c=c+Math.imul(Zt,jt)|0,p=p+Math.imul(ut,A)|0,f=f+Math.imul(ut,_)|0,f=f+Math.imul(Pt,A)|0,c=c+Math.imul(Pt,_)|0,p=p+Math.imul(H,g)|0,f=f+Math.imul(H,S)|0,f=f+Math.imul(ht,g)|0,c=c+Math.imul(ht,S)|0,p=p+Math.imul(B,N)|0,f=f+Math.imul(B,W)|0,f=f+Math.imul(P,N)|0,c=c+Math.imul(P,W)|0;var Wt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,p=Math.imul(E,ot),f=Math.imul(E,Et),f=f+Math.imul(I,ot)|0,c=Math.imul(I,Et),p=p+Math.imul(It,et)|0,f=f+Math.imul(It,ee)|0,f=f+Math.imul(M,et)|0,c=c+Math.imul(M,ee)|0,p=p+Math.imul(St,Ut)|0,f=f+Math.imul(St,fe)|0,f=f+Math.imul(te,Ut)|0,c=c+Math.imul(te,fe)|0,p=p+Math.imul(Ft,Bt)|0,f=f+Math.imul(Ft,Qt)|0,f=f+Math.imul(Xt,Bt)|0,c=c+Math.imul(Xt,Qt)|0,p=p+Math.imul(Dt,Nt)|0,f=f+Math.imul(Dt,se)|0,f=f+Math.imul(ne,Nt)|0,c=c+Math.imul(ne,se)|0,p=p+Math.imul(_t,$t)|0,f=f+Math.imul(_t,jt)|0,f=f+Math.imul(ie,$t)|0,c=c+Math.imul(ie,jt)|0,p=p+Math.imul(Rt,A)|0,f=f+Math.imul(Rt,_)|0,f=f+Math.imul(Zt,A)|0,c=c+Math.imul(Zt,_)|0,p=p+Math.imul(ut,g)|0,f=f+Math.imul(ut,S)|0,f=f+Math.imul(Pt,g)|0,c=c+Math.imul(Pt,S)|0,p=p+Math.imul(H,N)|0,f=f+Math.imul(H,W)|0,f=f+Math.imul(ht,N)|0,c=c+Math.imul(ht,W)|0;var Vt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,p=Math.imul(E,et),f=Math.imul(E,ee),f=f+Math.imul(I,et)|0,c=Math.imul(I,ee),p=p+Math.imul(It,Ut)|0,f=f+Math.imul(It,fe)|0,f=f+Math.imul(M,Ut)|0,c=c+Math.imul(M,fe)|0,p=p+Math.imul(St,Bt)|0,f=f+Math.imul(St,Qt)|0,f=f+Math.imul(te,Bt)|0,c=c+Math.imul(te,Qt)|0,p=p+Math.imul(Ft,Nt)|0,f=f+Math.imul(Ft,se)|0,f=f+Math.imul(Xt,Nt)|0,c=c+Math.imul(Xt,se)|0,p=p+Math.imul(Dt,$t)|0,f=f+Math.imul(Dt,jt)|0,f=f+Math.imul(ne,$t)|0,c=c+Math.imul(ne,jt)|0,p=p+Math.imul(_t,A)|0,f=f+Math.imul(_t,_)|0,f=f+Math.imul(ie,A)|0,c=c+Math.imul(ie,_)|0,p=p+Math.imul(Rt,g)|0,f=f+Math.imul(Rt,S)|0,f=f+Math.imul(Zt,g)|0,c=c+Math.imul(Zt,S)|0,p=p+Math.imul(ut,N)|0,f=f+Math.imul(ut,W)|0,f=f+Math.imul(Pt,N)|0,c=c+Math.imul(Pt,W)|0;var Ht=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,p=Math.imul(E,Ut),f=Math.imul(E,fe),f=f+Math.imul(I,Ut)|0,c=Math.imul(I,fe),p=p+Math.imul(It,Bt)|0,f=f+Math.imul(It,Qt)|0,f=f+Math.imul(M,Bt)|0,c=c+Math.imul(M,Qt)|0,p=p+Math.imul(St,Nt)|0,f=f+Math.imul(St,se)|0,f=f+Math.imul(te,Nt)|0,c=c+Math.imul(te,se)|0,p=p+Math.imul(Ft,$t)|0,f=f+Math.imul(Ft,jt)|0,f=f+Math.imul(Xt,$t)|0,c=c+Math.imul(Xt,jt)|0,p=p+Math.imul(Dt,A)|0,f=f+Math.imul(Dt,_)|0,f=f+Math.imul(ne,A)|0,c=c+Math.imul(ne,_)|0,p=p+Math.imul(_t,g)|0,f=f+Math.imul(_t,S)|0,f=f+Math.imul(ie,g)|0,c=c+Math.imul(ie,S)|0,p=p+Math.imul(Rt,N)|0,f=f+Math.imul(Rt,W)|0,f=f+Math.imul(Zt,N)|0,c=c+Math.imul(Zt,W)|0;var bt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(bt>>>26)|0,bt&=67108863,p=Math.imul(E,Bt),f=Math.imul(E,Qt),f=f+Math.imul(I,Bt)|0,c=Math.imul(I,Qt),p=p+Math.imul(It,Nt)|0,f=f+Math.imul(It,se)|0,f=f+Math.imul(M,Nt)|0,c=c+Math.imul(M,se)|0,p=p+Math.imul(St,$t)|0,f=f+Math.imul(St,jt)|0,f=f+Math.imul(te,$t)|0,c=c+Math.imul(te,jt)|0,p=p+Math.imul(Ft,A)|0,f=f+Math.imul(Ft,_)|0,f=f+Math.imul(Xt,A)|0,c=c+Math.imul(Xt,_)|0,p=p+Math.imul(Dt,g)|0,f=f+Math.imul(Dt,S)|0,f=f+Math.imul(ne,g)|0,c=c+Math.imul(ne,S)|0,p=p+Math.imul(_t,N)|0,f=f+Math.imul(_t,W)|0,f=f+Math.imul(ie,N)|0,c=c+Math.imul(ie,W)|0;var Tt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,p=Math.imul(E,Nt),f=Math.imul(E,se),f=f+Math.imul(I,Nt)|0,c=Math.imul(I,se),p=p+Math.imul(It,$t)|0,f=f+Math.imul(It,jt)|0,f=f+Math.imul(M,$t)|0,c=c+Math.imul(M,jt)|0,p=p+Math.imul(St,A)|0,f=f+Math.imul(St,_)|0,f=f+Math.imul(te,A)|0,c=c+Math.imul(te,_)|0,p=p+Math.imul(Ft,g)|0,f=f+Math.imul(Ft,S)|0,f=f+Math.imul(Xt,g)|0,c=c+Math.imul(Xt,S)|0,p=p+Math.imul(Dt,N)|0,f=f+Math.imul(Dt,W)|0,f=f+Math.imul(ne,N)|0,c=c+Math.imul(ne,W)|0;var vt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(vt>>>26)|0,vt&=67108863,p=Math.imul(E,$t),f=Math.imul(E,jt),f=f+Math.imul(I,$t)|0,c=Math.imul(I,jt),p=p+Math.imul(It,A)|0,f=f+Math.imul(It,_)|0,f=f+Math.imul(M,A)|0,c=c+Math.imul(M,_)|0,p=p+Math.imul(St,g)|0,f=f+Math.imul(St,S)|0,f=f+Math.imul(te,g)|0,c=c+Math.imul(te,S)|0,p=p+Math.imul(Ft,N)|0,f=f+Math.imul(Ft,W)|0,f=f+Math.imul(Xt,N)|0,c=c+Math.imul(Xt,W)|0;var xt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(xt>>>26)|0,xt&=67108863,p=Math.imul(E,A),f=Math.imul(E,_),f=f+Math.imul(I,A)|0,c=Math.imul(I,_),p=p+Math.imul(It,g)|0,f=f+Math.imul(It,S)|0,f=f+Math.imul(M,g)|0,c=c+Math.imul(M,S)|0,p=p+Math.imul(St,N)|0,f=f+Math.imul(St,W)|0,f=f+Math.imul(te,N)|0,c=c+Math.imul(te,W)|0;var At=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(At>>>26)|0,At&=67108863,p=Math.imul(E,g),f=Math.imul(E,S),f=f+Math.imul(I,g)|0,c=Math.imul(I,S),p=p+Math.imul(It,N)|0,f=f+Math.imul(It,W)|0,f=f+Math.imul(M,N)|0,c=c+Math.imul(M,W)|0;var dt=(w+p|0)+((f&8191)<<13)|0;w=(c+(f>>>13)|0)+(dt>>>26)|0,dt&=67108863,p=Math.imul(E,N),f=Math.imul(E,W),f=f+Math.imul(I,N)|0,c=Math.imul(I,W);var V=(w+p|0)+((f&8191)<<13)|0;return w=(c+(f>>>13)|0)+(V>>>26)|0,V&=67108863,v[0]=z,v[1]=at,v[2]=pt,v[3]=le,v[4]=yt,v[5]=kt,v[6]=qt,v[7]=zt,v[8]=Gt,v[9]=Wt,v[10]=Vt,v[11]=Ht,v[12]=bt,v[13]=Tt,v[14]=vt,v[15]=xt,v[16]=At,v[17]=dt,v[18]=V,w!==0&&(v[19]=w,s.length++),s};Math.imul||(st=G);function ft(y,o,l){l.negative=o.negative^y.negative,l.length=y.length+o.length;for(var s=0,h=0,u=0;u<l.length-1;u++){var v=h;h=0;for(var w=s&67108863,p=Math.min(u,o.length-1),f=Math.max(0,u-y.length+1);f<=p;f++){var c=u-f,m=y.words[c]|0,B=o.words[f]|0,P=m*B,j=P&67108863;v=v+(P/67108864|0)|0,j=j+w|0,w=j&67108863,v=v+(j>>>26)|0,h+=v>>>26,v&=67108863}l.words[u]=w,s=v,v=h}return s!==0?l.words[u]=s:l.length--,l.strip()}function it(y,o,l){var s=new lt;return s.mulp(y,o,l)}i.prototype.mulTo=function(o,l){var s,h=this.length+o.length;return this.length===10&&o.length===10?s=st(this,o,l):h<63?s=G(this,o,l):h<1024?s=ft(this,o,l):s=it(this,o,l),s};function lt(y,o){this.x=y,this.y=o}lt.prototype.makeRBT=function(o){for(var l=new Array(o),s=i.prototype._countBits(o)-1,h=0;h<o;h++)l[h]=this.revBin(h,s,o);return l},lt.prototype.revBin=function(o,l,s){if(o===0||o===s-1)return o;for(var h=0,u=0;u<l;u++)h|=(o&1)<<l-u-1,o>>=1;return h},lt.prototype.permute=function(o,l,s,h,u,v){for(var w=0;w<v;w++)h[w]=l[o[w]],u[w]=s[o[w]]},lt.prototype.transform=function(o,l,s,h,u,v){this.permute(v,o,l,s,h,u);for(var w=1;w<u;w<<=1)for(var p=w<<1,f=Math.cos(2*Math.PI/p),c=Math.sin(2*Math.PI/p),m=0;m<u;m+=p)for(var B=f,P=c,j=0;j<w;j++){var H=s[m+j],ht=h[m+j],re=s[m+j+w],ut=h[m+j+w],Pt=B*re-P*ut;ut=B*ut+P*re,re=Pt,s[m+j]=H+re,h[m+j]=ht+ut,s[m+j+w]=H-re,h[m+j+w]=ht-ut,j!==p&&(Pt=f*B-c*P,P=f*P+c*B,B=Pt)}},lt.prototype.guessLen13b=function(o,l){var s=Math.max(l,o)|1,h=s&1,u=0;for(s=s/2|0;s;s=s>>>1)u++;return 1<<u+1+h},lt.prototype.conjugate=function(o,l,s){if(!(s<=1))for(var h=0;h<s/2;h++){var u=o[h];o[h]=o[s-h-1],o[s-h-1]=u,u=l[h],l[h]=-l[s-h-1],l[s-h-1]=-u}},lt.prototype.normalize13b=function(o,l){for(var s=0,h=0;h<l/2;h++){var u=Math.round(o[2*h+1]/l)*8192+Math.round(o[2*h]/l)+s;o[h]=u&67108863,u<67108864?s=0:s=u/67108864|0}return o},lt.prototype.convert13b=function(o,l,s,h){for(var u=0,v=0;v<l;v++)u=u+(o[v]|0),s[2*v]=u&8191,u=u>>>13,s[2*v+1]=u&8191,u=u>>>13;for(v=2*l;v<h;++v)s[v]=0;n(u===0),n((u&-8192)===0)},lt.prototype.stub=function(o){for(var l=new Array(o),s=0;s<o;s++)l[s]=0;return l},lt.prototype.mulp=function(o,l,s){var h=2*this.guessLen13b(o.length,l.length),u=this.makeRBT(h),v=this.stub(h),w=new Array(h),p=new Array(h),f=new Array(h),c=new Array(h),m=new Array(h),B=new Array(h),P=s.words;P.length=h,this.convert13b(o.words,o.length,w,h),this.convert13b(l.words,l.length,c,h),this.transform(w,v,p,f,h,u),this.transform(c,v,m,B,h,u);for(var j=0;j<h;j++){var H=p[j]*m[j]-f[j]*B[j];f[j]=p[j]*B[j]+f[j]*m[j],p[j]=H}return this.conjugate(p,f,h),this.transform(p,f,P,v,h,u),this.conjugate(P,v,h),this.normalize13b(P,h),s.negative=o.negative^l.negative,s.length=o.length+l.length,s.strip()},i.prototype.mul=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},i.prototype.mulf=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),it(this,o,l)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){n(typeof o=="number"),n(o<67108864);for(var l=0,s=0;s<this.length;s++){var h=(this.words[s]|0)*o,u=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=u>>>26,this.words[s]=u&67108863}return l!==0&&(this.words[s]=l,this.length++),this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var l=k(o);if(l.length===0)return new i(1);for(var s=this,h=0;h<l.length&&l[h]===0;h++,s=s.sqr());if(++h<l.length)for(var u=s.sqr();h<l.length;h++,u=u.sqr())l[h]!==0&&(s=s.mul(u));return s},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var l=o%26,s=(o-l)/26,h=67108863>>>26-l<<26-l,u;if(l!==0){var v=0;for(u=0;u<this.length;u++){var w=this.words[u]&h,p=(this.words[u]|0)-w<<l;this.words[u]=p|v,v=w>>>26-l}v&&(this.words[u]=v,this.length++)}if(s!==0){for(u=this.length-1;u>=0;u--)this.words[u+s]=this.words[u];for(u=0;u<s;u++)this.words[u]=0;this.length+=s}return this.strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,l,s){n(typeof o=="number"&&o>=0);var h;l?h=(l-l%26)/26:h=0;var u=o%26,v=Math.min((o-u)/26,this.length),w=67108863^67108863>>>u<<u,p=s;if(h-=v,h=Math.max(0,h),p){for(var f=0;f<v;f++)p.words[f]=this.words[f];p.length=v}if(v!==0)if(this.length>v)for(this.length-=v,f=0;f<this.length;f++)this.words[f]=this.words[f+v];else this.words[0]=0,this.length=1;var c=0;for(f=this.length-1;f>=0&&(c!==0||f>=h);f--){var m=this.words[f]|0;this.words[f]=c<<26-u|m>>>u,c=m&w}return p&&c!==0&&(p.words[p.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,l,s){return n(this.negative===0),this.iushrn(o,l,s)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var l=o%26,s=(o-l)/26,h=1<<l;if(this.length<=s)return!1;var u=this.words[s];return!!(u&h)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var l=o%26,s=(o-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=s)return this;if(l!==0&&s++,this.length=Math.min(s,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,l,s){var h=o.length+s,u;this._expand(h);var v,w=0;for(u=0;u<o.length;u++){v=(this.words[u+s]|0)+w;var p=(o.words[u]|0)*l;v-=p&67108863,w=(v>>26)-(p/67108864|0),this.words[u+s]=v&67108863}for(;u<this.length-s;u++)v=(this.words[u+s]|0)+w,w=v>>26,this.words[u+s]=v&67108863;if(w===0)return this.strip();for(n(w===-1),w=0,u=0;u<this.length;u++)v=-(this.words[u]|0)+w,w=v>>26,this.words[u]=v&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,l){var s=this.length-o.length,h=this.clone(),u=o,v=u.words[u.length-1]|0,w=this._countBits(v);s=26-w,s!==0&&(u=u.ushln(s),h.iushln(s),v=u.words[u.length-1]|0);var p=h.length-u.length,f;if(l!=="mod"){f=new i(null),f.length=p+1,f.words=new Array(f.length);for(var c=0;c<f.length;c++)f.words[c]=0}var m=h.clone()._ishlnsubmul(u,1,p);m.negative===0&&(h=m,f&&(f.words[p]=1));for(var B=p-1;B>=0;B--){var P=(h.words[u.length+B]|0)*67108864+(h.words[u.length+B-1]|0);for(P=Math.min(P/v|0,67108863),h._ishlnsubmul(u,P,B);h.negative!==0;)P--,h.negative=0,h._ishlnsubmul(u,1,B),h.isZero()||(h.negative^=1);f&&(f.words[B]=P)}return f&&f.strip(),h.strip(),l!=="div"&&s!==0&&h.iushrn(s),{div:f||null,mod:h}},i.prototype.divmod=function(o,l,s){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,u,v;return this.negative!==0&&o.negative===0?(v=this.neg().divmod(o,l),l!=="mod"&&(h=v.div.neg()),l!=="div"&&(u=v.mod.neg(),s&&u.negative!==0&&u.iadd(o)),{div:h,mod:u}):this.negative===0&&o.negative!==0?(v=this.divmod(o.neg(),l),l!=="mod"&&(h=v.div.neg()),{div:h,mod:v.mod}):this.negative&o.negative?(v=this.neg().divmod(o.neg(),l),l!=="div"&&(u=v.mod.neg(),s&&u.negative!==0&&u.isub(o)),{div:v.div,mod:u}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?l==="div"?{div:this.divn(o.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,l)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var s=l.div.negative!==0?l.mod.isub(o):l.mod,h=o.ushrn(1),u=o.andln(1),v=s.cmp(h);return v<0||u===1&&v===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(o){n(o<=67108863);for(var l=(1<<26)%o,s=0,h=this.length-1;h>=0;h--)s=(l*s+(this.words[h]|0))%o;return s},i.prototype.idivn=function(o){n(o<=67108863);for(var l=0,s=this.length-1;s>=0;s--){var h=(this.words[s]|0)+l*67108864;this.words[s]=h/o|0,l=h%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var l=this,s=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var h=new i(1),u=new i(0),v=new i(0),w=new i(1),p=0;l.isEven()&&s.isEven();)l.iushrn(1),s.iushrn(1),++p;for(var f=s.clone(),c=l.clone();!l.isZero();){for(var m=0,B=1;!(l.words[0]&B)&&m<26;++m,B<<=1);if(m>0)for(l.iushrn(m);m-- >0;)(h.isOdd()||u.isOdd())&&(h.iadd(f),u.isub(c)),h.iushrn(1),u.iushrn(1);for(var P=0,j=1;!(s.words[0]&j)&&P<26;++P,j<<=1);if(P>0)for(s.iushrn(P);P-- >0;)(v.isOdd()||w.isOdd())&&(v.iadd(f),w.isub(c)),v.iushrn(1),w.iushrn(1);l.cmp(s)>=0?(l.isub(s),h.isub(v),u.isub(w)):(s.isub(l),v.isub(h),w.isub(u))}return{a:v,b:w,gcd:s.iushln(p)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var l=this,s=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var h=new i(1),u=new i(0),v=s.clone();l.cmpn(1)>0&&s.cmpn(1)>0;){for(var w=0,p=1;!(l.words[0]&p)&&w<26;++w,p<<=1);if(w>0)for(l.iushrn(w);w-- >0;)h.isOdd()&&h.iadd(v),h.iushrn(1);for(var f=0,c=1;!(s.words[0]&c)&&f<26;++f,c<<=1);if(f>0)for(s.iushrn(f);f-- >0;)u.isOdd()&&u.iadd(v),u.iushrn(1);l.cmp(s)>=0?(l.isub(s),h.isub(u)):(s.isub(l),u.isub(h))}var m;return l.cmpn(1)===0?m=h:m=u,m.cmpn(0)<0&&m.iadd(o),m},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),s=o.clone();l.negative=0,s.negative=0;for(var h=0;l.isEven()&&s.isEven();h++)l.iushrn(1),s.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;s.isEven();)s.iushrn(1);var u=l.cmp(s);if(u<0){var v=l;l=s,s=v}else if(u===0||s.cmpn(1)===0)break;l.isub(s)}while(!0);return s.iushln(h)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var l=o%26,s=(o-l)/26,h=1<<l;if(this.length<=s)return this._expand(s+1),this.words[s]|=h,this;for(var u=h,v=s;u!==0&&v<this.length;v++){var w=this.words[v]|0;w+=u,u=w>>>26,w&=67108863,this.words[v]=w}return u!==0&&(this.words[v]=u,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var l=o<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var s;if(this.length>1)s=1;else{l&&(o=-o),n(o<=67108863,"Number is too big");var h=this.words[0]|0;s=h===o?0:h<o?-1:1}return this.negative!==0?-s|0:s},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var l=this.ucmp(o);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,s=this.length-1;s>=0;s--){var h=this.words[s]|0,u=o.words[s]|0;if(h!==u){h<u?l=-1:h>u&&(l=1);break}}return l},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new ct(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var wt={k256:null,p224:null,p192:null,p25519:null};function tt(y,o){this.name=y,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}tt.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},tt.prototype.ireduce=function(o){var l=o,s;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),s=l.bitLength();while(s>this.n);var h=s<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip(),l},tt.prototype.split=function(o,l){o.iushrn(this.n,0,l)},tt.prototype.imulK=function(o){return o.imul(this.k)};function K(){tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(K,tt),K.prototype.split=function(o,l){for(var s=4194303,h=Math.min(o.length,9),u=0;u<h;u++)l.words[u]=o.words[u];if(l.length=h,o.length<=9){o.words[0]=0,o.length=1;return}var v=o.words[9];for(l.words[l.length++]=v&s,u=10;u<o.length;u++){var w=o.words[u]|0;o.words[u-10]=(w&s)<<4|v>>>22,v=w}v>>>=22,o.words[u-10]=v,v===0&&o.length>10?o.length-=10:o.length-=9},K.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,s=0;s<o.length;s++){var h=o.words[s]|0;l+=h*977,o.words[s]=l&67108863,l=h*64+(l/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function Q(){tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(Q,tt);function mt(){tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(mt,tt);function Ct(){tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(Ct,tt),Ct.prototype.imulK=function(o){for(var l=0,s=0;s<o.length;s++){var h=(o.words[s]|0)*19+l,u=h&67108863;h>>>=26,o.words[s]=u,l=h}return l!==0&&(o.words[o.length++]=l),o},i._prime=function(o){if(wt[o])return wt[o];var l;if(o==="k256")l=new K;else if(o==="p224")l=new Q;else if(o==="p192")l=new mt;else if(o==="p25519")l=new Ct;else throw new Error("Unknown prime "+o);return wt[o]=l,l};function ct(y){if(typeof y=="string"){var o=i._prime(y);this.m=o.p,this.prime=o}else n(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}ct.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},ct.prototype._verify2=function(o,l){n((o.negative|l.negative)===0,"red works only with positives"),n(o.red&&o.red===l.red,"red works only with red numbers")},ct.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},ct.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},ct.prototype.add=function(o,l){this._verify2(o,l);var s=o.add(l);return s.cmp(this.m)>=0&&s.isub(this.m),s._forceRed(this)},ct.prototype.iadd=function(o,l){this._verify2(o,l);var s=o.iadd(l);return s.cmp(this.m)>=0&&s.isub(this.m),s},ct.prototype.sub=function(o,l){this._verify2(o,l);var s=o.sub(l);return s.cmpn(0)<0&&s.iadd(this.m),s._forceRed(this)},ct.prototype.isub=function(o,l){this._verify2(o,l);var s=o.isub(l);return s.cmpn(0)<0&&s.iadd(this.m),s},ct.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},ct.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},ct.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},ct.prototype.isqr=function(o){return this.imul(o,o.clone())},ct.prototype.sqr=function(o){return this.mul(o,o)},ct.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var s=this.m.add(new i(1)).iushrn(2);return this.pow(o,s)}for(var h=this.m.subn(1),u=0;!h.isZero()&&h.andln(1)===0;)u++,h.iushrn(1);n(!h.isZero());var v=new i(1).toRed(this),w=v.redNeg(),p=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,p).cmp(w)!==0;)f.redIAdd(w);for(var c=this.pow(f,h),m=this.pow(o,h.addn(1).iushrn(1)),B=this.pow(o,h),P=u;B.cmp(v)!==0;){for(var j=B,H=0;j.cmp(v)!==0;H++)j=j.redSqr();n(H<P);var ht=this.pow(c,new i(1).iushln(P-H-1));m=m.redMul(ht),c=ht.redSqr(),B=B.redMul(c),P=H}return m},ct.prototype.invm=function(o){var l=o._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},ct.prototype.pow=function(o,l){if(l.isZero())return new i(1);if(l.cmpn(1)===0)return o.clone();var s=4,h=new Array(1<<s);h[0]=new i(1).toRed(this),h[1]=o;for(var u=2;u<h.length;u++)h[u]=this.mul(h[u-1],o);var v=h[0],w=0,p=0,f=l.bitLength()%26;for(f===0&&(f=26),u=l.length-1;u>=0;u--){for(var c=l.words[u],m=f-1;m>=0;m--){var B=c>>m&1;if(v!==h[0]&&(v=this.sqr(v)),B===0&&w===0){p=0;continue}w<<=1,w|=B,p++,!(p!==s&&(u!==0||m!==0))&&(v=this.mul(v,h[w]),p=0,w=0)}f=26}return v},ct.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},ct.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},i.mont=function(o){return new Kt(o)};function Kt(y){ct.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(Kt,ct),Kt.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},Kt.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},Kt.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var s=o.imul(l),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=s.isub(h).iushrn(this.shift),v=u;return u.cmp(this.m)>=0?v=u.isub(this.m):u.cmpn(0)<0&&(v=u.iadd(this.m)),v._forceRed(this)},Kt.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new i(0)._forceRed(this);var s=o.mul(l),h=s.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=s.isub(h).iushrn(this.shift),v=u;return u.cmp(this.m)>=0?v=u.isub(this.m):u.cmpn(0)<0&&(v=u.iadd(this.m)),v._forceRed(this)},Kt.prototype.invm=function(o){var l=this.imod(o._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,qr)})(ao);var qu=ao.exports,Wu=function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"},Hu=Wu,Ku=function(t){return typeof t!="string"?t:Hu(t)?t.slice(2):t},Mn=qu,ra=Ku,Vu=function(t){if(typeof t=="string"||typeof t=="number"){var e=new Mn(1),n=String(t).toLowerCase().trim(),a=n.substr(0,2)==="0x"||n.substr(0,3)==="-0x",i=ra(n);if(i.substr(0,1)==="-"&&(i=ra(i.slice(1)),e=new Mn(-1,10)),i=i===""?"0":i,!i.match(/^-?[0-9]+$/)&&i.match(/^[0-9A-Fa-f]+$/)||i.match(/^[a-fA-F]+$/)||a===!0&&i.match(/^[0-9A-Fa-f]+$/))return new Mn(i,16).mul(e);if((i.match(/^-?[0-9]+$/)||i==="")&&a===!1)return new Mn(i,10).mul(e)}else if(typeof t=="object"&&t.toString&&!t.pop&&!t.push&&t.toString(10).match(/^-?[0-9]+$/)&&(t.mul||t.dividedToIntegerBy))return new Mn(t.toString(10),10);throw new Error("[number-to-bn] while converting number "+JSON.stringify(t)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")},un=ju,Gu=Vu,Yu=new un(0),O0=new un(-1),$n={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function fo(r){var t=r?r.toLowerCase():"ether",e=$n[t];if(typeof e!="string")throw new Error("[ethjs-unit] the unit provided "+r+" doesn't exists, please use the one of the following units "+JSON.stringify($n,null,2));return new un(e,10)}function L0(r){if(typeof r=="string"){if(!r.match(/^-?[0-9.]+$/))throw new Error("while converting number to string, invalid number value '"+r+"', should be a number matching (^-?[0-9.]+).");return r}else{if(typeof r=="number")return String(r);if(typeof r=="object"&&r.toString&&(r.toTwos||r.dividedToIntegerBy))return r.toPrecision?String(r.toPrecision()):r.toString(10)}throw new Error("while converting number to string, invalid number value '"+r+"' type "+typeof r+".")}function zu(r,t,e){var n=Gu(r),a=n.lt(Yu),i=fo(t),d=$n[t].length-1||1,b=e||{};a&&(n=n.mul(O0));for(var C=n.mod(i).toString(10);C.length<d;)C="0"+C;b.pad||(C=C.match(/^([0-9]*[1-9]|0)(0*)/)[1]);var D=n.div(i).toString(10);b.commify&&(D=D.replace(/\B(?=(\d{3})+(?!\d))/g,","));var T=""+D+(C=="0"?"":"."+C);return a&&(T="-"+T),T}function Zu(r,t){var e=L0(r),n=fo(t),a=$n[t].length-1||1,i=e.substring(0,1)==="-";if(i&&(e=e.substring(1)),e===".")throw new Error("[ethjs-unit] while converting number "+r+" to wei, invalid value");var d=e.split(".");if(d.length>2)throw new Error("[ethjs-unit] while converting number "+r+" to wei,  too many decimal points");var b=d[0],C=d[1];if(b||(b="0"),C||(C="0"),C.length>a)throw new Error("[ethjs-unit] while converting number "+r+" to wei, too many decimal places");for(;C.length<a;)C+="0";b=new un(b),C=new un(C);var D=b.mul(n).add(C);return i&&(D=D.mul(O0)),new un(D.toString(10),10)}var Xu={unitMap:$n,numberToString:L0,getValueOfUnit:fo,fromWei:zu,toWei:Zu};/**
 * @file Web Cryptography API shim
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */(function(r,t){typeof define=="function"&&define.amd?define([],function(){return t(r)}):typeof module=="object"&&module.exports?module.exports=t(r):t(r)})(typeof self<"u"?self:globalThis,function(r){if(typeof Promise!="function")throw"Promise support required";var t=r.crypto||r.msCrypto;if(!t)return;var e=t.subtle||t.webkitSubtle;if(!e)return;var n=r.Crypto||t.constructor||Object,a=r.SubtleCrypto||e.constructor||Object;r.CryptoKey||r.Key;var i=r.navigator.userAgent.indexOf("Edge/")>-1,d=!!r.msCrypto&&!i,b=!t.subtle&&!!t.webkitSubtle;if(!d&&!b)return;function C(y){return btoa(y).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function D(y){return y+="===",y=y.slice(0,-y.length%4),atob(y.replace(/-/g,"+").replace(/_/g,"/"))}function T(y){for(var o=new Uint8Array(y.length),l=0;l<y.length;l++)o[l]=y.charCodeAt(l);return o}function O(y){return y instanceof ArrayBuffer&&(y=new Uint8Array(y)),String.fromCharCode.apply(String,y)}function k(y){var o={name:(y.name||y||"").toUpperCase().replace("V","v")};switch(o.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":y.length&&(o.length=y.length);break;case"HMAC":y.hash&&(o.hash=k(y.hash)),y.length&&(o.length=y.length);break;case"RSAES-PKCS1-v1_5":y.publicExponent&&(o.publicExponent=new Uint8Array(y.publicExponent)),y.modulusLength&&(o.modulusLength=y.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":y.hash&&(o.hash=k(y.hash)),y.publicExponent&&(o.publicExponent=new Uint8Array(y.publicExponent)),y.modulusLength&&(o.modulusLength=y.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return o}function G(y){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[y.name][(y.hash||{}).name||y.length||""]}function st(y){(y instanceof ArrayBuffer||y instanceof Uint8Array)&&(y=JSON.parse(decodeURIComponent(escape(O(y)))));var o={kty:y.kty,alg:y.alg,ext:y.ext||y.extractable};switch(o.kty){case"oct":o.k=y.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(l){l in y&&(o[l]=y[l])});break;default:throw new TypeError("Unsupported key type")}return o}function ft(y){var o=st(y);return d&&(o.extractable=o.ext,delete o.ext),T(unescape(encodeURIComponent(JSON.stringify(o)))).buffer}function it(y){var o=K(y),l=!1;o.length>2&&(l=!0,o.shift());var s={ext:!0};switch(o[0][0]){case"1.2.840.113549.1.1.1":var h=["n","e","d","p","q","dp","dq","qi"],u=K(o[1]);l&&u.shift();for(var v=0;v<u.length;v++)u[v][0]||(u[v]=u[v].subarray(1)),s[h[v]]=C(O(u[v]));s.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return s}function lt(y){var o,l=[["",null]],s=!1;switch(y.kty){case"RSA":for(var h=["n","e","d","p","q","dp","dq","qi"],u=[],v=0;v<h.length&&h[v]in y;v++){var w=u[v]=T(D(y[h[v]]));w[0]&128&&(u[v]=new Uint8Array(w.length+1),u[v].set(w,1))}u.length>2&&(s=!0,u.unshift(new Uint8Array([0]))),l[0][0]="1.2.840.113549.1.1.1",o=u;break;default:throw new TypeError("Unsupported key type")}return l.push(new Uint8Array(Q(o)).buffer),s?l.unshift(new Uint8Array([0])):l[1]={tag:3,value:l[1]},new Uint8Array(Q(l)).buffer}var wt={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},tt={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};function K(y,o){if(y instanceof ArrayBuffer&&(y=new Uint8Array(y)),o||(o={pos:0,end:y.length}),o.end-o.pos<2||o.end>y.length)throw new RangeError("Malformed DER");var l=y[o.pos++],s=y[o.pos++];if(s>=128){if(s&=127,o.end-o.pos<s)throw new RangeError("Malformed DER");for(var h=0;s--;)h<<=8,h|=y[o.pos++];s=h}if(o.end-o.pos<s)throw new RangeError("Malformed DER");var u;switch(l){case 2:u=y.subarray(o.pos,o.pos+=s);break;case 3:if(y[o.pos++])throw new Error("Unsupported bit string");s--;case 4:u=new Uint8Array(y.subarray(o.pos,o.pos+=s)).buffer;break;case 5:u=null;break;case 6:var v=btoa(O(y.subarray(o.pos,o.pos+=s)));if(!(v in wt))throw new Error("Unsupported OBJECT ID "+v);u=wt[v];break;case 48:u=[];for(var w=o.pos+s;o.pos<w;)u.push(K(y,o));break;default:throw new Error("Unsupported DER tag 0x"+l.toString(16))}return u}function Q(y,o){o||(o=[]);var l=0,s=0,h=o.length+2;if(o.push(0,0),y instanceof Uint8Array){l=2,s=y.length;for(var u=0;u<s;u++)o.push(y[u])}else if(y instanceof ArrayBuffer){l=4,s=y.byteLength,y=new Uint8Array(y);for(var u=0;u<s;u++)o.push(y[u])}else if(y===null)l=5,s=0;else if(typeof y=="string"&&y in tt){var v=T(atob(tt[y]));l=6,s=v.length;for(var u=0;u<s;u++)o.push(v[u])}else if(y instanceof Array){for(var u=0;u<y.length;u++)Q(y[u],o);l=48,s=o.length-h}else if(typeof y=="object"&&y.tag===3&&y.value instanceof ArrayBuffer){y=new Uint8Array(y.value),l=3,s=y.byteLength,o.push(0);for(var u=0;u<s;u++)o.push(y[u]);s++}else throw new Error("Unsupported DER value "+y);if(s>=128){var w=s,s=4;for(o.splice(h,0,w>>24&255,w>>16&255,w>>8&255,w&255);s>1&&!(w>>24);)w<<=8,s--;s<4&&o.splice(h,4-s),s|=128}return o.splice(h-2,2,l,s),o}function mt(y,o,l,s){Object.defineProperties(this,{_key:{value:y},type:{value:y.type,enumerable:!0},extractable:{value:l===void 0?y.extractable:l,enumerable:!0},algorithm:{value:o===void 0?y.algorithm:o,enumerable:!0},usages:{value:s===void 0?y.usages:s,enumerable:!0}})}function Ct(y){return y==="verify"||y==="encrypt"||y==="wrapKey"}function ct(y){return y==="sign"||y==="decrypt"||y==="unwrapKey"}if(["generateKey","importKey","unwrapKey"].forEach(function(y){var o=e[y];e[y]=function(l,s,h){var u=[].slice.call(arguments),v,w,p;switch(y){case"generateKey":v=k(l),w=s,p=h;break;case"importKey":v=k(h),w=u[3],p=u[4],l==="jwk"&&(s=st(s),s.alg||(s.alg=G(v)),s.key_ops||(s.key_ops=s.kty!=="oct"?"d"in s?p.filter(ct):p.filter(Ct):p.slice()),u[1]=ft(s));break;case"unwrapKey":v=u[4],w=u[5],p=u[6],u[2]=h._key;break}if(y==="generateKey"&&v.name==="HMAC"&&v.hash)return v.length=v.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[v.hash.name],e.importKey("raw",t.getRandomValues(new Uint8Array(v.length+7>>3)),v,w,p);if(b&&y==="generateKey"&&v.name==="RSASSA-PKCS1-v1_5"&&(!v.modulusLength||v.modulusLength>=2048))return l=k(l),l.name="RSAES-PKCS1-v1_5",delete l.hash,e.generateKey(l,!0,["encrypt","decrypt"]).then(function(c){return Promise.all([e.exportKey("jwk",c.publicKey),e.exportKey("jwk",c.privateKey)])}).then(function(c){return c[0].alg=c[1].alg=G(v),c[0].key_ops=p.filter(Ct),c[1].key_ops=p.filter(ct),Promise.all([e.importKey("jwk",c[0],v,!0,c[0].key_ops),e.importKey("jwk",c[1],v,w,c[1].key_ops)])}).then(function(c){return{publicKey:c[0],privateKey:c[1]}});if((b||d&&(v.hash||{}).name==="SHA-1")&&y==="importKey"&&l==="jwk"&&v.name==="HMAC"&&s.kty==="oct")return e.importKey("raw",T(D(s.k)),h,u[3],u[4]);if(b&&y==="importKey"&&(l==="spki"||l==="pkcs8"))return e.importKey("jwk",it(s),h,u[3],u[4]);if(d&&y==="unwrapKey")return e.decrypt(u[3],h,s).then(function(c){return e.importKey(l,c,u[4],u[5],u[6])});var f;try{f=o.apply(e,u)}catch(c){return Promise.reject(c)}return d&&(f=new Promise(function(c,m){f.onabort=f.onerror=function(B){m(B)},f.oncomplete=function(B){c(B.target.result)}})),f=f.then(function(c){return v.name==="HMAC"&&(v.length||(v.length=8*c.algorithm.length)),v.name.search("RSA")==0&&(v.modulusLength||(v.modulusLength=(c.publicKey||c).algorithm.modulusLength),v.publicExponent||(v.publicExponent=(c.publicKey||c).algorithm.publicExponent)),c.publicKey&&c.privateKey?c={publicKey:new mt(c.publicKey,v,w,p.filter(Ct)),privateKey:new mt(c.privateKey,v,w,p.filter(ct))}:c=new mt(c,v,w,p),c}),f}}),["exportKey","wrapKey"].forEach(function(y){var o=e[y];e[y]=function(l,s,h){var u=[].slice.call(arguments);switch(y){case"exportKey":u[1]=s._key;break;case"wrapKey":u[1]=s._key,u[2]=h._key;break}if((b||d&&(s.algorithm.hash||{}).name==="SHA-1")&&y==="exportKey"&&l==="jwk"&&s.algorithm.name==="HMAC"&&(u[0]="raw"),b&&y==="exportKey"&&(l==="spki"||l==="pkcs8")&&(u[0]="jwk"),d&&y==="wrapKey")return e.exportKey(l,s).then(function(w){return l==="jwk"&&(w=T(unescape(encodeURIComponent(JSON.stringify(st(w)))))),e.encrypt(u[3],h,w)});var v;try{v=o.apply(e,u)}catch(w){return Promise.reject(w)}return d&&(v=new Promise(function(w,p){v.onabort=v.onerror=function(f){p(f)},v.oncomplete=function(f){w(f.target.result)}})),y==="exportKey"&&l==="jwk"&&(v=v.then(function(w){return(b||d&&(s.algorithm.hash||{}).name==="SHA-1")&&s.algorithm.name==="HMAC"?{kty:"oct",alg:G(s.algorithm),key_ops:s.usages.slice(),ext:!0,k:C(O(w))}:(w=st(w),w.alg||(w.alg=G(s.algorithm)),w.key_ops||(w.key_ops=s.type==="public"?s.usages.filter(Ct):s.type==="private"?s.usages.filter(ct):s.usages.slice()),w)})),b&&y==="exportKey"&&(l==="spki"||l==="pkcs8")&&(v=v.then(function(w){return w=lt(st(w)),w})),v}}),["encrypt","decrypt","sign","verify"].forEach(function(y){var o=e[y];e[y]=function(l,s,h,u){if(d&&(!h.byteLength||u&&!u.byteLength))throw new Error("Empy input is not allowed");var v=[].slice.call(arguments),w=k(l);if(d&&y==="decrypt"&&w.name==="AES-GCM"){var p=l.tagLength>>3;v[2]=(h.buffer||h).slice(0,h.byteLength-p),l.tag=(h.buffer||h).slice(h.byteLength-p)}v[1]=s._key;var f;try{f=o.apply(e,v)}catch(c){return Promise.reject(c)}return d&&(f=new Promise(function(c,m){f.onabort=f.onerror=function(B){m(B)},f.oncomplete=function(P){var P=P.target.result;if(y==="encrypt"&&P instanceof AesGcmEncryptResult){var j=P.ciphertext,H=P.tag;P=new Uint8Array(j.byteLength+H.byteLength),P.set(new Uint8Array(j),0),P.set(new Uint8Array(H),j.byteLength),P=P.buffer}c(P)}})),f}}),d){var Kt=e.digest;e.digest=function(y,o){if(!o.byteLength)throw new Error("Empy input is not allowed");var l;try{l=Kt.call(e,y,o)}catch(s){return Promise.reject(s)}return l=new Promise(function(s,h){l.onabort=l.onerror=function(u){h(u)},l.oncomplete=function(u){s(u.target.result)}}),l},r.crypto=Object.create(t,{getRandomValues:{value:function(y){return t.getRandomValues(y)}},subtle:{value:e}}),r.CryptoKey=mt}b&&(t.subtle=e,r.Crypto=n,r.SubtleCrypto=a,r.CryptoKey=mt)});const Qu=window.crypto,Ju=Object.freeze(Object.defineProperty({__proto__:null,default:Qu},Symbol.toStringTag,{value:"Module"})),tc=Vr(Ju),lo=ku,$i=P0,k0=Xu,j0=typeof self<"u"&&self.crypto&&self.crypto.subtle;let q0=null;j0||(q0=tc);function ec(r){return j0?crypto.subtle.digest("SHA-256",r):q0.subtle.digest({name:"SHA-256"},r)}function rc(r){if(!lo.isBN(r)&&typeof r!="string")throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return k0.toWei(r,"gwei")}function nc(r){if(!lo.isBN(r)&&typeof r!="string")throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return k0.fromWei(r,"gwei")}const W0=[],Ds={};for(let r=0;r<=255;r++){let t=r.toString(16);t.length<2&&(t="0"+t),W0.push(t),Ds[t]=r}function ic(r){const t=[];for(let e=0;e<r.byteLength;e++)t.push(W0[r[e]]);return t.join("")}function sc(r){r=r.toLowerCase();const t=r.length;if(t%2!==0)throw"hex string must have length a multiple of 2";const e=t/2,n=new Uint8Array(e);for(let a=0;a<e;a++){const i=a*2,d=r.substring(i,i+2);if(!Ds.hasOwnProperty(d))throw new Error("invalid hex character "+d);n[a]=Ds[d]}return n}function oc(r,t=1){let e,n;t===1&&(e=new ArrayBuffer(r.length),n=new Uint8Array(e)),t===2&&(e=new ArrayBuffer(r.length*2),n=new Uint16Array(e)),t===4&&(e=new ArrayBuffer(r.length*4),n=new Uint32Array(e));for(let a=0,i=r.length;a<i;a++)n[a]=r.charCodeAt(a);return new Uint8Array(n.buffer)}function ac(r,t){r^=4294967295;for(let n=0;n<t.length;n++)r^=t[n],r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1;return r^4294967295}function fc(r){const t=ac(0,r),e=new ArrayBuffer(4);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e).reverse()}function lc(r){let e=0;const n=new Uint8Array(r.length+2);n.set(r);for(let a of n){let i=128;for(;i>0;)e<<=1,a&i&&(e+=1),i>>=1,e>65535&&(e&=65535,e^=4129)}return new Uint8Array([Math.floor(e/256),e%256])}function hc(r,t){const e=new Uint8Array(r.length+t.length);return e.set(r),e.set(t,r.length),e}function uc(r,t){return r.toString()===t.toString()}const Dr=(()=>{const r=[],t="A".charCodeAt(0),e="a".charCodeAt(0),n="0".charCodeAt(0);for(let a=0;a<26;++a)r.push(String.fromCharCode(t+a));for(let a=0;a<26;++a)r.push(String.fromCharCode(e+a));for(let a=0;a<10;++a)r.push(String.fromCharCode(n+a));return r.push("+"),r.push("/"),r})();function cc(r){let t="",e;const n=r.length;for(e=2;e<n;e+=3)t+=Dr[r[e-2]>>2],t+=Dr[(r[e-2]&3)<<4|r[e-1]>>4],t+=Dr[(r[e-1]&15)<<2|r[e]>>6],t+=Dr[r[e]&63];return e===n+1&&(t+=Dr[r[e-2]>>2],t+=Dr[(r[e-2]&3)<<4],t+="=="),e===n&&(t+=Dr[r[e-2]>>2],t+=Dr[(r[e-2]&3)<<4|r[e-1]>>4],t+=Dr[(r[e-1]&15)<<2],t+="="),t}function H0(r){return typeof self>"u"?Buffer.from(r,"base64").toString("binary"):atob(r)}function dc(r){return typeof self>"u"?Buffer.from(r,"binary").toString("base64"):btoa(r)}function pc(r){const t=H0(r),e=t.length,n=new Uint8Array(e);for(let a=0;a<e;a++)n[a]=t.charCodeAt(a);return n}function vc(r,t){let e=0;for(let n=0;n<r;n++)e*=256,e+=t[n];return e}function gc(r){return $i.sign.keyPair.fromSeed(r)}function mc(){return $i.sign.keyPair()}function yc(){return $i.sign.keyPair().secretKey.slice(0,32)}var Pi={BN:lo,nacl:$i,sha256:ec,fromNano:nc,toNano:rc,bytesToHex:ic,hexToBytes:sc,stringToBytes:oc,crc32c:fc,crc16:lc,concatBytes:hc,bytesToBase64:cc,base64ToBytes:pc,base64toString:H0,stringToBase64:dc,compareBytes:uc,readNBytesUIntFromArray:vc,keyPairFromSeed:gc,newKeyPair:mc,newSeed:yc},K0={};const{crc16:V0,hexToBytes:wc,bytesToHex:bc,stringToBytes:xc,base64toString:Ec,stringToBase64:Ac}=Pi,Is=17,G0=81,Ts=128;function Cc(r){if(r.length!==48)throw new Error("User-friendly address should contain strictly 48 characters");const t=xc(Ec(r));if(t.length!==36)throw"Unknown address type: byte length is not equal to 36";const e=t.slice(0,34),n=t.slice(34,36),a=V0(e);if(!(a[0]===n[0]&&a[1]===n[1]))throw"Wrong crc16 hashsum";let i=e[0],d=!1,b=!1;if(i&Ts&&(d=!0,i=i^Ts),i!==Is&&i!==G0)throw"Unknown address tag";b=i===Is;let C=null;if(e[1]===255?C=-1:C=e[1],C!==0&&C!==-1)throw new Error("Invalid address wc "+C);const D=e.slice(2,34);return{isTestOnly:d,isBounceable:b,workchain:C,hashPart:D}}let Bc=class Rs{static isValid(t){try{return new Rs(t),!0}catch{return!1}}constructor(t){if(t==null)throw"Invalid address";if(t instanceof Rs){this.wc=t.wc,this.hashPart=t.hashPart,this.isTestOnly=t.isTestOnly,this.isUserFriendly=t.isUserFriendly,this.isBounceable=t.isBounceable,this.isUrlSafe=t.isUrlSafe;return}if(t.search(/\-/)>0||t.search(/_/)>0?(this.isUrlSafe=!0,t=t.replace(/\-/g,"+").replace(/_/g,"/")):this.isUrlSafe=!1,t.indexOf(":")>-1){const e=t.split(":");if(e.length!==2)throw new Error("Invalid address "+t);const n=parseInt(e[0]);if(n!==0&&n!==-1)throw new Error("Invalid address wc "+t);const a=e[1];if(a.length!==64)throw new Error("Invalid address hex "+t);this.isUserFriendly=!1,this.wc=n,this.hashPart=wc(a),this.isTestOnly=!1,this.isBounceable=!1}else{this.isUserFriendly=!0;const e=Cc(t);this.wc=e.workchain,this.hashPart=e.hashPart,this.isTestOnly=e.isTestOnly,this.isBounceable=e.isBounceable}}toString(t,e,n,a){if(t===void 0&&(t=this.isUserFriendly),e===void 0&&(e=this.isUrlSafe),n===void 0&&(n=this.isBounceable),a===void 0&&(a=this.isTestOnly),t){let i=n?Is:G0;a&&(i|=Ts);const d=new Int8Array(34);d[0]=i,d[1]=this.wc,d.set(this.hashPart,2);const b=new Uint8Array(36);b.set(d),b.set(V0(d),34);let C=Ac(String.fromCharCode.apply(null,new Uint8Array(b)));return e&&(C=C.replace(/\+/g,"-").replace(/\//g,"_")),C}else return this.wc+":"+bc(this.hashPart)}};K0.default=Bc;var Y0={};const{hexToBytes:Mc,bytesToHex:_c}=Pi;let Fc=class Ns{static isValid(t){try{return new Ns(t),!0}catch{return!1}}constructor(t){if(t==null)throw"Invalid address";if(t instanceof Ns)this.bytes=t.bytes;else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("invalid adnl bytes length");this.bytes=t}else if(typeof t=="string"){if(t.length!==64)throw new Error("invalid adnl hex length");this.bytes=Mc(t)}else throw new Error("unsupported type")}toHex(){let t=_c(this.bytes);for(;t.length<64;)t="0"+t;return t}};Y0.default=Fc;var z0={};const{hexToBytes:Sc,bytesToHex:Dc}=Pi;let Ic=class Us{static isValid(t){try{return new Us(t),!0}catch{return!1}}constructor(t){if(t==null)throw"Invalid address";if(t instanceof Us)this.bytes=t.bytes;else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("invalid bag id bytes length");this.bytes=t}else if(typeof t=="string"){if(t.length!==64)throw new Error("invalid bag id hex length");this.bytes=Sc(t)}else throw new Error("unsupported type")}toHex(){let t=Dc(this.bytes);for(;t.length<64;)t="0"+t;return t}};z0.default=Ic;const{BN:Z0,nacl:Tc,sha256:Rc,fromNano:Nc,toNano:Uc,bytesToHex:$c,hexToBytes:Pc,stringToBytes:Oc,crc32c:Lc,crc16:kc,concatBytes:jc,bytesToBase64:qc,base64ToBytes:Wc,base64toString:Hc,stringToBase64:Kc,compareBytes:Vc,readNBytesUIntFromArray:Gc,keyPairFromSeed:Yc,newKeyPair:zc,newSeed:Zc}=Pi,X0=K0.default,Xc=Y0.default,Qc=z0.default;function Jc(r){const t="ton://transfer/";if(!r.startsWith(t))throw new Error("must starts with "+t);const e=r.substring(t.length).split("?");if(e.length>2)throw new Error('multiple "?"');const n=e[0];if(!X0.isValid(n))throw new Error("invalid address format "+n);const a={address:n},i=e[1];if(i&&i.length){const d=i.split("&").map(b=>b.split("="));for(const b of d){if(b.length!==2)throw new Error("invalid url pair");const C=b[0],D=b[1];if(C==="amount"){if(a.amount)throw new Error("amount already set");if(new Z0(D).isNeg())throw new Error("negative amount");a.amount=D}else if(C==="text"){if(a.text)throw new Error("text already set");a.text=decodeURIComponent(D)}else throw new Error("unknown url var "+C)}}return a}function td(r,t,e){let n="ton://transfer/"+r;const a=[];return t&&a.push("amount="+t),e&&a.push("text="+encodeURIComponent(e)),a.length===0?n:n+"?"+a.join("&")}var Ge={Address:X0,AdnlAddress:Xc,StorageBagId:Qc,BN:Z0,nacl:Tc,sha256:Rc,fromNano:Nc,toNano:Uc,bytesToHex:$c,hexToBytes:Pc,stringToBytes:Oc,crc32c:Lc,crc16:kc,concatBytes:jc,bytesToBase64:qc,base64ToBytes:Wc,base64toString:Hc,stringToBase64:Kc,compareBytes:Vc,readNBytesUIntFromArray:Gc,parseTransferUrl:Jc,formatTransferUrl:td,keyPairFromSeed:Yc,newKeyPair:zc,newSeed:Zc};const{BN:_n,bytesToHex:ed}=Ge;let rd=class Q0{constructor(t){this.array=Uint8Array.from({length:Math.ceil(t/8)},()=>0),this.cursor=0,this.length=t}getFreeBits(){return this.length-this.cursor}getUsedBits(){return this.cursor}getUsedBytes(){return Math.ceil(this.cursor/8)}get(t){return(this.array[t/8|0]&1<<7-t%8)>0}checkRange(t){if(t>this.length)throw Error("BitString overflow")}on(t){this.checkRange(t),this.array[t/8|0]|=1<<7-t%8}off(t){this.checkRange(t),this.array[t/8|0]&=~(1<<7-t%8)}toggle(t){this.checkRange(t),this.array[t/8|0]^=1<<7-t%8}forEach(t){const e=this.cursor;for(let n=0;n<e;n++)t(this.get(n))}writeBit(t){t&&t>0?this.on(this.cursor):this.off(this.cursor),this.cursor=this.cursor+1}writeBitArray(t){for(let e=0;e<t.length;e++)this.writeBit(t[e])}writeUint(t,e){if(t=new _n(t),e==0||t.toString(2).length>e){if(t==0)return;throw Error("bitLength is too small for number, got number="+t+",bitLength="+e)}const n=t.toString(2,e);for(let a=0;a<e;a++)this.writeBit(n[a]==1)}writeInt(t,e){if(t=new _n(t),e==1){if(t==-1){this.writeBit(!0);return}if(t==0){this.writeBit(!1);return}throw Error("Bitlength is too small for number")}else if(t.isNeg()){this.writeBit(!0);const a=new _n(2).pow(new _n(e-1));this.writeUint(a.add(t),e-1)}else this.writeBit(!1),this.writeUint(t,e-1)}writeUint8(t){this.writeUint(t,8)}writeBytes(t){for(let e=0;e<t.length;e++)this.writeUint8(t[e])}writeString(t){this.writeBytes(new TextEncoder().encode(t))}writeGrams(t){if(t==0)this.writeUint(0,4);else{t=new _n(t);const e=Math.ceil(t.toString(16).length/2);this.writeUint(e,4),this.writeUint(t,e*8)}}writeCoins(t){this.writeGrams(t)}writeAddress(t){t==null?this.writeUint(0,2):(this.writeUint(2,2),this.writeUint(0,1),this.writeInt(t.wc,8),this.writeBytes(t.hashPart))}writeBitString(t){t.forEach(e=>{this.writeBit(e)})}clone(){const t=new Q0(0);return t.array=this.array.slice(0),t.length=this.length,t.cursor=this.cursor,t}toString(){return this.toHex()}getTopUppedArray(){const t=this.clone();let e=Math.ceil(t.cursor/8)*8-t.cursor;if(e>0)for(e=e-1,t.writeBit(!0);e>0;)e=e-1,t.writeBit(!1);return t.array=t.array.slice(0,Math.ceil(t.cursor/8)),t.array}toHex(){if(this.cursor%4===0){const t=ed(this.array.slice(0,Math.ceil(this.cursor/8))).toUpperCase();return this.cursor%8===0?t:t.substr(0,t.length-1)}else{const t=this.clone();for(t.writeBit(1);t.cursor%4!==0;)t.writeBit(0);return t.toHex().toUpperCase()+"_"}}setTopUppedArray(t,e=!0){if(this.length=t.length*8,this.array=t,this.cursor=this.length,!(e||!this.length)){let n=!1;for(let a=0;a<7;a++)if(this.cursor-=1,this.get(this.cursor)){n=!0,this.off(this.cursor);break}if(!n)throw console.log(t,e),new Error("Incorrect TopUppedArray")}}};var ho={BitString:rd};const{BN:Gr,Address:nd,bytesToHex:id}=Ge,{BitString:sd}=ho;let od=class{constructor(t,e,n){this.array=t,this.length=e,this.readCursor=0,this.refs=n,this.refCursor=0}getFreeBits(){return this.length-this.readCursor}checkRange(t){if(t>this.length)throw Error("BitString overflow")}get(t){return this.checkRange(t),(this.array[t/8|0]&1<<7-t%8)>0}loadBit(){const t=this.get(this.readCursor);return this.readCursor++,t}loadBits(t){const e=new sd(t);for(let n=0;n<t;n++)e.writeBit(this.loadBit());return e.array}loadUint(t){if(t<1)throw"Incorrect bitLength";let e="";for(let n=0;n<t;n++)e+=this.loadBit()?"1":"0";return new Gr(e,2)}loadInt(t){if(t<1)throw"Incorrect bitLength";const e=this.loadBit();if(t===1)return e?new Gr(-1):new Gr(0);let n=this.loadUint(t-1);if(e){const i=new Gr(2).pow(new Gr(t-1));n-=i}return n}loadVarUint(t){const e=this.loadUint(new Gr(t).toString(2).length-1);return e.toNumber()===0?new Gr(0):this.loadUint(e*8)}loadCoins(){return this.loadVarUint(16)}loadAddress(){const t=this.loadUint(2);if(t.toNumber()===0)return null;if(t.toNumber()!==2)throw new Error("unsupported address type");if(this.loadBit())throw new Error("unsupported address type");const e=this.loadInt(8).toNumber(),n=this.loadBits(256);return new nd(e+":"+id(n))}loadRef(){if(this.refCursor>=4)throw new Error("refs overflow");const t=this.refs[this.refCursor];return this.refCursor++,t}};var J0={Slice:od};const{BitString:na}=ho,{bytesToBase64:rE,compareBytes:Qn,concatBytes:Fn,crc32c:tf,hexToBytes:Wn,readNBytesUIntFromArray:zr,sha256:ad,bytesToHex:nE}=Ge,{Slice:fd}=J0,ef=Wn("B5EE9C72"),ld=Wn("68ff65f3"),hd=Wn("acc3a728");let rf=class{constructor(){this.bits=new na(1023),this.refs=[],this.isExotic=!1}static fromBoc(t){return ia(t)}static oneFromBoc(t){const e=ia(t);if(e.length!==1)throw new Error("expected 1 root cell but have "+e.length);return e[0]}writeCell(t){this.bits.writeBitString(t.bits),this.refs=this.refs.concat(t.refs)}getMaxLevel(){let t=0;for(let e in this.refs){const n=this.refs[e];n.getMaxLevel()>t&&(t=n.getMaxLevel())}return t}isExplicitlyStoredHashes(){return 0}getMaxDepth(){let t=0;if(this.refs.length>0){for(let e in this.refs){const n=this.refs[e];n.getMaxDepth()>t&&(t=n.getMaxDepth())}t=t+1}return t}getMaxDepthAsArray(){const t=this.getMaxDepth(),e=Uint8Array.from({length:2},()=>0);return e[1]=t%256,e[0]=Math.floor(t/256),e}getRefsDescriptor(){const t=Uint8Array.from({length:1},()=>0);return t[0]=this.refs.length+this.isExotic*8+this.getMaxLevel()*32,t}getBitsDescriptor(){const t=Uint8Array.from({length:1},()=>0);return t[0]=Math.ceil(this.bits.cursor/8)+Math.floor(this.bits.cursor/8),t}getDataWithDescriptors(){const t=this.getRefsDescriptor(),e=this.getBitsDescriptor(),n=this.bits.getTopUppedArray();return Fn(Fn(t,e),n)}async getRepr(){const t=[];t.push(this.getDataWithDescriptors());for(let n in this.refs){const a=this.refs[n];t.push(a.getMaxDepthAsArray())}for(let n in this.refs){const a=this.refs[n];t.push(await a.hash())}let e=new Uint8Array;for(let n in t){const a=t[n];e=Fn(e,a)}return e}async hash(){return new Uint8Array(await ad(await this.getRepr()))}beginParse(){const t=this.refs.map(e=>e.beginParse());return new fd(this.bits.array.slice(),this.bits.length,t)}print(t){t=t||"";let e=t+"x{"+this.bits.toHex()+`}
`;for(let n in this.refs){const a=this.refs[n];e+=a.print(t+" ")}return e}async toBoc(t=!0,e=!0,n=!1,a=0){const d=await this.treeWalk(),b=d[0],C=d[1],D=b.length,T=D.toString(2).length,O=Math.min(Math.ceil(T/8),1);let k=0,G=[];for(let wt of b)G.push(k),k=k+await wt[1].bocSerializationSize(C,O);const st=k.toString(2).length,ft=Math.max(Math.ceil(st/8),1),it=new na((1023+32*4+32*3)*b.length);it.writeBytes(ef),it.writeBitArray([t,e,n]),it.writeUint(a,2),it.writeUint(O,3),it.writeUint8(ft),it.writeUint(D,O*8),it.writeUint(1,O*8),it.writeUint(0,O*8),it.writeUint(k,ft*8),it.writeUint(0,O*8),t&&b.forEach((wt,tt)=>it.writeUint(G[tt],ft*8));for(let wt of b){const tt=await wt[1].serializeForBoc(C,O);it.writeBytes(tt)}let lt=it.getTopUppedArray();return e&&(lt=Fn(lt,tf(lt))),lt}async serializeForBoc(t,e){const n=[];if(n.push(this.getDataWithDescriptors()),this.isExplicitlyStoredHashes())throw new Error("Cell hashes explicit storing is not implemented");for(let i in this.refs){const b=await this.refs[i].hash();let D=t[b].toString(16);D.length%2&&(D="0"+D);const T=Wn(D);n.push(T)}let a=new Uint8Array;for(let i in n){const d=n[i];a=Fn(a,d)}return a}async bocSerializationSize(t,e){return(await this.serializeForBoc(t,e)).length}async treeWalk(){return sf(this,[],{})}};async function nf(r,t,e){const n=r[e];for(let i in r)r[i]>n&&(r[i]=r[i]-1);r[e]=t.length-1;const a=t.splice(n,1)[0];t.push(a);for(let i of a[1].refs)await nf(r,t,await i.hash())}async function sf(r,t,e,n=null){const a=await r.hash();if(a in e)return n&&e[n]>e[a]&&await nf(e,t,a),[t,e];e[a]=t.length,t.push([a,r]);for(let i of r.refs){const d=await sf(i,t,e,a);t=d[0],e=d[1]}return[t,e]}function ud(r){if(r.length<4+1)throw"Not enough bytes for magic prefix";const t=r,e=r.slice(0,4);r=r.slice(4);let n,a,i,d,b;if(Qn(e,ef)){const it=r[0];n=it&128,a=it&64,i=it&32,d=(it&16)*2+(it&8),b=it%8}if(Qn(e,ld)&&(n=1,a=0,i=0,d=0,b=r[0]),Qn(e,hd)&&(n=1,a=1,i=0,d=0,b=r[0]),r=r.slice(1),r.length<1+5*b)throw"Not enough bytes for encoding cells counters";const C=r[0];r=r.slice(1);const D=zr(b,r);r=r.slice(b);const T=zr(b,r);r=r.slice(b);const O=zr(b,r);r=r.slice(b);const k=zr(C,r);if(r=r.slice(C),r.length<T*b)throw"Not enough bytes for encoding root cells hashes";let G=[];for(let it=0;it<T;it++)G.push(zr(b,r)),r=r.slice(b);let st=!1;if(n){if(st=[],r.length<C*D)throw"Not enough bytes for index encoding";for(let it=0;it<D;it++)st.push(zr(C,r)),r=r.slice(C)}if(r.length<k)throw"Not enough bytes for cells data";const ft=r.slice(0,k);if(r=r.slice(k),a){if(r.length<4)throw"Not enough bytes for crc32c hashsum";const it=t.length;if(!Qn(tf(t.slice(0,it-4)),r.slice(0,4)))throw"Crc32c hashsum mismatch";r=r.slice(4)}if(r.length)throw"Too much bytes in BoC serialization";return{has_idx:n,hash_crc32:a,has_cache_bits:i,flags:d,size_bytes:b,off_bytes:C,cells_num:D,roots_num:T,absent_num:O,tot_cells_size:k,root_list:G,index:st,cells_data:ft}}function cd(r,t){if(r.length<2)throw"Not enough bytes to encode cell descriptors";const e=r[0],n=r[1];r=r.slice(2);const a=e&8,i=e%8,d=Math.ceil(n/2),b=!(n%2);let C=new rf;if(C.isExotic=a,r.length<d+t*i)throw"Not enough bytes to encode cell data";C.bits.setTopUppedArray(r.slice(0,d),b),r=r.slice(d);for(let D=0;D<i;D++)C.refs.push(zr(t,r)),r=r.slice(t);return{cell:C,residue:r}}function ia(r){typeof r=="string"&&(r=Wn(r));const t=ud(r);let e=t.cells_data,n=[];for(let i=0;i<t.cells_num;i++){let d=cd(e,t.size_bytes);e=d.residue,n.push(d.cell)}for(let i=t.cells_num-1;i>=0;i--){let d=n[i];for(let b=0;b<d.refs.length;b++){const C=d.refs[b];if(C<i)throw"Topological order is broken";d.refs[b]=n[C]}}let a=[];for(let i of t.root_list)a.push(n[i]);return a}var dd={Cell:rf};const{BitString:pd}=ho,{Cell:vd}=dd,{Slice:gd}=J0;var je={BitString:pd,Cell:vd,Slice:gd};const{Cell:sn}=je,{Address:Tr,bytesToBase64:Sn,bytesToHex:md,BN:yd}=Ge;let wd=class vi{constructor(t,e){this.provider=t,this.options=e,this.address=e.address?new Tr(e.address):null,e.wc||(e.wc=this.address?this.address.wc:0),this.methods={}}async getAddress(){return this.address||(this.address=(await this.createStateInit()).address),this.address}createCodeCell(){if(!this.options.code)throw new Error("Contract: options.code is not defined");return this.options.code}createDataCell(){return new sn}async createStateInit(){const t=this.createCodeCell(),e=this.createDataCell(),n=vi.createStateInit(t,e),a=await n.hash(),i=new Tr(this.options.wc+":"+md(a));return{stateInit:n,address:i,code:t,data:e}}static createStateInit(t,e,n=null,a=null,i=null){if(n)throw"Library in state init is not implemented";if(a)throw"Split depth in state init is not implemented";if(i)throw"Ticktock in state init is not implemented";const d=new sn;return d.bits.writeBitArray([!!a,!!i,!!t,!!e,!!n]),t&&d.refs.push(t),e&&d.refs.push(e),n&&d.refs.push(n),d}static createInternalMessageHeader(t,e=0,n=!0,a=null,i=!1,d=null,b=null,C=0,D=0,T=0,O=0){const k=new sn;if(k.bits.writeBit(!1),k.bits.writeBit(n),a!==null?k.bits.writeBit(a):k.bits.writeBit(new Tr(t).isBounceable),k.bits.writeBit(i),k.bits.writeAddress(d?new Tr(d):null),k.bits.writeAddress(new Tr(t)),k.bits.writeGrams(e),b)throw"Currency collections are not implemented yet";return k.bits.writeBit(!!b),k.bits.writeGrams(C),k.bits.writeGrams(D),k.bits.writeUint(T,64),k.bits.writeUint(O,32),k}static createExternalMessageHeader(t,e=null,n=0){const a=new sn;return a.bits.writeUint(2,2),a.bits.writeAddress(e?new Tr(e):null),a.bits.writeAddress(new Tr(t)),a.bits.writeGrams(n),a}static createOutMsg(t,e,n,a=null){let i=new sn;n&&(n.refs?i=n:typeof n=="string"?n.length>0&&(i.bits.writeUint(0,32),i.bits.writeString(n)):i.bits.writeBytes(n));const d=vi.createInternalMessageHeader(new Tr(t),new yd(e));return vi.createCommonMsgInfo(d,a,i)}static createCommonMsgInfo(t,e=null,n=null){const a=new sn;return a.writeCell(t),e?(a.bits.writeBit(!0),a.bits.writeBit(!0),a.refs.push(e)):a.bits.writeBit(!1),n?a.bits.getFreeBits()>=n.bits.getUsedBits()&&a.refs.length+n.refs.length<=4?(a.bits.writeBit(!1),a.writeCell(n)):(a.bits.writeBit(!0),a.refs.push(n)):a.bits.writeBit(!1),a}static createMethod(t,e){return{getQuery:async()=>(await e).message,send:async()=>{const n=await e,a=Sn(await n.message.toBoc(!1));return t.sendBoc(a)},estimateFee:async()=>{const n=await e,a=n.code?{address:n.address.toString(!0,!0,!1),body:Sn(await n.body.toBoc(!1)),init_code:Sn(await n.code.toBoc(!1)),init_data:Sn(await n.data.toBoc(!1))}:{address:n.address.toString(!0,!0,!0),body:Sn(await n.body.toBoc(!1))};return t.getEstimateFee(a)}}}};var ur={Contract:wd};const{Cell:bd}=je,{Address:xd,BN:sE,bytesToHex:Ed}=Ge,{Contract:hs}=ur;let Ad=class{constructor(t,e){this.transport=t,this.ton=e,this.ADDRESS_FORMAT_HEX=0,this.ADDRESS_FORMAT_USER_FRIENDLY=1,this.ADDRESS_FORMAT_URL_SAFE=2,this.ADDRESS_FORMAT_BOUNCEABLE=4,this.ADDRESS_FORMAT_TEST_ONLY=8}async getAppConfiguration(){const t=await this.transport.send(224,1,0,0);return{version:""+t[0]+"."+t[1]+"."+t[2]}}async getPublicKey(t,e){const n=Buffer.alloc(4);n.writeInt32BE(t);const a=await this.transport.send(224,2,e?1:0,0,n),i=a[0];return{publicKey:new Uint8Array(a.slice(1,1+i))}}async getAddress(t,e,n){const a=Buffer.alloc(4);a.writeInt32BE(t);const i=await this.transport.send(224,5,e?1:0,n,a),d=i[0],b=new Uint8Array(i.slice(1,1+d));return{address:new xd("0:"+Ed(b))}}async sign(t,e){const n=Buffer.alloc(4);n.writeInt32BE(t);const a=Buffer.concat([n,Buffer.from(e)]),i=await this.transport.send(224,3,0,0,a),d=i[0];return{signature:i.slice(1,1+d)}}async transfer(t,e,n,a,i,d){const C=await e.createTransferMessage(null,n,a,i,null,3,!0),D=Buffer.alloc(4);D.writeInt32BE(t);const T=Buffer.concat([D,Buffer.from(await C.signingMessage.toBoc())]),O=await this.transport.send(224,4,d,0,T),k=O[0],G=O.slice(1,1+k),st=new Uint8Array(G),ft=new bd;ft.bits.writeBytes(st),ft.writeCell(C.signingMessage);let it=null,lt=null,wt=null;if(i===0){const Ct=await e.createStateInit();it=Ct.stateInit,lt=Ct.code,wt=Ct.data}const tt=await e.getAddress(),K=hs.createExternalMessageHeader(tt),Q=hs.createCommonMsgInfo(K,it,ft),mt=new Promise(Ct=>{Ct({address:tt,message:Q,body:ft,signature:st,signingMessage:C.signingMessage,stateInit:it,code:lt,data:wt})});return hs.createMethod(this.ton.provider,mt)}};var Cd=Ad,of={},af={};const{BN:us,base64ToBytes:sa}=Ge,{Cell:oa}=je;let Bd=class Zr{static parseObject(t){const e=t["@type"];switch(e){case"tvm.list":case"tvm.tuple":return t.elements.map(Zr.parseObject);case"tvm.cell":return oa.oneFromBoc(sa(t.bytes));case"tvm.stackEntryCell":return Zr.parseObject(t.cell);case"tvm.stackEntryTuple":return Zr.parseObject(t.tuple);case"tvm.stackEntryNumber":return Zr.parseObject(t.number);case"tvm.numberDecimal":return new us(t.number,10);default:throw new Error("unknown type "+e)}}static parseResponseStack(t){const e=t[0],n=t[1];switch(e){case"num":return new us(n.replace(/0x/,""),16);case"list":case"tuple":return Zr.parseObject(n);case"cell":const a=sa(n.bytes);return oa.oneFromBoc(a);default:throw new Error("unknown type "+e)}}static parseResponse(t){if(t.exit_code!==0){const n=new Error("http provider parse response error");throw n.result=t,n}const e=t.stack.map(Zr.parseResponseStack);return e.length===1?e[0]:e}static makeArg(t){if(t instanceof us||t instanceof Number)return["num",t];throw new Error("unknown arg type "+t)}static makeArgs(t){return t.map(this.makeArg)}};af.default=Bd;const{Cell:Md}=je,{base64ToBytes:_d}=Ge,Fd=af.default;typeof fetch>"u"&&(fetch=io);const $s="-9223372036854775808";let ff=class{constructor(t,e){this.host=t||"https://toncenter.com/api/v2/jsonRPC",this.options=e||{}}sendImpl(t,e){const n={"Content-Type":"application/json"};return this.options.apiKey&&(n["X-API-Key"]=this.options.apiKey),fetch(t,{method:"POST",headers:n,body:JSON.stringify(e)}).then(a=>a.json()).then(({result:a,error:i})=>a||Promise.reject(i))}send(t,e){return this.sendImpl(this.host,{id:1,jsonrpc:"2.0",method:t,params:e})}async getAddressInfo(t){return this.send("getAddressInformation",{address:t})}async getExtendedAddressInfo(t){return this.send("getExtendedAddressInformation",{address:t})}async getWalletInfo(t){return this.send("getWalletInformation",{address:t})}async getTransactions(t,e=20,n=void 0,a=void 0,i=void 0,d=void 0){return this.send("getTransactions",{address:t,limit:e,lt:n,hash:a,to_lt:i,archival:d})}async getBalance(t){return this.send("getAddressBalance",{address:t})}async sendBoc(t){return this.send("sendBoc",{boc:t})}async sendQuery(t){return this.send("sendQuerySimple",t)}async getEstimateFee(t){return this.send("estimateFee",t)}async call(t,e,n=[]){return this.send("runGetMethod",{address:t,method:e,stack:n})}async call2(t,e,n=[]){const a=await this.send("runGetMethod",{address:t,method:e,stack:n});return Fd.parseResponse(a)}async getConfigParam(t){const e=await this.send("getConfigParam",{config_id:t});if(e["@type"]!=="configInfo")throw new Error("getConfigParam expected type configInfo");if(!e.config)throw new Error("getConfigParam expected config");if(e.config["@type"]!=="tvm.cell")throw new Error("getConfigParam expected type tvm.cell");if(!e.config.bytes)throw new Error("getConfigParam expected bytes");return Md.oneFromBoc(_d(e.config.bytes))}async getMasterchainInfo(){return this.send("getMasterchainInfo",{})}async getBlockShards(t){return this.send("shards",{seqno:t})}async getBlockTransactions(t,e,n){return this.send("getBlockTransactions",{workchain:t,shard:e,seqno:n})}async getMasterchainBlockTransactions(t){return this.getBlockTransactions(-1,$s,t)}async getBlockHeader(t,e,n){return this.send("getBlockHeader",{workchain:t,shard:e,seqno:n})}async getMasterchainBlockHeader(t){return this.getBlockHeader(-1,$s,t)}};ff.SHARD_ID_ALL=$s;of.default=ff;var lf={};const{Contract:Cr}=ur,{Cell:Jn}=je,{nacl:ti,stringToBytes:fE,Address:lE,BN:hE}=Ge;let Sd=class extends Cr{constructor(t,e){if(!e.publicKey&&!e.address)throw new Error("WalletContract required publicKey or address in options");super(t,e),this.methods={transfer:n=>Cr.createMethod(t,this.createTransferMessage(n.secretKey,n.toAddress,n.amount,n.seqno,n.payload,n.sendMode,!n.secretKey,n.stateInit,n.expireAt)),transfers:n=>Cr.createMethod(t,this.createTransferMessages(n.secretKey,n.seqno,n.messages,!n.secretKey,n.expireAt)),seqno:()=>({call:async()=>{const n=await this.getAddress();let a=null;try{a=(await t.call2(n.toString(),"seqno")).toNumber()}catch{}return a}})},this.deploy=n=>Cr.createMethod(t,this.createInitExternalMessage(n))}getName(){throw new Error("override me")}createDataCell(){const t=new Jn;return t.bits.writeUint(0,32),t.bits.writeBytes(this.options.publicKey),t}createSigningMessage(t){t=t||0;const e=new Jn;return e.bits.writeUint(t,32),e}async createInitExternalMessage(t){if(!this.options.publicKey){const O=ti.sign.keyPair.fromSecretKey(t);this.options.publicKey=O.publicKey}const{stateInit:e,address:n,code:a,data:i}=await this.createStateInit(),d=this.createSigningMessage(),b=ti.sign.detached(await d.hash(),t),C=new Jn;C.bits.writeBytes(b),C.writeCell(d);const D=Cr.createExternalMessageHeader(n),T=Cr.createCommonMsgInfo(D,e,C);return{address:n,message:T,body:C,signingMessage:d,stateInit:e,code:a,data:i}}async createExternalMessage(t,e,n,a=!1){const i=a?new Uint8Array(64):ti.sign.detached(await t.hash(),e),d=new Jn;d.bits.writeBytes(i),d.writeCell(t);let b=null,C=null,D=null;if(n===0){if(!this.options.publicKey){const st=ti.sign.keyPair.fromSecretKey(e);this.options.publicKey=st.publicKey}const G=await this.createStateInit();b=G.stateInit,C=G.code,D=G.data}const T=await this.getAddress(),O=Cr.createExternalMessageHeader(T),k=Cr.createCommonMsgInfo(O,b,d);return{address:T,message:k,body:d,signature:i,signingMessage:t,stateInit:b,code:C,data:D}}async createTransferMessage(t,e,n,a,i="",d=3,b=!1,C=null,D=void 0){if(a==null||a<0)throw new Error("seqno must be number >= 0");const T=this.createSigningMessage(a,D);return d==null&&(d=3),T.bits.writeUint8(d),T.refs.push(Cr.createOutMsg(e,n,i,C)),this.createExternalMessage(T,t,a,b)}async createTransferMessages(t,e,n,a=!1,i=void 0){if(e==null||e<0)throw new Error("seqno must be number >= 0");const d=this.createSigningMessage(e,i);if(n.length<1||n.length>4)throw new Error("put 1-4 messages");for(let b of n){let C=b.sendMode;C==null&&(C=3),d.bits.writeUint8(C),d.refs.push(Cr.createOutMsg(b.toAddress,b.amount,b.payload,b.stateInit))}return this.createExternalMessage(d,t,e,a)}};var xn={WalletContract:Sd};const{Cell:uo}=je,{WalletContract:co}=xn;let Dd=class extends co{constructor(t,e){e.code=uo.oneFromBoc("B5EE9C72410101010044000084FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED5441FDF089"),super(t,e)}getName(){return"simpleR1"}},Id=class extends co{constructor(t,e){e.code=uo.oneFromBoc("B5EE9C724101010100530000A2FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54D0E2786F"),super(t,e)}getName(){return"simpleR2"}},Td=class extends co{constructor(t,e){e.code=uo.oneFromBoc("B5EE9C7241010101005F0000BAFF0020DD2082014C97BA218201339CBAB19C71B0ED44D0D31FD70BFFE304E0A4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54B5B86E42"),super(t,e)}getName(){return"simpleR3"}};var Rd={SimpleWalletContractR1:Dd,SimpleWalletContractR2:Id,SimpleWalletContractR3:Td};const{Cell:po}=je,{WalletContract:Nd}=xn;class hf extends Nd{createSigningMessage(t,e){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const n=new po;if(n.bits.writeUint(t,32),t===0)for(let a=0;a<32;a++)n.bits.writeBit(1);else n.bits.writeUint(e,32);return n}}let Ud=class extends hf{constructor(t,e){e.code=po.oneFromBoc("B5EE9C724101010100570000AAFF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31F01F823BBF263ED44D0D31FD3FFD15131BAF2A103F901541042F910F2A2F800029320D74A96D307D402FB00E8D1A4C8CB1FCBFFC9ED54A1370BB6"),super(t,e)}getName(){return"v2R1"}},$d=class extends hf{constructor(t,e){e.code=po.oneFromBoc("B5EE9C724101010100630000C2FF0020DD2082014C97BA218201339CBAB19C71B0ED44D0D31FD70BFFE304E0A4F2608308D71820D31FD31F01F823BBF263ED44D0D31FD3FFD15131BAF2A103F901541042F910F2A2F800029320D74A96D307D402FB00E8D1A4C8CB1FCBFFC9ED54044CD7A1"),super(t,e)}getName(){return"v2R2"}};var Pd={WalletV2ContractR1:Ud,WalletV2ContractR2:$d};const{BN:fn}=Ge;function uf(r){if(r.loadBits(512),r.loadUint(32).toNumber()!==698983191)throw new Error("invalid walletId");const e=r.loadUint(32).toNumber(),n=r.loadUint(32).toNumber();if(r.loadUint(8).toNumber()!==3)throw new Error("invalid sendMode");let i=r.loadRef();if(i.loadBit())throw Error("invalid internal header");if(!i.loadBit())throw Error("invalid ihrDisabled");const d=i.loadBit();if(i.loadBit())throw Error("invalid bounced");if(i.loadAddress()!==null)throw Error("invalid externalSourceAddress");const C=i.loadAddress(),D=i.loadCoins();if(i.loadBit())throw Error("invalid currencyCollection");if(!i.loadCoins().eq(new fn(0)))throw new Error("invalid ihrFees");if(!i.loadCoins().eq(new fn(0)))throw new Error("invalid fwdFees");if(!i.loadUint(64).eq(new fn(0)))throw new Error("invalid createdLt");if(!i.loadUint(32).eq(new fn(0)))throw new Error("invalid createdAt");i.loadBit()&&i.loadRef();let st=null;if(i.getFreeBits()>0&&(i.loadBit()&&(i=i.loadRef()),i.getFreeBits()>32)){const ft=i.loadUint(32),it=i.loadBits(i.getFreeBits());st=ft.eq(new fn(0))?new TextDecoder().decode(it):""}return{toAddress:C,value:D,bounce:d,seqno:n,expireAt:e,payload:st}}function Od(r){const t=r.beginParse();if(t.loadUint(2).toNumber()!==2)throw Error("invalid header");if(t.loadAddress()!==null)throw Error("invalid externalSourceAddress");const n=t.loadAddress();if(!t.loadCoins().eq(new fn(0)))throw new Error("invalid externalImportFee");t.loadBit()&&t.loadBit()&&t.loadRef();const i=t.loadBit()?t.loadRef():t;return{fromAddress:n,...uf(i)}}var vo={parseWalletV3TransferQuery:Od,parseWalletV3TransferBody:uf};const{Cell:Ei}=je,{WalletContract:Ld}=xn,{parseWalletV3TransferQuery:cf,parseWalletV3TransferBody:df}=vo;class pf extends Ld{createSigningMessage(t,e){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const n=new Ei;if(n.bits.writeUint(this.options.walletId,32),t===0)for(let a=0;a<32;a++)n.bits.writeBit(1);else n.bits.writeUint(e,32);return n.bits.writeUint(t,32),n}createDataCell(){const t=new Ei;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t}}let go=class extends pf{constructor(t,e){e.code=Ei.oneFromBoc("B5EE9C724101010100620000C0FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED543FBE6EE0"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc)}getName(){return"v3R1"}};go.parseTransferQuery=cf;go.parseTransferBody=df;let mo=class extends pf{constructor(t,e){e.code=Ei.oneFromBoc("B5EE9C724101010100710000DEFF0020DD2082014C97BA218201339CBAB19F71B0ED44D0D31FD31F31D70BFFE304E0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED5410BD6DAD"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc)}getName(){return"v3R2"}};mo.parseTransferQuery=cf;mo.parseTransferBody=df;var kd={WalletV3ContractR1:go,WalletV3ContractR2:mo};const{Cell:cs}=je,{WalletContract:jd}=xn,{parseWalletV3TransferQuery:qd,parseWalletV3TransferBody:Wd}=vo;let yo=class extends jd{constructor(t,e){e.code=cs.oneFromBoc("B5EE9C72410215010002F5000114FF00F4A413F4BCF2C80B010201200203020148040504F8F28308D71820D31FD31FD31F02F823BBF263ED44D0D31FD31FD3FFF404D15143BAF2A15151BAF2A205F901541064F910F2A3F80024A4C8CB1F5240CB1F5230CBFF5210F400C9ED54F80F01D30721C0009F6C519320D74A96D307D402FB00E830E021C001E30021C002E30001C0039130E30D03A4C8CB1F12CB1FCBFF1112131403EED001D0D3030171B0915BE021D749C120915BE001D31F218210706C7567BD228210626C6E63BDB022821064737472BDB0925F03E002FA403020FA4401C8CA07CBFFC9D0ED44D0810140D721F404305C810108F40A6FA131B3925F05E004D33FC8258210706C7567BA9131E30D248210626C6E63BAE30004060708020120090A005001FA00F404308210706C7567831EB17080185005CB0527CF165003FA02F40012CB69CB1F5210CB3F0052F8276F228210626C6E63831EB17080185005CB0527CF1624FA0214CB6A13CB1F5230CB3F01FA02F4000092821064737472BA8E3504810108F45930ED44D0810140D720C801CF16F400C9ED54821064737472831EB17080185004CB0558CF1622FA0212CB6ACB1FCB3F9410345F04E2C98040FB000201200B0C0059BD242B6F6A2684080A06B90FA0218470D4080847A4937D29910CE6903E9FF9837812801B7810148987159F31840201580D0E0011B8C97ED44D0D70B1F8003DB29DFB513420405035C87D010C00B23281F2FFF274006040423D029BE84C600201200F100019ADCE76A26840206B90EB85FFC00019AF1DF6A26840106B90EB858FC0006ED207FA00D4D422F90005C8CA0715CBFFC9D077748018C8CB05CB0222CF165005FA0214CB6B12CCCCC971FB00C84014810108F451F2A702006C810108D718C8542025810108F451F2A782106E6F746570748018C8CB05CB025004CF16821005F5E100FA0213CB6A12CB1FC971FB00020072810108D718305202810108F459F2A7F82582106473747270748018C8CB05CB025005CF16821005F5E100FA0214CB6A13CB1F12CB3FC973FB00000AF400C9ED5446A9F34F"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this)}getName(){return"v4R1"}createSigningMessage(t,e,n){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const a=new cs;if(a.bits.writeUint(this.options.walletId,32),t===0)for(let i=0;i<32;i++)a.bits.writeBit(1);else a.bits.writeUint(e,32);return a.bits.writeUint(t,32),n||a.bits.writeUint(0,8),a}createDataCell(){const t=new cs;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t.bits.writeUint(0,1),t}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}};yo.parseTransferQuery=qd;yo.parseTransferBody=Wd;var Hd={WalletV4ContractR1:yo};const{Cell:ds}=je,{Contract:ps}=ur,{Address:aa,bytesToHex:Kd,BN:bE,toNano:Vd}=Ge,{WalletContract:Gd}=xn,{parseWalletV3TransferQuery:Yd,parseWalletV3TransferBody:zd}=vo;let wo=class extends Gd{constructor(t,e){e.code=ds.oneFromBoc("B5EE9C72410214010002D4000114FF00F4A413F4BCF2C80B010201200203020148040504F8F28308D71820D31FD31FD31F02F823BBF264ED44D0D31FD31FD3FFF404D15143BAF2A15151BAF2A205F901541064F910F2A3F80024A4C8CB1F5240CB1F5230CBFF5210F400C9ED54F80F01D30721C0009F6C519320D74A96D307D402FB00E830E021C001E30021C002E30001C0039130E30D03A4C8CB1F12CB1FCBFF1011121302E6D001D0D3032171B0925F04E022D749C120925F04E002D31F218210706C7567BD22821064737472BDB0925F05E003FA403020FA4401C8CA07CBFFC9D0ED44D0810140D721F404305C810108F40A6FA131B3925F07E005D33FC8258210706C7567BA923830E30D03821064737472BA925F06E30D06070201200809007801FA00F40430F8276F2230500AA121BEF2E0508210706C7567831EB17080185004CB0526CF1658FA0219F400CB6917CB1F5260CB3F20C98040FB0006008A5004810108F45930ED44D0810140D720C801CF16F400C9ED540172B08E23821064737472831EB17080185005CB055003CF1623FA0213CB6ACB1FCB3FC98040FB00925F03E20201200A0B0059BD242B6F6A2684080A06B90FA0218470D4080847A4937D29910CE6903E9FF9837812801B7810148987159F31840201580C0D0011B8C97ED44D0D70B1F8003DB29DFB513420405035C87D010C00B23281F2FFF274006040423D029BE84C600201200E0F0019ADCE76A26840206B90EB85FFC00019AF1DF6A26840106B90EB858FC0006ED207FA00D4D422F90005C8CA0715CBFFC9D077748018C8CB05CB0222CF165005FA0214CB6B12CCCCC973FB00C84014810108F451F2A7020070810108D718FA00D33FC8542047810108F451F2A782106E6F746570748018C8CB05CB025006CF165004FA0214CB6A12CB1FCB3FC973FB0002006C810108D718FA00D33F305224810108F459F2A782106473747270748018C8CB05CB025005CF165003FA0213CB6ACB1F12CB3FC973FB00000AF400C9ED54696225E5"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.deployAndInstallPlugin=n=>ps.createMethod(t,this.deployAndInstallPlugin(n)),this.methods.installPlugin=n=>ps.createMethod(t,this.installPlugin(n)),this.methods.removePlugin=n=>ps.createMethod(t,this.removePlugin(n)),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.isPluginInstalled=this.isPluginInstalled.bind(this),this.methods.getPluginsList=this.getPluginsList.bind(this)}getName(){return"v4R2"}createSigningMessage(t,e,n){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const a=new ds;if(a.bits.writeUint(this.options.walletId,32),t===0)for(let i=0;i<32;i++)a.bits.writeBit(1);else a.bits.writeUint(e,32);return a.bits.writeUint(t,32),n||a.bits.writeUint(0,8),a}createDataCell(){const t=new ds;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t.bits.writeUint(0,1),t}async deployAndInstallPlugin(t){const{secretKey:e,seqno:n,pluginWc:a,amount:i,stateInit:d,body:b,expireAt:C}=t,D=this.createSigningMessage(n,C,!0);return D.bits.writeUint(1,8),D.bits.writeInt(a,8),D.bits.writeGrams(i),D.refs.push(d),D.refs.push(b),this.createExternalMessage(D,e,n,!1)}async _setPlugin(t,e){const{secretKey:n,seqno:a,amount:i,queryId:d,expireAt:b}=t,C=new aa(t.pluginAddress),D=this.createSigningMessage(a,b,!0);return D.bits.writeUint(e?2:3,8),D.bits.writeInt(C.wc,8),D.bits.writeBytes(C.hashPart),D.bits.writeGrams(i||Vd("0.1")),D.bits.writeUint(d||0,64),this.createExternalMessage(D,n,a,!1)}async installPlugin(t){return this._setPlugin(t,!0)}async removePlugin(t){return this._setPlugin(t,!1)}async getWalletId(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}async isPluginInstalled(t){t=new aa(t);const e="0x"+Kd(t.hashPart),n=await this.getAddress();return!(await this.provider.call2(n.toString(),"is_plugin_installed",[["num",t.wc],["num",e]])).isZero()}async getPluginsList(){const t=a=>a[0].toNumber()+":"+a[1].toString(16),e=await this.getAddress();return(await this.provider.call2(e.toString(),"get_plugin_list")).map(t)}};wo.parseTransferQuery=Yd;wo.parseTransferBody=zd;var Zd={WalletV4ContractR2:wo};const{SimpleWalletContractR1:vf,SimpleWalletContractR2:gf,SimpleWalletContractR3:mf}=Rd,{WalletV2ContractR1:yf,WalletV2ContractR2:wf}=Pd,{WalletV3ContractR1:bf,WalletV3ContractR2:xf}=kd,{WalletV4ContractR1:Ef}=Hd,{WalletV4ContractR2:Af}=Zd,Cf={simpleR1:vf,simpleR2:gf,simpleR3:mf,v2R1:yf,v2R2:wf,v3R1:bf,v3R2:xf,v4R1:Ef,v4R2:Af},Bf=[vf,gf,mf,yf,wf,bf,xf,Ef,Af];let bo=class{constructor(t){this.provider=t,this.all=Cf,this.list=Bf,this.defaultVersion="v3R1",this.default=this.all[this.defaultVersion]}create(t){return new this.default(this.provider,t)}};bo.all=Cf;bo.list=Bf;lf.default=bo;var Mf={};const{Cell:ei}=je,{Address:AE,BN:CE,toNano:BE,bytesToHex:ME,hexToBytes:_E,nacl:FE,stringToBytes:SE,bytesToBase64:DE,base64ToBytes:fa}=Ge,{WalletContract:Xd}=xn,Qd=698983191;class vs extends Xd{constructor(t,e){e.code=ei.oneFromBoc("B5EE9C7241021E01000261000114FF00F4A413F4BCF2C80B010201200203020148040501F2F28308D71820D31FD31FD31F802403F823BB13F2F2F003802251A9BA1AF2F4802351B7BA1BF2F4801F0BF9015410C5F9101AF2F4F8005057F823F0065098F823F0062071289320D74A8E8BD30731D4511BDB3C12B001E8309229A0DF72FB02069320D74A96D307D402FB00E8D103A4476814154330F004ED541D0202CD0607020120131402012008090201200F100201200A0B002D5ED44D0D31FD31FD3FFD3FFF404FA00F404FA00F404D1803F7007434C0C05C6C2497C0F83E900C0871C02497C0F80074C7C87040A497C1383C00D46D3C00608420BABE7114AC2F6C2497C338200A208420BABE7106EE86BCBD20084AE0840EE6B2802FBCBD01E0C235C62008087E4055040DBE4404BCBD34C7E00A60840DCEAA7D04EE84BCBD34C034C7CC0078C3C412040DD78CA00C0D0E00130875D27D2A1BE95B0C60000C1039480AF00500161037410AF0050810575056001010244300F004ED540201201112004548E1E228020F4966FA520933023BB9131E2209835FA00D113A14013926C21E2B3E6308003502323287C5F287C572FFC4F2FFFD00007E80BD00007E80BD00326000431448A814C4E0083D039BE865BE803444E800A44C38B21400FE809004E0083D10C06002012015160015BDE9F780188242F847800C02012017180201481B1C002DB5187E006D88868A82609E00C6207E00C63F04EDE20B30020158191A0017ADCE76A268699F98EB85FFC00017AC78F6A268698F98EB858FC00011B325FB513435C2C7E00017B1D1BE08E0804230FB50F620002801D0D3030178B0925B7FE0FA4031FA403001F001A80EDAA4"),super(t,e),this.options.walletId||(this.options.walletId=Qd+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.getLiquidBalance=this.getLiquidBalance.bind(this),this.methods.getNominalRestrictedBalance=this.getNominalRestrictedBalance.bind(this),this.methods.getNominalLockedBalance=this.getNominalLockedBalance.bind(this)}getName(){return"lockup-0.1"}createSigningMessage(t,e){t=t||0;const n=new ei;if(n.bits.writeUint(this.options.walletId,32),t===0)for(let a=0;a<32;a++)n.bits.writeBit(1);else{const i=Math.floor(new Date().getTime()/1e3);n.bits.writeUint(i+60,32)}return n.bits.writeUint(t,32),n}createDataCell(){const t=new ei;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t.bits.writeBytes(fa(this.options.config.config_public_key)),this.options.config.allowed_destinations?(t.bits.writeUint(1,1),t.refs.push(ei.oneFromBoc(fa(this.options.config.allowed_destinations)))):t.bits.writeUint(0,1),t.bits.writeGrams(0),t.bits.writeUint(0,1),t.bits.writeGrams(0),t.bits.writeUint(0,1),t}async getWalletId(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}async getLiquidBalance(){const t=await this.getBalances();return t[0]-t[1]-t[2]}async getNominalRestrictedBalance(){return await this.getBalances()[1]}async getNominalLockedBalance(){return await this.getBalances()[2]}async getBalances(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_balances")}}Mf.default={LockupWalletV1:vs,all:{"lockup-0.1":vs},list:[vs]};var _f={};const{Address:Jd}=Ge,{Cell:tp}=je,ep=0,rp=1,np=0,xo=1,Ff=r=>new TextEncoder().encode(encodeURI(r)),Sf=r=>new TextDecoder().decode(r),ip=r=>{const t=new tp;return t.bits.writeUint(xo,8),t.bits.writeBytes(Ff(r)),t},sp=r=>{if(r.bits.array[0]!==xo)throw new Error("no OFFCHAIN_CONTENT_PREFIX");let t=0,e=r;for(;e;)t+=e.bits.array.length,e=e.refs[0];const n=new Uint8Array(t);for(t=0,e=r;e;)n.set(e.bits.array,t),t+=e.bits.array.length,e=e.refs[0];return Sf(n.slice(1))},la=(r,t,e)=>{let n=BigInt(0);for(let a=0;a<e;a++)n*=BigInt(2),n+=BigInt(r.get(t+a));return n},Df=r=>{let t=la(r.bits,3,8);t>BigInt(127)&&(t=t-BigInt(256));const e=la(r.bits,3+8,256);if(t.toString(10)+":"+e.toString(16)=="0:0")return null;const n=t.toString(10)+":"+e.toString(16).padStart(64,"0");return new Jd(n)},op=async(r,t)=>{const e=await r.call2(t,"royalty_params"),n=e[0].toNumber(),a=e[1].toNumber(),i=n/a,d=Df(e[2]);return{royalty:i,royaltyBase:a,royaltyFactor:n,royaltyAddress:d}};var yr={SNAKE_DATA_PREFIX:ep,CHUNK_DATA_PREFIX:rp,ONCHAIN_CONTENT_PREFIX:np,OFFCHAIN_CONTENT_PREFIX:xo,parseAddress:Df,serializeUri:Ff,parseUri:Sf,createOffchainUriCell:ip,parseOffchainUriCell:sp,getRoyaltyParams:op};const{Contract:ap}=ur,{Cell:cr}=je,{Address:IE,bytesToBase64:fp,BN:lp}=Ge,{parseAddress:ha}=yr,{createOffchainUriCell:hp,serializeUri:ua,parseOffchainUriCell:ca,getRoyaltyParams:up}=yr;let cp=class extends ap{constructor(t,e){if(e.wc=0,e.code=e.code||cr.oneFromBoc("B5EE9C724102140100021F000114FF00F4A413F4BCF2C80B0102016202030202CD04050201200E0F04E7D10638048ADF000E8698180B8D848ADF07D201800E98FE99FF6A2687D20699FEA6A6A184108349E9CA829405D47141BAF8280E8410854658056B84008646582A802E78B127D010A65B509E58FE59F80E78B64C0207D80701B28B9E382F970C892E000F18112E001718112E001F181181981E0024060708090201200A0B00603502D33F5313BBF2E1925313BA01FA00D43028103459F0068E1201A44343C85005CF1613CB3FCCCCCCC9ED54925F05E200A6357003D4308E378040F4966FA5208E2906A4208100FABE93F2C18FDE81019321A05325BBF2F402FA00D43022544B30F00623BA9302A402DE04926C21E2B3E6303250444313C85005CF1613CB3FCCCCCCC9ED54002C323401FA40304144C85005CF1613CB3FCCCCCCC9ED54003C8E15D4D43010344130C85005CF1613CB3FCCCCCCC9ED54E05F04840FF2F00201200C0D003D45AF0047021F005778018C8CB0558CF165004FA0213CB6B12CCCCC971FB008002D007232CFFE0A33C5B25C083232C044FD003D0032C03260001B3E401D3232C084B281F2FFF2742002012010110025BC82DF6A2687D20699FEA6A6A182DE86A182C40043B8B5D31ED44D0FA40D33FD4D4D43010245F04D0D431D430D071C8CB0701CF16CCC980201201213002FB5DAFDA89A1F481A67FA9A9A860D883A1A61FA61FF480610002DB4F47DA89A1F481A67FA9A9A86028BE09E008E003E00B01A500C6E"),e.royalty>1)throw new Error("royalty > 1");e.royaltyBase=1e3,e.royaltyFactor=Math.floor(e.royalty*e.royaltyBase),super(t,e),this.methods.getCollectionData=this.getCollectionData.bind(this),this.methods.getNftItemAddressByIndex=this.getNftItemAddressByIndex.bind(this),this.methods.getNftItemContent=this.getNftItemContent.bind(this),this.methods.getRoyaltyParams=this.getRoyaltyParams.bind(this)}createContentCell(t){const e=hp(t.collectionContentUri),n=new cr;n.bits.writeBytes(ua(t.nftItemContentBaseUri));const a=new cr;return a.refs[0]=e,a.refs[1]=n,a}createRoyaltyCell(t){const e=new cr;return e.bits.writeUint(t.royaltyFactor,16),e.bits.writeUint(t.royaltyBase,16),e.bits.writeAddress(t.royaltyAddress),e}createDataCell(){const t=new cr;return t.bits.writeAddress(this.options.ownerAddress),t.bits.writeUint(0,64),t.refs[0]=this.createContentCell(this.options),t.refs[1]=cr.oneFromBoc(this.options.nftItemCodeHex),t.refs[2]=this.createRoyaltyCell(this.options),t}createMintBody(t){const e=new cr;e.bits.writeUint(1,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeUint(t.itemIndex,64),e.bits.writeCoins(t.amount);const n=new cr;n.bits.writeAddress(t.itemOwnerAddress);const a=new cr;return a.bits.writeBytes(ua(t.itemContentUri)),n.refs[0]=a,e.refs[0]=n,e}createGetRoyaltyParamsBody(t){const e=new cr;return e.bits.writeUint(1765620048,32),e.bits.writeUint(t.queryId||0,64),e}createChangeOwnerBody(t){if(t.newOwnerAddress===void 0)throw new Error("Specify newOwnerAddress");const e=new cr;return e.bits.writeUint(3,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newOwnerAddress),e}createEditContentBody(t){if(t.royalty>1)throw new Error("royalty > 1");t.royaltyBase=1e3,t.royaltyFactor=Math.floor(t.royalty*t.royaltyBase);const e=new cr;return e.bits.writeUint(4,32),e.bits.writeUint(t.queryId||0,64),e.refs[0]=this.createContentCell(t),e.refs[1]=this.createRoyaltyCell(t),e}async getCollectionData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_collection_data"),n=e[0];let a=NaN;try{a=n.toNumber()}catch{}const i=e[1];let d=null;try{d=ca(i)}catch{}const b=ha(e[2]);return{nextItemIndex:a,itemsCount:n,ownerAddress:b,collectionContentCell:i,collectionContentUri:d}}async getNftItemContent(t){const e=await this.getAddress(),n=await t.getData();if(n.isInitialized){const a=await this.provider.call2(e.toString(),"get_nft_content",[["num",n.itemIndex.toString(10)],["tvm.Cell",fp(await n.contentCell.toBoc(!1))]]);n.contentUri=null;try{n.contentUri=ca(a)}catch{}}return n}async getNftItemAddressByIndex(t){t=new lp(t);const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_nft_address_by_index",[["num",t.toString(10)]]);return ha(n)}async getRoyaltyParams(){const t=await this.getAddress();return up(this.provider,t.toString())}};var dp={NftCollection:cp};const{Contract:pp}=ur,{Cell:ri}=je,{Address:RE,BN:vp}=Ge,{parseAddress:da,getRoyaltyParams:gp}=yr,{parseOffchainUriCell:mp}=yr,If="B5EE9C7241020D010001D0000114FF00F4A413F4BCF2C80B0102016202030202CE04050009A11F9FE00502012006070201200B0C02D70C8871C02497C0F83434C0C05C6C2497C0F83E903E900C7E800C5C75C87E800C7E800C3C00812CE3850C1B088D148CB1C17CB865407E90350C0408FC00F801B4C7F4CFE08417F30F45148C2EA3A1CC840DD78C9004F80C0D0D0D4D60840BF2C9A884AEB8C097C12103FCBC20080900113E910C1C2EBCB8536001F65135C705F2E191FA4021F001FA40D20031FA00820AFAF0801BA121945315A0A1DE22D70B01C300209206A19136E220C2FFF2E192218E3E821005138D91C85009CF16500BCF16712449145446A0708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00104794102A375BE20A00727082108B77173505C8CBFF5004CF1610248040708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB000082028E3526F0018210D53276DB103744006D71708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB0093303234E25502F003003B3B513434CFFE900835D27080269FC07E90350C04090408F80C1C165B5B60001D00F232CFD633C58073C5B3327B5520BF75041B";let Tf=class extends pp{constructor(t,e){e.wc=0,e.code=e.code||ri.oneFromBoc(If),super(t,e),this.methods.getData=this.getData.bind(this)}createDataCell(){const t=new ri;return t.bits.writeUint(this.options.index,64),t.bits.writeAddress(this.options.collectionAddress),t}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_nft_data"),n=e[0].toNumber()===-1,a=e[1];let i=NaN;try{i=a.toNumber()}catch{}const d=da(e[2]),b=n?da(e[3]):null,C=e[4];let D=null;try{D=n&&d===null?mp(C):null}catch{}return{isInitialized:n,index:i,itemIndex:a,collectionAddress:d,ownerAddress:b,contentCell:C,contentUri:D}}async createTransferBody(t){const e=new ri;return e.bits.writeUint(1607220500,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newOwnerAddress),e.bits.writeAddress(t.responseAddress),e.bits.writeBit(!1),e.bits.writeCoins(t.forwardAmount||new vp(0)),e.bits.writeBit(!1),t.forwardPayload&&e.bits.writeBytes(t.forwardPayload),e}createGetStaticDataBody(t){const e=new ri;return e.bits.writeUint(801842850,32),e.bits.writeUint(t.queryId||0,64),e}async getRoyaltyParams(){const t=await this.getAddress();return gp(this.provider,t.toString())}};Tf.codeHex=If;var yp={NftItem:Tf};const{Contract:wp}=ur,{Cell:pa}=je;let bp=class extends wp{constructor(t,e){e.wc=0,e.code=e.code||pa.oneFromBoc("B5EE9C7241010401006D000114FF00F4A413F4BCF2C80B01020120020300AAD23221C700915BE0D0D3030171B0915BE0FA40ED44D0FA403012C705F2E19101D31F01C0018E2BFA003001D4D43021F90070C8CA07CBFFC9D077748018C8CB05CB0258CF165004FA0213CB6BCCCCC971FB00915BE20004F2308EF7CCE7"),super(t,e)}createDataCell(){const t=new pa;return t.bits.writeAddress(this.options.ownerAddress),t}};var xp={NftMarketplace:bp};const{Contract:Ep}=ur,{Cell:ni}=je,{parseAddress:ii}=yr,Rf="B5EE9C7241020A010001B4000114FF00F4A413F4BCF2C80B01020120020302014804050004F2300202CD0607002FA03859DA89A1F481F481F481F401A861A1F401F481F4006101F7D00E8698180B8D8492F82707D201876A2687D207D207D207D006A18116BA4E10159C71D991B1B2990E382C92F837028916382F970FA01698FC1080289C6C8895D7970FAE99F98FD2018201A642802E78B2801E78B00E78B00FD016664F6AA701363804C9B081B2299823878027003698FE99F9810E000C92F857010C0801F5D41081DCD650029285029185F7970E101E87D007D207D0018384008646582A804E78B28B9D090D0A85AD08A500AFD010AE5B564B8FD80384008646582AC678B2803FD010B65B564B8FD80384008646582A802E78B00FD0109E5B564B8FD80381041082FE61E8A10C00C646582A802E78B117D010A65B509E58F8A40900C8C0029A3110471036454012F004E032363704C0038E4782103B9ACA0015BEF2E1C95312C70559C705B1F2E1CA702082105FCC3D14218010C8CB055006CF1622FA0215CB6A14CB1F14CB3F21CF1601CF16CA0021FA02CA00C98100A0FB00E05F06840FF2F0002ACB3F22CF1658CF16CA0021FA02CA00C98100A0FB00AECABAD1";let Nf=class extends Ep{constructor(t,e){e.wc=0,e.code=e.code||ni.oneFromBoc(Rf),super(t,e),this.methods.getData=this.getData.bind(this)}createDataCell(){const t=new ni;t.bits.writeAddress(this.options.marketplaceAddress),t.bits.writeAddress(this.options.nftAddress),t.bits.writeAddress(null),t.bits.writeCoins(this.options.fullPrice);const e=new ni;return e.bits.writeCoins(this.options.marketplaceFee),e.bits.writeAddress(this.options.royaltyAddress),e.bits.writeCoins(this.options.royaltyAmount),t.refs[0]=e,t}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_sale_data"),n=ii(e[0]),a=ii(e[1]),i=ii(e[2]),d=e[3],b=e[4],C=ii(e[5]),D=e[6];return{marketplaceAddress:n,nftAddress:a,nftOwnerAddress:i,fullPrice:d,marketplaceFee:b,royaltyAddress:C,royaltyAmount:D}}async createCancelBody(t){const e=new ni;return e.bits.writeUint(3,32),e.bits.writeUint(t.queryId||0,64),e}};Nf.codeHex=Rf;var Ap={NftSale:Nf};const{NftCollection:Cp}=dp,{NftItem:Bp}=yp,{NftMarketplace:Mp}=xp,{NftSale:_p}=Ap;_f.default={NftCollection:Cp,NftItem:Bp,NftMarketplace:Mp,NftSale:_p};var Uf={};const{Contract:Fp}=ur,{Cell:Rr}=je,{createOffchainUriCell:va,parseOffchainUriCell:Sp,parseAddress:ga}=yr,{Address:PE,BN:Dp,bytesToBase64:Ip}=Ge;let Tp=class extends Fp{constructor(t,e){e.wc=0,e.code=e.code||Rr.oneFromBoc("B5EE9C7241020B010001ED000114FF00F4A413F4BCF2C80B0102016202030202CC040502037A60090A03EFD9910E38048ADF068698180B8D848ADF07D201800E98FE99FF6A2687D007D206A6A18400AA9385D47181A9AA8AAE382F9702480FD207D006A18106840306B90FD001812881A28217804502A906428027D012C678B666664F6AA7041083DEECBEF29385D71811A92E001F1811802600271812F82C207F97840607080093DFC142201B82A1009AA0A01E428027D012C678B00E78B666491646580897A007A00658064907C80383A6465816503E5FFE4E83BC00C646582AC678B28027D0109E5B589666664B8FD80400FE3603FA00FA40F82854120870542013541403C85004FA0258CF1601CF16CCC922C8CB0112F400F400CB00C9F9007074C8CB02CA07CBFFC9D05008C705F2E04A12A1035024C85004FA0258CF16CCCCC9ED5401FA403020D70B01C3008E1F8210D53276DB708010C8CB055003CF1622FA0212CB6ACB1FCB3FC98042FB00915BE200303515C705F2E049FA403059C85004FA0258CF16CCCCC9ED54002E5143C705F2E049D43001C85004FA0258CF16CCCCC9ED54007DADBCF6A2687D007D206A6A183618FC1400B82A1009AA0A01E428027D012C678B00E78B666491646580897A007A00658064FC80383A6465816503E5FFE4E840001FAF16F6A2687D007D206A6A183FAA904051007F09"),super(t,e)}createDataCell(){const t=new Rr;return t.bits.writeCoins(0),t.bits.writeAddress(this.options.adminAddress),t.refs[0]=va(this.options.jettonContentUri),t.refs[1]=Rr.oneFromBoc(this.options.jettonWalletCodeHex),t}createMintBody(t){const e=new Rr;e.bits.writeUint(21,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.destination),e.bits.writeCoins(t.amount);const n=new Rr;return n.bits.writeUint(395134233,32),n.bits.writeUint(t.queryId||0,64),n.bits.writeCoins(t.jettonAmount),n.bits.writeAddress(null),n.bits.writeAddress(null),n.bits.writeCoins(new Dp(0)),n.bits.writeBit(!1),e.refs[0]=n,e}createChangeAdminBody(t){if(t.newAdminAddress===void 0)throw new Error("Specify newAdminAddress");const e=new Rr;return e.bits.writeUint(3,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newAdminAddress),e}createEditContentBody(t){const e=new Rr;return e.bits.writeUint(4,32),e.bits.writeUint(t.queryId||0,64),e.refs[0]=va(t.jettonContentUri),e}async getJettonData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_jetton_data"),n=e[0],a=e[1].toNumber()===-1,i=ga(e[2]),d=e[3];let b=null;try{b=Sp(d)}catch{}const C=e[4];return{totalSupply:n,isMutable:a,adminAddress:i,jettonContentCell:d,jettonContentUri:b,jettonWalletCode:C}}async getJettonWalletAddress(t){const e=await this.getAddress(),n=new Rr;n.bits.writeAddress(t);const a=await this.provider.call2(e.toString(),"get_wallet_address",[["tvm.Slice",Ip(await n.toBoc(!1))]]);return ga(a)}};var Rp={JettonMinter:Tp};const{Contract:Np}=ur,{Cell:gs}=je,{parseAddress:ma}=yr,{BN:Up}=Ge,$f="B5EE9C7241021201000328000114FF00F4A413F4BCF2C80B0102016202030202CC0405001BA0F605DA89A1F401F481F481A8610201D40607020148080900BB0831C02497C138007434C0C05C6C2544D7C0FC02F83E903E900C7E800C5C75C87E800C7E800C00B4C7E08403E29FA954882EA54C4D167C0238208405E3514654882EA58C511100FC02780D60841657C1EF2EA4D67C02B817C12103FCBC2000113E910C1C2EBCB853600201200A0B020120101101F500F4CFFE803E90087C007B51343E803E903E90350C144DA8548AB1C17CB8B04A30BFFCB8B0950D109C150804D50500F214013E809633C58073C5B33248B232C044BD003D0032C032483E401C1D3232C0B281F2FFF274013E903D010C7E801DE0063232C1540233C59C3E8085F2DAC4F3208405E351467232C7C6600C03F73B51343E803E903E90350C0234CFFE80145468017E903E9014D6F1C1551CDB5C150804D50500F214013E809633C58073C5B33248B232C044BD003D0032C0327E401C1D3232C0B281F2FFF274140371C1472C7CB8B0C2BE80146A2860822625A020822625A004AD822860822625A028062849F8C3C975C2C070C008E00D0E0F009ACB3F5007FA0222CF165006CF1625FA025003CF16C95005CC2391729171E25008A813A08208989680AA008208989680A0A014BCF2E2C504C98040FB001023C85004FA0258CF1601CF16CCC9ED5400705279A018A182107362D09CC8CB1F5230CB3F58FA025007CF165007CF16C9718018C8CB0524CF165006FA0215CB6A14CCC971FB0010241023000E10491038375F040076C200B08E218210D53276DB708010C8CB055008CF165004FA0216CB6A12CB1F12CB3FC972FB0093356C21E203C85004FA0258CF1601CF16CCC9ED5400DB3B51343E803E903E90350C01F4CFFE803E900C145468549271C17CB8B049F0BFFCB8B0A0822625A02A8005A805AF3CB8B0E0841EF765F7B232C7C572CFD400FE8088B3C58073C5B25C60063232C14933C59C3E80B2DAB33260103EC01004F214013E809633C58073C5B3327B55200083200835C87B51343E803E903E90350C0134C7E08405E3514654882EA0841EF765F784EE84AC7CB8B174CFCC7E800C04E81408F214013E809633C58073C5B3327B55205ECCF23D";let Pf=class extends Np{constructor(t,e){e.wc=0,e.code=e.code||gs.oneFromBoc($f),super(t,e)}async createTransferBody(t){const e=new gs;return e.bits.writeUint(260734629,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeCoins(t.jettonAmount),e.bits.writeAddress(t.toAddress),e.bits.writeAddress(t.responseAddress),e.bits.writeBit(!1),e.bits.writeCoins(t.forwardAmount||new Up(0)),e.bits.writeBit(!1),t.forwardPayload&&e.bits.writeBytes(t.forwardPayload),e}async createBurnBody(t){const e=new gs;return e.bits.writeUint(1499400124,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeCoins(t.jettonAmount),e.bits.writeAddress(t.responseAddress),e}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_wallet_data"),n=e[0],a=ma(e[1]),i=ma(e[2]),d=e[3];return{balance:n,ownerAddress:a,jettonMinterAddress:i,jettonWalletCode:d}}};Pf.codeHex=$f;var $p={JettonWallet:Pf};const{JettonMinter:Pp}=Rp,{JettonWallet:Op}=$p;Uf.default={JettonMinter:Pp,JettonWallet:Op};const Lp=10*1e3,kp=1*1e3,ya=r=>({workchain:r.workchain,shardId:r.shard,shardBlockNumber:r.seqno});let jp=class{constructor(t,e,n,a){this.provider=t,this.storage=e,this.onBlock=n,this.startMcBlockNumber=a?a.startMcBlockNumber:void 0,this.mcInterval=(a?a.mcInterval:void 0)||Lp,this.shardsInterval=(a?a.shardsInterval:void 0)||kp}async start(){if(this.stop(),!this.startMcBlockNumber&&(this.startMcBlockNumber=(await this.provider.getMasterchainInfo()).last.seqno,!this.startMcBlockNumber))throw new Error("Cannot get start mc block number from provider");const t=await this.provider.getMasterchainBlockHeader(this.startMcBlockNumber);if(this.startLT=t.end_lt,!this.startLT)throw new Error("Cannot get startLT from provider");let e=!1;const n=async()=>{if(!e){e=!0;try{const d=await this.storage.getLastMasterchainBlockNumber()||this.startMcBlockNumber;if(!d)throw new Error("no init masterchain block in storage");const b=(await this.provider.getMasterchainInfo()).last.seqno;if(!b)throw new Error("invalid last masterchain block from provider");for(let C=d+1;C<b;C++){const D=await this.provider.getBlockShards(C),T=await this.provider.getMasterchainBlockHeader(C);await this.onBlock(T,D),await this.storage.insertBlocks(C,D.shards.map(ya))}}catch(d){console.error(d)}e=!1}};this.mcIntervalId=setInterval(()=>n(),this.mcInterval),n();let a=!1;const i=async()=>{if(!a){a=!0;try{const d=await this.storage.getUnprocessedShardBlock();if(d){const{workchain:b,shardId:C,shardBlockNumber:D}=d,T=await this.provider.getBlockHeader(b,C,D);if(T.end_lt<this.startLT)await this.storage.setBlockProcessed(b,C,D,[]);else{await this.onBlock(T);const O=T.prev_blocks.map(ya);await this.storage.setBlockProcessed(b,C,D,O)}}}catch(d){console.log(d)}a=!1}};this.shardsIntervalId=setInterval(()=>i(),this.shardsInterval)}stop(){clearInterval(this.mcIntervalId),clearInterval(this.shardsIntervalId)}};var qp={BlockSubscription:jp};let Wp=class{constructor(t){this.masterchainBlocks={},this.shardchainBlocks={},this.logFunction=t}async insertShardBlocks(t){for(const{workchain:e,shardId:n,shardBlockNumber:a}of t)this.shardchainBlocks[e+"_"+n+"_"+a]===void 0&&(this.logFunction&&this.logFunction("insert shard "+e+" "+n+" "+a),this.shardchainBlocks[e+"_"+n+"_"+a]=!1)}async insertBlocks(t,e){if(this.logFunction&&this.logFunction("mc processed "+t),this.masterchainBlocks[t]!==void 0)throw new Error("mc already exists "+t);this.masterchainBlocks[t]=!0,await this.insertShardBlocks(e)}async getLastMasterchainBlockNumber(){return Object.keys(this.masterchainBlocks).map(e=>Number(e)).sort((e,n)=>n-e)[0]}async setBlockProcessed(t,e,n,a){if(this.logFunction&&this.logFunction("shard processed "+t+" "+e+" "+n),this.shardchainBlocks[t+"_"+e+"_"+n]===void 0)throw new Error("shard not exists "+t+"_"+e+"_"+n);this.shardchainBlocks[t+"_"+e+"_"+n]=!0,await this.insertShardBlocks(a)}async getUnprocessedShardBlock(){for(let t in this.shardchainBlocks)if(this.shardchainBlocks[t]===!1){const e=t.split("_");return{workchain:Number(e[0]),shardId:e[1],shardBlockNumber:Number(e[2])}}}};var Hp={InMemoryBlockStorage:Wp};const{BlockSubscription:Kp}=qp,{InMemoryBlockStorage:Vp}=Hp;var Gp={BlockSubscription:Kp,InMemoryBlockStorage:Vp};const{Contract:si}=ur,{Cell:Dn}=je,{hexToBytes:qE,BN:wa,nacl:WE,bytesToBase64:HE}=Ge;let Yp=class extends si{constructor(t,e){e.code=Dn.oneFromBoc("B5EE9C7241020F01000262000114FF00F4A413F4BCF2C80B0102012002030201480405036AF230DB3C5335A127A904F82327A128A90401BC5135A0F823B913B0F29EF800725210BE945387F0078E855386DB3CA4E2F82302DB3C0B0C0D0202CD06070121A0D0C9B67813F488DE0411F488DE0410130B048FD6D9E05E8698198FD201829846382C74E2F841999E98F9841083239BA395D497803F018B841083AB735BBED9E702984E382D9C74688462F863841083AB735BBED9E70156BA4E09040B0A0A080269F10FD22184093886D9E7C12C1083239BA39384008646582A803678B2801FD010A65B5658F89659FE4B9FD803FC1083239BA396D9E40E0A04F08E8D108C5F0C708210756E6B77DB3CE00AD31F308210706C7567831EB15210BA8F48305324A126A904F82326A127A904BEF27109FA4430A619F833D078D721D70B3F5260A11BBE8E923036F82370708210737562732759DB3C5077DE106910581047103645135042DB3CE0395F076C2232821064737472BA0A0A0D09011A8E897F821064737472DB3CE0300A006821B39982100400000072FB02DE70F8276F118010C8CB055005CF1621FA0214F40013CB6912CB1F830602948100A032DEC901FB000030ED44D0FA40FA40FA00D31FD31FD31FD31FD31FD307D31F30018021FA443020813A98DB3C01A619F833D078D721D70B3FA070F8258210706C7567228018C8CB055007CF165004FA0215CB6A12CB1F13CB3F01FA02CB00C973FB000E0040C8500ACF165008CF165006FA0214CB1F12CB1FCB1FCB1FCB1FCB07CB1FC9ED54005801A615F833D020D70B078100D1BA95810088D721DED307218100DDBA028100DEBA12B1F2E047D33F30A8AB0FE5855AB4"),super(t,e),this.methods.pay=()=>si.createMethod(t,this.createPayExternalMessage()),this.methods.getSubscriptionData=this.getSubscriptionData.bind(this)}createDataCell(){const t=new Dn;return t.bits.writeAddress(this.options.wallet),t.bits.writeAddress(this.options.beneficiary),t.bits.writeGrams(this.options.amount),t.bits.writeUint(this.options.period,32),t.bits.writeUint(this.options.startAt,32),t.bits.writeUint(this.options.timeout,32),t.bits.writeUint(0,32),t.bits.writeUint(0,32),t.bits.writeUint(0,8),t.bits.writeUint(this.options.subscriptionId,32),t}createBody(){const t=new Dn;return t.bits.writeUint(new wa(1886156135).add(new wa(2147483648)),32),t}createSelfDestructBody(){const t=new Dn;return t.bits.writeUint(1685288050,32),t}async getSubscriptionData(){const t=st=>st[0].toNumber()+":"+st[1].toString(16),e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_subscription_data"),a=t(n[0]),i=t(n[1]),d=n[2],b=n[3].toNumber(),C=n[4].toNumber(),D=n[5].toNumber(),T=n[6].toNumber(),O=n[7].toNumber(),k=n[8].toNumber(),G=n[9].toNumber();return{wallet:a,beneficiary:i,amount:d,period:b,startAt:C,timeout:D,lastPayment:T,lastRequest:O,failedAttempts:k,subscriptionId:G}}async createPayExternalMessage(){const t=await this.getAddress(),e=si.createExternalMessageHeader(t),n=si.createCommonMsgInfo(e,null,null),a=new Dn;return a.bits.writeUint(Math.floor(Date.now()/1e3),64),{address:t,message:n,body:a}}};var zp={SubscriptionContract:Yp};const{Cell:or}=je,Zp=(r,t)=>{if(t.length!==256/8)throw new Error("invalid publicKey length");r.bits.writeBytes(t)},Oi=(r,t)=>{if(t.length!==512/8)throw new Error("invalid signature length");r.bits.writeBytes(t)},Ps=r=>{const t=new or;return Oi(t,r),t},Of=(r,t)=>{if(t){if(r.bits.writeBit(1),r.refs.length>=4)throw new Error("refs overflow");r.refs.push(t)}else r.bits.writeBit(0)},Lf=Of,kf=1768843636,jf=1131179891,qf=1128492404,Wf=1433289580,Hf=1130915665,Kf=1131168622,Vf=1130910580,Gf=1741148801,Xp=235282626,Qp=1433884798,Jp=2040604399,t1=521476815,e1=143567410,r1=1727459433,Yf=625158801,n1=-572749638,i1=r=>{const t=new or;return t.bits.writeUint(Gf,32),t.bits.writeCoins(r.coinsA),t.bits.writeCoins(r.coinsB),t},s1=r=>{const t=new or;return t.bits.writeUint(kf,32),t.bits.writeUint(r.channelId,128),t.bits.writeCoins(r.balanceA),t.bits.writeCoins(r.balanceB),t},o1=r=>{const t=new or;return t.bits.writeUint(jf,32),t.bits.writeUint(r.channelId,128),t.bits.writeCoins(r.balanceA),t.bits.writeCoins(r.balanceB),t.bits.writeUint(r.seqnoA,64),t.bits.writeUint(r.seqnoB,64),t},a1=r=>{const t=new or;return t.bits.writeUint(qf,32),t.bits.writeUint(r.channelId,128),t.bits.writeUint(r.seqnoA,64),t.bits.writeUint(r.seqnoB,64),t},f1=r=>{const t=new or;return t.bits.writeCoins(r.amount),t.writeCell(r.condition),t},l1=r=>{const t=new or;return t.bits.writeUint(r.seqno,64),t.bits.writeCoins(r.sentCoins),Lf(t,r.conditionals),t},h1=r=>{const t=new or;return t.bits.writeUint(Vf,32),t.bits.writeUint(r.channelId,128),t.writeCell(r.semiChannelBody),Of(t,r.counterpartySemiChannelBody),t},u1=r=>{const t=new or;return Oi(t,r.signature),t.writeCell(r.state),t},c1=r=>{const t=new or;return t.bits.writeUint(Wf,32),t.bits.writeUint(r.channelId,128),t.refs[0]=r.signedSemiChannelStateA,t.refs[1]=r.signedSemiChannelStateB,t},d1=r=>{const t=new or;return t.bits.writeUint(Hf,32),t.bits.writeUint(r.channelId,128),t.refs[0]=r.signedSemiChannelStateA,t.refs[1]=r.signedSemiChannelStateB,t},p1=r=>{const t=new or;return t.bits.writeUint(Kf,32),t.bits.writeUint(r.channelId,128),Lf(t,r.conditionalsToSettle),t},v1=()=>{const r=new or;return r.bits.writeUint(Yf,32),r},g1=r=>{const t=new or;return t.bits.writeUint(r.op,32),t.bits.writeBit(r.isA),Oi(t,r.signature),t.writeCell(r.cell),t},m1=r=>{const t=new or;return t.bits.writeUint(r.op,32),t.refs[0]=Ps(r.signatureA),t.refs[1]=Ps(r.signatureB),t.writeCell(r.cell),t};var y1={writePublicKey:Zp,writeSignature:Oi,createSignatureCell:Ps,tag_init:kf,tag_cooperative_close:jf,tag_cooperative_commit:qf,tag_start_uncooperative_close:Wf,tag_challenge_state:Hf,tag_settle_conditionals:Kf,tag_state:Vf,op_top_up_balance:Gf,op_init_channel:Xp,op_cooperative_close:Qp,op_cooperative_commit:Jp,op_start_uncooperative_close:t1,op_challenge_quarantined_state:e1,op_settle_conditionals:r1,op_finish_uncooperative_close:Yf,op_channel_closed:n1,createTopUpBalance:i1,createInitChannelBody:s1,createCooperativeCloseChannelBody:o1,createCooperativeCommitBody:a1,createConditionalPayment:f1,createSemiChannelBody:l1,createSemiChannelState:h1,createSignedSemiChannelState:u1,createStartUncooperativeCloseBody:c1,createChallengeQuarantinedStateBody:d1,createSettleConditionalsBody:p1,createFinishUncooperativeClose:v1,createOneSignature:g1,createTwoSignature:m1};const{Contract:w1}=ur,{Cell:oi}=je,{nacl:In,hexToBytes:b1,BN:on}=Ge,{parseAddress:ba}=yr,{writePublicKey:xa,writeSignature:VE,createSignatureCell:GE,tag_init:YE,tag_cooperative_close:zE,tag_cooperative_commit:ZE,tag_start_uncooperative_close:XE,tag_challenge_state:QE,tag_settle_conditionals:JE,tag_state:t6,op_top_up_balance:e6,op_init_channel:x1,op_cooperative_close:E1,op_cooperative_commit:A1,op_start_uncooperative_close:C1,op_challenge_quarantined_state:B1,op_settle_conditionals:M1,op_finish_uncooperative_close:r6,op_channel_closed:n6,createTopUpBalance:_1,createInitChannelBody:F1,createCooperativeCloseChannelBody:Ea,createCooperativeCommitBody:S1,createConditionalPayment:i6,createSemiChannelBody:ai,createSemiChannelState:Aa,createSignedSemiChannelState:D1,createStartUncooperativeCloseBody:I1,createChallengeQuarantinedStateBody:T1,createSettleConditionalsBody:R1,createFinishUncooperativeClose:N1,createOneSignature:U1,createTwoSignature:$1}=y1,zf="B5EE9C72410230010007FB000114FF00F4A413F4BCF2C80B0102012002030201480405000AF26C21F0190202CB06070201202E2F020120080902012016170201200A0B0201200C0D0009D3610F80CC001D6B5007434C7FE8034C7CC1BC0FE19E0201580E0F0201201011002D3E11DBC4BE11DBC43232C7FE11DBC47E80B2C7F2407320008B083E1B7B51343480007E187E80007E18BE80007E18F4FFC07E1934FFC07E1974DFC07E19BC01887080A7F4C7C07E1A34C7C07E1A7D01007E1AB7807080E535007E1AF7BE1B2002012012130201201415008D3E13723E11BE117E113E10540132803E10BE80BE10FE8084F2FFC4B2FFF2DFFC02887080A7FE12BE127E121400F2C7C4B2C7FD0037807080E53E12C073253E1333C5B8B27B5520004D1C3C02FE106CFCB8193E803E800C3E1096283E18BE10C0683E18FE10BE10E8006EFCB819BC032000CF1D3C02FE106CFCB819348020C235C6083E4040E4BE1124BE117890CC3E443CB81974C7C060841A5B9A5D2EBCB81A3E118074DFD66EBCB81CBE803E800C3E1094882FBE10D4882FAC3CB819807E18BE18FE12F43E800C3E10BE10E80068006E7CB8199FFE187C0320004120843777222E9C20043232C15401B3C594013E808532DA84B2C7F2DFF2407EC02002012018190201D42B2C0201201A1B0201201E1F0201201C1D00E5473F00BD401D001D401D021F90102D31F01821043436D74BAF2E068F84601D37F59BAF2E072F844544355F910F8454330F910B0F2E065D33FD33F30F84822B9F84922B9B0F2E06C21F86820F869F84A6E915B8E19F84AD0D33FFA003171D721D33F305033BC02BCB1936DF86ADEE2F800F00C8006F3E12F43E800C7E903E900C3E09DBC41CBE10D62F24CC20C1B7BE10FE11963C03FE10BE11A04020BC03DC3E185C3E189C3E18DB7E1ABC032000B51D3C02F5007400750074087E4040B4C7C0608410DB1BDCEEBCB81A3E118074DFD66EBCB81CBE111510D57E443E1150CC3E442C3CB8197E80007E18BE80007E18F4CFF4CFCC3E1208AE7E1248AE6C3CB81B007E1A3E1A7E003C042001C1573F00BF84A6EF2E06AD2008308D71820F9012392F84492F845E24130F910F2E065D31F018210556E436CBAF2E068F84601D37F59BAF2E072D401D08308D71820F901F8444130F910F2E06501D430D08308D71820F901F8454130F910F2E06501820020120222301FED31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE2303205D31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE23032F8485280BEF8495250BEB0524BBE1AB0527ABE19210064B05215BE14B05248BE17B0F2E06970F82305C8CB3F5004FA0215F40015CB3F5004FA0212F400CB1F12CA00CA00C9F86AF00C01C31CFC02FE129BACFCB81AF48020C235C6083E4048E4BE1124BE1178904C3E443CB81974C7C0608410DA19D46EBCB81A3E118074DFD66EBCB81CB5007420C235C6083E407E11104C3E443CB81940750C3420C235C6083E407E11504C3E443CB81940602403F71CFC02FE129BACFCB81AF48020C235C6083E4048E4BE1124BE1178904C3E443CB81974C7C0608410DB10DBAEBCB81A3E118074DFD66EBCB81CBD010C3E12B434CFFE803D0134CFFE803D0134C7FE11DBC4148828083E08EE7CB81BBE11DBC4A83E08EF3CB81C34800C151D5A64D6D4C8F7A2B98E82A49B08B8C3816028292A01FCD31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE2303205D31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE230325339BE5381BEB0F8495250BEB0F8485290BEB02502FE5237BE16B05262BEB0F2E06927C20097F84918BEF2E0699137E222C20097F84813BEF2E0699132E2F84AD0D33FFA00F404D33FFA00F404D31FF8476F105220A0F823BCF2E06FD200D20030B3F2E073209C3537373A5274BC5263BC12B18E11323939395250BC5299BC18B14650134440E25319BAB3F2E06D9130E30D7F05C82627002496F8476F1114A098F8476F1117A00603E203003ECB3F5004FA0215F40012CB3F5004FA0213F400CB1F12CA00CA00C9F86AF00C00620A8020F4966FA5208E213050038020F4666FA1208E1001FA00ED1E15DA119450C3A00B9133E2923430E202926C21E2B31B000C3535075063140038C8CB3F5004FA0212F400CB3F5003FA0213F400CB1FCA00C9F86AF00C00D51D3C02FE129BACFCB81AFE12B434CFFE803D010C74CFFE803D010C74C7CC3E11DBC4283E11DBC4A83E08EE7CB81C7E003E10886808E87E18BE10D400E816287E18FE10F04026BE10BE10E83E189C3E18F7BE10B04026BE10FE10A83E18DC3E18F780693E1A293E1A7C042001F53B7EF4C7C8608419F1F4A06EA4CC7C037808608403818830AEA54C7C03B6CC780C882084155DD61FAEA54C3C0476CC780820841E6849BBEEA54C3C04B6CC7808208407C546B3EEA54C3C0576CC780820840223AA8CAEA54C3C05B6CC7808208419BDBC1A6EA54C3C05F6CC780C60840950CAA46EA53C0636CC78202D0008840FF2F00075BC7FE3A7805FC25E87D007D207D20184100D0CAF6A1EC7C217C21B7817C227C22B7817C237C23FC247C24B7817C2524C3B7818823881B22A021984008DBD0CABA7805FC20C8B870FC253748B8F07C256840206B90FD0018C020EB90FD0018B8EB90E98F987C23B7882908507C11DE491839707C23B788507C23B789507C11DE48B9F03A4331C4966";var Yr;let Zf=(Yr=class extends w1{constructor(t,e){e.publicKeyA=e.isA?e.myKeyPair.publicKey:e.hisPublicKey,e.publicKeyB=e.isA?e.hisPublicKey:e.myKeyPair.publicKey,e.wc=e.wc||0,e.code=e.code||oi.oneFromBoc(zf),super(t,e)}createDataCell(){var a,i,d;const t=new oi;t.bits.writeBit(0),t.bits.writeCoins(0),t.bits.writeCoins(0),xa(t,this.options.publicKeyA),xa(t,this.options.publicKeyB),t.bits.writeUint(this.options.channelId,128);const e=new oi;e.bits.writeUint(((a=this.options.closingConfig)==null?void 0:a.quarantineDuration)||0,32),e.bits.writeCoins(((i=this.options.closingConfig)==null?void 0:i.misbehaviorFine)||new on(0)),e.bits.writeUint(((d=this.options.closingConfig)==null?void 0:d.conditionalCloseDuration)||0,32),t.refs[0]=e,t.bits.writeUint(0,32),t.bits.writeUint(0,32),t.bits.writeBit(!1);const n=new oi;return n.bits.writeCoins(this.options.excessFee||new on(0)),n.bits.writeAddress(this.options.addressA),n.bits.writeAddress(this.options.addressB),t.refs[1]=n,t}async createOneSignature(t,e){const n=In.sign.detached(await e.hash(),this.options.myKeyPair.secretKey);return{cell:U1({op:t,isA:this.options.isA,signature:n,cell:e}),signature:n}}async createTwoSignature(t,e,n){const a=In.sign.detached(await n.hash(),this.options.myKeyPair.secretKey),i=this.options.isA?a:e,d=this.options.isA?e:a;return{cell:$1({op:t,signatureA:i,signatureB:d,cell:n}),signature:a}}async createTopUpBalance(t){return _1(t)}async createInitChannel(t){return this.createOneSignature(x1,F1({...t,channelId:this.options.channelId}))}async createCooperativeCloseChannel(t){return t.hisSignature||(t.hisSignature=new Uint8Array(512/8)),this.createTwoSignature(E1,t.hisSignature,Ea({...t,channelId:this.options.channelId}))}async createCooperativeCommit(t){return t.hisSignature||(t.hisSignature=new Uint8Array(512/8)),this.createTwoSignature(A1,t.hisSignature,S1({...t,channelId:this.options.channelId}))}async createSignedSemiChannelState(t){const e=Aa({channelId:this.options.channelId,semiChannelBody:ai({seqno:t.mySeqno,sentCoins:t.mySentCoins,conditionals:null}),counterpartySemiChannelBody:t.hisSeqno===void 0?null:ai({seqno:t.hisSeqno,sentCoins:t.hisSentCoins,conditionals:null})}),n=In.sign.detached(await e.hash(),this.options.myKeyPair.secretKey);return{cell:D1({signature:n,state:e}),signature:n}}async signState(t){const e=this.options.isA?t.seqnoA:t.seqnoB,n=this.options.isA?t.seqnoB:t.seqnoA,a=this.options.initBalanceA.gt(t.balanceA)?this.options.initBalanceA.sub(t.balanceA):new on(0),i=this.options.initBalanceB.gt(t.balanceB)?this.options.initBalanceB.sub(t.balanceB):new on(0),d=this.options.isA?a:i,b=this.options.isA?i:a,{cell:C,signature:D}=await this.createSignedSemiChannelState({mySeqno:e,mySentCoins:d,hisSeqno:n,hisSentCoins:b});return D}async verifyState(t,e){const n=this.options.isA?t.seqnoB:t.seqnoA,a=this.options.isA?t.seqnoA:t.seqnoB,i=this.options.initBalanceA.gt(t.balanceA)?this.options.initBalanceA.sub(t.balanceA):new on(0),d=this.options.initBalanceB.gt(t.balanceB)?this.options.initBalanceB.sub(t.balanceB):new on(0),b=this.options.isA?d:i,C=this.options.isA?i:d,T=await Aa({channelId:this.options.channelId,semiChannelBody:ai({seqno:n,sentCoins:b,conditionals:null}),counterpartySemiChannelBody:a===void 0?null:ai({seqno:a,sentCoins:C,conditionals:null})}).hash();return In.sign.detached.verify(T,e,this.options.isA?this.options.publicKeyB:this.options.publicKeyA)}async signClose(t){const{cell:e,signature:n}=await this.createCooperativeCloseChannel(t);return n}async verifyClose(t,e){const a=await(await Ea({...t,channelId:this.options.channelId})).hash();return In.sign.detached.verify(a,e,this.options.isA?this.options.publicKeyB:this.options.publicKeyA)}async createStartUncooperativeClose(t){return this.createOneSignature(C1,I1({...t,channelId:this.options.channelId}))}async createChallengeQuarantinedState(t){return this.createOneSignature(B1,T1({...t,channelId:this.options.channelId}))}async createSettleConditionals(t){return this.createOneSignature(M1,R1({...t,channelId:this.options.channelId}))}async createFinishUncooperativeClose(){return N1()}async getChannelState(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_channel_state",[])).toNumber()}async getData(){const t=tt=>{let K=tt.toString(16);return K.length%2!==0&&(K="0"+K),b1(K)},e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_channel_data",[]),a=n[0].toNumber(),i=n[1][0],d=n[1][1],b=t(n[2][0]),C=t(n[2][1]),D=n[3],T=n[4][0].toNumber(),O=n[4][1],k=n[4][2].toNumber(),G=n[5][0],st=n[5][1],ft=n[6],it=n[7][0],lt=ba(n[7][1]),wt=ba(n[7][2]);return{state:a,balanceA:i,balanceB:d,publicKeyA:b,publicKeyB:C,channelId:D,quarantineDuration:T,misbehaviorFine:O,conditionalCloseDuration:k,seqnoA:G,seqnoB:st,quarantine:ft,excessFee:it,addressA:lt,addressB:wt}}fromWallet(t){const{wallet:e,secretKey:n}=t,a=(i,d)=>{const b=async C=>{const D=d?(await this.createStateInit()).stateInit:null,T=await this.getAddress(),O=await e.methods.seqno().call()||0,k=await i;return e.methods.transfer({secretKey:n,toAddress:T.toString(!0,!0,!0),amount:C,seqno:O,payload:k,stateInit:D,sendMode:3})};return{send:C=>b(C).then(D=>D.send()),estimateFee:C=>b(C).then(D=>D.estimateFee())}};return{deploy:()=>a(null,!0),init:i=>a(this.createInitChannel(i).then(d=>d.cell)),topUp:i=>a(this.createTopUpBalance(i)),close:i=>a(this.createCooperativeCloseChannel(i).then(d=>d.cell)),commit:i=>a(this.createCooperativeCommit(i).then(d=>d.cell)),startUncooperativeClose:i=>a(this.createStartUncooperativeClose(i).then(d=>d.cell)),challengeQuarantinedState:i=>a(this.createChallengeQuarantinedState(i).then(d=>d.cell)),settleConditionals:i=>a(this.createSettleConditionals(i).then(d=>d.cell)),finishUncooperativeClose:()=>a(this.createFinishUncooperativeClose())}}},rn(Yr,"STATE_UNINITED",0),rn(Yr,"STATE_OPEN",1),rn(Yr,"STATE_CLOSURE_STARTED",2),rn(Yr,"STATE_SETTLING_CONDITIONALS",3),rn(Yr,"STATE_AWAITING_FINALIZATION",4),Yr);Zf.codeHex=zf;var P1={PaymentChannel:Zf};const{PaymentChannel:Xf}=P1;let O1=class{constructor(t){this.provider=t}createChannel(t){return new Xf(this.provider,t)}};var L1={Payments:O1,PaymentChannel:Xf},Eo={exports:{}},cn=typeof Reflect=="object"?Reflect:null,Ca=cn&&typeof cn.apply=="function"?cn.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},gi;cn&&typeof cn.ownKeys=="function"?gi=cn.ownKeys:Object.getOwnPropertySymbols?gi=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:gi=function(t){return Object.getOwnPropertyNames(t)};function k1(r){console&&console.warn&&console.warn(r)}var Qf=Number.isNaN||function(t){return t!==t};function Ue(){Ue.init.call(this)}Eo.exports=Ue;Eo.exports.once=H1;Ue.EventEmitter=Ue;Ue.prototype._events=void 0;Ue.prototype._eventsCount=0;Ue.prototype._maxListeners=void 0;var Ba=10;function Li(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Ue,"defaultMaxListeners",{enumerable:!0,get:function(){return Ba},set:function(r){if(typeof r!="number"||r<0||Qf(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Ba=r}});Ue.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ue.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Qf(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Jf(r){return r._maxListeners===void 0?Ue.defaultMaxListeners:r._maxListeners}Ue.prototype.getMaxListeners=function(){return Jf(this)};Ue.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var a=t==="error",i=this._events;if(i!==void 0)a=a&&i.error===void 0;else if(!a)return!1;if(a){var d;if(e.length>0&&(d=e[0]),d instanceof Error)throw d;var b=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw b.context=d,b}var C=i[t];if(C===void 0)return!1;if(typeof C=="function")Ca(C,this,e);else for(var D=C.length,T=il(C,D),n=0;n<D;++n)Ca(T[n],this,e);return!0};function tl(r,t,e,n){var a,i,d;if(Li(e),i=r._events,i===void 0?(i=r._events=Object.create(null),r._eventsCount=0):(i.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),i=r._events),d=i[t]),d===void 0)d=i[t]=e,++r._eventsCount;else if(typeof d=="function"?d=i[t]=n?[e,d]:[d,e]:n?d.unshift(e):d.push(e),a=Jf(r),a>0&&d.length>a&&!d.warned){d.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=r,b.type=t,b.count=d.length,k1(b)}return r}Ue.prototype.addListener=function(t,e){return tl(this,t,e,!1)};Ue.prototype.on=Ue.prototype.addListener;Ue.prototype.prependListener=function(t,e){return tl(this,t,e,!0)};function j1(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function el(r,t,e){var n={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},a=j1.bind(n);return a.listener=e,n.wrapFn=a,a}Ue.prototype.once=function(t,e){return Li(e),this.on(t,el(this,t,e)),this};Ue.prototype.prependOnceListener=function(t,e){return Li(e),this.prependListener(t,el(this,t,e)),this};Ue.prototype.removeListener=function(t,e){var n,a,i,d,b;if(Li(e),a=this._events,a===void 0)return this;if(n=a[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,d=n.length-1;d>=0;d--)if(n[d]===e||n[d].listener===e){b=n[d].listener,i=d;break}if(i<0)return this;i===0?n.shift():q1(n,i),n.length===1&&(a[t]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",t,b||e)}return this};Ue.prototype.off=Ue.prototype.removeListener;Ue.prototype.removeAllListeners=function(t){var e,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),d;for(a=0;a<i.length;++a)d=i[a],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(a=e.length-1;a>=0;a--)this.removeListener(t,e[a]);return this};function rl(r,t,e){var n=r._events;if(n===void 0)return[];var a=n[t];return a===void 0?[]:typeof a=="function"?e?[a.listener||a]:[a]:e?W1(a):il(a,a.length)}Ue.prototype.listeners=function(t){return rl(this,t,!0)};Ue.prototype.rawListeners=function(t){return rl(this,t,!1)};Ue.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):nl.call(r,t)};Ue.prototype.listenerCount=nl;function nl(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}Ue.prototype.eventNames=function(){return this._eventsCount>0?gi(this._events):[]};function il(r,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=r[n];return e}function q1(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function W1(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function H1(r,t){return new Promise(function(e,n){function a(d){r.removeListener(t,i),n(d)}function i(){typeof r.removeListener=="function"&&r.removeListener("error",a),e([].slice.call(arguments))}sl(r,t,i,{once:!0}),t!=="error"&&K1(r,a,{once:!0})})}function K1(r,t,e){typeof r.on=="function"&&sl(r,"error",t,e)}function sl(r,t,e,n){if(typeof r.on=="function")n.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function a(i){n.once&&r.removeEventListener(t,a),e(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var V1=Eo.exports;const G1=jn(V1);var ol={},al={},Ao=function(r,t){al[r]=t},rt=function(r){var t=function(n,a){Object.assign(this,a),this.name=r,this.message=n||r,this.stack=new Error().stack};return t.prototype=new Error,ol[r]=t,t},fl=function(r){if(typeof r=="object"&&r){try{var t=JSON.parse(r.message);t.message&&t.name&&(r=t)}catch{}var e=void 0;if(typeof r.name=="string"){var n=r.name,a=al[n];if(a)e=a(r);else{var i=n==="Error"?Error:ol[n];i||(console.warn("deserializing an unknown class '"+n+"'"),i=rt(n)),e=Object.create(i.prototype);try{for(var d in r)r.hasOwnProperty(d)&&(e[d]=r[d])}catch{}}}else e=new Error(r.message);return!e.stack&&Error.captureStackTrace&&Error.captureStackTrace(e,fl),e}return new Error(String(r))},Y1=function(r){return r&&(typeof r=="object"?ll(r,[]):typeof r=="function"?"[Function: "+(r.name||"anonymous")+"]":r)};function ll(r,t){var e={};t.push(r);for(var n=0,a=Object.keys(r);n<a.length;n++){var i=a[n],d=r[i];if(typeof d!="function"){if(!d||typeof d!="object"){e[i]=d;continue}if(t.indexOf(r[i])===-1){e[i]=ll(r[i],t.slice(0));continue}e[i]="[Circular]"}}return typeof r.name=="string"&&(e.name=r.name),typeof r.message=="string"&&(e.message=r.message),typeof r.stack=="string"&&(e.stack=r.stack),e}var z1=rt("AccountNameRequired"),Z1=rt("AccountNotSupported"),X1=rt("AmountRequired"),Q1=rt("BluetoothRequired"),J1=rt("BtcUnmatchedApp"),tv=rt("CantOpenDevice"),ev=rt("CashAddrNotSupported"),rv=rt("CurrencyNotSupported"),nv=rt("DeviceAppVerifyNotSupported"),iv=rt("DeviceGenuineSocketEarlyClose"),sv=rt("DeviceNotGenuine"),ov=rt("DeviceOnDashboardExpected"),av=rt("DeviceOnDashboardUnexpected"),fv=rt("DeviceInOSUExpected"),lv=rt("DeviceHalted"),hv=rt("DeviceNameInvalid"),uv=rt("DeviceSocketFail"),cv=rt("DeviceSocketNoBulkStatus"),ki=rt("DisconnectedDevice"),Co=rt("DisconnectedDeviceDuringOperation"),dv=rt("EnpointConfig"),pv=rt("EthAppPleaseEnableContractData"),vv=rt("FeeEstimationFailed"),gv=rt("FirmwareNotRecognized"),mv=rt("HardResetFail"),yv=rt("InvalidXRPTag"),wv=rt("InvalidAddress"),bv=rt("InvalidAddressBecauseDestinationIsAlsoSource"),xv=rt("LatestMCUInstalledError"),Ev=rt("UnknownMCU"),Av=rt("LedgerAPIError"),Cv=rt("LedgerAPIErrorWithMessage"),Bv=rt("LedgerAPINotAvailable"),Mv=rt("ManagerAppAlreadyInstalled"),_v=rt("ManagerAppRelyOnBTC"),Fv=rt("ManagerAppDepInstallRequired"),Sv=rt("ManagerAppDepUninstallRequired"),Dv=rt("ManagerDeviceLocked"),Iv=rt("ManagerFirmwareNotEnoughSpace"),Tv=rt("ManagerNotEnoughSpace"),Rv=rt("ManagerUninstallBTCDep"),Nv=rt("NetworkDown"),Uv=rt("NoAddressesFound"),$v=rt("NotEnoughBalance"),Pv=rt("NotEnoughBalanceToDelegate"),Ov=rt("NotEnoughBalanceInParentAccount"),Lv=rt("NotEnoughSpendableBalance"),kv=rt("NotEnoughBalanceBecauseDestinationNotCreated"),jv=rt("NoAccessToCamera"),qv=rt("NotEnoughGas"),Wv=rt("NotSupportedLegacyAddress"),Hv=rt("GasLessThanEstimate"),Kv=rt("PasswordsDontMatch"),Vv=rt("PasswordIncorrect"),Gv=rt("RecommendSubAccountsToEmpty"),Yv=rt("RecommendUndelegation"),zv=rt("TimeoutTagged"),Zv=rt("UnexpectedBootloader"),Xv=rt("MCUNotGenuineToDashboard"),Qv=rt("RecipientRequired"),Jv=rt("UnavailableTezosOriginatedAccountReceive"),tg=rt("UnavailableTezosOriginatedAccountSend"),eg=rt("UpdateFetchFileFail"),rg=rt("UpdateIncorrectHash"),ng=rt("UpdateIncorrectSig"),ig=rt("UpdateYourApp"),sg=rt("UserRefusedDeviceNameChange"),og=rt("UserRefusedAddress"),ag=rt("UserRefusedFirmwareUpdate"),fg=rt("UserRefusedAllowManager"),lg=rt("UserRefusedOnDevice"),Pn=rt("TransportOpenUserCancelled"),Os=rt("TransportInterfaceNotAvailable"),hl=rt("TransportRaceCondition"),ul=rt("TransportWebUSBGestureRequired"),hg=rt("DeviceShouldStayInApp"),ug=rt("WebsocketConnectionError"),cg=rt("WebsocketConnectionFailed"),dg=rt("WrongDeviceForAccount"),pg=rt("WrongAppForCurrency"),vg=rt("ETHAddressNonEIP"),gg=rt("CantScanQRCode"),mg=rt("FeeNotLoaded"),yg=rt("FeeRequired"),wg=rt("FeeTooHigh"),bg=rt("SyncError"),xg=rt("PairingFailed"),Eg=rt("GenuineCheckFailed"),Ag=rt("LedgerAPI4xx"),Cg=rt("LedgerAPI5xx"),Bg=rt("FirmwareOrAppUpdateRequired"),Mg=rt("NoDBPathGiven"),_g=rt("DBWrongPassword"),Fg=rt("DBNotReset");function jr(r,t){this.name="TransportError",this.message=r,this.stack=new Error().stack,this.id=t}jr.prototype=new Error;Ao("TransportError",function(r){return new jr(r.message,r.id)});var Ai={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function cl(r){switch(r){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=r&&r<=28671)return"Internal error, please report"}function ji(r){this.name="TransportStatusError";var t=Object.keys(Ai).find(function(a){return Ai[a]===r})||"UNKNOWN_ERROR",e=cl(r)||t,n=r.toString(16);this.message="Ledger device: "+e+" (0x"+n+")",this.stack=new Error().stack,this.statusCode=r,this.statusText=t}ji.prototype=new Error;Ao("TransportStatusError",function(r){return new ji(r.statusCode)});const Sg=Object.freeze(Object.defineProperty({__proto__:null,AccountNameRequiredError:z1,AccountNotSupported:Z1,AmountRequired:X1,BluetoothRequired:Q1,BtcUnmatchedApp:J1,CantOpenDevice:tv,CantScanQRCode:gg,CashAddrNotSupported:ev,CurrencyNotSupported:rv,DBNotReset:Fg,DBWrongPassword:_g,DeviceAppVerifyNotSupported:nv,DeviceGenuineSocketEarlyClose:iv,DeviceHalted:lv,DeviceInOSUExpected:fv,DeviceNameInvalid:hv,DeviceNotGenuineError:sv,DeviceOnDashboardExpected:ov,DeviceOnDashboardUnexpected:av,DeviceShouldStayInApp:hg,DeviceSocketFail:uv,DeviceSocketNoBulkStatus:cv,DisconnectedDevice:ki,DisconnectedDeviceDuringOperation:Co,ETHAddressNonEIP:vg,EnpointConfigError:dv,EthAppPleaseEnableContractData:pv,FeeEstimationFailed:vv,FeeNotLoaded:mg,FeeRequired:yg,FeeTooHigh:wg,FirmwareNotRecognized:gv,FirmwareOrAppUpdateRequired:Bg,GasLessThanEstimate:Hv,GenuineCheckFailed:Eg,HardResetFail:mv,InvalidAddress:wv,InvalidAddressBecauseDestinationIsAlsoSource:bv,InvalidXRPTag:yv,LatestMCUInstalledError:xv,LedgerAPI4xx:Ag,LedgerAPI5xx:Cg,LedgerAPIError:Av,LedgerAPIErrorWithMessage:Cv,LedgerAPINotAvailable:Bv,MCUNotGenuineToDashboard:Xv,ManagerAppAlreadyInstalledError:Mv,ManagerAppDepInstallRequired:Fv,ManagerAppDepUninstallRequired:Sv,ManagerAppRelyOnBTCError:_v,ManagerDeviceLockedError:Dv,ManagerFirmwareNotEnoughSpaceError:Iv,ManagerNotEnoughSpaceError:Tv,ManagerUninstallBTCDep:Rv,NetworkDown:Nv,NoAccessToCamera:jv,NoAddressesFound:Uv,NoDBPathGiven:Mg,NotEnoughBalance:$v,NotEnoughBalanceBecauseDestinationNotCreated:kv,NotEnoughBalanceInParentAccount:Ov,NotEnoughBalanceToDelegate:Pv,NotEnoughGas:qv,NotEnoughSpendableBalance:Lv,NotSupportedLegacyAddress:Wv,PairingFailed:xg,PasswordIncorrectError:Vv,PasswordsDontMatchError:Kv,RecipientRequired:Qv,RecommendSubAccountsToEmpty:Gv,RecommendUndelegation:Yv,StatusCodes:Ai,SyncError:bg,TimeoutTagged:zv,TransportError:jr,TransportInterfaceNotAvailable:Os,TransportOpenUserCancelled:Pn,TransportRaceCondition:hl,TransportStatusError:ji,TransportWebUSBGestureRequired:ul,UnavailableTezosOriginatedAccountReceive:Jv,UnavailableTezosOriginatedAccountSend:tg,UnexpectedBootloader:Zv,UnknownMCU:Ev,UpdateFetchFileFail:eg,UpdateIncorrectHash:rg,UpdateIncorrectSig:ng,UpdateYourApp:ig,UserRefusedAddress:og,UserRefusedAllowManager:fg,UserRefusedDeviceNameChange:sg,UserRefusedFirmwareUpdate:ag,UserRefusedOnDevice:lg,WebsocketConnectionError:ug,WebsocketConnectionFailed:cg,WrongAppForCurrency:pg,WrongDeviceForAccount:dg,addCustomErrorDeserializer:Ao,createCustomErrorClass:rt,deserializeError:fl,getAltStatusMessage:cl,serializeError:Y1},Symbol.toStringTag,{value:"Module"}));class Ir{constructor(){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new G1,this.send=async(t,e,n,a,i=Buffer.alloc(0),d=[Ai.OK])=>{if(i.length>=256)throw new jr("data.length exceed 256 bytes limit. Got: "+i.length,"DataLengthTooBig");const b=await this.exchange(Buffer.concat([Buffer.from([t,e,n,a]),Buffer.from([i.length]),i])),C=b.readUInt16BE(b.length-2);if(!d.some(D=>D===C))throw new ji(C);return b},this.exchangeBusyPromise=void 0,this.exchangeAtomicImpl=async t=>{if(this.exchangeBusyPromise)throw new hl("An action was already pending on the Ledger device. Please deny or reconnect.");let e;const n=new Promise(d=>{e=d});this.exchangeBusyPromise=n;let a=!1;const i=setTimeout(()=>{a=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const d=await t();return a&&this.emit("responsive"),d}finally{clearTimeout(i),e&&e(),this.exchangeBusyPromise=null}},this._appAPIlock=null}exchange(t){throw new Error("exchange not implemented")}setScrambleKey(t){}close(){return Promise.resolve()}on(t,e){this._events.on(t,e)}off(t,e){this._events.removeListener(t,e)}emit(t,...e){this._events.emit(t,...e)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(t){this.exchangeTimeout=t}setExchangeUnresponsiveTimeout(t){this.unresponsiveTimeout=t}static create(t=3e3,e){return new Promise((n,a)=>{let i=!1;const d=this.listen({next:C=>{i=!0,d&&d.unsubscribe(),b&&clearTimeout(b),this.open(C.descriptor,t).then(n,a)},error:C=>{b&&clearTimeout(b),a(C)},complete:()=>{b&&clearTimeout(b),i||a(new jr(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),b=e?setTimeout(()=>{d.unsubscribe(),a(new jr(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},e):null})}decorateAppAPIMethods(t,e,n){for(let a of e)t[a]=this.decorateAppAPIMethod(a,t[a],t,n)}decorateAppAPIMethod(t,e,n,a){return async(...i)=>{const{_appAPIlock:d}=this;if(d)return Promise.reject(new jr("Ledger Device is busy (lock "+d+")","TransportLocked"));try{return this._appAPIlock=t,this.setScrambleKey(a),await e.apply(n,i)}finally{this._appAPIlock=null}}}}Ir.isSupported=void 0;Ir.list=void 0;Ir.listen=void 0;Ir.open=void 0;Ir.ErrorMessage_ListenTimeout="No Ledger device found (timeout)";Ir.ErrorMessage_NoDeviceFound="No Ledger device found";var Bo={};const dl=Vr(Sg);Object.defineProperty(Bo,"__esModule",{value:!0});var Mo=Bo.default=void 0,ms=dl;const Ma=5;function Dg(r){const t=Buffer.alloc(2);return t.writeUInt16BE(r,0),t}const Ig={data:Buffer.alloc(0),dataLength:0,sequence:0},Tg=(r,t)=>({makeBlocks(e){let n=Buffer.concat([Dg(e.length),e]);const a=t-5,i=Math.ceil(n.length/a);n=Buffer.concat([n,Buffer.alloc(i*a-n.length+1).fill(0)]);const d=[];for(let b=0;b<i;b++){const C=Buffer.alloc(5);C.writeUInt16BE(r,0),C.writeUInt8(Ma,2),C.writeUInt16BE(b,3);const D=n.slice(b*a,(b+1)*a);d.push(Buffer.concat([C,D]))}return d},reduceResponse(e,n){let{data:a,dataLength:i,sequence:d}=e||Ig;if(n.readUInt16BE(0)!==r)throw new ms.TransportError("Invalid channel","InvalidChannel");if(n.readUInt8(2)!==Ma)throw new ms.TransportError("Invalid tag","InvalidTag");if(n.readUInt16BE(3)!==d)throw new ms.TransportError("Invalid sequence","InvalidSequence");e||(i=n.readUInt16BE(5)),d++;const b=n.slice(e?5:7);return a=Buffer.concat([a,b]),a.length>i&&(a=a.slice(0,i)),{data:a,dataLength:i,sequence:d}},getReducedResult(e){if(e&&e.dataLength===e.data.length)return e.data}});var Rg=Tg;Mo=Bo.default=Rg;var Ls={exports:{}};const Ng="2.0.0",Ug=256,$g=Number.MAX_SAFE_INTEGER||9007199254740991,Pg=16,Og=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var qi={MAX_LENGTH:Ug,MAX_SAFE_COMPONENT_LENGTH:Pg,MAX_SAFE_INTEGER:$g,RELEASE_TYPES:Og,SEMVER_SPEC_VERSION:Ng,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Lg=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var Wi=Lg;(function(r,t){const{MAX_SAFE_COMPONENT_LENGTH:e}=qi,n=Wi;t=r.exports={};const a=t.re=[],i=t.src=[],d=t.t={};let b=0;const C=(D,T,O)=>{const k=b++;n(D,k,T),d[D]=k,i[k]=T,a[k]=new RegExp(T,O?"g":void 0)};C("NUMERICIDENTIFIER","0|[1-9]\\d*"),C("NUMERICIDENTIFIERLOOSE","[0-9]+"),C("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),C("MAINVERSION",`(${i[d.NUMERICIDENTIFIER]})\\.(${i[d.NUMERICIDENTIFIER]})\\.(${i[d.NUMERICIDENTIFIER]})`),C("MAINVERSIONLOOSE",`(${i[d.NUMERICIDENTIFIERLOOSE]})\\.(${i[d.NUMERICIDENTIFIERLOOSE]})\\.(${i[d.NUMERICIDENTIFIERLOOSE]})`),C("PRERELEASEIDENTIFIER",`(?:${i[d.NUMERICIDENTIFIER]}|${i[d.NONNUMERICIDENTIFIER]})`),C("PRERELEASEIDENTIFIERLOOSE",`(?:${i[d.NUMERICIDENTIFIERLOOSE]}|${i[d.NONNUMERICIDENTIFIER]})`),C("PRERELEASE",`(?:-(${i[d.PRERELEASEIDENTIFIER]}(?:\\.${i[d.PRERELEASEIDENTIFIER]})*))`),C("PRERELEASELOOSE",`(?:-?(${i[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[d.PRERELEASEIDENTIFIERLOOSE]})*))`),C("BUILDIDENTIFIER","[0-9A-Za-z-]+"),C("BUILD",`(?:\\+(${i[d.BUILDIDENTIFIER]}(?:\\.${i[d.BUILDIDENTIFIER]})*))`),C("FULLPLAIN",`v?${i[d.MAINVERSION]}${i[d.PRERELEASE]}?${i[d.BUILD]}?`),C("FULL",`^${i[d.FULLPLAIN]}$`),C("LOOSEPLAIN",`[v=\\s]*${i[d.MAINVERSIONLOOSE]}${i[d.PRERELEASELOOSE]}?${i[d.BUILD]}?`),C("LOOSE",`^${i[d.LOOSEPLAIN]}$`),C("GTLT","((?:<|>)?=?)"),C("XRANGEIDENTIFIERLOOSE",`${i[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),C("XRANGEIDENTIFIER",`${i[d.NUMERICIDENTIFIER]}|x|X|\\*`),C("XRANGEPLAIN",`[v=\\s]*(${i[d.XRANGEIDENTIFIER]})(?:\\.(${i[d.XRANGEIDENTIFIER]})(?:\\.(${i[d.XRANGEIDENTIFIER]})(?:${i[d.PRERELEASE]})?${i[d.BUILD]}?)?)?`),C("XRANGEPLAINLOOSE",`[v=\\s]*(${i[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[d.XRANGEIDENTIFIERLOOSE]})(?:${i[d.PRERELEASELOOSE]})?${i[d.BUILD]}?)?)?`),C("XRANGE",`^${i[d.GTLT]}\\s*${i[d.XRANGEPLAIN]}$`),C("XRANGELOOSE",`^${i[d.GTLT]}\\s*${i[d.XRANGEPLAINLOOSE]}$`),C("COERCE",`(^|[^\\d])(\\d{1,${e}})(?:\\.(\\d{1,${e}}))?(?:\\.(\\d{1,${e}}))?(?:$|[^\\d])`),C("COERCERTL",i[d.COERCE],!0),C("LONETILDE","(?:~>?)"),C("TILDETRIM",`(\\s*)${i[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",C("TILDE",`^${i[d.LONETILDE]}${i[d.XRANGEPLAIN]}$`),C("TILDELOOSE",`^${i[d.LONETILDE]}${i[d.XRANGEPLAINLOOSE]}$`),C("LONECARET","(?:\\^)"),C("CARETTRIM",`(\\s*)${i[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",C("CARET",`^${i[d.LONECARET]}${i[d.XRANGEPLAIN]}$`),C("CARETLOOSE",`^${i[d.LONECARET]}${i[d.XRANGEPLAINLOOSE]}$`),C("COMPARATORLOOSE",`^${i[d.GTLT]}\\s*(${i[d.LOOSEPLAIN]})$|^$`),C("COMPARATOR",`^${i[d.GTLT]}\\s*(${i[d.FULLPLAIN]})$|^$`),C("COMPARATORTRIM",`(\\s*)${i[d.GTLT]}\\s*(${i[d.LOOSEPLAIN]}|${i[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",C("HYPHENRANGE",`^\\s*(${i[d.XRANGEPLAIN]})\\s+-\\s+(${i[d.XRANGEPLAIN]})\\s*$`),C("HYPHENRANGELOOSE",`^\\s*(${i[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[d.XRANGEPLAINLOOSE]})\\s*$`),C("STAR","(<|>)?=?\\s*\\*"),C("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),C("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Ls,Ls.exports);var Hn=Ls.exports;const kg=Object.freeze({loose:!0}),jg=Object.freeze({}),qg=r=>r?typeof r!="object"?kg:r:jg;var _o=qg;const _a=/^[0-9]+$/,pl=(r,t)=>{const e=_a.test(r),n=_a.test(t);return e&&n&&(r=+r,t=+t),r===t?0:e&&!n?-1:n&&!e?1:r<t?-1:1},Wg=(r,t)=>pl(t,r);var vl={compareIdentifiers:pl,rcompareIdentifiers:Wg};const fi=Wi,{MAX_LENGTH:Fa,MAX_SAFE_INTEGER:li}=qi,{re:Sa,t:Da}=Hn,Hg=_o,{compareIdentifiers:an}=vl;let Kg=class Br{constructor(t,e){if(e=Hg(e),t instanceof Br){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Fa)throw new TypeError(`version is longer than ${Fa} characters`);fi("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?Sa[Da.LOOSE]:Sa[Da.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>li||this.major<0)throw new TypeError("Invalid major version");if(this.minor>li||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>li||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const i=+a;if(i>=0&&i<li)return i}return a}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(fi("SemVer.compare",this.version,this.options,t),!(t instanceof Br)){if(typeof t=="string"&&t===this.version)return 0;t=new Br(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Br||(t=new Br(t,this.options)),an(this.major,t.major)||an(this.minor,t.minor)||an(this.patch,t.patch)}comparePre(t){if(t instanceof Br||(t=new Br(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],a=t.prerelease[e];if(fi("prerelease compare",e,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return an(n,a)}while(++e)}compareBuild(t){t instanceof Br||(t=new Br(t,this.options));let e=0;do{const n=this.build[e],a=t.build[e];if(fi("prerelease compare",e,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return an(n,a)}while(++e)}inc(t,e,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,n),this.inc("pre",e,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e,n),this.inc("pre",e,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(n)?1:0;if(!e&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(e===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(e){let i=[e,a];n===!1&&(i=[e]),an(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};var ar=Kg;const Ia=ar,Vg=(r,t,e=!1)=>{if(r instanceof Ia)return r;try{return new Ia(r,t)}catch(n){if(!e)return null;throw n}};var En=Vg;const Gg=En,Yg=(r,t)=>{const e=Gg(r,t);return e?e.version:null};var zg=Yg;const Zg=En,Xg=(r,t)=>{const e=Zg(r.trim().replace(/^[=v]+/,""),t);return e?e.version:null};var Qg=Xg;const Ta=ar,Jg=(r,t,e,n,a)=>{typeof e=="string"&&(a=n,n=e,e=void 0);try{return new Ta(r instanceof Ta?r.version:r,e).inc(t,n,a).version}catch{return null}};var tm=Jg;const Ra=En,em=(r,t)=>{const e=Ra(r,null,!0),n=Ra(t,null,!0),a=e.compare(n);if(a===0)return null;const i=a>0,d=i?e:n,b=i?n:e,C=!!d.prerelease.length,D=C?"pre":"";return e.major!==n.major?D+"major":e.minor!==n.minor?D+"minor":e.patch!==n.patch?D+"patch":C?"prerelease":b.patch?"patch":b.minor?"minor":"major"};var rm=em;const nm=ar,im=(r,t)=>new nm(r,t).major;var sm=im;const om=ar,am=(r,t)=>new om(r,t).minor;var fm=am;const lm=ar,hm=(r,t)=>new lm(r,t).patch;var um=hm;const cm=En,dm=(r,t)=>{const e=cm(r,t);return e&&e.prerelease.length?e.prerelease:null};var pm=dm;const Na=ar,vm=(r,t,e)=>new Na(r,e).compare(new Na(t,e));var xr=vm;const gm=xr,mm=(r,t,e)=>gm(t,r,e);var ym=mm;const wm=xr,bm=(r,t)=>wm(r,t,!0);var xm=bm;const Ua=ar,Em=(r,t,e)=>{const n=new Ua(r,e),a=new Ua(t,e);return n.compare(a)||n.compareBuild(a)};var Fo=Em;const Am=Fo,Cm=(r,t)=>r.sort((e,n)=>Am(e,n,t));var Bm=Cm;const Mm=Fo,_m=(r,t)=>r.sort((e,n)=>Mm(n,e,t));var Fm=_m;const Sm=xr,Dm=(r,t,e)=>Sm(r,t,e)>0;var Hi=Dm;const Im=xr,Tm=(r,t,e)=>Im(r,t,e)<0;var So=Tm;const Rm=xr,Nm=(r,t,e)=>Rm(r,t,e)===0;var gl=Nm;const Um=xr,$m=(r,t,e)=>Um(r,t,e)!==0;var ml=$m;const Pm=xr,Om=(r,t,e)=>Pm(r,t,e)>=0;var Do=Om;const Lm=xr,km=(r,t,e)=>Lm(r,t,e)<=0;var Io=km;const jm=gl,qm=ml,Wm=Hi,Hm=Do,Km=So,Vm=Io,Gm=(r,t,e,n)=>{switch(t){case"===":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r===e;case"!==":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r!==e;case"":case"=":case"==":return jm(r,e,n);case"!=":return qm(r,e,n);case">":return Wm(r,e,n);case">=":return Hm(r,e,n);case"<":return Km(r,e,n);case"<=":return Vm(r,e,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var yl=Gm;const Ym=ar,zm=En,{re:hi,t:ui}=Hn,Zm=(r,t)=>{if(r instanceof Ym)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;t=t||{};let e=null;if(!t.rtl)e=r.match(hi[ui.COERCE]);else{let n;for(;(n=hi[ui.COERCERTL].exec(r))&&(!e||e.index+e[0].length!==r.length);)(!e||n.index+n[0].length!==e.index+e[0].length)&&(e=n),hi[ui.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;hi[ui.COERCERTL].lastIndex=-1}return e===null?null:zm(`${e[2]}.${e[3]||"0"}.${e[4]||"0"}`,t)};var Xm=Zm,ys,$a;function Qm(){return $a||($a=1,ys=function(r){r.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),ys}var ws,Pa;function Jm(){if(Pa)return ws;Pa=1,ws=r,r.Node=a,r.create=r;function r(i){var d=this;if(d instanceof r||(d=new r),d.tail=null,d.head=null,d.length=0,i&&typeof i.forEach=="function")i.forEach(function(D){d.push(D)});else if(arguments.length>0)for(var b=0,C=arguments.length;b<C;b++)d.push(arguments[b]);return d}r.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var d=i.next,b=i.prev;return d&&(d.prev=b),b&&(b.next=d),i===this.head&&(this.head=d),i===this.tail&&(this.tail=b),i.list.length--,i.next=null,i.prev=null,i.list=null,d},r.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var d=this.head;i.list=this,i.next=d,d&&(d.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}},r.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var d=this.tail;i.list=this,i.prev=d,d&&(d.next=i),this.tail=i,this.head||(this.head=i),this.length++}},r.prototype.push=function(){for(var i=0,d=arguments.length;i<d;i++)e(this,arguments[i]);return this.length},r.prototype.unshift=function(){for(var i=0,d=arguments.length;i<d;i++)n(this,arguments[i]);return this.length},r.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}},r.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}},r.prototype.forEach=function(i,d){d=d||this;for(var b=this.head,C=0;b!==null;C++)i.call(d,b.value,C,this),b=b.next},r.prototype.forEachReverse=function(i,d){d=d||this;for(var b=this.tail,C=this.length-1;b!==null;C--)i.call(d,b.value,C,this),b=b.prev},r.prototype.get=function(i){for(var d=0,b=this.head;b!==null&&d<i;d++)b=b.next;if(d===i&&b!==null)return b.value},r.prototype.getReverse=function(i){for(var d=0,b=this.tail;b!==null&&d<i;d++)b=b.prev;if(d===i&&b!==null)return b.value},r.prototype.map=function(i,d){d=d||this;for(var b=new r,C=this.head;C!==null;)b.push(i.call(d,C.value,this)),C=C.next;return b},r.prototype.mapReverse=function(i,d){d=d||this;for(var b=new r,C=this.tail;C!==null;)b.push(i.call(d,C.value,this)),C=C.prev;return b},r.prototype.reduce=function(i,d){var b,C=this.head;if(arguments.length>1)b=d;else if(this.head)C=this.head.next,b=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var D=0;C!==null;D++)b=i(b,C.value,D),C=C.next;return b},r.prototype.reduceReverse=function(i,d){var b,C=this.tail;if(arguments.length>1)b=d;else if(this.tail)C=this.tail.prev,b=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var D=this.length-1;C!==null;D--)b=i(b,C.value,D),C=C.prev;return b},r.prototype.toArray=function(){for(var i=new Array(this.length),d=0,b=this.head;b!==null;d++)i[d]=b.value,b=b.next;return i},r.prototype.toArrayReverse=function(){for(var i=new Array(this.length),d=0,b=this.tail;b!==null;d++)i[d]=b.value,b=b.prev;return i},r.prototype.slice=function(i,d){d=d||this.length,d<0&&(d+=this.length),i=i||0,i<0&&(i+=this.length);var b=new r;if(d<i||d<0)return b;i<0&&(i=0),d>this.length&&(d=this.length);for(var C=0,D=this.head;D!==null&&C<i;C++)D=D.next;for(;D!==null&&C<d;C++,D=D.next)b.push(D.value);return b},r.prototype.sliceReverse=function(i,d){d=d||this.length,d<0&&(d+=this.length),i=i||0,i<0&&(i+=this.length);var b=new r;if(d<i||d<0)return b;i<0&&(i=0),d>this.length&&(d=this.length);for(var C=this.length,D=this.tail;D!==null&&C>d;C--)D=D.prev;for(;D!==null&&C>i;C--,D=D.prev)b.push(D.value);return b},r.prototype.splice=function(i,d,...b){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var C=0,D=this.head;D!==null&&C<i;C++)D=D.next;for(var T=[],C=0;D&&C<d;C++)T.push(D.value),D=this.removeNode(D);D===null&&(D=this.tail),D!==this.head&&D!==this.tail&&(D=D.prev);for(var C=0;C<b.length;C++)D=t(this,D,b[C]);return T},r.prototype.reverse=function(){for(var i=this.head,d=this.tail,b=i;b!==null;b=b.prev){var C=b.prev;b.prev=b.next,b.next=C}return this.head=d,this.tail=i,this};function t(i,d,b){var C=d===i.head?new a(b,null,d,i):new a(b,d,d.next,i);return C.next===null&&(i.tail=C),C.prev===null&&(i.head=C),i.length++,C}function e(i,d){i.tail=new a(d,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function n(i,d){i.head=new a(d,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function a(i,d,b,C){if(!(this instanceof a))return new a(i,d,b,C);this.list=C,this.value=i,d?(d.next=this,this.prev=d):this.prev=null,b?(b.prev=this,this.next=b):this.next=null}try{Qm()(r)}catch{}return ws}var bs,Oa;function ty(){if(Oa)return bs;Oa=1;const r=Jm(),t=Symbol("max"),e=Symbol("length"),n=Symbol("lengthCalculator"),a=Symbol("allowStale"),i=Symbol("maxAge"),d=Symbol("dispose"),b=Symbol("noDisposeOnSet"),C=Symbol("lruList"),D=Symbol("cache"),T=Symbol("updateAgeOnGet"),O=()=>1;class k{constructor(K){if(typeof K=="number"&&(K={max:K}),K||(K={}),K.max&&(typeof K.max!="number"||K.max<0))throw new TypeError("max must be a non-negative number");this[t]=K.max||1/0;const Q=K.length||O;if(this[n]=typeof Q!="function"?O:Q,this[a]=K.stale||!1,K.maxAge&&typeof K.maxAge!="number")throw new TypeError("maxAge must be a number");this[i]=K.maxAge||0,this[d]=K.dispose,this[b]=K.noDisposeOnSet||!1,this[T]=K.updateAgeOnGet||!1,this.reset()}set max(K){if(typeof K!="number"||K<0)throw new TypeError("max must be a non-negative number");this[t]=K||1/0,ft(this)}get max(){return this[t]}set allowStale(K){this[a]=!!K}get allowStale(){return this[a]}set maxAge(K){if(typeof K!="number")throw new TypeError("maxAge must be a non-negative number");this[i]=K,ft(this)}get maxAge(){return this[i]}set lengthCalculator(K){typeof K!="function"&&(K=O),K!==this[n]&&(this[n]=K,this[e]=0,this[C].forEach(Q=>{Q.length=this[n](Q.value,Q.key),this[e]+=Q.length})),ft(this)}get lengthCalculator(){return this[n]}get length(){return this[e]}get itemCount(){return this[C].length}rforEach(K,Q){Q=Q||this;for(let mt=this[C].tail;mt!==null;){const Ct=mt.prev;wt(this,K,mt,Q),mt=Ct}}forEach(K,Q){Q=Q||this;for(let mt=this[C].head;mt!==null;){const Ct=mt.next;wt(this,K,mt,Q),mt=Ct}}keys(){return this[C].toArray().map(K=>K.key)}values(){return this[C].toArray().map(K=>K.value)}reset(){this[d]&&this[C]&&this[C].length&&this[C].forEach(K=>this[d](K.key,K.value)),this[D]=new Map,this[C]=new r,this[e]=0}dump(){return this[C].map(K=>st(this,K)?!1:{k:K.key,v:K.value,e:K.now+(K.maxAge||0)}).toArray().filter(K=>K)}dumpLru(){return this[C]}set(K,Q,mt){if(mt=mt||this[i],mt&&typeof mt!="number")throw new TypeError("maxAge must be a number");const Ct=mt?Date.now():0,ct=this[n](Q,K);if(this[D].has(K)){if(ct>this[t])return it(this,this[D].get(K)),!1;const o=this[D].get(K).value;return this[d]&&(this[b]||this[d](K,o.value)),o.now=Ct,o.maxAge=mt,o.value=Q,this[e]+=ct-o.length,o.length=ct,this.get(K),ft(this),!0}const Kt=new lt(K,Q,ct,Ct,mt);return Kt.length>this[t]?(this[d]&&this[d](K,Q),!1):(this[e]+=Kt.length,this[C].unshift(Kt),this[D].set(K,this[C].head),ft(this),!0)}has(K){if(!this[D].has(K))return!1;const Q=this[D].get(K).value;return!st(this,Q)}get(K){return G(this,K,!0)}peek(K){return G(this,K,!1)}pop(){const K=this[C].tail;return K?(it(this,K),K.value):null}del(K){it(this,this[D].get(K))}load(K){this.reset();const Q=Date.now();for(let mt=K.length-1;mt>=0;mt--){const Ct=K[mt],ct=Ct.e||0;if(ct===0)this.set(Ct.k,Ct.v);else{const Kt=ct-Q;Kt>0&&this.set(Ct.k,Ct.v,Kt)}}}prune(){this[D].forEach((K,Q)=>G(this,Q,!1))}}const G=(tt,K,Q)=>{const mt=tt[D].get(K);if(mt){const Ct=mt.value;if(st(tt,Ct)){if(it(tt,mt),!tt[a])return}else Q&&(tt[T]&&(mt.value.now=Date.now()),tt[C].unshiftNode(mt));return Ct.value}},st=(tt,K)=>{if(!K||!K.maxAge&&!tt[i])return!1;const Q=Date.now()-K.now;return K.maxAge?Q>K.maxAge:tt[i]&&Q>tt[i]},ft=tt=>{if(tt[e]>tt[t])for(let K=tt[C].tail;tt[e]>tt[t]&&K!==null;){const Q=K.prev;it(tt,K),K=Q}},it=(tt,K)=>{if(K){const Q=K.value;tt[d]&&tt[d](Q.key,Q.value),tt[e]-=Q.length,tt[D].delete(Q.key),tt[C].removeNode(K)}};class lt{constructor(K,Q,mt,Ct,ct){this.key=K,this.value=Q,this.length=mt,this.now=Ct,this.maxAge=ct||0}}const wt=(tt,K,Q,mt)=>{let Ct=Q.value;st(tt,Ct)&&(it(tt,Q),tt[a]||(Ct=void 0)),Ct&&K.call(mt,Ct.value,Ct.key,tt)};return bs=k,bs}var xs,La;function Er(){if(La)return xs;La=1;class r{constructor(h,u){if(u=n(u),h instanceof r)return h.loose===!!u.loose&&h.includePrerelease===!!u.includePrerelease?h:new r(h.raw,u);if(h instanceof a)return this.raw=h.value,this.set=[[h]],this.format(),this;if(this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease,this.raw=h,this.set=h.split("||").map(v=>this.parseRange(v.trim())).filter(v=>v.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${h}`);if(this.set.length>1){const v=this.set[0];if(this.set=this.set.filter(w=>!st(w[0])),this.set.length===0)this.set=[v];else if(this.set.length>1){for(const w of this.set)if(w.length===1&&ft(w[0])){this.set=[w];break}}}this.format()}format(){return this.range=this.set.map(h=>h.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(h){h=h.trim();const v=((this.options.includePrerelease&&k)|(this.options.loose&&G))+":"+h,w=e.get(v);if(w)return w;const p=this.options.loose,f=p?b[C.HYPHENRANGELOOSE]:b[C.HYPHENRANGE];h=h.replace(f,o(this.options.includePrerelease)),i("hyphen replace",h),h=h.replace(b[C.COMPARATORTRIM],D),i("comparator trim",h),h=h.replace(b[C.TILDETRIM],T),h=h.replace(b[C.CARETTRIM],O),h=h.split(/\s+/).join(" ");let c=h.split(" ").map(j=>lt(j,this.options)).join(" ").split(/\s+/).map(j=>y(j,this.options));p&&(c=c.filter(j=>(i("loose invalid filter",j,this.options),!!j.match(b[C.COMPARATORLOOSE])))),i("range list",c);const m=new Map,B=c.map(j=>new a(j,this.options));for(const j of B){if(st(j))return[j];m.set(j.value,j)}m.size>1&&m.has("")&&m.delete("");const P=[...m.values()];return e.set(v,P),P}intersects(h,u){if(!(h instanceof r))throw new TypeError("a Range is required");return this.set.some(v=>it(v,u)&&h.set.some(w=>it(w,u)&&v.every(p=>w.every(f=>p.intersects(f,u)))))}test(h){if(!h)return!1;if(typeof h=="string")try{h=new d(h,this.options)}catch{return!1}for(let u=0;u<this.set.length;u++)if(l(this.set[u],h,this.options))return!0;return!1}}xs=r;const t=ty(),e=new t({max:1e3}),n=_o,a=Ki(),i=Wi,d=ar,{re:b,t:C,comparatorTrimReplace:D,tildeTrimReplace:T,caretTrimReplace:O}=Hn,{FLAG_INCLUDE_PRERELEASE:k,FLAG_LOOSE:G}=qi,st=s=>s.value==="<0.0.0-0",ft=s=>s.value==="",it=(s,h)=>{let u=!0;const v=s.slice();let w=v.pop();for(;u&&v.length;)u=v.every(p=>w.intersects(p,h)),w=v.pop();return u},lt=(s,h)=>(i("comp",s,h),s=Q(s,h),i("caret",s),s=tt(s,h),i("tildes",s),s=Ct(s,h),i("xrange",s),s=Kt(s,h),i("stars",s),s),wt=s=>!s||s.toLowerCase()==="x"||s==="*",tt=(s,h)=>s.trim().split(/\s+/).map(u=>K(u,h)).join(" "),K=(s,h)=>{const u=h.loose?b[C.TILDELOOSE]:b[C.TILDE];return s.replace(u,(v,w,p,f,c)=>{i("tilde",s,v,w,p,f,c);let m;return wt(w)?m="":wt(p)?m=`>=${w}.0.0 <${+w+1}.0.0-0`:wt(f)?m=`>=${w}.${p}.0 <${w}.${+p+1}.0-0`:c?(i("replaceTilde pr",c),m=`>=${w}.${p}.${f}-${c} <${w}.${+p+1}.0-0`):m=`>=${w}.${p}.${f} <${w}.${+p+1}.0-0`,i("tilde return",m),m})},Q=(s,h)=>s.trim().split(/\s+/).map(u=>mt(u,h)).join(" "),mt=(s,h)=>{i("caret",s,h);const u=h.loose?b[C.CARETLOOSE]:b[C.CARET],v=h.includePrerelease?"-0":"";return s.replace(u,(w,p,f,c,m)=>{i("caret",s,w,p,f,c,m);let B;return wt(p)?B="":wt(f)?B=`>=${p}.0.0${v} <${+p+1}.0.0-0`:wt(c)?p==="0"?B=`>=${p}.${f}.0${v} <${p}.${+f+1}.0-0`:B=`>=${p}.${f}.0${v} <${+p+1}.0.0-0`:m?(i("replaceCaret pr",m),p==="0"?f==="0"?B=`>=${p}.${f}.${c}-${m} <${p}.${f}.${+c+1}-0`:B=`>=${p}.${f}.${c}-${m} <${p}.${+f+1}.0-0`:B=`>=${p}.${f}.${c}-${m} <${+p+1}.0.0-0`):(i("no pr"),p==="0"?f==="0"?B=`>=${p}.${f}.${c}${v} <${p}.${f}.${+c+1}-0`:B=`>=${p}.${f}.${c}${v} <${p}.${+f+1}.0-0`:B=`>=${p}.${f}.${c} <${+p+1}.0.0-0`),i("caret return",B),B})},Ct=(s,h)=>(i("replaceXRanges",s,h),s.split(/\s+/).map(u=>ct(u,h)).join(" ")),ct=(s,h)=>{s=s.trim();const u=h.loose?b[C.XRANGELOOSE]:b[C.XRANGE];return s.replace(u,(v,w,p,f,c,m)=>{i("xRange",s,v,w,p,f,c,m);const B=wt(p),P=B||wt(f),j=P||wt(c),H=j;return w==="="&&H&&(w=""),m=h.includePrerelease?"-0":"",B?w===">"||w==="<"?v="<0.0.0-0":v="*":w&&H?(P&&(f=0),c=0,w===">"?(w=">=",P?(p=+p+1,f=0,c=0):(f=+f+1,c=0)):w==="<="&&(w="<",P?p=+p+1:f=+f+1),w==="<"&&(m="-0"),v=`${w+p}.${f}.${c}${m}`):P?v=`>=${p}.0.0${m} <${+p+1}.0.0-0`:j&&(v=`>=${p}.${f}.0${m} <${p}.${+f+1}.0-0`),i("xRange return",v),v})},Kt=(s,h)=>(i("replaceStars",s,h),s.trim().replace(b[C.STAR],"")),y=(s,h)=>(i("replaceGTE0",s,h),s.trim().replace(b[h.includePrerelease?C.GTE0PRE:C.GTE0],"")),o=s=>(h,u,v,w,p,f,c,m,B,P,j,H,ht)=>(wt(v)?u="":wt(w)?u=`>=${v}.0.0${s?"-0":""}`:wt(p)?u=`>=${v}.${w}.0${s?"-0":""}`:f?u=`>=${u}`:u=`>=${u}${s?"-0":""}`,wt(B)?m="":wt(P)?m=`<${+B+1}.0.0-0`:wt(j)?m=`<${B}.${+P+1}.0-0`:H?m=`<=${B}.${P}.${j}-${H}`:s?m=`<${B}.${P}.${+j+1}-0`:m=`<=${m}`,`${u} ${m}`.trim()),l=(s,h,u)=>{for(let v=0;v<s.length;v++)if(!s[v].test(h))return!1;if(h.prerelease.length&&!u.includePrerelease){for(let v=0;v<s.length;v++)if(i(s[v].semver),s[v].semver!==a.ANY&&s[v].semver.prerelease.length>0){const w=s[v].semver;if(w.major===h.major&&w.minor===h.minor&&w.patch===h.patch)return!0}return!1}return!0};return xs}var Es,ka;function Ki(){if(ka)return Es;ka=1;const r=Symbol("SemVer ANY");class t{static get ANY(){return r}constructor(T,O){if(O=e(O),T instanceof t){if(T.loose===!!O.loose)return T;T=T.value}d("comparator",T,O),this.options=O,this.loose=!!O.loose,this.parse(T),this.semver===r?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}parse(T){const O=this.options.loose?n[a.COMPARATORLOOSE]:n[a.COMPARATOR],k=T.match(O);if(!k)throw new TypeError(`Invalid comparator: ${T}`);this.operator=k[1]!==void 0?k[1]:"",this.operator==="="&&(this.operator=""),k[2]?this.semver=new b(k[2],this.options.loose):this.semver=r}toString(){return this.value}test(T){if(d("Comparator.test",T,this.options.loose),this.semver===r||T===r)return!0;if(typeof T=="string")try{T=new b(T,this.options)}catch{return!1}return i(T,this.operator,this.semver,this.options)}intersects(T,O){if(!(T instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new C(T.value,O).test(this.value):T.operator===""?T.value===""?!0:new C(this.value,O).test(T.semver):(O=e(O),O.includePrerelease&&(this.value==="<0.0.0-0"||T.value==="<0.0.0-0")||!O.includePrerelease&&(this.value.startsWith("<0.0.0")||T.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&T.operator.startsWith(">")||this.operator.startsWith("<")&&T.operator.startsWith("<")||this.semver.version===T.semver.version&&this.operator.includes("=")&&T.operator.includes("=")||i(this.semver,"<",T.semver,O)&&this.operator.startsWith(">")&&T.operator.startsWith("<")||i(this.semver,">",T.semver,O)&&this.operator.startsWith("<")&&T.operator.startsWith(">")))}}Es=t;const e=_o,{re:n,t:a}=Hn,i=yl,d=Wi,b=ar,C=Er();return Es}const ey=Er(),ry=(r,t,e)=>{try{t=new ey(t,e)}catch{return!1}return t.test(r)};var Vi=ry;const ny=Er(),iy=(r,t)=>new ny(r,t).set.map(e=>e.map(n=>n.value).join(" ").trim().split(" "));var sy=iy;const oy=ar,ay=Er(),fy=(r,t,e)=>{let n=null,a=null,i=null;try{i=new ay(t,e)}catch{return null}return r.forEach(d=>{i.test(d)&&(!n||a.compare(d)===-1)&&(n=d,a=new oy(n,e))}),n};var ly=fy;const hy=ar,uy=Er(),cy=(r,t,e)=>{let n=null,a=null,i=null;try{i=new uy(t,e)}catch{return null}return r.forEach(d=>{i.test(d)&&(!n||a.compare(d)===1)&&(n=d,a=new hy(n,e))}),n};var dy=cy;const As=ar,py=Er(),ja=Hi,vy=(r,t)=>{r=new py(r,t);let e=new As("0.0.0");if(r.test(e)||(e=new As("0.0.0-0"),r.test(e)))return e;e=null;for(let n=0;n<r.set.length;++n){const a=r.set[n];let i=null;a.forEach(d=>{const b=new As(d.semver.version);switch(d.operator){case">":b.prerelease.length===0?b.patch++:b.prerelease.push(0),b.raw=b.format();case"":case">=":(!i||ja(b,i))&&(i=b);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${d.operator}`)}}),i&&(!e||ja(e,i))&&(e=i)}return e&&r.test(e)?e:null};var gy=vy;const my=Er(),yy=(r,t)=>{try{return new my(r,t).range||"*"}catch{return null}};var wy=yy;const by=ar,wl=Ki(),{ANY:xy}=wl,Ey=Er(),Ay=Vi,qa=Hi,Wa=So,Cy=Io,By=Do,My=(r,t,e,n)=>{r=new by(r,n),t=new Ey(t,n);let a,i,d,b,C;switch(e){case">":a=qa,i=Cy,d=Wa,b=">",C=">=";break;case"<":a=Wa,i=By,d=qa,b="<",C="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ay(r,t,n))return!1;for(let D=0;D<t.set.length;++D){const T=t.set[D];let O=null,k=null;if(T.forEach(G=>{G.semver===xy&&(G=new wl(">=0.0.0")),O=O||G,k=k||G,a(G.semver,O.semver,n)?O=G:d(G.semver,k.semver,n)&&(k=G)}),O.operator===b||O.operator===C||(!k.operator||k.operator===b)&&i(r,k.semver))return!1;if(k.operator===C&&d(r,k.semver))return!1}return!0};var To=My;const _y=To,Fy=(r,t,e)=>_y(r,t,">",e);var Sy=Fy;const Dy=To,Iy=(r,t,e)=>Dy(r,t,"<",e);var Ty=Iy;const Ha=Er(),Ry=(r,t,e)=>(r=new Ha(r,e),t=new Ha(t,e),r.intersects(t,e));var Ny=Ry;const Uy=Vi,$y=xr;var Py=(r,t,e)=>{const n=[];let a=null,i=null;const d=r.sort((T,O)=>$y(T,O,e));for(const T of d)Uy(T,t,e)?(i=T,a||(a=T)):(i&&n.push([a,i]),i=null,a=null);a&&n.push([a,null]);const b=[];for(const[T,O]of n)T===O?b.push(T):!O&&T===d[0]?b.push("*"):O?T===d[0]?b.push(`<=${O}`):b.push(`${T} - ${O}`):b.push(`>=${T}`);const C=b.join(" || "),D=typeof t.raw=="string"?t.raw:String(t);return C.length<D.length?C:t};const Ka=Er(),Ro=Ki(),{ANY:Cs}=Ro,Tn=Vi,No=xr,Oy=(r,t,e={})=>{if(r===t)return!0;r=new Ka(r,e),t=new Ka(t,e);let n=!1;t:for(const a of r.set){for(const i of t.set){const d=ky(a,i,e);if(n=n||d!==null,d)continue t}if(n)return!1}return!0},Ly=[new Ro(">=0.0.0-0")],Va=[new Ro(">=0.0.0")],ky=(r,t,e)=>{if(r===t)return!0;if(r.length===1&&r[0].semver===Cs){if(t.length===1&&t[0].semver===Cs)return!0;e.includePrerelease?r=Ly:r=Va}if(t.length===1&&t[0].semver===Cs){if(e.includePrerelease)return!0;t=Va}const n=new Set;let a,i;for(const G of r)G.operator===">"||G.operator===">="?a=Ga(a,G,e):G.operator==="<"||G.operator==="<="?i=Ya(i,G,e):n.add(G.semver);if(n.size>1)return null;let d;if(a&&i){if(d=No(a.semver,i.semver,e),d>0)return null;if(d===0&&(a.operator!==">="||i.operator!=="<="))return null}for(const G of n){if(a&&!Tn(G,String(a),e)||i&&!Tn(G,String(i),e))return null;for(const st of t)if(!Tn(G,String(st),e))return!1;return!0}let b,C,D,T,O=i&&!e.includePrerelease&&i.semver.prerelease.length?i.semver:!1,k=a&&!e.includePrerelease&&a.semver.prerelease.length?a.semver:!1;O&&O.prerelease.length===1&&i.operator==="<"&&O.prerelease[0]===0&&(O=!1);for(const G of t){if(T=T||G.operator===">"||G.operator===">=",D=D||G.operator==="<"||G.operator==="<=",a){if(k&&G.semver.prerelease&&G.semver.prerelease.length&&G.semver.major===k.major&&G.semver.minor===k.minor&&G.semver.patch===k.patch&&(k=!1),G.operator===">"||G.operator===">="){if(b=Ga(a,G,e),b===G&&b!==a)return!1}else if(a.operator===">="&&!Tn(a.semver,String(G),e))return!1}if(i){if(O&&G.semver.prerelease&&G.semver.prerelease.length&&G.semver.major===O.major&&G.semver.minor===O.minor&&G.semver.patch===O.patch&&(O=!1),G.operator==="<"||G.operator==="<="){if(C=Ya(i,G,e),C===G&&C!==i)return!1}else if(i.operator==="<="&&!Tn(i.semver,String(G),e))return!1}if(!G.operator&&(i||a)&&d!==0)return!1}return!(a&&D&&!i&&d!==0||i&&T&&!a&&d!==0||k||O)},Ga=(r,t,e)=>{if(!r)return t;const n=No(r.semver,t.semver,e);return n>0?r:n<0||t.operator===">"&&r.operator===">="?t:r},Ya=(r,t,e)=>{if(!r)return t;const n=No(r.semver,t.semver,e);return n<0?r:n>0||t.operator==="<"&&r.operator==="<="?t:r};var jy=Oy;const Bs=Hn,za=qi,qy=ar,Za=vl,Wy=En,Hy=zg,Ky=Qg,Vy=tm,Gy=rm,Yy=sm,zy=fm,Zy=um,Xy=pm,Qy=xr,Jy=ym,tw=xm,ew=Fo,rw=Bm,nw=Fm,iw=Hi,sw=So,ow=gl,aw=ml,fw=Do,lw=Io,hw=yl,uw=Xm,cw=Ki(),dw=Er(),pw=Vi,vw=sy,gw=ly,mw=dy,yw=gy,ww=wy,bw=To,xw=Sy,Ew=Ty,Aw=Ny,Cw=Py,Bw=jy;var Mw={parse:Wy,valid:Hy,clean:Ky,inc:Vy,diff:Gy,major:Yy,minor:zy,patch:Zy,prerelease:Xy,compare:Qy,rcompare:Jy,compareLoose:tw,compareBuild:ew,sort:rw,rsort:nw,gt:iw,lt:sw,eq:ow,neq:aw,gte:fw,lte:lw,cmp:hw,coerce:uw,Comparator:cw,Range:dw,satisfies:pw,toComparators:vw,maxSatisfying:gw,minSatisfying:mw,minVersion:yw,validRange:ww,outside:bw,gtr:xw,ltr:Ew,intersects:Aw,simplifyRange:Cw,subset:Bw,SemVer:qy,re:Bs.re,src:Bs.src,tokens:Bs.t,SEMVER_SPEC_VERSION:za.SEMVER_SPEC_VERSION,RELEASE_TYPES:za.RELEASE_TYPES,compareIdentifiers:Za.compareIdentifiers,rcompareIdentifiers:Za.rcompareIdentifiers};const Xa=jn(Mw),ks={blue:{id:"blue",productName:"LedgerBlue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,blockSize:4*1024,getBlockSize:r=>4*1024},nanoS:{id:"nanoS",productName:"LedgerNanoS",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,blockSize:4*1024,getBlockSize:r=>Xa.lt(Xa.coerce(r),"2.0.0")?4*1024:2*1024},nanoX:{id:"nanoX",productName:"LedgerNanoX",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,blockSize:4*1024,getBlockSize:r=>4*1024,bluetoothSpec:[{serviceUuid:"d973f2e0-b19e-11e2-9e96-0800200c9a66",notifyUuid:"d973f2e1-b19e-11e2-9e96-0800200c9a66",writeUuid:"d973f2e2-b19e-11e2-9e96-0800200c9a66"},{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572"}]}},Qa=Object.values(ks),Gi=11415,Yi=r=>{const t=Qa.find(a=>a.legacyUsbProductId===r);if(t)return t;const e=r>>8;return Qa.find(a=>a.productIdMM===e)},bl=[],js={};for(let r in ks){const t=ks[r],{bluetoothSpec:e}=t;if(e)for(let n=0;n<e.length;n++){const a=e[n];bl.push(a.serviceUuid),js[a.serviceUuid]=js[a.serviceUuid.replace(/-/g,"")]={deviceModel:t,...a}}}const _w=()=>bl,Fw=r=>js[r.toLowerCase()];let Sw=0;const Or=[],Ze=(r,t,e)=>{const n={type:r,id:String(++Sw),date:new Date};t&&(n.message=t),e&&(n.data=e),Dw(n)},xl=r=>(Or.push(r),()=>{const t=Or.indexOf(r);t!==-1&&(Or[t]=Or[Or.length-1],Or.pop())});function Dw(r){for(let t=0;t<Or.length;t++)try{Or[t](r)}catch(e){console.error(e)}}typeof window<"u"&&(window.__ledgerLogsListen=xl);const Iw=Object.freeze(Object.defineProperty({__proto__:null,listen:xl,log:Ze},Symbol.toStringTag,{value:"Module"})),Tw=[{vendorId:Gi}];async function El(){return await navigator.usb.requestDevice({filters:Tw})}async function Uo(){return(await navigator.usb.getDevices()).filter(t=>t.vendorId===Gi)}async function Rw(){const r=await Uo();return r.length>0?r[0]:El()}const Nw=()=>Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices=="function"),Uw=1,Ja=3;let zi=class mi extends Ir{constructor(t,e){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.interfaceNumber=void 0,this._disconnectEmitted=!1,this._emitDisconnect=n=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",n))},this.exchange=n=>this.exchangeAtomicImpl(async()=>{const{channel:a,packetSize:i}=this;Ze("apdu","=> "+n.toString("hex"));const d=Mo(a,i),b=d.makeBlocks(n);for(let T=0;T<b.length;T++)await this.device.transferOut(Ja,b[T]);let C,D;for(;!(C=d.getReducedResult(D));){const T=await this.device.transferIn(Ja,i),O=Buffer.from(T.data.buffer);D=d.reduceResponse(D,O)}return Ze("apdu","<= "+C.toString("hex")),C}).catch(a=>{throw a&&a.message&&a.message.includes("disconnected")?(this._emitDisconnect(a),new Co(a.message)):a}),this.device=t,this.interfaceNumber=e,this.deviceModel=Yi(t.productId)}static async request(){const t=await El();return mi.open(t)}static async openConnected(){const t=await Uo();return t.length===0?null:mi.open(t[0])}static async open(t){await t.open(),t.configuration===null&&await t.selectConfiguration(Uw),await t0(t);const e=t.configurations[0].interfaces.find(({alternates:d})=>d.some(b=>b.interfaceClass===255));if(!e)throw new Os("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const n=e.interfaceNumber;try{await t.claimInterface(n)}catch(d){throw await t.close(),new Os(d.message)}const a=new mi(t,n),i=d=>{t===d.device&&(navigator.usb.removeEventListener("disconnect",i),a._emitDisconnect(new ki))};return navigator.usb.addEventListener("disconnect",i),a}async close(){await this.exchangeBusyPromise,await this.device.releaseInterface(this.interfaceNumber),await t0(this.device),await this.device.close()}setScrambleKey(){}};zi.isSupported=Nw;zi.list=Uo;zi.listen=r=>{let t=!1;Rw().then(n=>{if(!t){const a=Yi(n.productId);r.next({type:"add",descriptor:n,deviceModel:a}),r.complete()}},n=>{window.DOMException&&n instanceof window.DOMException&&n.code===18?r.error(new ul(n.message)):r.error(new Pn(n.message))});function e(){t=!0}return{unsubscribe:e}};async function t0(r){try{await r.reset()}catch(t){console.warn(t)}}const $w=Object.freeze(Object.defineProperty({__proto__:null,default:zi},Symbol.toStringTag,{value:"Module"})),Pw=Vr($w),Ow=[{vendorId:Gi}],Lw=()=>Promise.resolve(!!(global.navigator&&global.navigator.hid)),Ci=()=>{const{hid:r}=navigator;if(!r)throw new jr("navigator.hid is not supported","HIDNotSupported");return r};async function Al(){const r=await Ci().requestDevice({filters:Ow});return Array.isArray(r)?r:[r]}async function $o(){return(await Ci().getDevices()).filter(t=>t.vendorId===Gi)}async function kw(){const r=await $o();return r.length>0?r[0]:(await Al())[0]}let Zi=class yi extends Ir{constructor(t){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.inputs=[],this.inputCallback=void 0,this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise(e=>{this.inputCallback=e}),this.onInputReport=e=>{const n=Buffer.from(e.data.buffer);this.inputCallback?(this.inputCallback(n),this.inputCallback=null):this.inputs.push(n)},this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.exchange=e=>this.exchangeAtomicImpl(async()=>{const{channel:n,packetSize:a}=this;Ze("apdu","=> "+e.toString("hex"));const i=Mo(n,a),d=i.makeBlocks(e);for(let D=0;D<d.length;D++)await this.device.sendReport(0,d[D]);let b,C;for(;!(b=i.getReducedResult(C));){const D=await this.read();C=i.reduceResponse(C,D)}return Ze("apdu","<= "+b.toString("hex")),b}).catch(n=>{throw n&&n.message&&n.message.includes("write")?(this._emitDisconnect(n),new Co(n.message)):n}),this.device=t,this.deviceModel=Yi(t.productId),t.addEventListener("inputreport",this.onInputReport)}static async request(){const[t]=await Al();return yi.open(t)}static async openConnected(){const t=await $o();return t.length===0?null:yi.open(t[0])}static async open(t){await t.open();const e=new yi(t),n=a=>{t===a.device&&(Ci().removeEventListener("disconnect",n),e._emitDisconnect(new ki))};return Ci().addEventListener("disconnect",n),e}async close(){await this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),await this.device.close()}setScrambleKey(){}};Zi.isSupported=Lw;Zi.list=$o;Zi.listen=r=>{let t=!1;kw().then(n=>{if(!n)r.error(new Pn("Access denied to use Ledger device"));else if(!t){const a=Yi(n.productId);r.next({type:"add",descriptor:n,deviceModel:a}),r.complete()}},n=>{r.error(new Pn(n.message))});function e(){t=!0}return{unsubscribe:e}};const jw=Object.freeze(Object.defineProperty({__proto__:null,default:Zi},Symbol.toStringTag,{value:"Module"})),qw=Vr(jw);var Po={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qs=function(r,t){return qs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])},qs(r,t)};function ce(r,t){qs(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function pn(r){return typeof r=="function"}var e0=!1,gr={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;""+t.stack}e0=r},get useDeprecatedSynchronousErrorHandling(){return e0}};function ln(r){setTimeout(function(){throw r},0)}var Bi={closed:!0,next:function(r){},error:function(r){if(gr.useDeprecatedSynchronousErrorHandling)throw r;ln(r)},complete:function(){}},mr=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}();function Oo(r){return r!==null&&typeof r=="object"}var Ww=function(){function r(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,n){return n+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r}(),Nn=Ww,tr=function(){function r(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return r.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,n=e._parentOrParents,a=e._ctorUnsubscribe,i=e._unsubscribe,d=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var b=0;b<n.length;++b){var C=n[b];C.remove(this)}if(pn(i)){a&&(this._unsubscribe=void 0);try{i.call(this)}catch(O){t=O instanceof Nn?r0(O.errors):[O]}}if(mr(d))for(var b=-1,D=d.length;++b<D;){var T=d[b];if(Oo(T))try{T.unsubscribe()}catch(k){t=t||[],k instanceof Nn?t=t.concat(r0(k.errors)):t.push(k)}}if(t)throw new Nn(t)}},r.prototype.add=function(t){var e=t;if(!t)return r.EMPTY;switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof r)){var n=e;e=new r,e._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var a=e._parentOrParents;if(a===null)e._parentOrParents=this;else if(a instanceof r){if(a===this)return e;e._parentOrParents=[a,this]}else if(a.indexOf(this)===-1)a.push(this);else return e;var i=this._subscriptions;return i===null?this._subscriptions=[e]:i.push(e),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}();function r0(r){return r.reduce(function(t,e){return t.concat(e instanceof Nn?e.errors:e)},[])}var Mi=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ze=function(r){ce(t,r);function t(e,n,a){var i=r.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=Bi;break;case 1:if(!e){i.destination=Bi;break}if(typeof e=="object"){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new n0(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new n0(i,e,n,a);break}return i}return t.prototype[Mi]=function(){return this},t.create=function(e,n,a){var i=new t(e,n,a);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(tr),n0=function(r){ce(t,r);function t(e,n,a,i){var d=r.call(this)||this;d._parentSubscriber=e;var b,C=d;return pn(n)?b=n:n&&(b=n.next,a=n.error,i=n.complete,n!==Bi&&(C=Object.create(n),pn(C.unsubscribe)&&d.add(C.unsubscribe.bind(C)),C.unsubscribe=d.unsubscribe.bind(d))),d._context=C,d._next=b,d._error=a,d._complete=i,d}return t.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!gr.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(n,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,a=gr.useDeprecatedSynchronousErrorHandling;if(this._error)!a||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(n,this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)a?(n.syncErrorValue=e,n.syncErrorThrown=!0):ln(e),this.unsubscribe();else{if(this.unsubscribe(),a)throw e;ln(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var a=function(){return e._complete.call(e._context)};!gr.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(a),this.unsubscribe()):(this.__tryOrSetError(n,a),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(a){if(this.unsubscribe(),gr.useDeprecatedSynchronousErrorHandling)throw a;ln(a)}},t.prototype.__tryOrSetError=function(e,n,a){if(!gr.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,a)}catch(i){return gr.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(ln(i),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(ze);function Lo(r){for(;r;){var t=r,e=t.closed,n=t.destination,a=t.isStopped;if(e||a)return!1;n&&n instanceof ze?r=n:r=null}return!0}function Hw(r,t,e){if(r){if(r instanceof ze)return r;if(r[Mi])return r[Mi]()}return!r&&!t&&!e?new ze(Bi):new ze(r,t,e)}var An=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function vn(r){return r}function Kw(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return Cl(r)}function Cl(r){return r.length===0?vn:r.length===1?r[0]:function(e){return r.reduce(function(n,a){return a(n)},e)}}var be=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var a=this.operator,i=Hw(t,e,n);if(a?i.add(a.call(i,this.source)):i.add(this.source||gr.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),gr.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){gr.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),Lo(t)?t.error(e):console.warn(e)}},r.prototype.forEach=function(t,e){var n=this;return e=i0(e),new e(function(a,i){var d;d=n.subscribe(function(b){try{t(b)}catch(C){i(C),d&&d.unsubscribe()}},i,a)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[An]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:Cl(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=i0(t),new t(function(n,a){var i;e.subscribe(function(d){return i=d},function(d){return a(d)},function(){return n(i)})})},r.create=function(t){return new r(t)},r}();function i0(r){if(r||(r=gr.Promise||Promise),!r)throw new Error("no Promise impl found");return r}var Vw=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}(),kr=Vw,Bl=function(r){ce(t,r);function t(e,n){var a=r.call(this)||this;return a.subject=e,a.subscriber=n,a.closed=!1,a}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,n=e.observers;if(this.subject=null,!(!n||n.length===0||e.isStopped||e.closed)){var a=n.indexOf(this.subscriber);a!==-1&&n.splice(a,1)}}},t}(tr),Ml=function(r){ce(t,r);function t(e){var n=r.call(this,e)||this;return n.destination=e,n}return t}(ze),Cn=function(r){ce(t,r);function t(){var e=r.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype[Mi]=function(){return new Ml(this)},t.prototype.lift=function(e){var n=new s0(this,this);return n.operator=e,n},t.prototype.next=function(e){if(this.closed)throw new kr;if(!this.isStopped)for(var n=this.observers,a=n.length,i=n.slice(),d=0;d<a;d++)i[d].next(e)},t.prototype.error=function(e){if(this.closed)throw new kr;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var n=this.observers,a=n.length,i=n.slice(),d=0;d<a;d++)i[d].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new kr;this.isStopped=!0;for(var e=this.observers,n=e.length,a=e.slice(),i=0;i<n;i++)a[i].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new kr;return r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new kr;return this.hasError?(e.error(this.thrownError),tr.EMPTY):this.isStopped?(e.complete(),tr.EMPTY):(this.observers.push(e),new Bl(this,e))},t.prototype.asObservable=function(){var e=new be;return e.source=this,e},t.create=function(e,n){return new s0(e,n)},t}(be),s0=function(r){ce(t,r);function t(e,n){var a=r.call(this)||this;return a.destination=e,a.source=n,a}return t.prototype.next=function(e){var n=this.destination;n&&n.next&&n.next(e)},t.prototype.error=function(e){var n=this.destination;n&&n.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var n=this.source;return n?this.source.subscribe(e):tr.EMPTY},t}(Cn);function _l(){return function(t){return t.lift(new Gw(t))}}var Gw=function(){function r(t){this.connectable=t}return r.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var a=new Yw(t,n),i=e.subscribe(a);return a.closed||(a.connection=n.connect()),i},r}(),Yw=function(r){ce(t,r);function t(e,n){var a=r.call(this,e)||this;return a.connectable=n,a}return t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var n=e._refCount;if(n<=0){this.connection=null;return}if(e._refCount=n-1,n>1){this.connection=null;return}var a=this.connection,i=e._connection;this.connection=null,i&&(!a||i===a)&&i.unsubscribe()},t}(ze),Fl=function(r){ce(t,r);function t(e,n){var a=r.call(this)||this;return a.source=e,a.subjectFactory=n,a._refCount=0,a._isComplete=!1,a}return t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new tr,e.add(this.source.subscribe(new Zw(this.getSubject(),this))),e.closed&&(this._connection=null,e=tr.EMPTY)),e},t.prototype.refCount=function(){return _l()(this)},t}(be),zw=function(){var r=Fl.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}}(),Zw=function(r){ce(t,r);function t(e,n){var a=r.call(this,e)||this;return a.connectable=n,a}return t.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}},t}(Ml),Xw=function(r){ce(t,r);function t(e,n,a){var i=r.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=a,i}return t.prototype._subscribe=function(e){var n=new tr,a=this,i=a.refCountSubscription,d=a.groupSubject;return i&&!i.closed&&n.add(new Qw(i)),n.add(d.subscribe(e)),n},t}(be),Qw=function(r){ce(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,e.count++,n}return t.prototype.unsubscribe=function(){var e=this.parent;!e.closed&&!this.closed&&(r.prototype.unsubscribe.call(this),e.count-=1,e.count===0&&e.attemptedToUnsubscribe&&e.unsubscribe())},t}(tr),Jw=function(r){ce(t,r);function t(e){var n=r.call(this)||this;return n._value=e,n}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(e){var n=r.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new kr;return this._value},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(Cn),t2=function(r){ce(t,r);function t(e,n){return r.call(this)||this}return t.prototype.schedule=function(e,n){return this},t}(tr),Kn=function(r){ce(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a.scheduler=e,a.work=n,a.pending=!1,a}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),this.closed)return this;this.state=e;var a=this.id,i=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(i,a,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this},t.prototype.requestAsyncId=function(e,n,a){return a===void 0&&(a=0),setInterval(e.flush.bind(e,this),a)},t.prototype.recycleAsyncId=function(e,n,a){if(a===void 0&&(a=0),a!==null&&this.delay===a&&this.pending===!1)return n;clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(e,n);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var a=!1,i=void 0;try{this.work(e)}catch(d){a=!0,i=!!d&&d||new Error(d)}if(a)return this.unsubscribe(),i},t.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,a=n.actions,i=a.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,i!==-1&&a.splice(i,1),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},t}(t2),e2=function(r){ce(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a.scheduler=e,a.work=n,a}return t.prototype.schedule=function(e,n){return n===void 0&&(n=0),n>0?r.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},t.prototype.execute=function(e,n){return n>0||this.closed?r.prototype.execute.call(this,e,n):this._execute(e,n)},t.prototype.requestAsyncId=function(e,n,a){return a===void 0&&(a=0),a!==null&&a>0||a===null&&this.delay>0?r.prototype.requestAsyncId.call(this,e,n,a):e.flush(this)},t}(Kn),Ws=function(){function r(t,e){e===void 0&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},r.now=function(){return Date.now()},r}(),Vn=function(r){ce(t,r);function t(e,n){n===void 0&&(n=Ws.now);var a=r.call(this,e,function(){return t.delegate&&t.delegate!==a?t.delegate.now():n()})||this;return a.actions=[],a.active=!1,a.scheduled=void 0,a}return t.prototype.schedule=function(e,n,a){return n===void 0&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,a):r.prototype.schedule.call(this,e,n,a)},t.prototype.flush=function(e){var n=this.actions;if(this.active){n.push(e);return}var a;this.active=!0;do if(a=e.execute(e.state,e.delay))break;while(e=n.shift());if(this.active=!1,a){for(;e=n.shift();)e.unsubscribe();throw a}},t}(Ws),r2=function(r){ce(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(Vn),Sl=new r2(e2),Dl=Sl,gn=new be(function(r){return r.complete()});function Xi(r){return r?n2(r):gn}function n2(r){return new be(function(t){return r.schedule(function(){return t.complete()})})}function Wr(r){return r&&typeof r.schedule=="function"}var Il=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()}};function ko(r,t){return new be(function(e){var n=new tr,a=0;return n.add(t.schedule(function(){if(a===r.length){e.complete();return}e.next(r[a++]),e.closed||n.add(this.schedule())})),n})}function Gn(r,t){return t?ko(r,t):new be(Il(r))}function jo(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return Wr(e)?(r.pop(),ko(r,e)):Gn(r)}function Tl(r,t){return t?new be(function(e){return t.schedule(i2,0,{error:r,subscriber:e})}):new be(function(e){return e.error(r)})}function i2(r){var t=r.error,e=r.subscriber;e.error(t)}var Hs;Hs||(Hs={});var wi=function(){function r(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue=t==="N"}return r.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},r.prototype.do=function(t,e,n){var a=this.kind;switch(a){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},r.prototype.accept=function(t,e,n){return t&&typeof t.next=="function"?this.observe(t):this.do(t,e,n)},r.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return jo(this.value);case"E":return Tl(this.error);case"C":return Xi()}throw new Error("unexpected notification kind value")},r.createNext=function(t){return typeof t<"u"?new r("N",t):r.undefinedValueNotification},r.createError=function(t){return new r("E",void 0,t)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}(),s2=function(r){ce(t,r);function t(e,n,a){a===void 0&&(a=0);var i=r.call(this,e)||this;return i.scheduler=n,i.delay=a,i}return t.dispatch=function(e){var n=e.notification,a=e.destination;n.observe(a),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var n=this.destination;n.add(this.scheduler.schedule(t.dispatch,this.delay,new o2(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(wi.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(wi.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(wi.createComplete()),this.unsubscribe()},t}(ze),o2=function(){function r(t,e){this.notification=t,this.destination=e}return r}(),a2=function(r){ce(t,r);function t(e,n,a){e===void 0&&(e=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var i=r.call(this)||this;return i.scheduler=a,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return t.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}r.prototype.next.call(this,e)},t.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new f2(this._getNow(),e)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){var n=this._infiniteTimeWindow,a=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,d=a.length,b;if(this.closed)throw new kr;if(this.isStopped||this.hasError?b=tr.EMPTY:(this.observers.push(e),b=new Bl(this,e)),i&&e.add(e=new s2(e,i)),n)for(var C=0;C<d&&!e.closed;C++)e.next(a[C]);else for(var C=0;C<d&&!e.closed;C++)e.next(a[C].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),b},t.prototype._getNow=function(){return(this.scheduler||Dl).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),n=this._bufferSize,a=this._windowTime,i=this._events,d=i.length,b=0;b<d&&!(e-i[b].time<a);)b++;return d>n&&(b=Math.max(b,d-n)),b>0&&i.splice(0,b),i},t}(Cn),f2=function(){function r(t,e){this.time=t,this.value=e}return r}(),Yn=function(r){ce(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return t.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),tr.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),tr.EMPTY):r.prototype._subscribe.call(this,e)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(e){this.hasCompleted||r.prototype.error.call(this,e)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},t}(Cn),l2=1,h2=function(){return Promise.resolve()}(),Ks={};function o0(r){return r in Ks?(delete Ks[r],!0):!1}var a0={setImmediate:function(r){var t=l2++;return Ks[t]=!0,h2.then(function(){return o0(t)&&r()}),t},clearImmediate:function(r){o0(r)}},u2=function(r){ce(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a.scheduler=e,a.work=n,a}return t.prototype.requestAsyncId=function(e,n,a){return a===void 0&&(a=0),a!==null&&a>0?r.prototype.requestAsyncId.call(this,e,n,a):(e.actions.push(this),e.scheduled||(e.scheduled=a0.setImmediate(e.flush.bind(e,null))))},t.prototype.recycleAsyncId=function(e,n,a){if(a===void 0&&(a=0),a!==null&&a>0||a===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,a);e.actions.length===0&&(a0.clearImmediate(n),e.scheduled=void 0)},t}(Kn),c2=function(r){ce(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,a,i=-1,d=n.length;e=e||n.shift();do if(a=e.execute(e.state,e.delay))break;while(++i<d&&(e=n.shift()));if(this.active=!1,a){for(;++i<d&&(e=n.shift());)e.unsubscribe();throw a}},t}(Vn),Rl=new c2(u2),d2=Rl,Nl=new Vn(Kn),_i=Nl,p2=function(r){ce(t,r);function t(e,n){var a=r.call(this,e,n)||this;return a.scheduler=e,a.work=n,a}return t.prototype.requestAsyncId=function(e,n,a){return a===void 0&&(a=0),a!==null&&a>0?r.prototype.requestAsyncId.call(this,e,n,a):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},t.prototype.recycleAsyncId=function(e,n,a){if(a===void 0&&(a=0),a!==null&&a>0||a===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,a);e.actions.length===0&&(cancelAnimationFrame(n),e.scheduled=void 0)},t}(Kn),v2=function(r){ce(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,a,i=-1,d=n.length;e=e||n.shift();do if(a=e.execute(e.state,e.delay))break;while(++i<d&&(e=n.shift()));if(this.active=!1,a){for(;++i<d&&(e=n.shift());)e.unsubscribe();throw a}},t}(Vn),Ul=new v2(p2),g2=Ul,m2=function(r){ce(t,r);function t(e,n){e===void 0&&(e=$l),n===void 0&&(n=Number.POSITIVE_INFINITY);var a=r.call(this,e,function(){return a.frame})||this;return a.maxFrames=n,a.frame=0,a.index=-1,a}return t.prototype.flush=function(){for(var e=this,n=e.actions,a=e.maxFrames,i,d;(d=n[0])&&d.delay<=a&&(n.shift(),this.frame=d.delay,!(i=d.execute(d.state,d.delay))););if(i){for(;d=n.shift();)d.unsubscribe();throw i}},t.frameTimeFactor=10,t}(Vn),$l=function(r){ce(t,r);function t(e,n,a){a===void 0&&(a=e.index+=1);var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=a,i.active=!0,i.index=e.index=a,i}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),!this.id)return r.prototype.schedule.call(this,e,n);this.active=!1;var a=new t(this.scheduler,this.work);return this.add(a),a.schedule(e,n)},t.prototype.requestAsyncId=function(e,n,a){a===void 0&&(a=0),this.delay=e.frame+a;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,n,a){},t.prototype._execute=function(e,n){if(this.active===!0)return r.prototype._execute.call(this,e,n)},t.sortActions=function(e,n){return e.delay===n.delay?e.index===n.index?0:e.index>n.index?1:-1:e.delay>n.delay?1:-1},t}(Kn);function Mr(){}function y2(r){return!!r&&(r instanceof be||typeof r.lift=="function"&&typeof r.subscribe=="function")}var w2=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r}(),Pl=w2,b2=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r}(),qo=b2,x2=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r}(),E2=x2;function tn(r,t){return function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new A2(r,t))}}var A2=function(){function r(t,e){this.project=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new C2(t,this.project,this.thisArg))},r}(),C2=function(r){ce(t,r);function t(e,n,a){var i=r.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=a||i,i}return t.prototype._next=function(e){var n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(a){this.destination.error(a);return}this.destination.next(n)},t}(ze);function Ol(r,t,e){if(t)if(Wr(t))e=t;else return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return Ol(r,e).apply(void 0,n).pipe(tn(function(i){return mr(i)?t.apply(void 0,i):t(i)}))};return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i=this,d,b={context:i,subject:d,callbackFunc:r,scheduler:e};return new be(function(C){if(e){var T={args:n,subscriber:C,params:b};return e.schedule(B2,0,T)}else{if(!d){d=new Yn;var D=function(){for(var O=[],k=0;k<arguments.length;k++)O[k]=arguments[k];d.next(O.length<=1?O[0]:O),d.complete()};try{r.apply(i,n.concat([D]))}catch(O){Lo(d)?d.error(O):console.warn(O)}}return d.subscribe(C)}})}}function B2(r){var t=this,e=r.args,n=r.subscriber,a=r.params,i=a.callbackFunc,d=a.context,b=a.scheduler,C=a.subject;if(!C){C=a.subject=new Yn;var D=function(){for(var T=[],O=0;O<arguments.length;O++)T[O]=arguments[O];var k=T.length<=1?T[0]:T;t.add(b.schedule(M2,0,{value:k,subject:C}))};try{i.apply(d,e.concat([D]))}catch(T){C.error(T)}}this.add(C.subscribe(n))}function M2(r){var t=r.value,e=r.subject;e.next(t),e.complete()}function Ll(r,t,e){if(t)if(Wr(t))e=t;else return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return Ll(r,e).apply(void 0,n).pipe(tn(function(i){return mr(i)?t.apply(void 0,i):t(i)}))};return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var i={subject:void 0,args:n,callbackFunc:r,scheduler:e,context:this};return new be(function(d){var b=i.context,C=i.subject;if(e)return e.schedule(_2,0,{params:i,subscriber:d,context:b});if(!C){C=i.subject=new Yn;var D=function(){for(var T=[],O=0;O<arguments.length;O++)T[O]=arguments[O];var k=T.shift();if(k){C.error(k);return}C.next(T.length<=1?T[0]:T),C.complete()};try{r.apply(b,n.concat([D]))}catch(T){Lo(C)?C.error(T):console.warn(T)}}return C.subscribe(d)})}}function _2(r){var t=this,e=r.params,n=r.subscriber,a=r.context,i=e.callbackFunc,d=e.args,b=e.scheduler,C=e.subject;if(!C){C=e.subject=new Yn;var D=function(){for(var T=[],O=0;O<arguments.length;O++)T[O]=arguments[O];var k=T.shift();if(k)t.add(b.schedule(f0,0,{err:k,subject:C}));else{var G=T.length<=1?T[0]:T;t.add(b.schedule(F2,0,{value:G,subject:C}))}};try{i.apply(a,d.concat([D]))}catch(T){this.add(b.schedule(f0,0,{err:T,subject:C}))}}this.add(C.subscribe(n))}function F2(r){var t=r.value,e=r.subject;e.next(t),e.complete()}function f0(r){var t=r.err,e=r.subject;e.error(t)}var kl=function(r){ce(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e,n,a,i,d){this.destination.next(n)},t.prototype.notifyError=function(e,n){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(ze),S2=function(r){ce(t,r);function t(e,n,a){var i=r.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=a,i.index=0,i}return t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(ze),D2=function(r){return function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,ln),t}};function I2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hr=I2(),T2=function(r){return function(t){var e=r[Hr]();do{var n=void 0;try{n=e.next()}catch(a){return t.error(a),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}},R2=function(r){return function(t){var e=r[An]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}},jl=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function ql(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}var On=function(r){if(r&&typeof r[An]=="function")return R2(r);if(jl(r))return Il(r);if(ql(r))return D2(r);if(r&&typeof r[Hr]=="function")return T2(r);var t=Oo(r)?"an invalid object":"'"+r+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)};function Wl(r,t,e,n,a){if(a===void 0&&(a=new S2(r,e,n)),!a.closed)return t instanceof be?t.subscribe(a):On(t)(a)}var l0={};function N2(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0,n=void 0;return Wr(r[r.length-1])&&(n=r.pop()),typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&mr(r[0])&&(r=r[0]),Gn(r,n).lift(new U2(e))}var U2=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new $2(t,this.resultSelector))},r}(),$2=function(r){ce(t,r);function t(e,n){var a=r.call(this,e)||this;return a.resultSelector=n,a.active=0,a.values=[],a.observables=[],a}return t.prototype._next=function(e){this.values.push(l0),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var a=0;a<n;a++){var i=e[a];this.add(Wl(this,i,void 0,a))}}},t.prototype.notifyComplete=function(e){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(e,n,a){var i=this.values,d=i[a],b=this.toRespond?d===l0?--this.toRespond:this.toRespond:0;i[a]=n,b===0&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},t.prototype._tryResultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(a){this.destination.error(a);return}this.destination.next(n)},t}(kl);function P2(r,t){return new be(function(e){var n=new tr;return n.add(t.schedule(function(){var a=r[An]();n.add(a.subscribe({next:function(i){n.add(t.schedule(function(){return e.next(i)}))},error:function(i){n.add(t.schedule(function(){return e.error(i)}))},complete:function(){n.add(t.schedule(function(){return e.complete()}))}}))})),n})}function O2(r,t){return new be(function(e){var n=new tr;return n.add(t.schedule(function(){return r.then(function(a){n.add(t.schedule(function(){e.next(a),n.add(t.schedule(function(){return e.complete()}))}))},function(a){n.add(t.schedule(function(){return e.error(a)}))})})),n})}function L2(r,t){if(!r)throw new Error("Iterable cannot be null");return new be(function(e){var n=new tr,a;return n.add(function(){a&&typeof a.return=="function"&&a.return()}),n.add(t.schedule(function(){a=r[Hr](),n.add(t.schedule(function(){if(!e.closed){var i,d;try{var b=a.next();i=b.value,d=b.done}catch(C){e.error(C);return}d?e.complete():(e.next(i),this.schedule())}}))})),n})}function k2(r){return r&&typeof r[An]=="function"}function j2(r){return r&&typeof r[Hr]=="function"}function Hl(r,t){if(r!=null){if(k2(r))return P2(r,t);if(ql(r))return O2(r,t);if(jl(r))return ko(r,t);if(j2(r)||typeof r=="string")return L2(r,t)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}function en(r,t){return t?Hl(r,t):r instanceof be?r:new be(On(r))}var Kl=function(r){ce(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,n}return t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(ze),Vl=function(r){ce(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(ze);function Gl(r,t){if(!t.closed){if(r instanceof be)return r.subscribe(t);var e;try{e=On(r)(t)}catch(n){t.error(n)}return e}}function Yl(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(n){return n.pipe(Yl(function(a,i){return en(r(a,i)).pipe(tn(function(d,b){return t(a,d,i,b)}))},e))}:(typeof t=="number"&&(e=t),function(n){return n.lift(new q2(r,e))})}var q2=function(){function r(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return r.prototype.call=function(t,e){return e.subscribe(new W2(t,this.project,this.concurrent))},r}(),W2=function(r){ce(t,r);function t(e,n,a){a===void 0&&(a=Number.POSITIVE_INFINITY);var i=r.call(this,e)||this;return i.project=n,i.concurrent=a,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var n,a=this.index++;try{n=this.project(e,a)}catch(i){this.destination.error(i);return}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new Kl(this),a=this.destination;a.add(n);var i=Gl(e,n);i!==n&&a.add(i)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(Vl);function zl(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),Yl(vn,r)}function H2(){return zl(1)}function K2(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return H2()(jo.apply(void 0,r))}function Wo(r){return new be(function(t){var e;try{e=r()}catch(a){t.error(a);return}var n=e?en(e):Xi();return n.subscribe(t)})}function V2(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1){var e=r[0];if(mr(e))return ci(e,null);if(Oo(e)&&Object.getPrototypeOf(e)===Object.prototype){var n=Object.keys(e);return ci(n.map(function(i){return e[i]}),n)}}if(typeof r[r.length-1]=="function"){var a=r.pop();return r=r.length===1&&mr(r[0])?r[0]:r,ci(r,null).pipe(tn(function(i){return a.apply(void 0,i)}))}return ci(r,null)}function ci(r,t){return new be(function(e){var n=r.length;if(n===0){e.complete();return}for(var a=new Array(n),i=0,d=0,b=function(D){var T=en(r[D]),O=!1;e.add(T.subscribe({next:function(k){O||(O=!0,d++),a[D]=k},error:function(k){return e.error(k)},complete:function(){i++,(i===n||!O)&&(d===n&&e.next(t?t.reduce(function(k,G,st){return k[G]=a[st],k},{}):a),e.complete())}}))},C=0;C<n;C++)b(C)})}function Zl(r,t,e,n){return pn(e)&&(n=e,e=void 0),n?Zl(r,t,e).pipe(tn(function(a){return mr(a)?n.apply(void 0,a):n(a)})):new be(function(a){function i(d){arguments.length>1?a.next(Array.prototype.slice.call(arguments)):a.next(d)}Xl(r,t,i,a,e)})}function Xl(r,t,e,n,a){var i;if(z2(r)){var d=r;r.addEventListener(t,e,a),i=function(){return d.removeEventListener(t,e,a)}}else if(Y2(r)){var b=r;r.on(t,e),i=function(){return b.off(t,e)}}else if(G2(r)){var C=r;r.addListener(t,e),i=function(){return C.removeListener(t,e)}}else if(r&&r.length)for(var D=0,T=r.length;D<T;D++)Xl(r[D],t,e,n,a);else throw new TypeError("Invalid event target");n.add(i)}function G2(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function Y2(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}function z2(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}function Ql(r,t,e){return e?Ql(r,t).pipe(tn(function(n){return mr(n)?e.apply(void 0,n):e(n)})):new be(function(n){var a=function(){for(var d=[],b=0;b<arguments.length;b++)d[b]=arguments[b];return n.next(d.length===1?d[0]:d)},i;try{i=r(a)}catch(d){n.error(d);return}if(pn(t))return function(){return t(a,i)}})}function Z2(r,t,e,n,a){var i,d;if(arguments.length==1){var b=r;d=b.initialState,t=b.condition,e=b.iterate,i=b.resultSelector||vn,a=b.scheduler}else n===void 0||Wr(n)?(d=r,i=vn,a=n):(d=r,i=n);return new be(function(C){var D=d;if(a)return a.schedule(X2,0,{subscriber:C,iterate:e,condition:t,resultSelector:i,state:D});do{if(t){var T=void 0;try{T=t(D)}catch(k){C.error(k);return}if(!T){C.complete();break}}var O=void 0;try{O=i(D)}catch(k){C.error(k);return}if(C.next(O),C.closed)break;try{D=e(D)}catch(k){C.error(k);return}}while(!0)})}function X2(r){var t=r.subscriber,e=r.condition;if(!t.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(i){t.error(i);return}else r.needIterate=!0;if(e){var n=void 0;try{n=e(r.state)}catch(i){t.error(i);return}if(!n){t.complete();return}if(t.closed)return}var a;try{a=r.resultSelector(r.state)}catch(i){t.error(i);return}if(!t.closed&&(t.next(a),!t.closed))return this.schedule(r)}}function Q2(r,t,e){return t===void 0&&(t=gn),e===void 0&&(e=gn),Wo(function(){return r()?t:e})}function Vs(r){return!mr(r)&&r-parseFloat(r)+1>=0}function J2(r,t){return r===void 0&&(r=0),t===void 0&&(t=_i),(!Vs(r)||r<0)&&(r=0),(!t||typeof t.schedule!="function")&&(t=_i),new be(function(e){return e.add(t.schedule(tb,r,{subscriber:e,counter:0,period:r})),e})}function tb(r){var t=r.subscriber,e=r.counter,n=r.period;t.next(e),this.schedule({subscriber:t,counter:e+1,period:n},n)}function Gs(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Number.POSITIVE_INFINITY,n=null,a=r[r.length-1];return Wr(a)?(n=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(e=r.pop())):typeof a=="number"&&(e=r.pop()),n===null&&r.length===1&&r[0]instanceof be?r[0]:zl(e)(Gn(r,n))}var Jl=new be(Mr);function eb(){return Jl}function Ys(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===0)return gn;var e=r[0],n=r.slice(1);return r.length===1&&mr(e)?Ys.apply(void 0,e):new be(function(a){var i=function(){return a.add(Ys.apply(void 0,n).subscribe(a))};return en(e).subscribe({next:function(d){a.next(d)},error:i,complete:i})})}function rb(r,t){return t?new be(function(e){var n=Object.keys(r),a=new tr;return a.add(t.schedule(nb,0,{keys:n,index:0,subscriber:e,subscription:a,obj:r})),a}):new be(function(e){for(var n=Object.keys(r),a=0;a<n.length&&!e.closed;a++){var i=n[a];r.hasOwnProperty(i)&&e.next([i,r[i]])}e.complete()})}function nb(r){var t=r.keys,e=r.index,n=r.subscriber,a=r.subscription,i=r.obj;if(!n.closed)if(e<t.length){var d=t[e];n.next([d,i[d]]),a.add(this.schedule({keys:t,index:e+1,subscriber:n,subscription:a,obj:i}))}else n.complete()}function ib(r,t){function e(){return!e.pred.apply(e.thisArg,arguments)}return e.pred=r,e.thisArg=t,e}function zs(r,t){return function(n){return n.lift(new sb(r,t))}}var sb=function(){function r(t,e){this.predicate=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new ob(t,this.predicate,this.thisArg))},r}(),ob=function(r){ce(t,r);function t(e,n,a){var i=r.call(this,e)||this;return i.predicate=n,i.thisArg=a,i.count=0,i}return t.prototype._next=function(e){var n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(a){this.destination.error(a);return}n&&this.destination.next(e)},t}(ze);function ab(r,t,e){return[zs(t,e)(new be(On(r))),zs(ib(t,e))(new be(On(r)))]}function fb(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)if(mr(r[0]))r=r[0];else return r[0];return Gn(r,void 0).lift(new lb)}var lb=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new hb(t))},r}(),hb=function(r){ce(t,r);function t(e){var n=r.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{for(var a=0;a<n&&!this.hasFirst;a++){var i=e[a],d=Wl(this,i,void 0,a);this.subscriptions&&this.subscriptions.push(d),this.add(d)}this.observables=null}},t.prototype.notifyNext=function(e,n,a){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==a){var d=this.subscriptions[i];d.unsubscribe(),this.remove(d)}this.subscriptions=null}this.destination.next(n)},t}(kl);function ub(r,t,e){return r===void 0&&(r=0),new be(function(n){t===void 0&&(t=r,r=0);var a=0,i=r;if(e)return e.schedule(cb,0,{index:a,count:t,start:r,subscriber:n});do{if(a++>=t){n.complete();break}if(n.next(i++),n.closed)break}while(!0)})}function cb(r){var t=r.start,e=r.index,n=r.count,a=r.subscriber;if(e>=n){a.complete();return}a.next(t),!a.closed&&(r.index=e+1,r.start=t+1,this.schedule(r))}function db(r,t,e){r===void 0&&(r=0);var n=-1;return Vs(t)?n=Number(t)<1&&1||Number(t):Wr(t)&&(e=t),Wr(e)||(e=_i),new be(function(a){var i=Vs(r)?r:+r-e.now();return e.schedule(pb,i,{index:0,period:n,subscriber:a})})}function pb(r){var t=r.index,e=r.period,n=r.subscriber;if(n.next(t),!n.closed){if(e===-1)return n.complete();r.index=t+1,this.schedule(r,e)}}function vb(r,t){return new be(function(e){var n;try{n=r()}catch(b){e.error(b);return}var a;try{a=t(n)}catch(b){e.error(b);return}var i=a?en(a):gn,d=i.subscribe(e);return function(){d.unsubscribe(),n&&n.unsubscribe()}})}function gb(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return typeof e=="function"&&r.pop(),Gn(r,void 0).lift(new mb(e))}var mb=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new yb(t,this.resultSelector))},r}(),yb=function(r){ce(t,r);function t(e,n,a){var i=r.call(this,e)||this;return i.resultSelector=n,i.iterators=[],i.active=0,i.resultSelector=typeof n=="function"?n:void 0,i}return t.prototype._next=function(e){var n=this.iterators;mr(e)?n.push(new bb(e)):typeof e[Hr]=="function"?n.push(new wb(e[Hr]())):n.push(new xb(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,n=e.length;if(this.unsubscribe(),n===0){this.destination.complete();return}this.active=n;for(var a=0;a<n;a++){var i=e[a];if(i.stillUnsubscribed){var d=this.destination;d.add(i.subscribe())}else this.active--}},t.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,n=e.length,a=this.destination,i=0;i<n;i++){var d=e[i];if(typeof d.hasValue=="function"&&!d.hasValue())return}for(var b=!1,C=[],i=0;i<n;i++){var d=e[i],D=d.next();if(d.hasCompleted()&&(b=!0),D.done){a.complete();return}C.push(D.value)}this.resultSelector?this._tryresultSelector(C):a.next(C),b&&a.complete()},t.prototype._tryresultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(a){this.destination.error(a);return}this.destination.next(n)},t}(ze),wb=function(){function r(t){this.iterator=t,this.nextResult=t.next()}return r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},r.prototype.hasCompleted=function(){var t=this.nextResult;return!!(t&&t.done)},r}(),bb=function(){function r(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return r.prototype[Hr]=function(){return this},r.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),xb=function(r){ce(t,r);function t(e,n,a){var i=r.call(this,e)||this;return i.parent=n,i.observable=a,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return t.prototype[Hr]=function(){return this},t.prototype.next=function(){var e=this.buffer;return e.length===0&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Gl(this.observable,new Kl(this))},t}(Vl);const Eb=Object.freeze(Object.defineProperty({__proto__:null,ArgumentOutOfRangeError:Pl,AsyncSubject:Yn,BehaviorSubject:Jw,ConnectableObservable:Fl,EMPTY:gn,EmptyError:qo,GroupedObservable:Xw,NEVER:Jl,Notification:wi,get NotificationKind(){return Hs},ObjectUnsubscribedError:kr,Observable:be,ReplaySubject:a2,Scheduler:Ws,Subject:Cn,Subscriber:ze,Subscription:tr,TimeoutError:E2,UnsubscriptionError:Nn,VirtualAction:$l,VirtualTimeScheduler:m2,animationFrame:g2,animationFrameScheduler:Ul,asap:d2,asapScheduler:Rl,async:_i,asyncScheduler:Nl,bindCallback:Ol,bindNodeCallback:Ll,combineLatest:N2,concat:K2,config:gr,defer:Wo,empty:Xi,forkJoin:V2,from:en,fromEvent:Zl,fromEventPattern:Ql,generate:Z2,identity:vn,iif:Q2,interval:J2,isObservable:y2,merge:Gs,never:eb,noop:Mr,observable:An,of:jo,onErrorResumeNext:Ys,pairs:rb,partition:ab,pipe:Kw,queue:Dl,queueScheduler:Sl,race:fb,range:ub,scheduled:Hl,throwError:Tl,timer:db,using:vb,zip:gb},Symbol.toStringTag,{value:"Module"})),th=Vr(Eb),eh=Vr(Iw);Object.defineProperty(Po,"__esModule",{value:!0});var rh=Po.sendAPDU=void 0,Ab=th,h0=eh;const Cb=5;function Bb(r,t){const e=[];for(let n=0,a=t(0);n<r.length;n+=a,a=t(n))e.push(r.slice(n,n+a));return e}const Mb=(r,t,e)=>{const n=Bb(t,a=>e-(a===0?5:3)).map((a,i)=>{const d=Buffer.alloc(i===0?5:3);return d.writeUInt8(Cb,0),d.writeUInt16BE(i,1),i===0&&d.writeUInt16BE(t.length,3),Buffer.concat([d,a])});return Ab.Observable.create(a=>{let i=!1;async function d(){for(const C of n){if(i)return;await r(C)}}return d().then(()=>{i=!0,a.complete()},C=>{i=!0,(0,h0.log)("ble-error","sendAPDU failure "+String(C)),a.error(C)}),()=>{i||((0,h0.log)("ble-verbose","sendAPDU interruption"),i=!0)}})};rh=Po.sendAPDU=Mb;var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});var nh=Ho.receiveAPDU=void 0,di=dl,_b=th,Fb=eh;const Sb=5,Db=r=>_b.Observable.create(t=>{let e=0,n=0,a=Buffer.alloc(0);const i=r.subscribe({complete:()=>{t.error(new di.DisconnectedDevice),i.unsubscribe()},error:d=>{(0,Fb.log)("ble-error","in receiveAPDU "+String(d)),t.error(d),i.unsubscribe()},next:d=>{const b=d.readUInt8(0),C=d.readUInt16BE(1);let D=d.slice(3);if(b!==Sb){t.error(new di.TransportError("Invalid tag "+b.toString(16),"InvalidTag"));return}if(e!==C){t.error(new di.TransportError("BLE: Invalid sequence number. discontinued chunk. Received "+C+" but expected "+e,"InvalidSequence"));return}if(C===0&&(n=D.readUInt16BE(0),D=D.slice(2)),e++,a=Buffer.concat([a,D]),a.length>n){t.error(new di.TransportError("BLE: received too much data. discontinued chunk. Received "+a.length+" but expected "+n,"BLETooMuchData"));return}a.length===n&&(t.next(a),t.complete(),i.unsubscribe())}});return()=>{i.unsubscribe()}});nh=Ho.receiveAPDU=Db;function Ib(r){return r===void 0&&(r=null),function(t){return t.lift(new Tb(r))}}var Tb=function(){function r(t){this.defaultValue=t}return r.prototype.call=function(t,e){return e.subscribe(new Rb(t,this.defaultValue))},r}(),Rb=function(r){ce(t,r);function t(e,n){var a=r.call(this,e)||this;return a.defaultValue=n,a.isEmpty=!0,a}return t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(ze);function Nb(r){return r===void 0&&(r=Pb),function(t){return t.lift(new Ub(r))}}var Ub=function(){function r(t){this.errorFactory=t}return r.prototype.call=function(t,e){return e.subscribe(new $b(t,this.errorFactory))},r}(),$b=function(r){ce(t,r);function t(e,n){var a=r.call(this,e)||this;return a.errorFactory=n,a.hasValue=!1,a}return t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)},t}(ze);function Pb(){return new qo}function Ob(r){return function(t){return r===0?Xi():t.lift(new Lb(r))}}var Lb=function(){function r(t){if(this.total=t,this.total<0)throw new Pl}return r.prototype.call=function(t,e){return e.subscribe(new kb(t,this.total))},r}(),kb=function(r){ce(t,r);function t(e,n){var a=r.call(this,e)||this;return a.total=n,a.count=0,a}return t.prototype._next=function(e){var n=this.total,a=++this.count;a<=n&&(this.destination.next(e),a===n&&(this.destination.complete(),this.unsubscribe()))},t}(ze);function jb(r,t){var e=arguments.length>=2;return function(n){return n.pipe(r?zs(function(a,i){return r(a,i,n)}):vn,Ob(1),e?Ib(t):Nb(function(){return new qo}))}}function qb(){return function(t){return t.lift(new Wb)}}var Wb=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new Hb(t))},r}(),Hb=function(r){ce(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._next=function(e){},t}(ze);function Kb(r,t){return function(n){var a;if(typeof r=="function"?a=r:a=function(){return r},typeof t=="function")return n.lift(new Vb(a,t));var i=Object.create(n,zw);return i.source=n,i.subjectFactory=a,i}}var Vb=function(){function r(t,e){this.subjectFactory=t,this.selector=e}return r.prototype.call=function(t,e){var n=this.selector,a=this.subjectFactory(),i=n(a).subscribe(t);return i.add(e.subscribe(a)),i},r}();function Gb(){return new Cn}function Yb(){return function(r){return _l()(Kb(Gb)(r))}}function zb(r,t,e){return function(a){return a.lift(new Zb(r,t,e))}}var Zb=function(){function r(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return r.prototype.call=function(t,e){return e.subscribe(new Xb(t,this.nextOrObserver,this.error,this.complete))},r}(),Xb=function(r){ce(t,r);function t(e,n,a,i){var d=r.call(this,e)||this;return d._tapNext=Mr,d._tapError=Mr,d._tapComplete=Mr,d._tapError=a||Mr,d._tapComplete=i||Mr,pn(n)?(d._context=d,d._tapNext=n):n&&(d._context=n,d._tapNext=n.next||Mr,d._tapError=n.error||Mr,d._tapComplete=n.complete||Mr),d}return t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){this.destination.error(e);return}return this.destination.complete()},t}(ze);const Qb=r=>be.create(t=>{Ze("ble-verbose","start monitor "+r.uuid);function e(n){const a=n.target;a.value&&t.next(Buffer.from(a.value.buffer))}return r.startNotifications().then(()=>{r.addEventListener("characteristicvaluechanged",e)}),()=>{Ze("ble-verbose","end monitor "+r.uuid),r.stopNotifications()}}),Qi=()=>{const{bluetooth:r}=navigator;if(typeof r>"u")throw new Error("web bluetooth not supported");return r},Jb=()=>be.create(r=>{const t=Qi(),e=a=>{r.next(a.value)};t.addEventListener("availabilitychanged",e);let n=!1;return t.getAvailability().then(a=>{n||r.next(a)}),()=>{n=!0,t.removeEventListener("availabilitychanged",e)}}),Rn={},ih=()=>({filters:_w().map(r=>({services:[r]}))}),t3=async r=>{if(!r.gatt)throw new Error("bluetooth gatt not found");const[t]=await r.gatt.getPrimaryServices();if(!t)throw new Error("bluetooth service not found");const e=Fw(t.uuid);if(!e)throw new Error("bluetooth service infos not found");return[t,e]};async function sh(r,t){let e;if(typeof r=="string"){if(Rn[r])return Ze("ble-verbose","Transport in cache, using that."),Rn[r];e=await Qi().requestDevice(ih())}else e=r;e.gatt.connected||(Ze("ble-verbose","not connected. connecting..."),await e.gatt.connect());const[n,a]=await t3(e),{deviceModel:i,writeUuid:d,notifyUuid:b}=a,[C,D]=await Promise.all([n.getCharacteristic(d),n.getCharacteristic(b)]),T=Qb(D).pipe(zb(ft=>{Ze("ble-frame","<= "+ft.toString("hex"))}),Yb()),O=T.subscribe(),k=new Bn(e,C,T,i);if(!e.gatt.connected)throw new ki;Rn[k.id]=k;const G=ft=>{console.log("onDisconnect!",ft),delete Rn[k.id],k.notYetDisconnected=!1,O.unsubscribe(),e.removeEventListener("gattserverdisconnected",G),Ze("ble-verbose",`BleTransport(${k.id}) disconnected`),k.emit("disconnect",ft)};e.addEventListener("gattserverdisconnected",G);let st=Date.now();try{await k.inferMTU()}finally{Date.now()-st<1e3&&(t=!1),t&&(await e.gatt.disconnect(),await new Promise(it=>setTimeout(it,4e3)))}return t?sh(e,!1):k}let Bn=class extends Ir{static listen(t){Ze("ble-verbose","listen...");let e;Qi().requestDevice(ih()).then(async i=>{e||(t.next({type:"add",descriptor:i}),t.complete())},i=>{t.error(new Pn(i.message))});function a(){e=!0}return{unsubscribe:a}}static async open(t){return sh(t,!0)}constructor(t,e,n,a){super(),this.id=void 0,this.device=void 0,this.mtuSize=20,this.writeCharacteristic=void 0,this.notifyObservable=void 0,this.notYetDisconnected=!0,this.deviceModel=void 0,this.exchange=i=>this.exchangeAtomicImpl(async()=>{try{const d=i.toString("hex");Ze("apdu",`=> ${d}`);const b=await Gs(this.notifyObservable.pipe(nh),rh(this.write,i,this.mtuSize)).toPromise(),C=b.toString("hex");return Ze("apdu",`<= ${C}`),b}catch(d){throw Ze("ble-error","exchange got "+String(d)),this.notYetDisconnected&&this.device.gatt.disconnect(),d}}),this.write=async i=>{Ze("ble-frame","=> "+i.toString("hex")),await this.writeCharacteristic.writeValue(i)},this.id=t.id,this.device=t,this.writeCharacteristic=e,this.notifyObservable=n,this.deviceModel=a,Ze("ble-verbose",`BleTransport(${String(this.id)}) new instance`)}async inferMTU(){let t=23;if(await this.exchangeAtomicImpl(async()=>{try{t=await Gs(this.notifyObservable.pipe(jb(e=>e.readUInt8(0)===8),tn(e=>e.readUInt8(5))),Wo(()=>en(this.write(Buffer.from([8,0,0,0,0])))).pipe(qb())).toPromise()+3}catch(e){throw Ze("ble-error","inferMTU got "+String(e)),this.device.gatt.disconnect(),e}}),t>23){const e=t-3;Ze("ble-verbose",`BleTransport(${String(this.id)}) mtu set to ${String(e)}`),this.mtuSize=e}return this.mtuSize}setScrambleKey(){}async close(){this.exchangeBusyPromise&&await this.exchangeBusyPromise}};Bn.isSupported=()=>Promise.resolve().then(Qi).then(()=>!0,()=>!1);Bn.observeAvailability=r=>Jb.subscribe(r);Bn.list=()=>Promise.resolve([]);Bn.disconnect=async r=>{Ze("ble-verbose",`user disconnect(${r})`);const t=Rn[r];t&&t.device.gatt.disconnect()};const e3=Object.freeze(Object.defineProperty({__proto__:null,default:Bn},Symbol.toStringTag,{value:"Module"})),r3=Vr(e3);var oh={},ah={};const{parseAddress:n3}=yr,{AdnlAddress:i3,StorageBagId:s3,BN:u0,sha256:o3,bytesToHex:a3,bytesToBase64:f3}=Ge,{Cell:zn}=je,Zs="dns_next_resolver",fh="wallet",lh="site",hh="storage",uh=async r=>{if(!r)return new u0(0);const t=new TextEncoder().encode(r),e=new Uint8Array(await o3(t));return new u0(a3(e),16)},l3=r=>{const t=new zn;return t.bits.writeUint(40915,16),t.bits.writeAddress(r),t.bits.writeUint(0,8),t},h3=r=>{const t=new zn;return t.bits.writeUint(44289,16),t.bits.writeBytes(r.bytes),t.bits.writeUint(0,8),t},u3=r=>{const t=new zn;return t.bits.writeUint(29811,16),t.bits.writeBytes(r.bytes),t},c3=r=>{const t=new zn;return t.bits.writeUint(47763,16),t.bits.writeAddress(r),t},ch=(r,t,e)=>{if(r.bits.array[0]!==t||r.bits.array[1]!==e)throw new Error("Invalid dns record value prefix");return r.bits.array=r.bits.array.slice(2),n3(r)},dh=r=>ch(r,159,211),Xs=r=>ch(r,186,147),ph=r=>{if(r.bits.array[0]!==173||r.bits.array[1]!==1)throw new Error("Invalid dns record value prefix");const t=r.bits.array.slice(2,2+32);return new i3(t)},Ko=r=>{if(r.bits.array[0]!==116||r.bits.array[1]!==115)throw new Error("Invalid dns record value prefix");const t=r.bits.array.slice(2,2+32);return new s3(t)},vh=r=>r?r.bits.array[0]===173||r.bits.array[1]===1?ph(r):Ko(r):null,gh=async(r,t,e,n,a)=>{const i=e.length*8,d=new zn;d.bits.writeBytes(e);const b=await uh(n),C=await r.call2(t,"dnsresolve",[["tvm.Slice",f3(await d.toBoc(!1))],["num",b.toString()]]);if(C.length!==2)throw new Error("Invalid dnsresolve response");const D=C[0].toNumber();let T=C[1];if(T instanceof Array&&T.length===0&&(T=null),T&&!T.bits)throw new Error("Invalid dnsresolve response");if(D===0)return null;if(D%8!==0)throw new Error("domain split not at a component boundary");if(D>i)throw new Error("invalid response "+D+"/"+i);if(D===i)return n===Zs?T?Xs(T):null:n===fh?T?dh(T):null:n===lh?T?vh(T):null:n===hh?T?Ko(T):null:T;if(T){const O=Xs(T);return a?n===Zs?O:null:await gh(r,O.toString(),e.slice(D/8),n,!1)}else return null},mh=r=>{if(!r||!r.length)throw new Error("empty domain");if(r===".")return new Uint8Array([0]);r=r.toLowerCase();for(let n=0;n<r.length;n++)if(r.charCodeAt(n)<=32)throw new Error("bytes in range 0..32 are not allowed in domain names");for(let n=0;n<r.length;n++){const a=r.substring(n,n+1);for(let i=127;i<=159;i++)if(a===String.fromCharCode(i))throw new Error("bytes in range 127..159 are not allowed in domain names")}const t=r.split(".");t.forEach(n=>{if(!n.length)throw new Error("domain name cannot have an empty component")});let e=t.reverse().join("\0")+"\0";return e.length<126&&(e="\0"+e),new TextEncoder().encode(e)},d3=async(r,t,e,n,a)=>{const i=mh(e);return gh(r,t,i,n,a)};var Vo={DNS_CATEGORY_NEXT_RESOLVER:Zs,DNS_CATEGORY_SITE:lh,DNS_CATEGORY_WALLET:fh,DNS_CATEGORY_STORAGE:hh,categoryToBN:uh,domainToBytes:mh,createSmartContractAddressRecord:l3,createAdnlAddressRecord:h3,createNextResolverRecord:c3,parseSmartContractAddressRecord:dh,parseAdnlAddressRecord:ph,parseStorageBagIdRecord:Ko,parseSiteRecord:vh,parseNextResolverRecord:Xs,createStorageBagIdRecord:u3,dnsResolve:d3};const{Address:p3,bytesToHex:v3}=Ge,{DNS_CATEGORY_NEXT_RESOLVER:g3,DNS_CATEGORY_SITE:yh,DNS_CATEGORY_WALLET:wh,DNS_CATEGORY_STORAGE:m3,createSmartContractAddressRecord:y3,createAdnlAddressRecord:w3,createStorageBagIdRecord:b3,createNextResolverRecord:x3,parseSmartContractAddressRecord:E3,parseAdnlAddressRecord:A3,parseStorageBagIdRecord:C3,parseSiteRecord:B3,parseNextResolverRecord:M3,dnsResolve:bh}=Vo;let fr=class{constructor(t){this.provider=t}async getRootDnsAddress(){const e=(await this.provider.getConfigParam(4)).bits.array;if(e.length!==256/8)throw new Error("Invalid ConfigParam 4 length "+e.length);const n=v3(e);return new p3("-1:"+n)}async resolve(t,e,n){const a=await this.getRootDnsAddress();return bh(this.provider,a.toString(),t,e,n)}getWalletAddress(t){return this.resolve(t,wh)}getSiteAddress(t){return this.resolve(t,yh)}};fr.resolve=bh;fr.createSmartContractAddressRecord=y3;fr.createAdnlAddressRecord=w3;fr.createStorageBagIdRecord=b3;fr.createNextResolverRecord=x3;fr.parseNextResolverRecord=M3;fr.parseAdnlAddressRecord=A3;fr.parseStorageBagIdRecord=C3;fr.parseSiteRecord=B3;fr.parseSmartContractAddressRecord=E3;fr.DNS_CATEGORY_NEXT_RESOLVER=g3;fr.DNS_CATEGORY_WALLET=wh;fr.DNS_CATEGORY_SITE=yh;fr.DNS_CATEGORY_STORAGE=m3;ah.default=fr;const{Contract:_3}=ur,{Cell:c0}=je,{parseAddress:F3}=yr,{dnsResolve:S3}=Vo,{parseOffchainUriCell:D3}=yr;let I3=class extends _3{constructor(t,e){if(e.wc=0,e.code=e.code,super(t,e),!e.collectionContent&&!e.address)throw new Error("required collectionContent cell");this.methods.getCollectionData=this.getCollectionData.bind(this),this.methods.getNftItemAddressByIndex=this.getNftItemAddressByIndex.bind(this),this.methods.getNftItemContent=this.getNftItemContent.bind(this),this.methods.resolve=this.resolve.bind(this)}createDataCell(){const t=new c0;return t.refs[0]=this.options.collectionContent,t.refs[1]=c0.oneFromBoc(this.options.dnsItemCodeHex),t}async getCollectionData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_collection_data"),n=e[0].toNumber(),a=e[1];return{collectionContentUri:D3(a),collectionContent:a,ownerAddress:null,nextItemIndex:n}}async getNftItemContent(t){return await t.getData()}async getNftItemAddressByIndex(t){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_nft_address_by_index",[["num",t.toString()]]);return F3(n)}async resolve(t,e,n){const a=await this.getAddress();return S3(this.provider,a.toString(),t,e,n)}};var T3={DnsCollection:I3};const{Contract:R3}=ur,{Cell:bi}=je,{Address:h6,BN:N3}=Ge,{parseAddress:Ms}=yr,{dnsResolve:U3,categoryToBN:$3}=Vo;let xh=class extends R3{constructor(t,e){e.wc=0,e.code=e.code,super(t,e),this.methods.getData=this.getData.bind(this),this.methods.getDomain=this.getDomain.bind(this),this.methods.getAuctionInfo=this.getAuctionInfo.bind(this),this.methods.getLastFillUpTime=this.getLastFillUpTime.bind(this),this.methods.resolve=this.resolve.bind(this)}createDataCell(){const t=new bi;return t.bits.writeUint(this.options.index,256),t.bits.writeAddress(this.options.collectionAddress),t}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_nft_data"),n=e[0].toNumber()===-1,a=e[1],i=Ms(e[2]),d=n?Ms(e[3]):null,b=e[4];return{isInitialized:n,index:a,collectionAddress:i,ownerAddress:d,contentCell:b}}async createTransferBody(t){const e=new bi;return e.bits.writeUint(1607220500,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newOwnerAddress),e.bits.writeAddress(t.responseAddress),e.bits.writeBit(!1),e.bits.writeCoins(t.forwardAmount||new N3(0)),e.bits.writeBit(!1),t.forwardPayload&&e.bits.writeBytes(t.forwardPayload),e}createGetStaticDataBody(t){const e=new bi;return e.bits.writeUint(801842850,32),e.bits.writeUint(t.queryId||0,64),e}async getDomain(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_domain");return new TextDecoder().decode(e.bits.array.buffer)}async getAuctionInfo(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_auction_info"),n=Ms(e[0]),a=e[1],i=e[2].toNumber();return{maxBidAddress:n,maxBidAmount:a,auctionEndTime:i}}async getLastFillUpTime(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_last_fill_up_time")).toNumber()}async resolve(t,e,n){const a=await this.getAddress();return U3(this.provider,a.toString(),t,e,n)}};xh.createChangeContentEntryBody=async r=>{const t=new bi;return t.bits.writeUint(1320284409,32),t.bits.writeUint(r.queryId||0,64),t.bits.writeUint(await $3(r.category),256),r.value&&(t.refs[0]=r.value),t};var P3={DnsItem:xh};const O3=ah.default,{DnsCollection:L3}=T3,{DnsItem:k3}=P3;oh.default={Dns:O3,DnsCollection:L3,DnsItem:k3};const Fi=Ge,Eh=Fi.Address,Ah=je,j3=Cd,Ch=of.default,{Contract:Bh}=ur,Mh=lf.default,_h=Mf.default,q3=_f.default,d0=Uf.default,{BlockSubscription:Fh,InMemoryBlockStorage:Sh}=Gp,{SubscriptionContract:W3}=zp,{Payments:Dh,PaymentChannel:H3}=L1,K3=Pw.default,V3=qw.default,G3=r3.default,{Dns:Ih,DnsCollection:Y3,DnsItem:z3}=oh.default,Th="0.0.60";class er{constructor(t){this.version=Th,this.utils=Fi,this.Address=Eh,this.boc=Ah,this.Contract=Bh,this.BlockSubscription=Fh,this.InMemoryBlockStorage=Sh,this.provider=t||new Ch,this.dns=new Ih(this.provider),this.wallet=new Mh(this.provider),this.payments=new Dh(this.provider),this.lockupWallet=_h}async getTransactions(t,e=20,n=void 0,a=void 0,i=void 0){return this.provider.getTransactions(t.toString(),e,n,a,i)}async getBalance(t){return this.provider.getBalance(t.toString())}async sendBoc(t){return this.provider.sendBoc(Fi.bytesToBase64(t))}async call(t,e,n=[]){return this.provider.call(t.toString(),e,n)}}er.version=Th;er.utils=Fi;er.Address=Eh;er.boc=Ah;er.HttpProvider=Ch;er.Contract=Bh;er.Wallets=Mh;er.LockupWallets=_h;er.SubscriptionContract=W3;er.BlockSubscription=Fh;er.InMemoryBlockStorage=Sh;er.ledger={TransportWebUSB:K3,TransportWebHID:V3,BluetoothTransport:G3,AppTon:j3};er.token={nft:q3,ft:d0,jetton:d0};er.dns=Ih;er.dns.DnsCollection=Y3;er.dns.DnsItem=z3;er.payments=Dh;er.payments.PaymentChannel=H3;var Z3=er;const $e=jn(Z3),X3=`
query {
  transactions(
    address_friendly: "Ef8gIwUCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASB6"
    page_size: 50
    page: 0
  ) {
    in_msg_src_addr_workchain_id
    in_msg_src_addr_address_hex
    in_msg_value_grams
    gen_utime
  }
}
`,Qs="te6ccgECCAEAAroAART/APSkE/S88sgLAQPk0wHQ0wMBcbCPZiHHAJJfA49dAdMfAYIQJOXxyrqPTAH6QDAB0x/UMO1E0PQE0z8BIlFCQxRHZts8FL7y4IxujoSIcPsA3oIQF9eEAHCAEMjLBVADzxYB+gLLiotkJvdW50eYzxbJcPsA7VSSXwPi4uMNAgcDAfbtRCT4I6EBggGGoPlBMFiAEvgz+Cj6RDABgCD0DG+hMIAo1yHTPwOoAtM/MFADqKABqKsPcFM1vI4SMDWCCC3GwFFCoRSoIRA1UEQDkTTiAqof+CWCEDuAAAGpCLFUQReAQPQ38uCqVBBDAsj0ABLLPwHPFskC+COhUiAEAexfA/gA7UTQ9ATTPwEC+CMhgED0h2+lnFMTArOSW3CTqx++4o4TAXD7AFiAQPRbMCCAQPSHb6UQNOhfAyBujiIwMXBwgBDIywVQA88WAfoCy4qLZCb3VudHmM8WyYEAoPsAjpICAsj0ABLLPwHPFsntVIhw+wDiBwGKAYIBhqD5QTBYgBL4M/go+kQwAYAg9AxvoTCAKNch0z8DqALTPzBQA6igAairD1ADoYIQBfXhAAGCEBfXhACgUAOgWKACBQHccAHQ0wABntMAAcAB8uBk+kAx+kAxjkcx0wIBc7Dy0G76QI0IZ/kBGCgQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDL6QFnHBfLQb/oA9AQBbvLgcPoAMfoAMeKAYNch0wAB4wDTADAwEqAGAJzTAAGOJdQB0NMAAZN11yHe0wABk3LXId7TAAGS1DHe0wABktQx3vQEMTCOIdMAAZN11yHe0wABk3LXId7TAAGS1DHe0wABktQx3vQEMeIAaGJ/kBGCgQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgJiWgAAAAAAAAAAAAAAAAAAA=",Q3="https://ratingers.pythonanywhere.com/ratelance/tonconnect-manifest.json";async function J3(r=!1){if(r)throw new Error("testnet not implemented");const t=await N0(),e=new $e.HttpProvider(t),a=(await(await fetch("https://dton.io/graphql/",{method:"POST",body:JSON.stringify({query:X3}),headers:{"Content-Type":"application/json"}})).json()).data.transactions,i=$e.boc.Cell.oneFromBoc($e.utils.base64ToBytes(Qs)),d=$e.utils.bytesToHex(await i.hash());let b=[],C=new Map;for(let D of a){const T=D.in_msg_src_addr_workchain_id+":"+D.in_msg_src_addr_address_hex,O=new $e.Address(T).toString(!0,!0,!0);if(C.has(T))continue;C.set(T,!0);const k=await e.getAddressInfo(O);if(k.state=="uninitialized"){console.log("Found deactivated timer",O);continue}else{if(k.code!=Qs){const it=$e.boc.Cell.oneFromBoc($e.utils.base64ToBytes(k.code));if($e.utils.bytesToHex(await it.hash())!=d){console.warn("Possible fraud attempt: contract with code != timer",O);continue}}let G=$e.boc.Cell.oneFromBoc($e.utils.base64ToBytes(k.data)),st=new $e.boc.Cell;st.bits.writeUint(0,7),st.writeCell(G);let ft=$e.utils.readNBytesUIntFromArray(8,st.bits.array.slice(1));b.push({address:O,time_limit:new Date(ft*1e3)})}}return b}function Rh(r,t){let e=BigInt(Math.ceil(Math.max(0,+r.amount.time_limit-+t.time_limit)/1e3));return{address:t.address,stateInit:void 0,payload:r.payload,amount:""+(r.amount.base_amount+r.amount.add_per_second*e)}}async function Nh(r){let t=new $e.boc.Cell;t.bits.writeUint(16,6),t.bits.writeAddress(new $e.Address(r.destination)),t.bits.writeCoins($e.utils.toNano(r.value_ton));try{let a=$e.boc.Cell.oneFromBoc($e.utils.base64ToBytes(r.message));t.bits.writeUint(1,107),t.refs.push(a)}catch{t.bits.writeUint(0,139),t.bits.writeString(r.message)}let e=new $e.boc.Cell;e.bits.writeUint(619049418,32),e.bits.writeUint(Math.ceil(+new Date(r.time)/1e3),32),e.refs.push(t),e.print();let n=await e.toBoc(!1);return{amount:{base_amount:600n*1000000n+BigInt(+r.value_ton*1e9),add_per_second:3000000n,time_limit:new Date(r.time)},payload:$e.utils.bytesToBase64(n)}}async function tx(r,t){let e=await Nh(r),n=new $e.boc.Cell;n.bits.writeUint(0,1),n.bits.writeUint(Math.ceil(+new Date/1e3),64),n.bits.writeAddress(new $e.Address(t.bounty_address));let a=$e.boc.Cell.oneFromBoc($e.utils.base64ToBytes(Qs)),i=new $e.boc.Cell;i.bits.writeUint(6,5),i.refs.push(a),i.refs.push(n);let d="0:"+$e.utils.bytesToHex(await i.hash()),b=new $e.Address(d).toString(!0,!0,!0),C=Rh(e,{address:b,time_limit:new Date});return C.stateInit=$e.utils.bytesToBase64(await i.toBoc(!1)),C}var Uh={exports:{}};(function(r){(function(t,e){r.exports?r.exports=e():(t.nacl||(t.nacl={}),t.nacl.util=e())})(qr,function(){var t={};function e(n){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(n))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(n){if(typeof n!="string")throw new TypeError("expected string");var a,i=unescape(encodeURIComponent(n)),d=new Uint8Array(i.length);for(a=0;a<i.length;a++)d[a]=i.charCodeAt(a);return d},t.encodeUTF8=function(n){var a,i=[];for(a=0;a<n.length;a++)i.push(String.fromCharCode(n[a]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(t.encodeBase64=function(n){return Buffer.from(n).toString("base64")},t.decodeBase64=function(n){return e(n),new Uint8Array(Array.prototype.slice.call(Buffer.from(n,"base64"),0))}):(t.encodeBase64=function(n){return new Buffer(n).toString("base64")},t.decodeBase64=function(n){return e(n),new Uint8Array(Array.prototype.slice.call(new Buffer(n,"base64"),0))}):(t.encodeBase64=function(n){var a,i=[],d=n.length;for(a=0;a<d;a++)i.push(String.fromCharCode(n[a]));return btoa(i.join(""))},t.decodeBase64=function(n){e(n);var a,i=atob(n),d=new Uint8Array(i.length);for(a=0;a<i.length;a++)d[a]=i.charCodeAt(a);return d}),t})})(Uh);var ex=Uh.exports;const Ln=jn(ex);var Lr;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",r[r.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Lr||(Lr={}));var p0;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(p0||(p0={}));var hn;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(hn||(hn={}));var v0;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(v0||(v0={}));var g0;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(g0||(g0={}));var Si;(function(r){r.MAINNET="-239",r.TESTNET="-3"})(Si||(Si={}));function rx(r,t){const e=Ln.encodeBase64(r);return t?encodeURIComponent(e):e}function nx(r,t){return t&&(r=decodeURIComponent(r)),Ln.decodeBase64(r)}function ix(r,t=!1){let e;return r instanceof Uint8Array?e=r:(typeof r!="string"&&(r=JSON.stringify(r)),e=Ln.decodeUTF8(r)),rx(e,t)}function sx(r,t=!1){const e=nx(r,t);return{toString(){return Ln.encodeUTF8(e)},toObject(){try{return JSON.parse(Ln.encodeUTF8(e))}catch{return null}},toUint8Array(){return e}}}const $h={encode:ix,decode:sx};function ox(r,t){const e=new Uint8Array(r.length+t.length);return e.set(r),e.set(t,r.length),e}function ax(r,t){if(t>=r.length)throw new Error("Index is out of buffer");const e=r.slice(0,t),n=r.slice(t);return[e,n]}function _s(r){let t="";return r.forEach(e=>{t+=("0"+(e&255).toString(16)).slice(-2)}),t}function Di(r){if(r.length%2!==0)throw new Error(`Cannot convert ${r} to bytesArray`);const t=new Uint8Array(r.length/2);for(let e=0;e<r.length;e+=2)t[e/2]=parseInt(r.slice(e,e+2),16);return t}class Ph{constructor(t){this.nonceLength=24,this.keyPair=t?this.createKeypairFromString(t):this.createKeypair(),this.sessionId=_s(this.keyPair.publicKey)}createKeypair(){return Xn.box.keyPair()}createKeypairFromString(t){return{publicKey:Di(t.publicKey),secretKey:Di(t.secretKey)}}createNonce(){return Xn.randomBytes(this.nonceLength)}encrypt(t,e){const n=new TextEncoder().encode(t),a=this.createNonce(),i=Xn.box(n,a,e,this.keyPair.secretKey);return ox(a,i)}decrypt(t,e){const[n,a]=ax(t,this.nonceLength),i=Xn.box.open(a,n,e,this.keyPair.secretKey);if(!i)throw new Error(`Decryption error: 
 message: ${t.toString()} 
 sender pubkey: ${e.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);return new TextDecoder().decode(i)}stringifyKeypair(){return{publicKey:_s(this.keyPair.publicKey),secretKey:_s(this.keyPair.secretKey)}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function fx(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e}function ge(r,t,e,n){function a(i){return i instanceof e?i:new e(function(d){d(i)})}return new(e||(e=Promise))(function(i,d){function b(T){try{D(n.next(T))}catch(O){d(O)}}function C(T){try{D(n.throw(T))}catch(O){d(O)}}function D(T){T.done?i(T.value):a(T.value).then(b,C)}D((n=n.apply(r,t||[])).next())})}class ke extends Error{constructor(t,e){super(t,e),this.message=`${ke.prefix} ${this.constructor.name}${this.info?": "+this.info:""}${t?`
`+t:""}`,Object.setPrototypeOf(this,ke.prototype)}get info(){return""}}ke.prefix="[TON_CONNECT_SDK_ERROR]";class Go extends ke{get info(){return"Passed DappMetadata is in incorrect format."}constructor(...t){super(...t),Object.setPrototypeOf(this,Go.prototype)}}class Ji extends ke{get info(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...t){super(...t),Object.setPrototypeOf(this,Ji.prototype)}}class ts extends ke{get info(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...t){super(...t),Object.setPrototypeOf(this,ts.prototype)}}class Yo extends ke{get info(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}constructor(...t){super(...t),Object.setPrototypeOf(this,Yo.prototype)}}class Ii extends ke{get info(){return"Send transaction or other protocol methods called while wallet is not connected."}constructor(...t){super(...t),Object.setPrototypeOf(this,Ii.prototype)}}function lx(r){return"jsBridgeKey"in r}class es extends ke{get info(){return"User rejects the action in the wallet."}constructor(...t){super(...t),Object.setPrototypeOf(this,es.prototype)}}class rs extends ke{get info(){return"Request to the wallet contains errors."}constructor(...t){super(...t),Object.setPrototypeOf(this,rs.prototype)}}class ns extends ke{get info(){return"App tries to send rpc request to the injected wallet while not connected."}constructor(...t){super(...t),Object.setPrototypeOf(this,ns.prototype)}}class zo extends ke{get info(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}constructor(...t){super(...t),Object.setPrototypeOf(this,zo.prototype)}}class Zo extends ke{get info(){return"Storage was not specified in the `DappMetadata` and default `localStorage` was not detected in the environment."}constructor(...t){super(...t),Object.setPrototypeOf(this,Zo.prototype)}}class Xo extends ke{get info(){return"An error occurred while fetching the wallets list."}constructor(...t){super(...t),Object.setPrototypeOf(this,Xo.prototype)}}class Kr extends ke{constructor(...t){super(...t),Object.setPrototypeOf(this,Kr.prototype)}}const m0={[Lr.UNKNOWN_ERROR]:Kr,[Lr.USER_REJECTS_ERROR]:es,[Lr.BAD_REQUEST_ERROR]:rs,[Lr.UNKNOWN_APP_ERROR]:ns,[Lr.MANIFEST_NOT_FOUND_ERROR]:ts,[Lr.MANIFEST_CONTENT_ERROR]:Ji};class hx{parseError(t){let e=Kr;return t.code in m0&&(e=m0[t.code]||Kr),new e(t.message)}}const ux=new hx;class cx{isError(t){return"error"in t}}const y0={[hn.UNKNOWN_ERROR]:Kr,[hn.USER_REJECTS_ERROR]:es,[hn.BAD_REQUEST_ERROR]:rs,[hn.UNKNOWN_APP_ERROR]:ns};class dx extends cx{convertToRpcRequest(t){return{method:"sendTransaction",params:[JSON.stringify(t)]}}parseAndThrowError(t){let e=Kr;throw t.error.code in y0&&(e=y0[t.error.code]||Kr),new e(t.error.message)}convertFromRpcResponse(t){return{boc:t.result}}}const pi=new dx;class px{constructor(t,e){this.storage=t,this.storeKey="ton-connect-storage_http-bridge-gateway::"+e}storeLastEventId(t){return ge(this,void 0,void 0,function*(){return this.storage.setItem(this.storeKey,t)})}removeLastEventId(){return ge(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return ge(this,void 0,void 0,function*(){const t=yield this.storage.getItem(this.storeKey);return t||null})}}function vx(r){return r.slice(-1)==="/"?r.slice(0,-1):r}function w0(r,t){return vx(r)+"/"+t}class Fs{constructor(t,e,n,a,i){this.bridgeUrl=e,this.sessionId=n,this.listener=a,this.errorsListener=i,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.isClosed=!1,this.bridgeGatewayStorage=new px(t,e)}registerSession(){return ge(this,void 0,void 0,function*(){const t=new URL(w0(this.bridgeUrl,this.ssePath));t.searchParams.append("client_id",this.sessionId);const e=yield this.bridgeGatewayStorage.getLastEventId();if(!this.isClosed)return e&&t.searchParams.append("last_event_id",e),this.eventSource=new EventSource(t.toString()),new Promise((n,a)=>{this.eventSource.onerror=a,this.eventSource.onopen=()=>{this.eventSource.onerror=this.errorsHandler.bind(this),this.eventSource.onmessage=this.messagesHandler.bind(this),n()}})})}send(t,e,n,a){return ge(this,void 0,void 0,function*(){const i=new URL(w0(this.bridgeUrl,this.postPath));i.searchParams.append("client_id",this.sessionId),i.searchParams.append("to",e),i.searchParams.append("ttl",(a||this.defaultTtl).toString()),i.searchParams.append("topic",n),yield fetch(i,{method:"post",body:$h.encode(t)})})}pause(){var t;(t=this.eventSource)===null||t===void 0||t.close()}unPause(){return this.registerSession()}close(){var t;this.isClosed=!0,(t=this.eventSource)===null||t===void 0||t.close()}setListener(t){this.listener=t}setErrorsListener(t){this.errorsListener=t}errorsHandler(t){var e,n;if(!this.isClosed){if(((e=this.eventSource)===null||e===void 0?void 0:e.readyState)===EventSource.CLOSED){this.eventSource.close(),this.registerSession();return}if(((n=this.eventSource)===null||n===void 0?void 0:n.readyState)===EventSource.CONNECTING){console.debug("[TON_CONNET_SDK_ERROR]: Bridge error",JSON.stringify(t));return}this.errorsListener(t)}}messagesHandler(t){return ge(this,void 0,void 0,function*(){if(t.data!==this.heartbeatMessage&&(yield this.bridgeGatewayStorage.storeLastEventId(t.lastEventId),!this.isClosed)){let e;try{e=JSON.parse(t.data)}catch(n){throw new ke(`Bridge message parse failed, message ${n.data}`)}this.listener(e)}})}}class kn{constructor(t){this.storage=t,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(t){return ge(this,void 0,void 0,function*(){if(t.type==="injected")return this.storage.setItem(this.storeKey,JSON.stringify(t));const e={sessionKeyPair:t.session.sessionCrypto.stringifyKeypair(),walletPublicKey:t.session.walletPublicKey,bridgeUrl:t.session.bridgeUrl},n={type:"http",connectEvent:t.connectEvent,session:e,lastWalletEventId:t.lastWalletEventId,nextRpcRequestId:t.nextRpcRequestId};return this.storage.setItem(this.storeKey,JSON.stringify(n))})}removeConnection(){return ge(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return ge(this,void 0,void 0,function*(){const t=yield this.storage.getItem(this.storeKey);if(!t)return null;const e=JSON.parse(t);if(e.type==="injected")return e;const n=new Ph(e.session.sessionKeyPair);return{type:"http",connectEvent:e.connectEvent,lastWalletEventId:e.lastWalletEventId,nextRpcRequestId:e.nextRpcRequestId,session:{sessionCrypto:n,bridgeUrl:e.session.bridgeUrl,walletPublicKey:e.session.walletPublicKey}}})}getHttpConnection(){return ge(this,void 0,void 0,function*(){const t=yield this.getConnection();if(!t)throw new ke("Trying to read HTTP connection source while nothing is stored");if(t.type==="injected")throw new ke("Trying to read HTTP connection source while injected connection is stored");return t})}getInjectedConnection(){return ge(this,void 0,void 0,function*(){const t=yield this.getConnection();if(!t)throw new ke("Trying to read Injected bridge connection source while nothing is stored");if((t==null?void 0:t.type)==="http")throw new ke("Trying to read Injected bridge connection source while HTTP connection is stored");return t})}storedConnectionType(){return ge(this,void 0,void 0,function*(){const t=yield this.storage.getItem(this.storeKey);return t?JSON.parse(t).type:null})}storeLastWalletEventId(t){return ge(this,void 0,void 0,function*(){const e=yield this.getConnection();if(e&&e.type==="http")return e.lastWalletEventId=t,this.storeConnection(e)})}getLastWalletEventId(){return ge(this,void 0,void 0,function*(){const t=yield this.getConnection();if(t&&"lastWalletEventId"in t)return t.lastWalletEventId})}increaseNextRpcRequestId(){return ge(this,void 0,void 0,function*(){const t=yield this.getConnection();if(t){const e=t.nextRpcRequestId||0;return t.nextRpcRequestId=e+1,this.storeConnection(t)}})}getNextRpcRequestId(){return ge(this,void 0,void 0,function*(){const t=yield this.getConnection();return t&&t.nextRpcRequestId||0})}}const Oh=2;function pr(...r){try{console.debug("[TON_CONNECT_SDK]",...r)}catch{}}function xi(...r){try{console.error("[TON_CONNECT_SDK]",...r)}catch{}}function gx(...r){try{console.warn("[TON_CONNECT_SDK]",...r)}catch{}}class Ti{constructor(t,e){this.storage=t,this.walletConnectionSource=e,this.type="http",this.standardUniversalLink="tc://",this.pendingRequests=new Map,this.session=null,this.gateway=null,this.pendingGateways=[],this.listeners=[],this.connectionStorage=new kn(t)}static fromStorage(t){return ge(this,void 0,void 0,function*(){const n=yield new kn(t).getHttpConnection();return new Ti(t,{bridgeUrl:n.session.bridgeUrl})})}connect(t){this.closeGateways();const e=new Ph;let n="",a=this.standardUniversalLink;return Array.isArray(this.walletConnectionSource)?(this.pendingGateways=this.walletConnectionSource.map(i=>{const d=new Fs(this.storage,i.bridgeUrl,e.sessionId,()=>{},b=>{console.error(b)});return d.setListener(b=>this.pendingGatewaysListener(d,i.bridgeUrl,b)),d}),this.pendingGateways.forEach(i=>i.registerSession())):(n=this.walletConnectionSource.bridgeUrl,this.walletConnectionSource.universalLink&&(a=this.walletConnectionSource.universalLink),this.gateway=new Fs(this.storage,this.walletConnectionSource.bridgeUrl,e.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),this.gateway.registerSession()),this.session={sessionCrypto:e,bridgeUrl:n},this.generateUniversalLink(a,t)}restoreConnection(){return ge(this,void 0,void 0,function*(){if(Array.isArray(this.walletConnectionSource))throw new ke("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");this.closeGateways();const t=yield this.connectionStorage.getHttpConnection();t&&(this.session=t.session,this.gateway=new Fs(this.storage,this.walletConnectionSource.bridgeUrl,t.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),yield this.gateway.registerSession(),this.listeners.forEach(e=>e(t.connectEvent)))})}sendRequest(t,e){return new Promise((n,a)=>ge(this,void 0,void 0,function*(){if(!this.gateway||!this.session||!("walletPublicKey"in this.session))throw new ke("Trying to send bridge request without session");const i=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),pr("Send http-bridge request:",Object.assign(Object.assign({},t),{id:i}));const d=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{id:i})),Di(this.session.walletPublicKey));this.gateway.send(d,this.session.walletPublicKey,t.method).catch(a),this.pendingRequests.set(i.toString(),n),e==null||e()}))}closeConnection(){this.closeGateways(),this.listeners=[],this.session=null,this.gateway=null}disconnect(){return ge(this,void 0,void 0,function*(){return new Promise(t=>ge(this,void 0,void 0,function*(){let e=!1;const n=()=>{e=!0,this.removeBridgeAndSession().then(t)};try{yield this.sendRequest({method:"disconnect",params:[]},n)}catch(a){console.debug(a),e||this.removeBridgeAndSession().then(t)}}))})}listen(t){return this.listeners.push(t),()=>this.listeners=this.listeners.filter(e=>e!==t)}pause(){var t;(t=this.gateway)===null||t===void 0||t.pause(),this.pendingGateways.forEach(e=>e.pause())}unPause(){return ge(this,void 0,void 0,function*(){const t=this.pendingGateways.map(e=>e.unPause());this.gateway&&t.push(this.gateway.unPause()),yield Promise.all(t)})}pendingGatewaysListener(t,e,n){return ge(this,void 0,void 0,function*(){if(!this.pendingGateways.includes(t)){t.close();return}return this.closeGateways({except:t}),this.session.bridgeUrl=e,this.gateway=t,this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)),this.gateway.setListener(this.gatewayListener.bind(this)),this.gatewayListener(n)})}gatewayListener(t){return ge(this,void 0,void 0,function*(){const e=JSON.parse(this.session.sessionCrypto.decrypt($h.decode(t.message).toUint8Array(),Di(t.from)));if(pr("Wallet message received:",e),!("event"in e)){const a=e.id.toString(),i=this.pendingRequests.get(a);if(!i){pr(`Response id ${a} doesn't match any request's id`);return}i(e),this.pendingRequests.delete(a);return}if(e.id!==void 0){const a=yield this.connectionStorage.getLastWalletEventId();if(a!==void 0&&e.id<=a){xi(`Received event id (=${e.id}) must be greater than stored last wallet event id (=${a}) `);return}e.event!=="connect"&&(yield this.connectionStorage.storeLastWalletEventId(e.id))}const n=this.listeners;e.event==="connect"&&(yield this.updateSession(e,t.from)),e.event==="disconnect"&&(yield this.removeBridgeAndSession()),n.forEach(a=>a(e))})}gatewayErrorsListener(t){return ge(this,void 0,void 0,function*(){throw new ke(`Bridge error ${JSON.stringify(t)}`)})}updateSession(t,e){return ge(this,void 0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:e});const n=t.payload.items.find(i=>i.name==="ton_addr"),a=Object.assign(Object.assign({},t),{payload:Object.assign(Object.assign({},t.payload),{items:[n]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,lastWalletEventId:t.id,connectEvent:a,nextRpcRequestId:0})})}removeBridgeAndSession(){return ge(this,void 0,void 0,function*(){this.closeConnection(),yield this.connectionStorage.removeConnection()})}generateUniversalLink(t,e){const n=new URL(t);return n.searchParams.append("v",Oh.toString()),n.searchParams.append("id",this.session.sessionCrypto.sessionId),n.searchParams.append("r",JSON.stringify(e)),n.toString()}closeGateways(t){var e;(e=this.gateway)===null||e===void 0||e.close(),this.pendingGateways.filter(n=>n!==(t==null?void 0:t.except)).forEach(n=>n.close()),this.pendingGateways=[]}}function b0(r,t){return Lh(r,[t])}function Lh(r,t){return!r||typeof r!="object"?!1:t.every(e=>e in r)}function mx(r){try{return!b0(r,"tonconnect")||!b0(r.tonconnect,"walletInfo")?!1:Lh(r.tonconnect.walletInfo,["name","image","about_url"])}catch{return!1}}function Qo(){if(!(typeof window>"u"))return window}function yx(){if(!(typeof document>"u"))return document}function wx(){var r;const t=(r=Qo())===null||r===void 0?void 0:r.location.origin;return t?t+"/tonconnect-manifest.json":""}class hr{constructor(t,e){this.injectedWalletKey=e,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];const n=hr.window;if(!hr.isWindowContainsWallet(n,e))throw new zo;this.connectionStorage=new kn(t),this.injectedWallet=n[e].tonconnect}static fromStorage(t){return ge(this,void 0,void 0,function*(){const n=yield new kn(t).getInjectedConnection();return new hr(t,n.jsBridgeKey)})}static isWalletInjected(t){return hr.isWindowContainsWallet(this.window,t)}static isInsideWalletBrowser(t){return hr.isWindowContainsWallet(this.window,t)?this.window[t].tonconnect.isWalletBrowser:!1}static getCurrentlyInjectedWallets(){return this.window?Object.entries(this.window).filter(([e,n])=>mx(n)).map(([e,n])=>({name:n.tonconnect.walletInfo.name,aboutUrl:n.tonconnect.walletInfo.about_url,imageUrl:n.tonconnect.walletInfo.image,tondns:n.tonconnect.walletInfo.tondns,jsBridgeKey:e,injected:!0,embedded:n.tonconnect.isWalletBrowser})):[]}static isWindowContainsWallet(t,e){return!!t&&e in t&&typeof t[e]=="object"&&"tonconnect"in t[e]}connect(t){this._connect(Oh,t)}restoreConnection(){return ge(this,void 0,void 0,function*(){try{pr("Injected Provider restoring connection...");const t=yield this.injectedWallet.restoreConnection();pr("Injected Provider restoring connection response",t),t.event==="connect"?(this.makeSubscriptions(),this.listeners.forEach(e=>e(t))):yield this.connectionStorage.removeConnection()}catch(t){yield this.connectionStorage.removeConnection(),console.error(t)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(){return ge(this,void 0,void 0,function*(){return new Promise(t=>{const e=()=>{this.closeAllListeners(),this.connectionStorage.removeConnection().then(t)};try{this.injectedWallet.disconnect(),e()}catch(n){pr(n),this.sendRequest({method:"disconnect",params:[]},e)}})})}closeAllListeners(){var t;this.listenSubscriptions=!1,this.listeners=[],(t=this.unsubscribeCallback)===null||t===void 0||t.call(this)}listen(t){return this.listeners.push(t),()=>this.listeners=this.listeners.filter(e=>e!==t)}sendRequest(t,e){return ge(this,void 0,void 0,function*(){const n=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),pr("Send injected-bridge request:",Object.assign(Object.assign({},t),{id:n}));const a=this.injectedWallet.send(Object.assign(Object.assign({},t),{id:n}));return a.then(i=>pr("Wallet message received:",i)),e==null||e(),a})}_connect(t,e){return ge(this,void 0,void 0,function*(){try{pr(`Injected Provider connect request: protocolVersion: ${t}, message:`,e);const n=yield this.injectedWallet.connect(t,e);pr("Injected Provider connect response:",n),n.event==="connect"&&(yield this.updateSession(),this.makeSubscriptions()),this.listeners.forEach(a=>a(n))}catch(n){pr(n);const a={event:"connect_error",payload:{code:0,message:n==null?void 0:n.toString()}};this.listeners.forEach(i=>i(a))}})}makeSubscriptions(){this.listenSubscriptions=!0,this.unsubscribeCallback=this.injectedWallet.listen(t=>{pr("Wallet message received:",t),this.listenSubscriptions&&this.listeners.forEach(e=>e(t)),t.event==="disconnect"&&this.disconnect()})}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey,nextRpcRequestId:0})}}hr.window=Qo();class bx{constructor(){const t=Qo();if(!(t!=null&&t.localStorage))throw new Zo;this.window=t}getItem(t){return ge(this,void 0,void 0,function*(){return Promise.resolve(this.window.localStorage.getItem(t))})}removeItem(t){return ge(this,void 0,void 0,function*(){return this.window.localStorage.removeItem(t),Promise.resolve()})}setItem(t,e){return this.window.localStorage.setItem(t,e),Promise.resolve()}}function xx(r){return Ax(r)&&r.injected}function Ex(r){return xx(r)&&r.embedded}function Ax(r){return"jsBridgeKey"in r}const Cx=[{name:"Tonkeeper",image:"https://tonkeeper.com/assets/tonconnect-icon.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com",universal_url:"https://app.tonkeeper.com/ton-connect",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"},{type:"js",key:"tonkeeper"}]},{name:"OpenMask",image:"https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",about_url:"https://www.openmask.app/",bridge:[{type:"js",key:"openmask"}]},{name:"MyTonWallet",image:"https://mytonwallet.io/icon-256.png",about_url:"https://mytonwallet.io",bridge:[{type:"js",key:"mytonwallet"}]}];class Js{constructor(t){this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null,this.walletsListSource="https://raw.githubusercontent.com/ton-blockchain/wallets-list/main/wallets.json",t!=null&&t.walletsListSource&&(this.walletsListSource=t.walletsListSource),t!=null&&t.cacheTTLMs&&(this.cacheTTLMs=t.cacheTTLMs)}getWallets(){return ge(this,void 0,void 0,function*(){return this.cacheTTLMs&&this.walletsListCacheCreationTimestamp&&Date.now()>this.walletsListCacheCreationTimestamp+this.cacheTTLMs&&(this.walletsListCache=null),this.walletsListCache||(this.walletsListCache=this.fetchWalletsList(),this.walletsListCache.then(()=>{this.walletsListCacheCreationTimestamp=Date.now()}).catch(()=>{this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null})),this.walletsListCache})}getEmbeddedWallet(){return ge(this,void 0,void 0,function*(){const e=(yield this.getWallets()).filter(Ex);return e.length!==1?null:e[0]})}fetchWalletsList(){return ge(this,void 0,void 0,function*(){let t=[];try{if(t=yield(yield fetch(this.walletsListSource)).json(),!Array.isArray(t))throw new Xo("Wrong wallets list format, wallets list must be an array.");const a=t.filter(i=>!this.isCorrectWalletConfigDTO(i));a.length&&(xi(`Wallet(s) ${a.map(i=>i.name).join(", ")} config format is wrong. They were removed from the wallets list.`),t=t.filter(i=>this.isCorrectWalletConfigDTO(i)))}catch(n){xi(n),t=Cx}let e=[];try{e=hr.getCurrentlyInjectedWallets()}catch(n){xi(n)}return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(t),e)})}walletConfigDTOListToWalletConfigList(t){return t.map(e=>{const n={name:e.name,imageUrl:e.image,aboutUrl:e.about_url,tondns:e.tondns};return e.bridge.forEach(a=>{if(a.type==="sse"&&(n.bridgeUrl=a.url,n.universalLink=e.universal_url,n.deepLink=e.deepLink),a.type==="js"){const i=a.key;n.jsBridgeKey=i,n.injected=hr.isWalletInjected(i),n.embedded=hr.isInsideWalletBrowser(i)}}),n})}mergeWalletsLists(t,e){return[...new Set(t.concat(e).map(a=>a.name)).values()].map(a=>{const i=t.find(b=>b.name===a),d=e.find(b=>b.name===a);return Object.assign(Object.assign({},i&&Object.assign({},i)),d&&Object.assign({},d))})}isCorrectWalletConfigDTO(t){if(!t||typeof t!="object")return!1;const e="name"in t,n="image"in t,a="about_url"in t;if(!e||!n||!a||!("bridge"in t)||!Array.isArray(t.bridge)||!t.bridge.length)return!1;const i=t.bridge;if(i.some(C=>!C||typeof C!="object"||!("type"in C)))return!1;const d=i.find(C=>C.type==="sse");if(d&&(!("url"in d)||!d.url||!t.universal_url))return!1;const b=i.find(C=>C.type==="js");return!(b&&(!("key"in b)||!b.key))}}class Ri extends ke{get info(){return"Wallet doesn't support requested feature method."}constructor(...t){super(...t),Object.setPrototypeOf(this,Ri.prototype)}}function Bx(r,t){const e=r.includes("SendTransaction"),n=r.find(a=>a&&typeof a=="object"&&a.name==="SendTransaction");if(!e&&!n)throw new Ri("Wallet doesn't support SendTransaction feature.");if(n&&n.maxMessages!==void 0){if(n.maxMessages<t.requiredMessagesNumber)throw new Ri(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${n.maxMessages}, but ${t.requiredMessagesNumber} is required.`);return}gx("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}class is{constructor(t){if(this.walletsList=new Js,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.dappSettings={manifestUrl:(t==null?void 0:t.manifestUrl)||wx(),storage:(t==null?void 0:t.storage)||new bx},this.walletsList=new Js({walletsListSource:t==null?void 0:t.walletsListSource,cacheTTLMs:t==null?void 0:t.walletsListCacheTTLMs}),!this.dappSettings.manifestUrl)throw new Go("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new kn(this.dappSettings.storage),t!=null&&t.disableAutoPauseConnection||this.addWindowFocusAndBlurSubscriptions()}static getWallets(){return this.walletsList.getWallets()}get connected(){return this._wallet!==null}get account(){var t;return((t=this._wallet)===null||t===void 0?void 0:t.account)||null}get wallet(){return this._wallet}set wallet(t){this._wallet=t,this.statusChangeSubscriptions.forEach(e=>e(this._wallet))}getWallets(){return this.walletsList.getWallets()}onStatusChange(t,e){return this.statusChangeSubscriptions.push(t),e&&this.statusChangeErrorSubscriptions.push(e),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(n=>n!==t),e&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(n=>n!==e))}}connect(t,e){var n;if(this.connected)throw new Yo;return(n=this.provider)===null||n===void 0||n.closeConnection(),this.provider=this.createProvider(t),this.provider.connect(this.createConnectRequest(e))}restoreConnection(){return ge(this,void 0,void 0,function*(){const[t,e]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);try{switch(t){case"http":this.provider=yield Ti.fromStorage(this.dappSettings.storage);break;case"injected":this.provider=yield hr.fromStorage(this.dappSettings.storage);break;default:if(e)this.provider=yield this.createProvider(e);else return}}catch{yield this.bridgeConnectionStorage.removeConnection(),this.provider=null;return}return this.provider.listen(this.walletEventsListener.bind(this)),this.provider.restoreConnection()})}sendTransaction(t){return ge(this,void 0,void 0,function*(){this.checkConnection(),Bx(this.wallet.device.features,{requiredMessagesNumber:t.messages.length});const{validUntil:e}=t,n=fx(t,["validUntil"]),a=t.from||this.account.address,i=t.network||this.account.chain,d=yield this.provider.sendRequest(pi.convertToRpcRequest(Object.assign(Object.assign({},n),{valid_until:e,from:a,network:i})));return pi.isError(d)?pi.parseAndThrowError(d):pi.convertFromRpcResponse(d)})}disconnect(){return ge(this,void 0,void 0,function*(){if(!this.connected)throw new Ii;yield this.provider.disconnect(),this.onWalletDisconnected()})}pauseConnection(){var t;((t=this.provider)===null||t===void 0?void 0:t.type)==="http"&&this.provider.pause()}unPauseConnection(){var t;return((t=this.provider)===null||t===void 0?void 0:t.type)!=="http"?Promise.resolve():this.provider.unPause()}addWindowFocusAndBlurSubscriptions(){const t=yx();if(t)try{t.addEventListener("visibilitychange",()=>{t.hidden?this.pauseConnection():this.unPauseConnection()})}catch(e){console.error("Cannot subscribe to the document.visibilitychange: ",e)}}createProvider(t){let e;return!Array.isArray(t)&&lx(t)?e=new hr(this.dappSettings.storage,t.jsBridgeKey):e=new Ti(this.dappSettings.storage,t),e.listen(this.walletEventsListener.bind(this)),e}walletEventsListener(t){switch(t.event){case"connect":this.onWalletConnected(t.payload);break;case"connect_error":this.onWalletConnectError(t.payload);break;case"disconnect":this.onWalletDisconnected()}}onWalletConnected(t){const e=t.items.find(i=>i.name==="ton_addr"),n=t.items.find(i=>i.name==="ton_proof");if(!e)throw new ke("ton_addr connection item was not found");const a={device:t.device,provider:this.provider.type,account:{address:e.address,chain:e.network,walletStateInit:e.walletStateInit,publicKey:e.publicKey}};n&&(a.connectItems={tonProof:n}),this.wallet=a}onWalletConnectError(t){const e=ux.parseError(t);if(this.statusChangeErrorSubscriptions.forEach(n=>n(e)),console.debug(e),e instanceof ts||e instanceof Ji)throw console.error(e),e}onWalletDisconnected(){this.wallet=null}checkConnection(){if(!this.connected)throw new Ii}createConnectRequest(t){const e=[{name:"ton_addr"}];return t!=null&&t.tonProof&&e.push({name:"ton_proof",payload:t.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:e}}}is.walletsList=new Js;is.isWalletInjected=r=>hr.isWalletInjected(r);is.isInsideWalletBrowser=r=>hr.isInsideWalletBrowser(r);for(let r=0;r<=255;r++){let t=r.toString(16);t.length<2&&(t="0"+t)}let Qr=null;function kh(){return Qr==null&&(Qr=new is({manifestUrl:Q3})),Qr}async function jh(){let r=kh();return await r.restoreConnection(),r.connected}async function Mx(){let r=kh();if(r.connected)return;let e=(await r.getWallets())[0];console.log(e),console.log(r.connect({bridgeUrl:e.bridgeUrl,universalLink:e.universalLink}))}function _x(r){return{c:Pe,l:Pe,m:Pe,p:Pe,d:Pe}}function Fx(r){let t;function e(i,d){return i[4]?Dx:Sx}let a=e(r)(r);return{c(){a.c(),t=dn()},l(i){a.l(i),t=dn()},m(i,d){a.m(i,d),Qe(i,t,d)},p(i,d){a.p(i,d)},d(i){a.d(i),i&&Ot(t)}}}function Sx(r){let t,e,n,a,i;return{c(){t=oe("button"),e=oe("span"),n=Oe("Connect wallet"),this.h()},l(d){t=ae(d,"BUTTON",{class:!0});var b=me(t);e=ae(b,"SPAN",{class:!0});var C=me(e);n=Le(C,"Connect wallet"),C.forEach(Ot),b.forEach(Ot),this.h()},h(){Lt(e,"class","svelte-1yoiiv0"),Lt(t,"class","svelte-1yoiiv0")},m(d,b){Qe(d,t,b),gt(t,e),gt(e,n),a||(i=_r(t,"click",Mx),a=!0)},p:Pe,d(d){d&&Ot(t),a=!1,i()}}}function Dx(r){let t,e,n,a,i;return{c(){t=oe("button"),e=oe("span"),n=Oe("Disconnect wallet"),this.h()},l(d){t=ae(d,"BUTTON",{class:!0});var b=me(t);e=ae(b,"SPAN",{class:!0});var C=me(e);n=Le(C,"Disconnect wallet"),C.forEach(Ot),b.forEach(Ot),this.h()},h(){Lt(e,"class","svelte-1yoiiv0"),Lt(t,"class","svelte-1yoiiv0")},m(d,b){Qe(d,t,b),gt(t,e),gt(e,n),a||(i=_r(t,"click",r[3]),a=!0)},p:Pe,d(d){d&&Ot(t),a=!1,i()}}}function Ix(r){let t,e,n;return{c(){t=oe("button"),e=oe("span"),n=Oe("Checking connection"),this.h()},l(a){t=ae(a,"BUTTON",{class:!0});var i=me(t);e=ae(i,"SPAN",{class:!0});var d=me(e);n=Le(d,"Checking connection"),d.forEach(Ot),i.forEach(Ot),this.h()},h(){Lt(e,"class","svelte-1yoiiv0"),Lt(t,"class","greyout svelte-1yoiiv0"),t.disabled=!0},m(a,i){Qe(a,t,i),gt(t,e),gt(e,n)},p:Pe,d(a){a&&Ot(t)}}}function Tx(r){let t,e,n,a,i,d,b,C,D,T,O,k,G,st=r[0]?"testnet":"mainnet",ft,it,lt,wt,tt,K,Q,mt,Ct,ct,Kt,y,o,l,s={ctx:r,current:null,token:null,hasCatch:!1,pending:Ix,then:Fx,catch:_x,value:4};return A0(r[1],s),{c(){t=oe("header"),e=oe("div"),n=oe("img"),i=oe("span"),d=Oe("TON Timer"),b=Ke(),C=oe("button"),D=oe("img"),O=Ke(),k=oe("span"),G=Oe("Now: "),ft=Oe(st),it=Ke(),lt=oe("div"),wt=Ke(),tt=oe("span"),K=oe("a"),Q=Oe("TON Foundation site"),mt=Ke(),Ct=oe("span"),ct=oe("a"),Kt=Oe("Source code"),y=Ke(),s.block.c(),this.h()},l(h){t=ae(h,"HEADER",{class:!0});var u=me(t);e=ae(u,"DIV",{class:!0});var v=me(e);n=ae(v,"IMG",{src:!0,class:!0,alt:!0}),i=ae(v,"SPAN",{class:!0});var w=me(i);d=Le(w,"TON Timer"),w.forEach(Ot),v.forEach(Ot),b=Ve(u),C=ae(u,"BUTTON",{class:!0});var p=me(C);D=ae(p,"IMG",{class:!0,src:!0,alt:!0}),O=Ve(p),k=ae(p,"SPAN",{class:!0});var f=me(k);G=Le(f,"Now: "),ft=Le(f,st),f.forEach(Ot),p.forEach(Ot),it=Ve(u),lt=ae(u,"DIV",{class:!0}),me(lt).forEach(Ot),wt=Ve(u),tt=ae(u,"SPAN",{class:!0});var c=me(tt);K=ae(c,"A",{href:!0});var m=me(K);Q=Le(m,"TON Foundation site"),m.forEach(Ot),c.forEach(Ot),mt=Ve(u),Ct=ae(u,"SPAN",{class:!0});var B=me(Ct);ct=ae(B,"A",{href:!0});var P=me(ct);Kt=Le(P,"Source code"),P.forEach(Ot),B.forEach(Ot),y=Ve(u),s.block.l(u),u.forEach(Ot),this.h()},h(){Jo(n.src,a="/logo.png")||Lt(n,"src",a),Lt(n,"class","icon svelte-1yoiiv0"),Lt(n,"alt","TON Timer logo"),Lt(i,"class","svelte-1yoiiv0"),Lt(e,"class","logo svelte-1yoiiv0"),Lt(D,"class","icon svelte-1yoiiv0"),Jo(D.src,T="https://ton.org/download/ton_symbol.svg")||Lt(D,"src",T),Lt(D,"alt","TON logo"),ta(D,"flip",r[0]),Lt(k,"class","svelte-1yoiiv0"),Lt(C,"class","greyout svelte-1yoiiv0"),C.disabled=!0,Lt(lt,"class","fill-space svelte-1yoiiv0"),Lt(K,"href","https://ton.org/"),Lt(tt,"class","svelte-1yoiiv0"),Lt(ct,"href","https://github.com/ProgramCrafter/ton-stable-timer/"),Lt(Ct,"class","svelte-1yoiiv0"),Lt(t,"class","svelte-1yoiiv0")},m(h,u){Qe(h,t,u),gt(t,e),gt(e,n),gt(e,i),gt(i,d),gt(t,b),gt(t,C),gt(C,D),gt(C,O),gt(C,k),gt(k,G),gt(k,ft),gt(t,it),gt(t,lt),gt(t,wt),gt(t,tt),gt(tt,K),gt(K,Q),gt(t,mt),gt(t,Ct),gt(Ct,ct),gt(ct,Kt),gt(t,y),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null,o||(l=_r(C,"click",r[2]),o=!0)},p(h,[u]){r=h,u&1&&ta(D,"flip",r[0]),u&1&&st!==(st=r[0]?"testnet":"mainnet")&&Un(ft,st),C0(s,r,u)},i:Pe,o:Pe,d(h){h&&Ot(t),s.block.d(),s.token=null,s=null,o=!1,l()}}}function Rx(r,t,e){let{is_testnet:n=!0}=t,a=jh();const i=()=>{e(0,n=!n)},d=()=>{Qr==null||Qr.disconnect()};return r.$$set=b=>{"is_testnet"in b&&e(0,n=b.is_testnet)},[n,a,i,d]}class Nx extends mn{constructor(t){super(),yn(this,t,Rx,Tx,wn,{is_testnet:0})}}function Ux(r){let t;return{c(){t=oe("div"),this.h()},l(e){t=ae(e,"DIV",{style:!0,class:!0}),me(t).forEach(Ot),this.h()},h(){Zn(t,"--margin",r[0]+"px"),Zn(t,"--color",r[1]),Lt(t,"class","svelte-6a3pxo")},m(e,n){Qe(e,t,n)},p(e,[n]){n&1&&Zn(t,"--margin",e[0]+"px"),n&2&&Zn(t,"--color",e[1])},i:Pe,o:Pe,d(e){e&&Ot(t)}}}function $x(r,t,e){let{margin:n=4}=t,{color:a="grey"}=t;return r.$$set=i=>{"margin"in i&&e(0,n=i.margin),"color"in i&&e(1,a=i.color)},[n,a]}class Ss extends mn{constructor(t){super(),yn(this,t,$x,Ux,wn,{margin:0,color:1})}}function Px(r){let t,e,n,a,i,d,b,C,D,T,O,k,G,st,ft,it,lt,wt,tt,K,Q,mt,Ct,ct,Kt,y,o,l;return{c(){t=oe("form"),e=oe("p"),n=Oe("Schedule message"),a=Ke(),i=oe("div"),d=oe("span"),b=Oe("Destination"),C=oe("input"),D=Ke(),T=oe("span"),O=Oe("UTC datetime"),k=oe("input"),G=Ke(),st=oe("div"),ft=oe("span"),it=Oe("Bounty* addr"),lt=oe("input"),wt=Ke(),tt=oe("span"),K=Oe("Value (TON)"),Q=oe("input"),mt=Ke(),Ct=oe("div"),ct=oe("span"),Kt=Oe("Message"),y=oe("input"),this.h()},l(s){t=ae(s,"FORM",{class:!0});var h=me(t);e=ae(h,"P",{class:!0});var u=me(e);n=Le(u,"Schedule message"),u.forEach(Ot),a=Ve(h),i=ae(h,"DIV",{class:!0});var v=me(i);d=ae(v,"SPAN",{class:!0});var w=me(d);b=Le(w,"Destination"),w.forEach(Ot),C=ae(v,"INPUT",{class:!0,type:!0,placeholder:!0}),D=Ve(v),T=ae(v,"SPAN",{class:!0});var p=me(T);O=Le(p,"UTC datetime"),p.forEach(Ot),k=ae(v,"INPUT",{type:!0,class:!0}),G=Ve(v),v.forEach(Ot),st=ae(h,"DIV",{class:!0});var f=me(st);ft=ae(f,"SPAN",{class:!0});var c=me(ft);it=Le(c,"Bounty* addr"),c.forEach(Ot),lt=ae(f,"INPUT",{class:!0,type:!0,placeholder:!0}),wt=Ve(f),tt=ae(f,"SPAN",{class:!0});var m=me(tt);K=Le(m,"Value (TON)"),m.forEach(Ot),Q=ae(f,"INPUT",{type:!0,placeholder:!0,min:!0,step:!0,class:!0}),f.forEach(Ot),mt=Ve(h),Ct=ae(h,"DIV",{class:!0});var B=me(Ct);ct=ae(B,"SPAN",{class:!0});var P=me(ct);Kt=Le(P,"Message"),P.forEach(Ot),y=ae(B,"INPUT",{type:!0,placeholder:!0,class:!0}),B.forEach(Ot),h.forEach(Ot),this.h()},h(){Lt(e,"class","svelte-1aa3dcg"),Lt(d,"class","svelte-1aa3dcg"),Lt(C,"class","wide svelte-1aa3dcg"),Lt(C,"type","text"),Lt(C,"placeholder","www.ton"),Lt(T,"class","svelte-1aa3dcg"),Lt(k,"type","datetime-local"),Lt(k,"class","svelte-1aa3dcg"),Lt(i,"class","row svelte-1aa3dcg"),Lt(ft,"class","svelte-1aa3dcg"),Lt(lt,"class","wide svelte-1aa3dcg"),Lt(lt,"type","text"),Lt(lt,"placeholder","ratelance.ton"),Lt(tt,"class","svelte-1aa3dcg"),Lt(Q,"type","number"),Lt(Q,"placeholder","1.000000000"),Lt(Q,"min","0.000000001"),Lt(Q,"step","0.000000001"),Lt(Q,"class","svelte-1aa3dcg"),Lt(st,"class","row svelte-1aa3dcg"),Lt(ct,"class","svelte-1aa3dcg"),Lt(y,"type","text"),Lt(y,"placeholder","TON Timer is a great service"),Lt(y,"class","svelte-1aa3dcg"),Lt(Ct,"class","row svelte-1aa3dcg"),Lt(t,"class","svelte-1aa3dcg")},m(s,h){Qe(s,t,h),gt(t,e),gt(e,n),gt(t,a),gt(t,i),gt(i,d),gt(d,b),gt(i,C),Ar(C,r[0]),gt(i,D),gt(i,T),gt(T,O),gt(i,k),Ar(k,r[4]),gt(i,G),gt(t,st),gt(st,ft),gt(ft,it),gt(st,lt),Ar(lt,r[1]),gt(st,wt),gt(st,tt),gt(tt,K),gt(st,Q),Ar(Q,r[2]),gt(t,mt),gt(t,Ct),gt(Ct,ct),gt(ct,Kt),gt(Ct,y),Ar(y,r[3]),o||(l=[_r(C,"input",r[7]),_r(k,"input",r[8]),_r(lt,"input",r[9]),_r(Q,"input",r[10]),_r(y,"input",r[11])],o=!0)},p(s,[h]){h&1&&C.value!==s[0]&&Ar(C,s[0]),h&16&&Ar(k,s[4]),h&2&&lt.value!==s[1]&&Ar(lt,s[1]),h&4&&B0(Q.value)!==s[2]&&Ar(Q,s[2]),h&8&&y.value!==s[3]&&Ar(y,s[3])},i:Pe,o:Pe,d(s){s&&Ot(t),o=!1,Kh(l)}}}function Ox(r,t,e){let{send_parameters:n}=t,{deploy_parameters:a}=t,i="EQCD39VS5jcptHL8vMjEXrzGaRcCVYto7HUn4bpAOg8xqB2N",d="EQCyoez1VF4HbNNq5Rbqfr3zKuoAjKorhK-YZr7LIIiVrSD7",b="1.6",C="",D=new Date().toISOString().slice(0,-8);function T(){i=this.value,e(0,i)}function O(){D=this.value,e(4,D)}function k(){d=this.value,e(1,d)}function G(){b=B0(this.value),e(2,b)}function st(){C=this.value,e(3,C)}return r.$$set=ft=>{"send_parameters"in ft&&e(5,n=ft.send_parameters),"deploy_parameters"in ft&&e(6,a=ft.deploy_parameters)},r.$$.update=()=>{r.$$.dirty&29&&e(5,n={destination:i,time:D+"Z",value_ton:b.toString(),message:C}),r.$$.dirty&2&&e(6,a={bounty_address:d})},[i,d,b,C,D,n,a,T,O,k,G,st]}class Lx extends mn{constructor(t){super(),yn(this,t,Ox,Px,wn,{send_parameters:5,deploy_parameters:6})}}function kx(r){let t,e,n,a,i,d,b,C,D,T,O,k,G,st;return{c(){t=oe("div"),e=oe("button"),n=Oe("Join existing timer"),a=Ke(),i=oe("span"),d=oe("i"),b=Oe(r[1]),C=Ke(),D=oe("span"),T=Oe("Scheduling cost: "),O=Oe(r[2]),k=Oe(" TON"),this.h()},l(ft){t=ae(ft,"DIV",{class:!0});var it=me(t);e=ae(it,"BUTTON",{class:!0});var lt=me(e);n=Le(lt,"Join existing timer"),lt.forEach(Ot),a=Ve(it),i=ae(it,"SPAN",{class:!0});var wt=me(i);d=ae(wt,"I",{class:!0});var tt=me(d);b=Le(tt,r[1]),tt.forEach(Ot),wt.forEach(Ot),C=Ve(it),D=ae(it,"SPAN",{class:!0});var K=me(D);T=Le(K,"Scheduling cost: "),O=Le(K,r[2]),k=Le(K," TON"),K.forEach(Ot),it.forEach(Ot),this.h()},h(){Lt(e,"class","svelte-1hsad7c"),Lt(d,"class","svelte-1hsad7c"),Lt(i,"class","svelte-1hsad7c"),Lt(D,"class","svelte-1hsad7c"),Lt(t,"class","svelte-1hsad7c")},m(ft,it){Qe(ft,t,it),gt(t,e),gt(e,n),gt(t,a),gt(t,i),gt(i,d),gt(d,b),gt(t,C),gt(t,D),gt(D,T),gt(D,O),gt(D,k),G||(st=_r(e,"click",r[3]),G=!0)},p(ft,it){it&2&&Un(b,ft[1]),it&4&&Un(O,ft[2])},d(ft){ft&&Ot(t),G=!1,st()}}}function jx(r){let t,e,n,a,i,d,b,C,D,T,O,k,G,st,ft,it;return{c(){t=oe("div"),e=oe("button"),n=Oe("Deploy new timer"),a=Ke(),i=oe("span"),d=oe("i"),b=Oe(r[1]),C=Ke(),D=oe("span"),T=Oe("Scheduling cost: "),O=Oe(r[2]),k=Oe(" TON "),G=oe("i"),st=Oe("*with 0.4 returned"),this.h()},l(lt){t=ae(lt,"DIV",{class:!0});var wt=me(t);e=ae(wt,"BUTTON",{class:!0});var tt=me(e);n=Le(tt,"Deploy new timer"),tt.forEach(Ot),a=Ve(wt),i=ae(wt,"SPAN",{class:!0});var K=me(i);d=ae(K,"I",{class:!0});var Q=me(d);b=Le(Q,r[1]),Q.forEach(Ot),K.forEach(Ot),C=Ve(wt),D=ae(wt,"SPAN",{class:!0});var mt=me(D);T=Le(mt,"Scheduling cost: "),O=Le(mt,r[2]),k=Le(mt," TON "),G=ae(mt,"I",{class:!0});var Ct=me(G);st=Le(Ct,"*with 0.4 returned"),Ct.forEach(Ot),mt.forEach(Ot),wt.forEach(Ot),this.h()},h(){Lt(e,"class","svelte-1hsad7c"),Lt(d,"class","svelte-1hsad7c"),Lt(i,"class","svelte-1hsad7c"),Lt(G,"class","svelte-1hsad7c"),Lt(D,"class","svelte-1hsad7c"),Lt(t,"class","nt svelte-1hsad7c")},m(lt,wt){Qe(lt,t,wt),gt(t,e),gt(e,n),gt(t,a),gt(t,i),gt(i,d),gt(d,b),gt(t,C),gt(t,D),gt(D,T),gt(D,O),gt(D,k),gt(D,G),gt(G,st),ft||(it=_r(e,"click",r[3]),ft=!0)},p(lt,wt){wt&2&&Un(b,lt[1]),wt&4&&Un(O,lt[2])},d(lt){lt&&Ot(t),ft=!1,it()}}}function qx(r){let t;function e(i,d){return i[0]?jx:kx}let n=e(r),a=n(r);return{c(){a.c(),t=dn()},l(i){a.l(i),t=dn()},m(i,d){a.m(i,d),Qe(i,t,d)},p(i,[d]){n===(n=e(i))&&a?a.p(i,d):(a.d(1),a=n(i),a&&(a.c(),a.m(t.parentNode,t)))},i:Pe,o:Pe,d(i){a.d(i),i&&Ot(t)}}}function Wx(r,t,e){let{use_message_promise:n}=t,{is_testnet:a=!0}=t,i=null,d=null,b=null;async function C(){var T,O;let D=await n;if(await jh())Qr.sendTransaction({validUntil:Math.ceil(Date.now()/1e3+300),from:void 0,network:a?Si.TESTNET:Si.MAINNET,messages:[D]});else{let k=(O=(T=D.stateInit)==null?void 0:T.replaceAll("+","-"))==null?void 0:O.replaceAll("/","_"),G="ton://transfer/"+D.address+"?amount="+D.amount+"&bin="+D.payload.replaceAll("+","-").replaceAll("/","_")+(k?"&init="+k:"");console.log(G)}}return r.$$set=D=>{"use_message_promise"in D&&e(4,n=D.use_message_promise),"is_testnet"in D&&e(5,a=D.is_testnet)},r.$$.update=()=>{r.$$.dirty&16&&n.then(D=>{e(0,i=D.stateInit!=null),e(1,d=D.address),e(2,b=+D.amount/1e9)}).catch(()=>{e(0,i=null),e(1,d=null),e(2,b=null)})},[i,d,b,C,n,a]}class qh extends mn{constructor(t){super(),yn(this,t,Wx,qx,wn,{use_message_promise:4,is_testnet:5})}}function x0(r,t,e){const n=r.slice();return n[11]=t[e],n}function Hx(r){return{c:Pe,l:Pe,m:Pe,p:Pe,i:Pe,o:Pe,d:Pe}}function Kx(r){let t,e,n=r[10],a=[];for(let d=0;d<n.length;d+=1)a[d]=E0(x0(r,n,d));const i=d=>wr(a[d],1,1,()=>{a[d]=null});return{c(){for(let d=0;d<a.length;d+=1)a[d].c();t=dn()},l(d){for(let b=0;b<a.length;b+=1)a[b].l(d);t=dn()},m(d,b){for(let C=0;C<a.length;C+=1)a[C]&&a[C].m(d,b);Qe(d,t,b),e=!0},p(d,b){if(b&40){n=d[10];let C;for(C=0;C<n.length;C+=1){const D=x0(d,n,C);a[C]?(a[C].p(D,b),vr(a[C],1)):(a[C]=E0(D),a[C].c(),vr(a[C],1),a[C].m(t.parentNode,t))}for(Gh(),C=n.length;C<a.length;C+=1)i(C);Yh()}},i(d){if(!e){for(let b=0;b<n.length;b+=1)vr(a[b]);e=!0}},o(d){a=a.filter(Boolean);for(let b=0;b<a.length;b+=1)wr(a[b]);e=!1},d(d){zh(a,d),d&&Ot(t)}}}function E0(r){let t,e;function n(...a){return r[9](r[11],...a)}return t=new qh({props:{use_message_promise:r[3].then(n)}}),{c(){Nr(t.$$.fragment)},l(a){Ur(t.$$.fragment,a)},m(a,i){$r(t,a,i),e=!0},p(a,i){r=a;const d={};i&8&&(d.use_message_promise=r[3].then(n)),t.$set(d)},i(a){e||(vr(t.$$.fragment,a),e=!0)},o(a){wr(t.$$.fragment,a),e=!1},d(a){Pr(t,a)}}}function Vx(r){let t,e;return{c(){t=oe("span"),e=Oe("Loading timers...")},l(n){t=ae(n,"SPAN",{});var a=me(t);e=Le(a,"Loading timers..."),a.forEach(Ot)},m(n,a){Qe(n,t,a),gt(t,e)},p:Pe,i:Pe,o:Pe,d(n){n&&Ot(t)}}}function Gx(r){let t,e,n,a,i,d,b,C,D,T,O,k,G,st,ft,it,lt,wt,tt;function K(y){r[6](y)}let Q={};r[2]!==void 0&&(Q.is_testnet=r[2]),a=new Nx({props:Q}),ss.push(()=>os(a,"is_testnet",K)),b=new Ss({props:{margin:8,color:"#b2d4fc"}});function mt(y){r[7](y)}function Ct(y){r[8](y)}let ct={};r[0]!==void 0&&(ct.send_parameters=r[0]),r[1]!==void 0&&(ct.deploy_parameters=r[1]),D=new Lx({props:ct}),ss.push(()=>os(D,"send_parameters",mt)),ss.push(()=>os(D,"deploy_parameters",Ct)),G=new Ss({props:{margin:8,color:"#b2d4fc"}}),ft=new qh({props:{use_message_promise:r[4]}});let Kt={ctx:r,current:null,token:null,hasCatch:!1,pending:Vx,then:Kx,catch:Hx,value:10,blocks:[,,,]};return A0(r[5],Kt),wt=new Ss({props:{margin:8,color:"#b2d4fc"}}),{c(){t=oe("style"),e=Oe(`html {
      background: #a0dfff66;
      color: #232328;
    }
    body {
      background: #f7f9fb;
      width: 1020px; height: auto; min-height: calc(100% - 16px); box-sizing: content-box;
      margin: 0 auto;
      border-left: #b2d4fc 1px solid;
      border-right: #b2d4fc 1px solid;
    }`),n=Ke(),Nr(a.$$.fragment),d=Ke(),Nr(b.$$.fragment),C=Ke(),Nr(D.$$.fragment),k=Ke(),Nr(G.$$.fragment),st=Ke(),Nr(ft.$$.fragment),it=Ke(),Kt.block.c(),lt=Ke(),Nr(wt.$$.fragment)},l(y){const o=Vh("svelte-t3ifu7",document.head);t=ae(o,"STYLE",{});var l=me(t);e=Le(l,`html {
      background: #a0dfff66;
      color: #232328;
    }
    body {
      background: #f7f9fb;
      width: 1020px; height: auto; min-height: calc(100% - 16px); box-sizing: content-box;
      margin: 0 auto;
      border-left: #b2d4fc 1px solid;
      border-right: #b2d4fc 1px solid;
    }`),l.forEach(Ot),o.forEach(Ot),n=Ve(y),Ur(a.$$.fragment,y),d=Ve(y),Ur(b.$$.fragment,y),C=Ve(y),Ur(D.$$.fragment,y),k=Ve(y),Ur(G.$$.fragment,y),st=Ve(y),Ur(ft.$$.fragment,y),it=Ve(y),Kt.block.l(y),lt=Ve(y),Ur(wt.$$.fragment,y)},m(y,o){gt(document.head,t),gt(t,e),Qe(y,n,o),$r(a,y,o),Qe(y,d,o),$r(b,y,o),Qe(y,C,o),$r(D,y,o),Qe(y,k,o),$r(G,y,o),Qe(y,st,o),$r(ft,y,o),Qe(y,it,o),Kt.block.m(y,Kt.anchor=o),Kt.mount=()=>lt.parentNode,Kt.anchor=lt,Qe(y,lt,o),$r(wt,y,o),tt=!0},p(y,[o]){r=y;const l={};!i&&o&4&&(i=!0,l.is_testnet=r[2],as(()=>i=!1)),a.$set(l);const s={};!T&&o&1&&(T=!0,s.send_parameters=r[0],as(()=>T=!1)),!O&&o&2&&(O=!0,s.deploy_parameters=r[1],as(()=>O=!1)),D.$set(s);const h={};o&16&&(h.use_message_promise=r[4]),ft.$set(h),C0(Kt,r,o)},i(y){tt||(vr(a.$$.fragment,y),vr(b.$$.fragment,y),vr(D.$$.fragment,y),vr(G.$$.fragment,y),vr(ft.$$.fragment,y),vr(Kt.block),vr(wt.$$.fragment,y),tt=!0)},o(y){wr(a.$$.fragment,y),wr(b.$$.fragment,y),wr(D.$$.fragment,y),wr(G.$$.fragment,y),wr(ft.$$.fragment,y);for(let o=0;o<3;o+=1){const l=Kt.blocks[o];wr(l)}wr(wt.$$.fragment,y),tt=!1},d(y){Ot(t),y&&Ot(n),Pr(a,y),y&&Ot(d),Pr(b,y),y&&Ot(C),Pr(D,y),y&&Ot(k),Pr(G,y),y&&Ot(st),Pr(ft,y),y&&Ot(it),Kt.block.d(y),Kt.token=null,Kt=null,y&&Ot(lt),Pr(wt,y)}}}function Yx(r,t,e){let n=!1,a,i,d=J3(),b=Promise.reject("unavailable"),C=Promise.reject("unavailable");function D(G){n=G,e(2,n)}function T(G){a=G,e(0,a)}function O(G){i=G,e(1,i)}const k=(G,st)=>Rh(st,G);return r.$$.update=()=>{r.$$.dirty&1&&a&&e(3,b=Nh(a)),r.$$.dirty&3&&a&&i&&e(4,C=tx(a,i))},[a,i,n,b,C,d,D,T,O,k]}class zx extends mn{constructor(t){super(),yn(this,t,Yx,Gx,wn,{})}}function Zx(r){let t,e;return t=new zx({}),{c(){Nr(t.$$.fragment)},l(n){Ur(t.$$.fragment,n)},m(n,a){$r(t,n,a),e=!0},p:Pe,i(n){e||(vr(t.$$.fragment,n),e=!0)},o(n){wr(t.$$.fragment,n),e=!1},d(n){Pr(t,n)}}}class c6 extends mn{constructor(t){super(),yn(this,t,null,Zx,wn,{})}}export{c6 as component,tE as universal};
