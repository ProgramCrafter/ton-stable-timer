var ju=Object.defineProperty;var qu=(r,t,e)=>t in r?ju(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var dn=(r,t,e)=>(qu(r,typeof t!="symbol"?t+"":t,e),e);import{S as fn,i as ln,s as hn,J as ro,k as ie,q as $e,a as qe,l as se,m as ce,r as Oe,h as Pt,c as We,K as Ua,n as $t,L as Oi,b as Ye,G as wt,M as xr,u as Gn,N as ff,H as Ne,e as An,p as ui,O as Mr,P as lf,Q as Wu,w as jr,R as en,y as Nr,T as Hu,z as Ur,A as Pr,U as rn,g as cr,d as yr,B as Lr,v as Ku,f as Vu,V as Gu}from"../chunks/index.1cf8b3b8.js";import{b as zu}from"../chunks/paths.e5551063.js";var Gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ti(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Jr(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){if(this instanceof n){var s=[null];s.push.apply(s,arguments);var i=Function.bind.apply(t,s);return new i}return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),e}var hf={},ts={};ts.byteLength=Ju;ts.toByteArray=Qu;ts.fromByteArray=rc;var Dr=[],gr=[],Yu=typeof Uint8Array<"u"?Uint8Array:Array,Ss="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pn=0,Zu=Ss.length;pn<Zu;++pn)Dr[pn]=Ss[pn],gr[Ss.charCodeAt(pn)]=pn;gr["-".charCodeAt(0)]=62;gr["_".charCodeAt(0)]=63;function uf(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function Ju(r){var t=uf(r),e=t[0],n=t[1];return(e+n)*3/4-n}function Xu(r,t,e){return(t+e)*3/4-e}function Qu(r){var t,e=uf(r),n=e[0],s=e[1],i=new Yu(Xu(r,n,s)),u=0,g=s>0?n-4:n,w;for(w=0;w<g;w+=4)t=gr[r.charCodeAt(w)]<<18|gr[r.charCodeAt(w+1)]<<12|gr[r.charCodeAt(w+2)]<<6|gr[r.charCodeAt(w+3)],i[u++]=t>>16&255,i[u++]=t>>8&255,i[u++]=t&255;return s===2&&(t=gr[r.charCodeAt(w)]<<2|gr[r.charCodeAt(w+1)]>>4,i[u++]=t&255),s===1&&(t=gr[r.charCodeAt(w)]<<10|gr[r.charCodeAt(w+1)]<<4|gr[r.charCodeAt(w+2)]>>2,i[u++]=t>>8&255,i[u++]=t&255),i}function tc(r){return Dr[r>>18&63]+Dr[r>>12&63]+Dr[r>>6&63]+Dr[r&63]}function ec(r,t,e){for(var n,s=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(tc(n));return s.join("")}function rc(r){for(var t,e=r.length,n=e%3,s=[],i=16383,u=0,g=e-n;u<g;u+=i)s.push(ec(r,u,u+i>g?g:u+i));return n===1?(t=r[e-1],s.push(Dr[t>>2]+Dr[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],s.push(Dr[t>>10]+Dr[t>>4&63]+Dr[t<<2&63]+"=")),s.join("")}var To={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */To.read=function(r,t,e,n,s){var i,u,g=s*8-n-1,w=(1<<g)-1,F=w>>1,I=-7,N=e?s-1:0,L=e?-1:1,q=r[t+N];for(N+=L,i=q&(1<<-I)-1,q>>=-I,I+=g;I>0;i=i*256+r[t+N],N+=L,I-=8);for(u=i&(1<<-I)-1,i>>=-I,I+=n;I>0;u=u*256+r[t+N],N+=L,I-=8);if(i===0)i=1-F;else{if(i===w)return u?NaN:(q?-1:1)*(1/0);u=u+Math.pow(2,n),i=i-F}return(q?-1:1)*u*Math.pow(2,i-n)};To.write=function(r,t,e,n,s,i){var u,g,w,F=i*8-s-1,I=(1<<F)-1,N=I>>1,L=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,q=n?0:i-1,Z=n?1:-1,tt=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(g=isNaN(t)?1:0,u=I):(u=Math.floor(Math.log(t)/Math.LN2),t*(w=Math.pow(2,-u))<1&&(u--,w*=2),u+N>=1?t+=L/w:t+=L*Math.pow(2,1-N),t*w>=2&&(u++,w/=2),u+N>=I?(g=0,u=I):u+N>=1?(g=(t*w-1)*Math.pow(2,s),u=u+N):(g=t*Math.pow(2,N-1)*Math.pow(2,s),u=0));s>=8;r[e+q]=g&255,q+=Z,g/=256,s-=8);for(u=u<<s|g,F+=s;F>0;r[e+q]=u&255,q+=Z,u/=256,F-=8);r[e+q-Z]|=tt*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=ts,e=To,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=g,r.SlowBuffer=Q,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,g.TYPED_ARRAY_SUPPORT=i(),!g.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const M=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(M,x),M.foo()===42}catch{return!1}}Object.defineProperty(g.prototype,"parent",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.buffer}}),Object.defineProperty(g.prototype,"offset",{enumerable:!0,get:function(){if(g.isBuffer(this))return this.byteOffset}});function u(M){if(M>s)throw new RangeError('The value "'+M+'" is invalid for option "size"');const x=new Uint8Array(M);return Object.setPrototypeOf(x,g.prototype),x}function g(M,x,A){if(typeof M=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(M)}return w(M,x,A)}g.poolSize=8192;function w(M,x,A){if(typeof M=="string")return L(M,x);if(ArrayBuffer.isView(M))return Z(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(pe(M,ArrayBuffer)||M&&pe(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(M,SharedArrayBuffer)||M&&pe(M.buffer,SharedArrayBuffer)))return tt(M,x,A);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const T=M.valueOf&&M.valueOf();if(T!=null&&T!==M)return g.from(T,x,A);const P=et(M);if(P)return P;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return g.from(M[Symbol.toPrimitive]("string"),x,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}g.from=function(M,x,A){return w(M,x,A)},Object.setPrototypeOf(g.prototype,Uint8Array.prototype),Object.setPrototypeOf(g,Uint8Array);function F(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function I(M,x,A){return F(M),M<=0?u(M):x!==void 0?typeof A=="string"?u(M).fill(x,A):u(M).fill(x):u(M)}g.alloc=function(M,x,A){return I(M,x,A)};function N(M){return F(M),u(M<0?0:X(M)|0)}g.allocUnsafe=function(M){return N(M)},g.allocUnsafeSlow=function(M){return N(M)};function L(M,x){if((typeof x!="string"||x==="")&&(x="utf8"),!g.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const A=G(M,x)|0;let T=u(A);const P=T.write(M,x);return P!==A&&(T=T.slice(0,P)),T}function q(M){const x=M.length<0?0:X(M.length)|0,A=u(x);for(let T=0;T<x;T+=1)A[T]=M[T]&255;return A}function Z(M){if(pe(M,Uint8Array)){const x=new Uint8Array(M);return tt(x.buffer,x.byteOffset,x.byteLength)}return q(M)}function tt(M,x,A){if(x<0||M.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<x+(A||0))throw new RangeError('"length" is outside of buffer bounds');let T;return x===void 0&&A===void 0?T=new Uint8Array(M):A===void 0?T=new Uint8Array(M,x):T=new Uint8Array(M,x,A),Object.setPrototypeOf(T,g.prototype),T}function et(M){if(g.isBuffer(M)){const x=X(M.length)|0,A=u(x);return A.length===0||M.copy(A,0,0,x),A}if(M.length!==void 0)return typeof M.length!="number"||St(M.length)?u(0):q(M);if(M.type==="Buffer"&&Array.isArray(M.data))return q(M.data)}function X(M){if(M>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return M|0}function Q(M){return+M!=M&&(M=0),g.alloc(+M)}g.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==g.prototype},g.compare=function(x,A){if(pe(x,Uint8Array)&&(x=g.from(x,x.offset,x.byteLength)),pe(A,Uint8Array)&&(A=g.from(A,A.offset,A.byteLength)),!g.isBuffer(x)||!g.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===A)return 0;let T=x.length,P=A.length;for(let $=0,H=Math.min(T,P);$<H;++$)if(x[$]!==A[$]){T=x[$],P=A[$];break}return T<P?-1:P<T?1:0},g.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(x,A){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return g.alloc(0);let T;if(A===void 0)for(A=0,T=0;T<x.length;++T)A+=x[T].length;const P=g.allocUnsafe(A);let $=0;for(T=0;T<x.length;++T){let H=x[T];if(pe(H,Uint8Array))$+H.length>P.length?(g.isBuffer(H)||(H=g.from(H)),H.copy(P,$)):Uint8Array.prototype.set.call(P,H,$);else if(g.isBuffer(H))H.copy(P,$);else throw new TypeError('"list" argument must be an Array of Buffers');$+=H.length}return P};function G(M,x){if(g.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||pe(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const A=M.length,T=arguments.length>2&&arguments[2]===!0;if(!T&&A===0)return 0;let P=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return Dt(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return Ft(M).length;default:if(P)return T?-1:Dt(M).length;x=(""+x).toLowerCase(),P=!0}}g.byteLength=G;function k(M,x,A){let T=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,x>>>=0,A<=x))return"";for(M||(M="utf8");;)switch(M){case"hex":return f(this,x,A);case"utf8":case"utf-8":return h(this,x,A);case"ascii":return b(this,x,A);case"latin1":case"binary":return v(this,x,A);case"base64":return o(this,x,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,x,A);default:if(T)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),T=!0}}g.prototype._isBuffer=!0;function J(M,x,A){const T=M[x];M[x]=M[A],M[A]=T}g.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<x;A+=2)J(this,A,A+1);return this},g.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<x;A+=4)J(this,A,A+3),J(this,A+1,A+2);return this},g.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<x;A+=8)J(this,A,A+7),J(this,A+1,A+6),J(this,A+2,A+5),J(this,A+3,A+4);return this},g.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?h(this,0,x):k.apply(this,arguments)},g.prototype.toLocaleString=g.prototype.toString,g.prototype.equals=function(x){if(!g.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:g.compare(this,x)===0},g.prototype.inspect=function(){let x="";const A=r.INSPECT_MAX_BYTES;return x=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(x+=" ... "),"<Buffer "+x+">"},n&&(g.prototype[n]=g.prototype.inspect),g.prototype.compare=function(x,A,T,P,$){if(pe(x,Uint8Array)&&(x=g.from(x,x.offset,x.byteLength)),!g.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(A===void 0&&(A=0),T===void 0&&(T=x?x.length:0),P===void 0&&(P=0),$===void 0&&($=this.length),A<0||T>x.length||P<0||$>this.length)throw new RangeError("out of range index");if(P>=$&&A>=T)return 0;if(P>=$)return-1;if(A>=T)return 1;if(A>>>=0,T>>>=0,P>>>=0,$>>>=0,this===x)return 0;let H=$-P,Mt=T-A;const ct=Math.min(H,Mt),At=this.slice(P,$),zt=x.slice(A,T);for(let ft=0;ft<ct;++ft)if(At[ft]!==zt[ft]){H=At[ft],Mt=zt[ft];break}return H<Mt?-1:Mt<H?1:0};function st(M,x,A,T,P){if(M.length===0)return-1;if(typeof A=="string"?(T=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,St(A)&&(A=P?0:M.length-1),A<0&&(A=M.length+A),A>=M.length){if(P)return-1;A=M.length-1}else if(A<0)if(P)A=0;else return-1;if(typeof x=="string"&&(x=g.from(x,T)),g.isBuffer(x))return x.length===0?-1:ut(M,x,A,T,P);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(M,x,A):Uint8Array.prototype.lastIndexOf.call(M,x,A):ut(M,[x],A,T,P);throw new TypeError("val must be string, number or Buffer")}function ut(M,x,A,T,P){let $=1,H=M.length,Mt=x.length;if(T!==void 0&&(T=String(T).toLowerCase(),T==="ucs2"||T==="ucs-2"||T==="utf16le"||T==="utf-16le")){if(M.length<2||x.length<2)return-1;$=2,H/=2,Mt/=2,A/=2}function ct(zt,ft){return $===1?zt[ft]:zt.readUInt16BE(ft*$)}let At;if(P){let zt=-1;for(At=A;At<H;At++)if(ct(M,At)===ct(x,zt===-1?0:At-zt)){if(zt===-1&&(zt=At),At-zt+1===Mt)return zt*$}else zt!==-1&&(At-=At-zt),zt=-1}else for(A+Mt>H&&(A=H-Mt),At=A;At>=0;At--){let zt=!0;for(let ft=0;ft<Mt;ft++)if(ct(M,At+ft)!==ct(x,ft)){zt=!1;break}if(zt)return At}return-1}g.prototype.includes=function(x,A,T){return this.indexOf(x,A,T)!==-1},g.prototype.indexOf=function(x,A,T){return st(this,x,A,T,!0)},g.prototype.lastIndexOf=function(x,A,T){return st(this,x,A,T,!1)};function at(M,x,A,T){A=Number(A)||0;const P=M.length-A;T?(T=Number(T),T>P&&(T=P)):T=P;const $=x.length;T>$/2&&(T=$/2);let H;for(H=0;H<T;++H){const Mt=parseInt(x.substr(H*2,2),16);if(St(Mt))return H;M[A+H]=Mt}return H}function Gt(M,x,A,T){return Jt(Dt(x,M.length-A),M,A,T)}function E(M,x,A,T){return Jt(ne(x),M,A,T)}function a(M,x,A,T){return Jt(Ft(x),M,A,T)}function l(M,x,A,T){return Jt(xe(x,M.length-A),M,A,T)}g.prototype.write=function(x,A,T,P){if(A===void 0)P="utf8",T=this.length,A=0;else if(T===void 0&&typeof A=="string")P=A,T=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(T)?(T=T>>>0,P===void 0&&(P="utf8")):(P=T,T=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const $=this.length-A;if((T===void 0||T>$)&&(T=$),x.length>0&&(T<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");let H=!1;for(;;)switch(P){case"hex":return at(this,x,A,T);case"utf8":case"utf-8":return Gt(this,x,A,T);case"ascii":case"latin1":case"binary":return E(this,x,A,T);case"base64":return a(this,x,A,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l(this,x,A,T);default:if(H)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),H=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function o(M,x,A){return x===0&&A===M.length?t.fromByteArray(M):t.fromByteArray(M.slice(x,A))}function h(M,x,A){A=Math.min(M.length,A);const T=[];let P=x;for(;P<A;){const $=M[P];let H=null,Mt=$>239?4:$>223?3:$>191?2:1;if(P+Mt<=A){let ct,At,zt,ft;switch(Mt){case 1:$<128&&(H=$);break;case 2:ct=M[P+1],(ct&192)===128&&(ft=($&31)<<6|ct&63,ft>127&&(H=ft));break;case 3:ct=M[P+1],At=M[P+2],(ct&192)===128&&(At&192)===128&&(ft=($&15)<<12|(ct&63)<<6|At&63,ft>2047&&(ft<55296||ft>57343)&&(H=ft));break;case 4:ct=M[P+1],At=M[P+2],zt=M[P+3],(ct&192)===128&&(At&192)===128&&(zt&192)===128&&(ft=($&15)<<18|(ct&63)<<12|(At&63)<<6|zt&63,ft>65535&&ft<1114112&&(H=ft))}}H===null?(H=65533,Mt=1):H>65535&&(H-=65536,T.push(H>>>10&1023|55296),H=56320|H&1023),T.push(H),P+=Mt}return p(T)}const c=4096;function p(M){const x=M.length;if(x<=c)return String.fromCharCode.apply(String,M);let A="",T=0;for(;T<x;)A+=String.fromCharCode.apply(String,M.slice(T,T+=c));return A}function b(M,x,A){let T="";A=Math.min(M.length,A);for(let P=x;P<A;++P)T+=String.fromCharCode(M[P]&127);return T}function v(M,x,A){let T="";A=Math.min(M.length,A);for(let P=x;P<A;++P)T+=String.fromCharCode(M[P]);return T}function f(M,x,A){const T=M.length;(!x||x<0)&&(x=0),(!A||A<0||A>T)&&(A=T);let P="";for(let $=x;$<A;++$)P+=te[M[$]];return P}function d(M,x,A){const T=M.slice(x,A);let P="";for(let $=0;$<T.length-1;$+=2)P+=String.fromCharCode(T[$]+T[$+1]*256);return P}g.prototype.slice=function(x,A){const T=this.length;x=~~x,A=A===void 0?T:~~A,x<0?(x+=T,x<0&&(x=0)):x>T&&(x=T),A<0?(A+=T,A<0&&(A=0)):A>T&&(A=T),A<x&&(A=x);const P=this.subarray(x,A);return Object.setPrototypeOf(P,g.prototype),P};function m(M,x,A){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+x>A)throw new RangeError("Trying to access beyond buffer length")}g.prototype.readUintLE=g.prototype.readUIntLE=function(x,A,T){x=x>>>0,A=A>>>0,T||m(x,A,this.length);let P=this[x],$=1,H=0;for(;++H<A&&($*=256);)P+=this[x+H]*$;return P},g.prototype.readUintBE=g.prototype.readUIntBE=function(x,A,T){x=x>>>0,A=A>>>0,T||m(x,A,this.length);let P=this[x+--A],$=1;for(;A>0&&($*=256);)P+=this[x+--A]*$;return P},g.prototype.readUint8=g.prototype.readUInt8=function(x,A){return x=x>>>0,A||m(x,1,this.length),this[x]},g.prototype.readUint16LE=g.prototype.readUInt16LE=function(x,A){return x=x>>>0,A||m(x,2,this.length),this[x]|this[x+1]<<8},g.prototype.readUint16BE=g.prototype.readUInt16BE=function(x,A){return x=x>>>0,A||m(x,2,this.length),this[x]<<8|this[x+1]},g.prototype.readUint32LE=g.prototype.readUInt32LE=function(x,A){return x=x>>>0,A||m(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},g.prototype.readUint32BE=g.prototype.readUInt32BE=function(x,A){return x=x>>>0,A||m(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},g.prototype.readBigUInt64LE=ye(function(x){x=x>>>0,Ee(x,"offset");const A=this[x],T=this[x+7];(A===void 0||T===void 0)&&_t(x,this.length-8);const P=A+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,$=this[++x]+this[++x]*2**8+this[++x]*2**16+T*2**24;return BigInt(P)+(BigInt($)<<BigInt(32))}),g.prototype.readBigUInt64BE=ye(function(x){x=x>>>0,Ee(x,"offset");const A=this[x],T=this[x+7];(A===void 0||T===void 0)&&_t(x,this.length-8);const P=A*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],$=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+T;return(BigInt(P)<<BigInt(32))+BigInt($)}),g.prototype.readIntLE=function(x,A,T){x=x>>>0,A=A>>>0,T||m(x,A,this.length);let P=this[x],$=1,H=0;for(;++H<A&&($*=256);)P+=this[x+H]*$;return $*=128,P>=$&&(P-=Math.pow(2,8*A)),P},g.prototype.readIntBE=function(x,A,T){x=x>>>0,A=A>>>0,T||m(x,A,this.length);let P=A,$=1,H=this[x+--P];for(;P>0&&($*=256);)H+=this[x+--P]*$;return $*=128,H>=$&&(H-=Math.pow(2,8*A)),H},g.prototype.readInt8=function(x,A){return x=x>>>0,A||m(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},g.prototype.readInt16LE=function(x,A){x=x>>>0,A||m(x,2,this.length);const T=this[x]|this[x+1]<<8;return T&32768?T|4294901760:T},g.prototype.readInt16BE=function(x,A){x=x>>>0,A||m(x,2,this.length);const T=this[x+1]|this[x]<<8;return T&32768?T|4294901760:T},g.prototype.readInt32LE=function(x,A){return x=x>>>0,A||m(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},g.prototype.readInt32BE=function(x,A){return x=x>>>0,A||m(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},g.prototype.readBigInt64LE=ye(function(x){x=x>>>0,Ee(x,"offset");const A=this[x],T=this[x+7];(A===void 0||T===void 0)&&_t(x,this.length-8);const P=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(T<<24);return(BigInt(P)<<BigInt(32))+BigInt(A+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),g.prototype.readBigInt64BE=ye(function(x){x=x>>>0,Ee(x,"offset");const A=this[x],T=this[x+7];(A===void 0||T===void 0)&&_t(x,this.length-8);const P=(A<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(P)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+T)}),g.prototype.readFloatLE=function(x,A){return x=x>>>0,A||m(x,4,this.length),e.read(this,x,!0,23,4)},g.prototype.readFloatBE=function(x,A){return x=x>>>0,A||m(x,4,this.length),e.read(this,x,!1,23,4)},g.prototype.readDoubleLE=function(x,A){return x=x>>>0,A||m(x,8,this.length),e.read(this,x,!0,52,8)},g.prototype.readDoubleBE=function(x,A){return x=x>>>0,A||m(x,8,this.length),e.read(this,x,!1,52,8)};function B(M,x,A,T,P,$){if(!g.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>P||x<$)throw new RangeError('"value" argument is out of bounds');if(A+T>M.length)throw new RangeError("Index out of range")}g.prototype.writeUintLE=g.prototype.writeUIntLE=function(x,A,T,P){if(x=+x,A=A>>>0,T=T>>>0,!P){const Mt=Math.pow(2,8*T)-1;B(this,x,A,T,Mt,0)}let $=1,H=0;for(this[A]=x&255;++H<T&&($*=256);)this[A+H]=x/$&255;return A+T},g.prototype.writeUintBE=g.prototype.writeUIntBE=function(x,A,T,P){if(x=+x,A=A>>>0,T=T>>>0,!P){const Mt=Math.pow(2,8*T)-1;B(this,x,A,T,Mt,0)}let $=T-1,H=1;for(this[A+$]=x&255;--$>=0&&(H*=256);)this[A+$]=x/H&255;return A+T},g.prototype.writeUint8=g.prototype.writeUInt8=function(x,A,T){return x=+x,A=A>>>0,T||B(this,x,A,1,255,0),this[A]=x&255,A+1},g.prototype.writeUint16LE=g.prototype.writeUInt16LE=function(x,A,T){return x=+x,A=A>>>0,T||B(this,x,A,2,65535,0),this[A]=x&255,this[A+1]=x>>>8,A+2},g.prototype.writeUint16BE=g.prototype.writeUInt16BE=function(x,A,T){return x=+x,A=A>>>0,T||B(this,x,A,2,65535,0),this[A]=x>>>8,this[A+1]=x&255,A+2},g.prototype.writeUint32LE=g.prototype.writeUInt32LE=function(x,A,T){return x=+x,A=A>>>0,T||B(this,x,A,4,4294967295,0),this[A+3]=x>>>24,this[A+2]=x>>>16,this[A+1]=x>>>8,this[A]=x&255,A+4},g.prototype.writeUint32BE=g.prototype.writeUInt32BE=function(x,A,T){return x=+x,A=A>>>0,T||B(this,x,A,4,4294967295,0),this[A]=x>>>24,this[A+1]=x>>>16,this[A+2]=x>>>8,this[A+3]=x&255,A+4};function O(M,x,A,T,P){Zt(x,T,P,M,A,7);let $=Number(x&BigInt(4294967295));M[A++]=$,$=$>>8,M[A++]=$,$=$>>8,M[A++]=$,$=$>>8,M[A++]=$;let H=Number(x>>BigInt(32)&BigInt(4294967295));return M[A++]=H,H=H>>8,M[A++]=H,H=H>>8,M[A++]=H,H=H>>8,M[A++]=H,A}function W(M,x,A,T,P){Zt(x,T,P,M,A,7);let $=Number(x&BigInt(4294967295));M[A+7]=$,$=$>>8,M[A+6]=$,$=$>>8,M[A+5]=$,$=$>>8,M[A+4]=$;let H=Number(x>>BigInt(32)&BigInt(4294967295));return M[A+3]=H,H=H>>8,M[A+2]=H,H=H>>8,M[A+1]=H,H=H>>8,M[A]=H,A+8}g.prototype.writeBigUInt64LE=ye(function(x,A=0){return O(this,x,A,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeBigUInt64BE=ye(function(x,A=0){return W(this,x,A,BigInt(0),BigInt("0xffffffffffffffff"))}),g.prototype.writeIntLE=function(x,A,T,P){if(x=+x,A=A>>>0,!P){const ct=Math.pow(2,8*T-1);B(this,x,A,T,ct-1,-ct)}let $=0,H=1,Mt=0;for(this[A]=x&255;++$<T&&(H*=256);)x<0&&Mt===0&&this[A+$-1]!==0&&(Mt=1),this[A+$]=(x/H>>0)-Mt&255;return A+T},g.prototype.writeIntBE=function(x,A,T,P){if(x=+x,A=A>>>0,!P){const ct=Math.pow(2,8*T-1);B(this,x,A,T,ct-1,-ct)}let $=T-1,H=1,Mt=0;for(this[A+$]=x&255;--$>=0&&(H*=256);)x<0&&Mt===0&&this[A+$+1]!==0&&(Mt=1),this[A+$]=(x/H>>0)-Mt&255;return A+T},g.prototype.writeInt8=function(x,A,T){return x=+x,A=A>>>0,T||B(this,x,A,1,127,-128),x<0&&(x=255+x+1),this[A]=x&255,A+1},g.prototype.writeInt16LE=function(x,A,T){return x=+x,A=A>>>0,T||B(this,x,A,2,32767,-32768),this[A]=x&255,this[A+1]=x>>>8,A+2},g.prototype.writeInt16BE=function(x,A,T){return x=+x,A=A>>>0,T||B(this,x,A,2,32767,-32768),this[A]=x>>>8,this[A+1]=x&255,A+2},g.prototype.writeInt32LE=function(x,A,T){return x=+x,A=A>>>0,T||B(this,x,A,4,2147483647,-2147483648),this[A]=x&255,this[A+1]=x>>>8,this[A+2]=x>>>16,this[A+3]=x>>>24,A+4},g.prototype.writeInt32BE=function(x,A,T){return x=+x,A=A>>>0,T||B(this,x,A,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[A]=x>>>24,this[A+1]=x>>>16,this[A+2]=x>>>8,this[A+3]=x&255,A+4},g.prototype.writeBigInt64LE=ye(function(x,A=0){return O(this,x,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),g.prototype.writeBigInt64BE=ye(function(x,A=0){return W(this,x,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function K(M,x,A,T,P,$){if(A+T>M.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function pt(M,x,A,T,P){return x=+x,A=A>>>0,P||K(M,x,A,4),e.write(M,x,A,T,23,4),A+4}g.prototype.writeFloatLE=function(x,A,T){return pt(this,x,A,!0,T)},g.prototype.writeFloatBE=function(x,A,T){return pt(this,x,A,!1,T)};function re(M,x,A,T,P){return x=+x,A=A>>>0,P||K(M,x,A,8),e.write(M,x,A,T,52,8),A+8}g.prototype.writeDoubleLE=function(x,A,T){return re(this,x,A,!0,T)},g.prototype.writeDoubleBE=function(x,A,T){return re(this,x,A,!1,T)},g.prototype.copy=function(x,A,T,P){if(!g.isBuffer(x))throw new TypeError("argument should be a Buffer");if(T||(T=0),!P&&P!==0&&(P=this.length),A>=x.length&&(A=x.length),A||(A=0),P>0&&P<T&&(P=T),P===T||x.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(T<0||T>=this.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),x.length-A<P-T&&(P=x.length-A+T);const $=P-T;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(A,T,P):Uint8Array.prototype.set.call(x,this.subarray(T,P),A),$},g.prototype.fill=function(x,A,T,P){if(typeof x=="string"){if(typeof A=="string"?(P=A,A=0,T=this.length):typeof T=="string"&&(P=T,T=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!g.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(x.length===1){const H=x.charCodeAt(0);(P==="utf8"&&H<128||P==="latin1")&&(x=H)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(A<0||this.length<A||this.length<T)throw new RangeError("Out of range index");if(T<=A)return this;A=A>>>0,T=T===void 0?this.length:T>>>0,x||(x=0);let $;if(typeof x=="number")for($=A;$<T;++$)this[$]=x;else{const H=g.isBuffer(x)?x:g.from(x,P),Mt=H.length;if(Mt===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for($=0;$<T-A;++$)this[$+A]=H[$%Mt]}return this};const vt={};function Ot(M,x,A){vt[M]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code(P){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:P,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}Ot("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ot("ERR_INVALID_ARG_TYPE",function(M,x){return`The "${M}" argument must be of type number. Received type ${typeof x}`},TypeError),Ot("ERR_OUT_OF_RANGE",function(M,x,A){let T=`The value of "${M}" is out of range.`,P=A;return Number.isInteger(A)&&Math.abs(A)>2**32?P=Ae(String(A)):typeof A=="bigint"&&(P=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(P=Ae(P)),P+="n"),T+=` It must be ${x}. Received ${P}`,T},RangeError);function Ae(M){let x="",A=M.length;const T=M[0]==="-"?1:0;for(;A>=T+4;A-=3)x=`_${M.slice(A-3,A)}${x}`;return`${M.slice(0,A)}${x}`}function Rt(M,x,A){Ee(x,"offset"),(M[x]===void 0||M[x+A]===void 0)&&_t(x,M.length-(A+1))}function Zt(M,x,A,T,P,$){if(M>A||M<x){const H=typeof x=="bigint"?"n":"";let Mt;throw $>3?x===0||x===BigInt(0)?Mt=`>= 0${H} and < 2${H} ** ${($+1)*8}${H}`:Mt=`>= -(2${H} ** ${($+1)*8-1}${H}) and < 2 ** ${($+1)*8-1}${H}`:Mt=`>= ${x}${H} and <= ${A}${H}`,new vt.ERR_OUT_OF_RANGE("value",Mt,M)}Rt(T,P,$)}function Ee(M,x){if(typeof M!="number")throw new vt.ERR_INVALID_ARG_TYPE(x,"number",M)}function _t(M,x,A){throw Math.floor(M)!==M?(Ee(M,A),new vt.ERR_OUT_OF_RANGE(A||"offset","an integer",M)):x<0?new vt.ERR_BUFFER_OUT_OF_BOUNDS:new vt.ERR_OUT_OF_RANGE(A||"offset",`>= ${A?1:0} and <= ${x}`,M)}const oe=/[^+/0-9A-Za-z-_]/g;function Se(M){if(M=M.split("=")[0],M=M.trim().replace(oe,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function Dt(M,x){x=x||1/0;let A;const T=M.length;let P=null;const $=[];for(let H=0;H<T;++H){if(A=M.charCodeAt(H),A>55295&&A<57344){if(!P){if(A>56319){(x-=3)>-1&&$.push(239,191,189);continue}else if(H+1===T){(x-=3)>-1&&$.push(239,191,189);continue}P=A;continue}if(A<56320){(x-=3)>-1&&$.push(239,191,189),P=A;continue}A=(P-55296<<10|A-56320)+65536}else P&&(x-=3)>-1&&$.push(239,191,189);if(P=null,A<128){if((x-=1)<0)break;$.push(A)}else if(A<2048){if((x-=2)<0)break;$.push(A>>6|192,A&63|128)}else if(A<65536){if((x-=3)<0)break;$.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((x-=4)<0)break;$.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return $}function ne(M){const x=[];for(let A=0;A<M.length;++A)x.push(M.charCodeAt(A)&255);return x}function xe(M,x){let A,T,P;const $=[];for(let H=0;H<M.length&&!((x-=2)<0);++H)A=M.charCodeAt(H),T=A>>8,P=A%256,$.push(P),$.push(T);return $}function Ft(M){return t.toByteArray(Se(M))}function Jt(M,x,A,T){let P;for(P=0;P<T&&!(P+A>=x.length||P>=M.length);++P)x[P+A]=M[P];return P}function pe(M,x){return M instanceof x||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===x.name}function St(M){return M!==M}const te=function(){const M="0123456789abcdef",x=new Array(256);for(let A=0;A<16;++A){const T=A*16;for(let P=0;P<16;++P)x[T+P]=M[A]+M[P]}return x}();function ye(M){return typeof BigInt>"u"?It:M}function It(){throw new Error("BigInt not supported")}})(hf);const nc=!0,ic=!1;globalThis&&(globalThis.Buffer=hf.Buffer);const G6=Object.freeze(Object.defineProperty({__proto__:null,prerender:nc,ssr:ic},Symbol.toStringTag,{value:"Module"}));var Ar={},es={},sr=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof sr<"u"&&sr,lr={searchParams:"URLSearchParams"in sr,iterable:"Symbol"in sr&&"iterator"in Symbol,blob:"FileReader"in sr&&"Blob"in sr&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in sr,arrayBuffer:"ArrayBuffer"in sr};function sc(r){return r&&DataView.prototype.isPrototypeOf(r)}if(lr.arrayBuffer)var oc=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ac=ArrayBuffer.isView||function(r){return r&&oc.indexOf(Object.prototype.toString.call(r))>-1};function ei(r){if(typeof r!="string"&&(r=String(r)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(r)||r==="")throw new TypeError('Invalid character in header field name: "'+r+'"');return r.toLowerCase()}function Ro(r){return typeof r!="string"&&(r=String(r)),r}function No(r){var t={next:function(){var e=r.shift();return{done:e===void 0,value:e}}};return lr.iterable&&(t[Symbol.iterator]=function(){return t}),t}function Qe(r){this.map={},r instanceof Qe?r.forEach(function(t,e){this.append(e,t)},this):Array.isArray(r)?r.forEach(function(t){this.append(t[0],t[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(t){this.append(t,r[t])},this)}Qe.prototype.append=function(r,t){r=ei(r),t=Ro(t);var e=this.map[r];this.map[r]=e?e+", "+t:t};Qe.prototype.delete=function(r){delete this.map[ei(r)]};Qe.prototype.get=function(r){return r=ei(r),this.has(r)?this.map[r]:null};Qe.prototype.has=function(r){return this.map.hasOwnProperty(ei(r))};Qe.prototype.set=function(r,t){this.map[ei(r)]=Ro(t)};Qe.prototype.forEach=function(r,t){for(var e in this.map)this.map.hasOwnProperty(e)&&r.call(t,this.map[e],e,this)};Qe.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),No(r)};Qe.prototype.values=function(){var r=[];return this.forEach(function(t){r.push(t)}),No(r)};Qe.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),No(r)};lr.iterable&&(Qe.prototype[Symbol.iterator]=Qe.prototype.entries);function Ds(r){if(r.bodyUsed)return Promise.reject(new TypeError("Already read"));r.bodyUsed=!0}function cf(r){return new Promise(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function fc(r){var t=new FileReader,e=cf(t);return t.readAsArrayBuffer(r),e}function lc(r){var t=new FileReader,e=cf(t);return t.readAsText(r),e}function hc(r){for(var t=new Uint8Array(r),e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t[n]);return e.join("")}function Pa(r){if(r.slice)return r.slice(0);var t=new Uint8Array(r.byteLength);return t.set(new Uint8Array(r)),t.buffer}function df(){return this.bodyUsed=!1,this._initBody=function(r){this.bodyUsed=this.bodyUsed,this._bodyInit=r,r?typeof r=="string"?this._bodyText=r:lr.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:lr.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:lr.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():lr.arrayBuffer&&lr.blob&&sc(r)?(this._bodyArrayBuffer=Pa(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):lr.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||ac(r))?this._bodyArrayBuffer=Pa(r):this._bodyText=r=Object.prototype.toString.call(r):this._bodyText="",this.headers.get("content-type")||(typeof r=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):lr.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},lr.blob&&(this.blob=function(){var r=Ds(this);if(r)return r;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var r=Ds(this);return r||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(fc)}),this.text=function(){var r=Ds(this);if(r)return r;if(this._bodyBlob)return lc(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(hc(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},lr.formData&&(this.formData=function(){return this.text().then(dc)}),this.json=function(){return this.text().then(JSON.parse)},this}var uc=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function cc(r){var t=r.toUpperCase();return uc.indexOf(t)>-1?t:r}function an(r,t){if(!(this instanceof an))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{};var e=t.body;if(r instanceof an){if(r.bodyUsed)throw new TypeError("Already read");this.url=r.url,this.credentials=r.credentials,t.headers||(this.headers=new Qe(r.headers)),this.method=r.method,this.mode=r.mode,this.signal=r.signal,!e&&r._bodyInit!=null&&(e=r._bodyInit,r.bodyUsed=!0)}else this.url=String(r);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new Qe(t.headers)),this.method=cc(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&e)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(e),(this.method==="GET"||this.method==="HEAD")&&(t.cache==="no-store"||t.cache==="no-cache")){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+new Date().getTime());else{var s=/\?/;this.url+=(s.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}an.prototype.clone=function(){return new an(this,{body:this._bodyInit})};function dc(r){var t=new FormData;return r.trim().split("&").forEach(function(e){if(e){var n=e.split("="),s=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(s),decodeURIComponent(i))}}),t}function pc(r){var t=new Qe,e=r.replace(/\r?\n[\t ]+/g," ");return e.split("\r").map(function(n){return n.indexOf(`
`)===0?n.substr(1,n.length):n}).forEach(function(n){var s=n.split(":"),i=s.shift().trim();if(i){var u=s.join(":").trim();t.append(i,u)}}),t}df.call(an.prototype);function Ir(r,t){if(!(this instanceof Ir))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=t.status===void 0?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===void 0?"":""+t.statusText,this.headers=new Qe(t.headers),this.url=t.url||"",this._initBody(r)}df.call(Ir.prototype);Ir.prototype.clone=function(){return new Ir(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Qe(this.headers),url:this.url})};Ir.error=function(){var r=new Ir(null,{status:0,statusText:""});return r.type="error",r};var vc=[301,302,303,307,308];Ir.redirect=function(r,t){if(vc.indexOf(t)===-1)throw new RangeError("Invalid status code");return new Ir(null,{status:t,headers:{location:r}})};var on=sr.DOMException;try{new on}catch{on=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},on.prototype=Object.create(Error.prototype),on.prototype.constructor=on}function pf(r,t){return new Promise(function(e,n){var s=new an(r,t);if(s.signal&&s.signal.aborted)return n(new on("Aborted","AbortError"));var i=new XMLHttpRequest;function u(){i.abort()}i.onload=function(){var w={status:i.status,statusText:i.statusText,headers:pc(i.getAllResponseHeaders()||"")};w.url="responseURL"in i?i.responseURL:w.headers.get("X-Request-URL");var F="response"in i?i.response:i.responseText;setTimeout(function(){e(new Ir(F,w))},0)},i.onerror=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},i.ontimeout=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},i.onabort=function(){setTimeout(function(){n(new on("Aborted","AbortError"))},0)};function g(w){try{return w===""&&sr.location.href?sr.location.href:w}catch{return w}}i.open(s.method,g(s.url),!0),s.credentials==="include"?i.withCredentials=!0:s.credentials==="omit"&&(i.withCredentials=!1),"responseType"in i&&(lr.blob?i.responseType="blob":lr.arrayBuffer&&s.headers.get("Content-Type")&&s.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(i.responseType="arraybuffer")),t&&typeof t.headers=="object"&&!(t.headers instanceof Qe)?Object.getOwnPropertyNames(t.headers).forEach(function(w){i.setRequestHeader(w,Ro(t.headers[w]))}):s.headers.forEach(function(w,F){i.setRequestHeader(F,w)}),s.signal&&(s.signal.addEventListener("abort",u),i.onreadystatechange=function(){i.readyState===4&&s.signal.removeEventListener("abort",u)}),i.send(typeof s._bodyInit>"u"?null:s._bodyInit)})}pf.polyfill=!0;sr.fetch||(sr.fetch=pf,sr.Headers=Qe,sr.Request=an,sr.Response=Ir);self.fetch.bind(self);var gc=Gr&&Gr.__awaiter||function(r,t,e,n){function s(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function g(I){try{F(n.next(I))}catch(N){u(N)}}function w(I){try{F(n.throw(I))}catch(N){u(N)}}function F(I){I.done?i(I.value):s(I.value).then(g,w)}F((n=n.apply(r,t||[])).next())})};Object.defineProperty(es,"__esModule",{value:!0});es.Nodes=void 0;class mc{constructor(){this.nodeIndex=-1,this.committee=new Set,this.topology=[],this.initTime=0}init(t){return gc(this,void 0,void 0,function*(){this.nodeIndex=-1,this.committee.clear(),this.topology=[],this.initTime=Date.now();let e=[];try{e=yield(yield fetch(t)).json()}catch(n){throw new Error(`exception in fetch(${t}): ${n}`)}for(const n of e)n.Healthy==="1"&&this.topology.push(n);if(this.topology.length===0)throw new Error(`no healthy nodes in ${t}`)})}getHealthyFor(t){var e;const n=[];for(const s of this.topology)s.Weight>0&&(!((e=s.Mngr)===null||e===void 0)&&e.health[t])&&n.push(s);return n}}es.Nodes=mc;const yc="@orbs-network/ton-access",wc="2.3.3",bc="Unthrottled anonymous RPC access to TON blockchain via a robust decentralized network",Ec="lib/index.js",xc="lib/index.js",Ac="lib/index.d.ts",Cc=["lib/**/*"],Bc={test:"env mocha -r ts-node/register test/**/*.ts","test:v2":"env mocha -r ts-node/register test/ton-v2.ts","test:v4":"env mocha -r ts-node/register test/ton-v4.ts",cleanup:"rimraf ./lib","build:web:reg":"esbuild ./lib/web.js --bundle  --sourcemap --target=es2015 --outfile=./dist/index.js","build:web:min":"esbuild ./lib/web.js --bundle  --minify    --target=es2015 --outfile=./dist/index.min.js","build:web":"rimraf ./dist && npm run build:web:reg && npm run build:web:min",build:"npm run lint && rimraf ./lib && tsc && npm run build:web",format:'prettier --write "src/**/*.ts"',lint:"tslint -p tsconfig.json",prepare:"npm run build",prepublishOnly:"npm test && npm run lint",preversion:"npm run lint",version:"npm run format && git add -A src",postversion:"git push && git push --tags"},Mc={type:"git",url:"git+https://github.com/orbs-network/ton-access.git"},_c="yuval@orbs.com",Fc="MIT",Sc={url:"https://github.com/orbs-network/ton-access/issues"},Dc="https://github.com/orbs-network/ton-access#readme",Ic={"isomorphic-fetch":"^3.0.0"},Tc={"@types/bn.js":"^5.1.1","@types/chai":"^4.3.4","@types/isomorphic-fetch":"^0.0.36","@types/mocha":"^10.0.0",buffer:"^6.0.3",chai:"^4.3.7",esbuild:"^0.15.14",mocha:"^10.1.0",prettier:"^2.7.1",rimraf:"^3.0.2",ton:"^12.1.3","ton-lite-client":"npm:@truecarry/ton-lite-client@^1.6.1",tonweb:"^0.0.58","ts-node":"^10.9.1",tslib:"^2.4.0",tslint:"^6.1.3","tslint-config-prettier":"^1.18.0"},Rc={name:yc,version:wc,description:bc,source:Ec,main:xc,types:Ac,files:Cc,scripts:Bc,repository:Mc,author:_c,license:Fc,bugs:Sc,homepage:Dc,dependencies:Ic,devDependencies:Tc};var In=Gr&&Gr.__awaiter||function(r,t,e,n){function s(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function g(I){try{F(n.next(I))}catch(N){u(N)}}function w(I){try{F(n.throw(I))}catch(N){u(N)}}function F(I){I.done?i(I.value):s(I.value).then(g,w)}F((n=n.apply(r,t||[])).next())})};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.getHttpV4Endpoint=Ar.getHttpV4Endpoints=yf=Ar.getHttpEndpoint=Ar.getHttpEndpoints=Ar.Access=void 0;const Nc=es;class vf{constructor(){this.host="ton.access.orbs.network",this.urlVersion=1,this.nodes=new Nc.Nodes}init(){return In(this,void 0,void 0,function*(){const t=Rc;yield this.nodes.init(`https://${this.host}/mngr/nodes?npm_version=${t.version}`)})}makeProtonet(t,e){let n="";switch(t){case"toncenter-api-v2":n+="v2-";break;case"ton-api-v4":n+="v4-";break}return n+=e,n}weightedRandom(t){let e=0;for(const i of t)e+=i.Weight;const n=Math.floor(Math.random()*e);let s=0;for(const i of t){if(n>=s&&n<s+i.Weight)return i;s+=i.Weight}}buildUrls(t,e,n,s){n||(n=""),e||(e="toncenter-api-v2"),t||(t="mainnet"),n.length&&(n=n.replace(/^\/+/,""));const i=[],u=this.makeProtonet(e,t);let g=this.nodes.getHealthyFor(u);if(!(g!=null&&g.length))throw new Error(`no healthy nodes for ${u}`);if(s&&g.length){const w=this.weightedRandom(g);if(w)g=[w];else throw new Error("weightedRandom return empty")}for(const w of g){let F=`https://${this.host}/${w.NodeId}/${this.urlVersion}/${t}/${e}`;n.length&&(F+=`/${n}`),i.push(F)}return i}}Ar.Access=vf;function gf(r,t,e,n){return In(this,void 0,void 0,function*(){const s=new vf;return yield s.init(),s.buildUrls(r,t,e,n)})}function mf(r,t){return In(this,void 0,void 0,function*(){const e=r!=null&&r.network?r.network:"mainnet";let n="jsonRPC";return(r==null?void 0:r.protocol)==="rest"&&(n=""),yield gf(e,"toncenter-api-v2",n,t)})}Ar.getHttpEndpoints=mf;function Uc(r){return In(this,void 0,void 0,function*(){return(yield mf(r,!0))[0]})}var yf=Ar.getHttpEndpoint=Uc;function wf(r,t){return In(this,void 0,void 0,function*(){const e=r!=null&&r.network?r.network:"mainnet";if((r==null?void 0:r.protocol)==="json-rpc")throw Error("config.protocol json-rpc is not supported for getTonApiV4Endpoints");return yield gf(e,"ton-api-v4","",t)})}Ar.getHttpV4Endpoints=wf;function Pc(r){return In(this,void 0,void 0,function*(){return(yield wf(r,!0))[0]})}Ar.getHttpV4Endpoint=Pc;var Uo={exports:{}};const Lc={},$c=Object.freeze(Object.defineProperty({__proto__:null,default:Lc},Symbol.toStringTag,{value:"Module"})),Po=Jr($c);Uo.exports;(function(r){(function(t,e){function n(l,o){if(!l)throw new Error(o||"Assertion failed")}function s(l,o){l.super_=o;var h=function(){};h.prototype=o.prototype,l.prototype=new h,l.prototype.constructor=l}function i(l,o,h){if(i.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,l!==null&&((o==="le"||o==="be")&&(h=o,o=10),this._init(l||0,o||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{u=Po.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,h){return o.cmp(h)>0?o:h},i.min=function(o,h){return o.cmp(h)<0?o:h},i.prototype._init=function(o,h,c){if(typeof o=="number")return this._initNumber(o,h,c);if(typeof o=="object")return this._initArray(o,h,c);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),o=o.toString().replace(/\s+/g,"");var p=0;o[0]==="-"&&p++,h===16?this._parseHex(o,p):this._parseBase(o,h,p),o[0]==="-"&&(this.negative=1),this._strip(),c==="le"&&this._initArray(this.toArray(),h,c)},i.prototype._initNumber=function(o,h,c){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(n(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),c==="le"&&this._initArray(this.toArray(),h,c)},i.prototype._initArray=function(o,h,c){if(n(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var b,v,f=0;if(c==="be")for(p=o.length-1,b=0;p>=0;p-=3)v=o[p]|o[p-1]<<8|o[p-2]<<16,this.words[b]|=v<<f&67108863,this.words[b+1]=v>>>26-f&67108863,f+=24,f>=26&&(f-=26,b++);else if(c==="le")for(p=0,b=0;p<o.length;p+=3)v=o[p]|o[p+1]<<8|o[p+2]<<16,this.words[b]|=v<<f&67108863,this.words[b+1]=v>>>26-f&67108863,f+=24,f>=26&&(f-=26,b++);return this._strip()};function g(l,o,h){for(var c=0,p=Math.min(l.length,h),b=0,v=o;v<p;v++){var f=l.charCodeAt(v)-48;c<<=4;var d;f>=49&&f<=54?d=f-49+10:f>=17&&f<=22?d=f-17+10:d=f,c|=d,b|=d}return n(!(b&240),"Invalid character in "+l),c}i.prototype._parseHex=function(o,h){this.length=Math.ceil((o.length-h)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var p,b,v=0;for(c=o.length-6,p=0;c>=h;c-=6)b=g(o,c,c+6),this.words[p]|=b<<v&67108863,this.words[p+1]|=b>>>26-v&4194303,v+=24,v>=26&&(v-=26,p++);c+6!==h&&(b=g(o,h,c+6),this.words[p]|=b<<v&67108863,this.words[p+1]|=b>>>26-v&4194303),this._strip()};function w(l,o,h,c){for(var p=0,b=0,v=Math.min(l.length,h),f=o;f<v;f++){var d=l.charCodeAt(f)-48;p*=c,d>=49?b=d-49+10:d>=17?b=d-17+10:b=d,n(d>=0&&b<c,"Invalid character"),p+=b}return p}i.prototype._parseBase=function(o,h,c){this.words=[0],this.length=1;for(var p=0,b=1;b<=67108863;b*=h)p++;p--,b=b/h|0;for(var v=o.length-c,f=v%p,d=Math.min(v,v-f)+c,m=0,B=c;B<d;B+=p)m=w(o,B,B+p,h),this.imuln(b),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m);if(f!==0){var O=1;for(m=w(o,B,o.length,h),B=0;B<f;B++)O*=h;this.imuln(O),this.words[0]+m<67108864?this.words[0]+=m:this._iaddn(m)}},i.prototype.copy=function(o){o.words=new Array(this.length);for(var h=0;h<this.length;h++)o.words[h]=this.words[h];o.length=this.length,o.negative=this.negative,o.red=this.red};function F(l,o){l.words=o.words,l.length=o.length,l.negative=o.negative,l.red=o.red}i.prototype._move=function(o){F(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function"?i.prototype[Symbol.for("nodejs.util.inspect.custom")]=I:i.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var N=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],L=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],q=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,h){o=o||10,h=h|0||1;var c;if(o===16||o==="hex"){c="";for(var p=0,b=0,v=0;v<this.length;v++){var f=this.words[v],d=((f<<p|b)&16777215).toString(16);b=f>>>24-p&16777215,b!==0||v!==this.length-1?c=N[6-d.length]+d+c:c=d+c,p+=2,p>=26&&(p-=26,v--)}for(b!==0&&(c=b.toString(16)+c);c.length%h!==0;)c="0"+c;return this.negative!==0&&(c="-"+c),c}if(o===(o|0)&&o>=2&&o<=36){var m=L[o],B=q[o];c="";var O=this.clone();for(O.negative=0;!O.isZero();){var W=O.modrn(B).toString(o);O=O.idivn(B),O.isZero()?c=W+c:c=N[m-W.length]+W+c}for(this.isZero()&&(c="0"+c);c.length%h!==0;)c="0"+c;return this.negative!==0&&(c="-"+c),c}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},u&&(i.prototype.toBuffer=function(o,h){return this.toArrayLike(u,o,h)}),i.prototype.toArray=function(o,h){return this.toArrayLike(Array,o,h)};var Z=function(o,h){return o.allocUnsafe?o.allocUnsafe(h):new o(h)};i.prototype.toArrayLike=function(o,h,c){this._strip();var p=this.byteLength(),b=c||Math.max(1,p);n(p<=b,"byte array longer than desired length"),n(b>0,"Requested array length <= 0");var v=Z(o,b),f=h==="le"?"LE":"BE";return this["_toArrayLike"+f](v,p),v},i.prototype._toArrayLikeLE=function(o,h){for(var c=0,p=0,b=0,v=0;b<this.length;b++){var f=this.words[b]<<v|p;o[c++]=f&255,c<o.length&&(o[c++]=f>>8&255),c<o.length&&(o[c++]=f>>16&255),v===6?(c<o.length&&(o[c++]=f>>24&255),p=0,v=0):(p=f>>>24,v+=2)}if(c<o.length)for(o[c++]=p;c<o.length;)o[c++]=0},i.prototype._toArrayLikeBE=function(o,h){for(var c=o.length-1,p=0,b=0,v=0;b<this.length;b++){var f=this.words[b]<<v|p;o[c--]=f&255,c>=0&&(o[c--]=f>>8&255),c>=0&&(o[c--]=f>>16&255),v===6?(c>=0&&(o[c--]=f>>24&255),p=0,v=0):(p=f>>>24,v+=2)}if(c>=0)for(o[c--]=p;c>=0;)o[c--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var h=o,c=0;return h>=4096&&(c+=13,h>>>=13),h>=64&&(c+=7,h>>>=7),h>=8&&(c+=4,h>>>=4),h>=2&&(c+=2,h>>>=2),c+h},i.prototype._zeroBits=function(o){if(o===0)return 26;var h=o,c=0;return h&8191||(c+=13,h>>>=13),h&127||(c+=7,h>>>=7),h&15||(c+=4,h>>>=4),h&3||(c+=2,h>>>=2),h&1||c++,c},i.prototype.bitLength=function(){var o=this.words[this.length-1],h=this._countBits(o);return(this.length-1)*26+h};function tt(l){for(var o=new Array(l.bitLength()),h=0;h<o.length;h++){var c=h/26|0,p=h%26;o[h]=l.words[c]>>>p&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,h=0;h<this.length;h++){var c=this._zeroBits(this.words[h]);if(o+=c,c!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var h=0;h<o.length;h++)this.words[h]=this.words[h]|o.words[h];return this._strip()},i.prototype.ior=function(o){return n((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var h;this.length>o.length?h=o:h=this;for(var c=0;c<h.length;c++)this.words[c]=this.words[c]&o.words[c];return this.length=h.length,this._strip()},i.prototype.iand=function(o){return n((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var h,c;this.length>o.length?(h=this,c=o):(h=o,c=this);for(var p=0;p<c.length;p++)this.words[p]=h.words[p]^c.words[p];if(this!==h)for(;p<h.length;p++)this.words[p]=h.words[p];return this.length=h.length,this._strip()},i.prototype.ixor=function(o){return n((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){n(typeof o=="number"&&o>=0);var h=Math.ceil(o/26)|0,c=o%26;this._expand(h),c>0&&h--;for(var p=0;p<h;p++)this.words[p]=~this.words[p]&67108863;return c>0&&(this.words[p]=~this.words[p]&67108863>>26-c),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,h){n(typeof o=="number"&&o>=0);var c=o/26|0,p=o%26;return this._expand(c+1),h?this.words[c]=this.words[c]|1<<p:this.words[c]=this.words[c]&~(1<<p),this._strip()},i.prototype.iadd=function(o){var h;if(this.negative!==0&&o.negative===0)return this.negative=0,h=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,h=this.isub(o),o.negative=1,h._normSign();var c,p;this.length>o.length?(c=this,p=o):(c=o,p=this);for(var b=0,v=0;v<p.length;v++)h=(c.words[v]|0)+(p.words[v]|0)+b,this.words[v]=h&67108863,b=h>>>26;for(;b!==0&&v<c.length;v++)h=(c.words[v]|0)+b,this.words[v]=h&67108863,b=h>>>26;if(this.length=c.length,b!==0)this.words[this.length]=b,this.length++;else if(c!==this)for(;v<c.length;v++)this.words[v]=c.words[v];return this},i.prototype.add=function(o){var h;return o.negative!==0&&this.negative===0?(o.negative=0,h=this.sub(o),o.negative^=1,h):o.negative===0&&this.negative!==0?(this.negative=0,h=o.sub(this),this.negative=1,h):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var h=this.iadd(o);return o.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var c=this.cmp(o);if(c===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,b;c>0?(p=this,b=o):(p=o,b=this);for(var v=0,f=0;f<b.length;f++)h=(p.words[f]|0)-(b.words[f]|0)+v,v=h>>26,this.words[f]=h&67108863;for(;v!==0&&f<p.length;f++)h=(p.words[f]|0)+v,v=h>>26,this.words[f]=h&67108863;if(v===0&&f<p.length&&p!==this)for(;f<p.length;f++)this.words[f]=p.words[f];return this.length=Math.max(this.length,f),p!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function et(l,o,h){h.negative=o.negative^l.negative;var c=l.length+o.length|0;h.length=c,c=c-1|0;var p=l.words[0]|0,b=o.words[0]|0,v=p*b,f=v&67108863,d=v/67108864|0;h.words[0]=f;for(var m=1;m<c;m++){for(var B=d>>>26,O=d&67108863,W=Math.min(m,o.length-1),K=Math.max(0,m-l.length+1);K<=W;K++){var pt=m-K|0;p=l.words[pt]|0,b=o.words[K]|0,v=p*b+O,B+=v/67108864|0,O=v&67108863}h.words[m]=O|0,d=B|0}return d!==0?h.words[m]=d|0:h.length--,h._strip()}var X=function(o,h,c){var p=o.words,b=h.words,v=c.words,f=0,d,m,B,O=p[0]|0,W=O&8191,K=O>>>13,pt=p[1]|0,re=pt&8191,vt=pt>>>13,Ot=p[2]|0,Ae=Ot&8191,Rt=Ot>>>13,Zt=p[3]|0,Ee=Zt&8191,_t=Zt>>>13,oe=p[4]|0,Se=oe&8191,Dt=oe>>>13,ne=p[5]|0,xe=ne&8191,Ft=ne>>>13,Jt=p[6]|0,pe=Jt&8191,St=Jt>>>13,te=p[7]|0,ye=te&8191,It=te>>>13,M=p[8]|0,x=M&8191,A=M>>>13,T=p[9]|0,P=T&8191,$=T>>>13,H=b[0]|0,Mt=H&8191,ct=H>>>13,At=b[1]|0,zt=At&8191,ft=At>>>13,ee=b[2]|0,De=ee&8191,Ut=ee>>>13,fe=b[3]|0,Ue=fe&8191,Bt=fe>>>13,Xt=b[4]|0,Me=Xt&8191,Nt=Xt>>>13,ae=b[5]|0,Ie=ae&8191,Lt=ae>>>13,jt=b[6]|0,Te=jt&8191,C=jt>>>13,_=b[7]|0,S=_&8191,y=_>>>13,D=b[8]|0,j=D&8191,U=D>>>13,V=b[9]|0,rt=V&8191,dt=V>>>13;c.negative=o.negative^h.negative,c.length=19,d=Math.imul(W,Mt),m=Math.imul(W,ct),m=m+Math.imul(K,Mt)|0,B=Math.imul(K,ct);var mt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(mt>>>26)|0,mt&=67108863,d=Math.imul(re,Mt),m=Math.imul(re,ct),m=m+Math.imul(vt,Mt)|0,B=Math.imul(vt,ct),d=d+Math.imul(W,zt)|0,m=m+Math.imul(W,ft)|0,m=m+Math.imul(K,zt)|0,B=B+Math.imul(K,ft)|0;var le=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(le>>>26)|0,le&=67108863,d=Math.imul(Ae,Mt),m=Math.imul(Ae,ct),m=m+Math.imul(Rt,Mt)|0,B=Math.imul(Rt,ct),d=d+Math.imul(re,zt)|0,m=m+Math.imul(re,ft)|0,m=m+Math.imul(vt,zt)|0,B=B+Math.imul(vt,ft)|0,d=d+Math.imul(W,De)|0,m=m+Math.imul(W,Ut)|0,m=m+Math.imul(K,De)|0,B=B+Math.imul(K,Ut)|0;var bt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(bt>>>26)|0,bt&=67108863,d=Math.imul(Ee,Mt),m=Math.imul(Ee,ct),m=m+Math.imul(_t,Mt)|0,B=Math.imul(_t,ct),d=d+Math.imul(Ae,zt)|0,m=m+Math.imul(Ae,ft)|0,m=m+Math.imul(Rt,zt)|0,B=B+Math.imul(Rt,ft)|0,d=d+Math.imul(re,De)|0,m=m+Math.imul(re,Ut)|0,m=m+Math.imul(vt,De)|0,B=B+Math.imul(vt,Ut)|0,d=d+Math.imul(W,Ue)|0,m=m+Math.imul(W,Bt)|0,m=m+Math.imul(K,Ue)|0,B=B+Math.imul(K,Bt)|0;var kt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(kt>>>26)|0,kt&=67108863,d=Math.imul(Se,Mt),m=Math.imul(Se,ct),m=m+Math.imul(Dt,Mt)|0,B=Math.imul(Dt,ct),d=d+Math.imul(Ee,zt)|0,m=m+Math.imul(Ee,ft)|0,m=m+Math.imul(_t,zt)|0,B=B+Math.imul(_t,ft)|0,d=d+Math.imul(Ae,De)|0,m=m+Math.imul(Ae,Ut)|0,m=m+Math.imul(Rt,De)|0,B=B+Math.imul(Rt,Ut)|0,d=d+Math.imul(re,Ue)|0,m=m+Math.imul(re,Bt)|0,m=m+Math.imul(vt,Ue)|0,B=B+Math.imul(vt,Bt)|0,d=d+Math.imul(W,Me)|0,m=m+Math.imul(W,Nt)|0,m=m+Math.imul(K,Me)|0,B=B+Math.imul(K,Nt)|0;var qt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(qt>>>26)|0,qt&=67108863,d=Math.imul(xe,Mt),m=Math.imul(xe,ct),m=m+Math.imul(Ft,Mt)|0,B=Math.imul(Ft,ct),d=d+Math.imul(Se,zt)|0,m=m+Math.imul(Se,ft)|0,m=m+Math.imul(Dt,zt)|0,B=B+Math.imul(Dt,ft)|0,d=d+Math.imul(Ee,De)|0,m=m+Math.imul(Ee,Ut)|0,m=m+Math.imul(_t,De)|0,B=B+Math.imul(_t,Ut)|0,d=d+Math.imul(Ae,Ue)|0,m=m+Math.imul(Ae,Bt)|0,m=m+Math.imul(Rt,Ue)|0,B=B+Math.imul(Rt,Bt)|0,d=d+Math.imul(re,Me)|0,m=m+Math.imul(re,Nt)|0,m=m+Math.imul(vt,Me)|0,B=B+Math.imul(vt,Nt)|0,d=d+Math.imul(W,Ie)|0,m=m+Math.imul(W,Lt)|0,m=m+Math.imul(K,Ie)|0,B=B+Math.imul(K,Lt)|0;var Yt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,d=Math.imul(pe,Mt),m=Math.imul(pe,ct),m=m+Math.imul(St,Mt)|0,B=Math.imul(St,ct),d=d+Math.imul(xe,zt)|0,m=m+Math.imul(xe,ft)|0,m=m+Math.imul(Ft,zt)|0,B=B+Math.imul(Ft,ft)|0,d=d+Math.imul(Se,De)|0,m=m+Math.imul(Se,Ut)|0,m=m+Math.imul(Dt,De)|0,B=B+Math.imul(Dt,Ut)|0,d=d+Math.imul(Ee,Ue)|0,m=m+Math.imul(Ee,Bt)|0,m=m+Math.imul(_t,Ue)|0,B=B+Math.imul(_t,Bt)|0,d=d+Math.imul(Ae,Me)|0,m=m+Math.imul(Ae,Nt)|0,m=m+Math.imul(Rt,Me)|0,B=B+Math.imul(Rt,Nt)|0,d=d+Math.imul(re,Ie)|0,m=m+Math.imul(re,Lt)|0,m=m+Math.imul(vt,Ie)|0,B=B+Math.imul(vt,Lt)|0,d=d+Math.imul(W,Te)|0,m=m+Math.imul(W,C)|0,m=m+Math.imul(K,Te)|0,B=B+Math.imul(K,C)|0;var Vt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,d=Math.imul(ye,Mt),m=Math.imul(ye,ct),m=m+Math.imul(It,Mt)|0,B=Math.imul(It,ct),d=d+Math.imul(pe,zt)|0,m=m+Math.imul(pe,ft)|0,m=m+Math.imul(St,zt)|0,B=B+Math.imul(St,ft)|0,d=d+Math.imul(xe,De)|0,m=m+Math.imul(xe,Ut)|0,m=m+Math.imul(Ft,De)|0,B=B+Math.imul(Ft,Ut)|0,d=d+Math.imul(Se,Ue)|0,m=m+Math.imul(Se,Bt)|0,m=m+Math.imul(Dt,Ue)|0,B=B+Math.imul(Dt,Bt)|0,d=d+Math.imul(Ee,Me)|0,m=m+Math.imul(Ee,Nt)|0,m=m+Math.imul(_t,Me)|0,B=B+Math.imul(_t,Nt)|0,d=d+Math.imul(Ae,Ie)|0,m=m+Math.imul(Ae,Lt)|0,m=m+Math.imul(Rt,Ie)|0,B=B+Math.imul(Rt,Lt)|0,d=d+Math.imul(re,Te)|0,m=m+Math.imul(re,C)|0,m=m+Math.imul(vt,Te)|0,B=B+Math.imul(vt,C)|0,d=d+Math.imul(W,S)|0,m=m+Math.imul(W,y)|0,m=m+Math.imul(K,S)|0,B=B+Math.imul(K,y)|0;var Wt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,d=Math.imul(x,Mt),m=Math.imul(x,ct),m=m+Math.imul(A,Mt)|0,B=Math.imul(A,ct),d=d+Math.imul(ye,zt)|0,m=m+Math.imul(ye,ft)|0,m=m+Math.imul(It,zt)|0,B=B+Math.imul(It,ft)|0,d=d+Math.imul(pe,De)|0,m=m+Math.imul(pe,Ut)|0,m=m+Math.imul(St,De)|0,B=B+Math.imul(St,Ut)|0,d=d+Math.imul(xe,Ue)|0,m=m+Math.imul(xe,Bt)|0,m=m+Math.imul(Ft,Ue)|0,B=B+Math.imul(Ft,Bt)|0,d=d+Math.imul(Se,Me)|0,m=m+Math.imul(Se,Nt)|0,m=m+Math.imul(Dt,Me)|0,B=B+Math.imul(Dt,Nt)|0,d=d+Math.imul(Ee,Ie)|0,m=m+Math.imul(Ee,Lt)|0,m=m+Math.imul(_t,Ie)|0,B=B+Math.imul(_t,Lt)|0,d=d+Math.imul(Ae,Te)|0,m=m+Math.imul(Ae,C)|0,m=m+Math.imul(Rt,Te)|0,B=B+Math.imul(Rt,C)|0,d=d+Math.imul(re,S)|0,m=m+Math.imul(re,y)|0,m=m+Math.imul(vt,S)|0,B=B+Math.imul(vt,y)|0,d=d+Math.imul(W,j)|0,m=m+Math.imul(W,U)|0,m=m+Math.imul(K,j)|0,B=B+Math.imul(K,U)|0;var Kt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,d=Math.imul(P,Mt),m=Math.imul(P,ct),m=m+Math.imul($,Mt)|0,B=Math.imul($,ct),d=d+Math.imul(x,zt)|0,m=m+Math.imul(x,ft)|0,m=m+Math.imul(A,zt)|0,B=B+Math.imul(A,ft)|0,d=d+Math.imul(ye,De)|0,m=m+Math.imul(ye,Ut)|0,m=m+Math.imul(It,De)|0,B=B+Math.imul(It,Ut)|0,d=d+Math.imul(pe,Ue)|0,m=m+Math.imul(pe,Bt)|0,m=m+Math.imul(St,Ue)|0,B=B+Math.imul(St,Bt)|0,d=d+Math.imul(xe,Me)|0,m=m+Math.imul(xe,Nt)|0,m=m+Math.imul(Ft,Me)|0,B=B+Math.imul(Ft,Nt)|0,d=d+Math.imul(Se,Ie)|0,m=m+Math.imul(Se,Lt)|0,m=m+Math.imul(Dt,Ie)|0,B=B+Math.imul(Dt,Lt)|0,d=d+Math.imul(Ee,Te)|0,m=m+Math.imul(Ee,C)|0,m=m+Math.imul(_t,Te)|0,B=B+Math.imul(_t,C)|0,d=d+Math.imul(Ae,S)|0,m=m+Math.imul(Ae,y)|0,m=m+Math.imul(Rt,S)|0,B=B+Math.imul(Rt,y)|0,d=d+Math.imul(re,j)|0,m=m+Math.imul(re,U)|0,m=m+Math.imul(vt,j)|0,B=B+Math.imul(vt,U)|0,d=d+Math.imul(W,rt)|0,m=m+Math.imul(W,dt)|0,m=m+Math.imul(K,rt)|0,B=B+Math.imul(K,dt)|0;var Ht=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,d=Math.imul(P,zt),m=Math.imul(P,ft),m=m+Math.imul($,zt)|0,B=Math.imul($,ft),d=d+Math.imul(x,De)|0,m=m+Math.imul(x,Ut)|0,m=m+Math.imul(A,De)|0,B=B+Math.imul(A,Ut)|0,d=d+Math.imul(ye,Ue)|0,m=m+Math.imul(ye,Bt)|0,m=m+Math.imul(It,Ue)|0,B=B+Math.imul(It,Bt)|0,d=d+Math.imul(pe,Me)|0,m=m+Math.imul(pe,Nt)|0,m=m+Math.imul(St,Me)|0,B=B+Math.imul(St,Nt)|0,d=d+Math.imul(xe,Ie)|0,m=m+Math.imul(xe,Lt)|0,m=m+Math.imul(Ft,Ie)|0,B=B+Math.imul(Ft,Lt)|0,d=d+Math.imul(Se,Te)|0,m=m+Math.imul(Se,C)|0,m=m+Math.imul(Dt,Te)|0,B=B+Math.imul(Dt,C)|0,d=d+Math.imul(Ee,S)|0,m=m+Math.imul(Ee,y)|0,m=m+Math.imul(_t,S)|0,B=B+Math.imul(_t,y)|0,d=d+Math.imul(Ae,j)|0,m=m+Math.imul(Ae,U)|0,m=m+Math.imul(Rt,j)|0,B=B+Math.imul(Rt,U)|0,d=d+Math.imul(re,rt)|0,m=m+Math.imul(re,dt)|0,m=m+Math.imul(vt,rt)|0,B=B+Math.imul(vt,dt)|0;var Et=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Et>>>26)|0,Et&=67108863,d=Math.imul(P,De),m=Math.imul(P,Ut),m=m+Math.imul($,De)|0,B=Math.imul($,Ut),d=d+Math.imul(x,Ue)|0,m=m+Math.imul(x,Bt)|0,m=m+Math.imul(A,Ue)|0,B=B+Math.imul(A,Bt)|0,d=d+Math.imul(ye,Me)|0,m=m+Math.imul(ye,Nt)|0,m=m+Math.imul(It,Me)|0,B=B+Math.imul(It,Nt)|0,d=d+Math.imul(pe,Ie)|0,m=m+Math.imul(pe,Lt)|0,m=m+Math.imul(St,Ie)|0,B=B+Math.imul(St,Lt)|0,d=d+Math.imul(xe,Te)|0,m=m+Math.imul(xe,C)|0,m=m+Math.imul(Ft,Te)|0,B=B+Math.imul(Ft,C)|0,d=d+Math.imul(Se,S)|0,m=m+Math.imul(Se,y)|0,m=m+Math.imul(Dt,S)|0,B=B+Math.imul(Dt,y)|0,d=d+Math.imul(Ee,j)|0,m=m+Math.imul(Ee,U)|0,m=m+Math.imul(_t,j)|0,B=B+Math.imul(_t,U)|0,d=d+Math.imul(Ae,rt)|0,m=m+Math.imul(Ae,dt)|0,m=m+Math.imul(Rt,rt)|0,B=B+Math.imul(Rt,dt)|0;var Tt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,d=Math.imul(P,Ue),m=Math.imul(P,Bt),m=m+Math.imul($,Ue)|0,B=Math.imul($,Bt),d=d+Math.imul(x,Me)|0,m=m+Math.imul(x,Nt)|0,m=m+Math.imul(A,Me)|0,B=B+Math.imul(A,Nt)|0,d=d+Math.imul(ye,Ie)|0,m=m+Math.imul(ye,Lt)|0,m=m+Math.imul(It,Ie)|0,B=B+Math.imul(It,Lt)|0,d=d+Math.imul(pe,Te)|0,m=m+Math.imul(pe,C)|0,m=m+Math.imul(St,Te)|0,B=B+Math.imul(St,C)|0,d=d+Math.imul(xe,S)|0,m=m+Math.imul(xe,y)|0,m=m+Math.imul(Ft,S)|0,B=B+Math.imul(Ft,y)|0,d=d+Math.imul(Se,j)|0,m=m+Math.imul(Se,U)|0,m=m+Math.imul(Dt,j)|0,B=B+Math.imul(Dt,U)|0,d=d+Math.imul(Ee,rt)|0,m=m+Math.imul(Ee,dt)|0,m=m+Math.imul(_t,rt)|0,B=B+Math.imul(_t,dt)|0;var yt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(yt>>>26)|0,yt&=67108863,d=Math.imul(P,Me),m=Math.imul(P,Nt),m=m+Math.imul($,Me)|0,B=Math.imul($,Nt),d=d+Math.imul(x,Ie)|0,m=m+Math.imul(x,Lt)|0,m=m+Math.imul(A,Ie)|0,B=B+Math.imul(A,Lt)|0,d=d+Math.imul(ye,Te)|0,m=m+Math.imul(ye,C)|0,m=m+Math.imul(It,Te)|0,B=B+Math.imul(It,C)|0,d=d+Math.imul(pe,S)|0,m=m+Math.imul(pe,y)|0,m=m+Math.imul(St,S)|0,B=B+Math.imul(St,y)|0,d=d+Math.imul(xe,j)|0,m=m+Math.imul(xe,U)|0,m=m+Math.imul(Ft,j)|0,B=B+Math.imul(Ft,U)|0,d=d+Math.imul(Se,rt)|0,m=m+Math.imul(Se,dt)|0,m=m+Math.imul(Dt,rt)|0,B=B+Math.imul(Dt,dt)|0;var xt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(xt>>>26)|0,xt&=67108863,d=Math.imul(P,Ie),m=Math.imul(P,Lt),m=m+Math.imul($,Ie)|0,B=Math.imul($,Lt),d=d+Math.imul(x,Te)|0,m=m+Math.imul(x,C)|0,m=m+Math.imul(A,Te)|0,B=B+Math.imul(A,C)|0,d=d+Math.imul(ye,S)|0,m=m+Math.imul(ye,y)|0,m=m+Math.imul(It,S)|0,B=B+Math.imul(It,y)|0,d=d+Math.imul(pe,j)|0,m=m+Math.imul(pe,U)|0,m=m+Math.imul(St,j)|0,B=B+Math.imul(St,U)|0,d=d+Math.imul(xe,rt)|0,m=m+Math.imul(xe,dt)|0,m=m+Math.imul(Ft,rt)|0,B=B+Math.imul(Ft,dt)|0;var Ct=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,d=Math.imul(P,Te),m=Math.imul(P,C),m=m+Math.imul($,Te)|0,B=Math.imul($,C),d=d+Math.imul(x,S)|0,m=m+Math.imul(x,y)|0,m=m+Math.imul(A,S)|0,B=B+Math.imul(A,y)|0,d=d+Math.imul(ye,j)|0,m=m+Math.imul(ye,U)|0,m=m+Math.imul(It,j)|0,B=B+Math.imul(It,U)|0,d=d+Math.imul(pe,rt)|0,m=m+Math.imul(pe,dt)|0,m=m+Math.imul(St,rt)|0,B=B+Math.imul(St,dt)|0;var gt=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(gt>>>26)|0,gt&=67108863,d=Math.imul(P,S),m=Math.imul(P,y),m=m+Math.imul($,S)|0,B=Math.imul($,y),d=d+Math.imul(x,j)|0,m=m+Math.imul(x,U)|0,m=m+Math.imul(A,j)|0,B=B+Math.imul(A,U)|0,d=d+Math.imul(ye,rt)|0,m=m+Math.imul(ye,dt)|0,m=m+Math.imul(It,rt)|0,B=B+Math.imul(It,dt)|0;var z=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(z>>>26)|0,z&=67108863,d=Math.imul(P,j),m=Math.imul(P,U),m=m+Math.imul($,j)|0,B=Math.imul($,U),d=d+Math.imul(x,rt)|0,m=m+Math.imul(x,dt)|0,m=m+Math.imul(A,rt)|0,B=B+Math.imul(A,dt)|0;var Y=(f+d|0)+((m&8191)<<13)|0;f=(B+(m>>>13)|0)+(Y>>>26)|0,Y&=67108863,d=Math.imul(P,rt),m=Math.imul(P,dt),m=m+Math.imul($,rt)|0,B=Math.imul($,dt);var ot=(f+d|0)+((m&8191)<<13)|0;return f=(B+(m>>>13)|0)+(ot>>>26)|0,ot&=67108863,v[0]=mt,v[1]=le,v[2]=bt,v[3]=kt,v[4]=qt,v[5]=Yt,v[6]=Vt,v[7]=Wt,v[8]=Kt,v[9]=Ht,v[10]=Et,v[11]=Tt,v[12]=yt,v[13]=xt,v[14]=Ct,v[15]=gt,v[16]=z,v[17]=Y,v[18]=ot,f!==0&&(v[19]=f,c.length++),c};Math.imul||(X=et);function Q(l,o,h){h.negative=o.negative^l.negative,h.length=l.length+o.length;for(var c=0,p=0,b=0;b<h.length-1;b++){var v=p;p=0;for(var f=c&67108863,d=Math.min(b,o.length-1),m=Math.max(0,b-l.length+1);m<=d;m++){var B=b-m,O=l.words[B]|0,W=o.words[m]|0,K=O*W,pt=K&67108863;v=v+(K/67108864|0)|0,pt=pt+f|0,f=pt&67108863,v=v+(pt>>>26)|0,p+=v>>>26,v&=67108863}h.words[b]=f,c=v,v=p}return c!==0?h.words[b]=c:h.length--,h._strip()}function G(l,o,h){return Q(l,o,h)}i.prototype.mulTo=function(o,h){var c,p=this.length+o.length;return this.length===10&&o.length===10?c=X(this,o,h):p<63?c=et(this,o,h):p<1024?c=Q(this,o,h):c=G(this,o,h),c},i.prototype.mul=function(o){var h=new i(null);return h.words=new Array(this.length+o.length),this.mulTo(o,h)},i.prototype.mulf=function(o){var h=new i(null);return h.words=new Array(this.length+o.length),G(this,o,h)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var h=o<0;h&&(o=-o),n(typeof o=="number"),n(o<67108864);for(var c=0,p=0;p<this.length;p++){var b=(this.words[p]|0)*o,v=(b&67108863)+(c&67108863);c>>=26,c+=b/67108864|0,c+=v>>>26,this.words[p]=v&67108863}return c!==0&&(this.words[p]=c,this.length++),h?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var h=tt(o);if(h.length===0)return new i(1);for(var c=this,p=0;p<h.length&&h[p]===0;p++,c=c.sqr());if(++p<h.length)for(var b=c.sqr();p<h.length;p++,b=b.sqr())h[p]!==0&&(c=c.mul(b));return c},i.prototype.iushln=function(o){n(typeof o=="number"&&o>=0);var h=o%26,c=(o-h)/26,p=67108863>>>26-h<<26-h,b;if(h!==0){var v=0;for(b=0;b<this.length;b++){var f=this.words[b]&p,d=(this.words[b]|0)-f<<h;this.words[b]=d|v,v=f>>>26-h}v&&(this.words[b]=v,this.length++)}if(c!==0){for(b=this.length-1;b>=0;b--)this.words[b+c]=this.words[b];for(b=0;b<c;b++)this.words[b]=0;this.length+=c}return this._strip()},i.prototype.ishln=function(o){return n(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,h,c){n(typeof o=="number"&&o>=0);var p;h?p=(h-h%26)/26:p=0;var b=o%26,v=Math.min((o-b)/26,this.length),f=67108863^67108863>>>b<<b,d=c;if(p-=v,p=Math.max(0,p),d){for(var m=0;m<v;m++)d.words[m]=this.words[m];d.length=v}if(v!==0)if(this.length>v)for(this.length-=v,m=0;m<this.length;m++)this.words[m]=this.words[m+v];else this.words[0]=0,this.length=1;var B=0;for(m=this.length-1;m>=0&&(B!==0||m>=p);m--){var O=this.words[m]|0;this.words[m]=B<<26-b|O>>>b,B=O&f}return d&&B!==0&&(d.words[d.length++]=B),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,h,c){return n(this.negative===0),this.iushrn(o,h,c)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){n(typeof o=="number"&&o>=0);var h=o%26,c=(o-h)/26,p=1<<h;if(this.length<=c)return!1;var b=this.words[c];return!!(b&p)},i.prototype.imaskn=function(o){n(typeof o=="number"&&o>=0);var h=o%26,c=(o-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=c)return this;if(h!==0&&c++,this.length=Math.min(c,this.length),h!==0){var p=67108863^67108863>>>h<<h;this.words[this.length-1]&=p}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return n(typeof o=="number"),n(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(o){if(n(typeof o=="number"),n(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,h,c){var p=o.length+c,b;this._expand(p);var v,f=0;for(b=0;b<o.length;b++){v=(this.words[b+c]|0)+f;var d=(o.words[b]|0)*h;v-=d&67108863,f=(v>>26)-(d/67108864|0),this.words[b+c]=v&67108863}for(;b<this.length-c;b++)v=(this.words[b+c]|0)+f,f=v>>26,this.words[b+c]=v&67108863;if(f===0)return this._strip();for(n(f===-1),f=0,b=0;b<this.length;b++)v=-(this.words[b]|0)+f,f=v>>26,this.words[b]=v&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,h){var c=this.length-o.length,p=this.clone(),b=o,v=b.words[b.length-1]|0,f=this._countBits(v);c=26-f,c!==0&&(b=b.ushln(c),p.iushln(c),v=b.words[b.length-1]|0);var d=p.length-b.length,m;if(h!=="mod"){m=new i(null),m.length=d+1,m.words=new Array(m.length);for(var B=0;B<m.length;B++)m.words[B]=0}var O=p.clone()._ishlnsubmul(b,1,d);O.negative===0&&(p=O,m&&(m.words[d]=1));for(var W=d-1;W>=0;W--){var K=(p.words[b.length+W]|0)*67108864+(p.words[b.length+W-1]|0);for(K=Math.min(K/v|0,67108863),p._ishlnsubmul(b,K,W);p.negative!==0;)K--,p.negative=0,p._ishlnsubmul(b,1,W),p.isZero()||(p.negative^=1);m&&(m.words[W]=K)}return m&&m._strip(),p._strip(),h!=="div"&&c!==0&&p.iushrn(c),{div:m||null,mod:p}},i.prototype.divmod=function(o,h,c){if(n(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var p,b,v;return this.negative!==0&&o.negative===0?(v=this.neg().divmod(o,h),h!=="mod"&&(p=v.div.neg()),h!=="div"&&(b=v.mod.neg(),c&&b.negative!==0&&b.iadd(o)),{div:p,mod:b}):this.negative===0&&o.negative!==0?(v=this.divmod(o.neg(),h),h!=="mod"&&(p=v.div.neg()),{div:p,mod:v.mod}):this.negative&o.negative?(v=this.neg().divmod(o.neg(),h),h!=="div"&&(b=v.mod.neg(),c&&b.negative!==0&&b.isub(o)),{div:v.div,mod:b}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?h==="div"?{div:this.divn(o.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,h)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var h=this.divmod(o);if(h.mod.isZero())return h.div;var c=h.div.negative!==0?h.mod.isub(o):h.mod,p=o.ushrn(1),b=o.andln(1),v=c.cmp(p);return v<0||b===1&&v===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(o){var h=o<0;h&&(o=-o),n(o<=67108863);for(var c=(1<<26)%o,p=0,b=this.length-1;b>=0;b--)p=(c*p+(this.words[b]|0))%o;return h?-p:p},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var h=o<0;h&&(o=-o),n(o<=67108863);for(var c=0,p=this.length-1;p>=0;p--){var b=(this.words[p]|0)+c*67108864;this.words[p]=b/o|0,c=b%o}return this._strip(),h?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){n(o.negative===0),n(!o.isZero());var h=this,c=o.clone();h.negative!==0?h=h.umod(o):h=h.clone();for(var p=new i(1),b=new i(0),v=new i(0),f=new i(1),d=0;h.isEven()&&c.isEven();)h.iushrn(1),c.iushrn(1),++d;for(var m=c.clone(),B=h.clone();!h.isZero();){for(var O=0,W=1;!(h.words[0]&W)&&O<26;++O,W<<=1);if(O>0)for(h.iushrn(O);O-- >0;)(p.isOdd()||b.isOdd())&&(p.iadd(m),b.isub(B)),p.iushrn(1),b.iushrn(1);for(var K=0,pt=1;!(c.words[0]&pt)&&K<26;++K,pt<<=1);if(K>0)for(c.iushrn(K);K-- >0;)(v.isOdd()||f.isOdd())&&(v.iadd(m),f.isub(B)),v.iushrn(1),f.iushrn(1);h.cmp(c)>=0?(h.isub(c),p.isub(v),b.isub(f)):(c.isub(h),v.isub(p),f.isub(b))}return{a:v,b:f,gcd:c.iushln(d)}},i.prototype._invmp=function(o){n(o.negative===0),n(!o.isZero());var h=this,c=o.clone();h.negative!==0?h=h.umod(o):h=h.clone();for(var p=new i(1),b=new i(0),v=c.clone();h.cmpn(1)>0&&c.cmpn(1)>0;){for(var f=0,d=1;!(h.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(h.iushrn(f);f-- >0;)p.isOdd()&&p.iadd(v),p.iushrn(1);for(var m=0,B=1;!(c.words[0]&B)&&m<26;++m,B<<=1);if(m>0)for(c.iushrn(m);m-- >0;)b.isOdd()&&b.iadd(v),b.iushrn(1);h.cmp(c)>=0?(h.isub(c),p.isub(b)):(c.isub(h),b.isub(p))}var O;return h.cmpn(1)===0?O=p:O=b,O.cmpn(0)<0&&O.iadd(o),O},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var h=this.clone(),c=o.clone();h.negative=0,c.negative=0;for(var p=0;h.isEven()&&c.isEven();p++)h.iushrn(1),c.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;c.isEven();)c.iushrn(1);var b=h.cmp(c);if(b<0){var v=h;h=c,c=v}else if(b===0||c.cmpn(1)===0)break;h.isub(c)}while(!0);return c.iushln(p)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){n(typeof o=="number");var h=o%26,c=(o-h)/26,p=1<<h;if(this.length<=c)return this._expand(c+1),this.words[c]|=p,this;for(var b=p,v=c;b!==0&&v<this.length;v++){var f=this.words[v]|0;f+=b,b=f>>>26,f&=67108863,this.words[v]=f}return b!==0&&(this.words[v]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var h=o<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var c;if(this.length>1)c=1;else{h&&(o=-o),n(o<=67108863,"Number is too big");var p=this.words[0]|0;c=p===o?0:p<o?-1:1}return this.negative!==0?-c|0:c},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var h=this.ucmp(o);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var h=0,c=this.length-1;c>=0;c--){var p=this.words[c]|0,b=o.words[c]|0;if(p!==b){p<b?h=-1:p>b&&(h=1);break}}return h},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new E(o)},i.prototype.toRed=function(o){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return n(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return n(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var k={k256:null,p224:null,p192:null,p25519:null};function J(l,o){this.name=l,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}J.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},J.prototype.ireduce=function(o){var h=o,c;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),c=h.bitLength();while(c>this.n);var p=c<this.n?-1:h.ucmp(this.p);return p===0?(h.words[0]=0,h.length=1):p>0?h.isub(this.p):h._strip(),h},J.prototype.split=function(o,h){o.iushrn(this.n,0,h)},J.prototype.imulK=function(o){return o.imul(this.k)};function st(){J.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(st,J),st.prototype.split=function(o,h){for(var c=4194303,p=Math.min(o.length,9),b=0;b<p;b++)h.words[b]=o.words[b];if(h.length=p,o.length<=9){o.words[0]=0,o.length=1;return}var v=o.words[9];for(h.words[h.length++]=v&c,b=10;b<o.length;b++){var f=o.words[b]|0;o.words[b-10]=(f&c)<<4|v>>>22,v=f}v>>>=22,o.words[b-10]=v,v===0&&o.length>10?o.length-=10:o.length-=9},st.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var h=0,c=0;c<o.length;c++){var p=o.words[c]|0;h+=p*977,o.words[c]=h&67108863,h=p*64+(h/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function ut(){J.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ut,J);function at(){J.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(at,J);function Gt(){J.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(Gt,J),Gt.prototype.imulK=function(o){for(var h=0,c=0;c<o.length;c++){var p=(o.words[c]|0)*19+h,b=p&67108863;p>>>=26,o.words[c]=b,h=p}return h!==0&&(o.words[o.length++]=h),o},i._prime=function(o){if(k[o])return k[o];var h;if(o==="k256")h=new st;else if(o==="p224")h=new ut;else if(o==="p192")h=new at;else if(o==="p25519")h=new Gt;else throw new Error("Unknown prime "+o);return k[o]=h,h};function E(l){if(typeof l=="string"){var o=i._prime(l);this.m=o.p,this.prime=o}else n(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}E.prototype._verify1=function(o){n(o.negative===0,"red works only with positives"),n(o.red,"red works only with red numbers")},E.prototype._verify2=function(o,h){n((o.negative|h.negative)===0,"red works only with positives"),n(o.red&&o.red===h.red,"red works only with red numbers")},E.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(F(o,o.umod(this.m)._forceRed(this)),o)},E.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},E.prototype.add=function(o,h){this._verify2(o,h);var c=o.add(h);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},E.prototype.iadd=function(o,h){this._verify2(o,h);var c=o.iadd(h);return c.cmp(this.m)>=0&&c.isub(this.m),c},E.prototype.sub=function(o,h){this._verify2(o,h);var c=o.sub(h);return c.cmpn(0)<0&&c.iadd(this.m),c._forceRed(this)},E.prototype.isub=function(o,h){this._verify2(o,h);var c=o.isub(h);return c.cmpn(0)<0&&c.iadd(this.m),c},E.prototype.shl=function(o,h){return this._verify1(o),this.imod(o.ushln(h))},E.prototype.imul=function(o,h){return this._verify2(o,h),this.imod(o.imul(h))},E.prototype.mul=function(o,h){return this._verify2(o,h),this.imod(o.mul(h))},E.prototype.isqr=function(o){return this.imul(o,o.clone())},E.prototype.sqr=function(o){return this.mul(o,o)},E.prototype.sqrt=function(o){if(o.isZero())return o.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var c=this.m.add(new i(1)).iushrn(2);return this.pow(o,c)}for(var p=this.m.subn(1),b=0;!p.isZero()&&p.andln(1)===0;)b++,p.iushrn(1);n(!p.isZero());var v=new i(1).toRed(this),f=v.redNeg(),d=this.m.subn(1).iushrn(1),m=this.m.bitLength();for(m=new i(2*m*m).toRed(this);this.pow(m,d).cmp(f)!==0;)m.redIAdd(f);for(var B=this.pow(m,p),O=this.pow(o,p.addn(1).iushrn(1)),W=this.pow(o,p),K=b;W.cmp(v)!==0;){for(var pt=W,re=0;pt.cmp(v)!==0;re++)pt=pt.redSqr();n(re<K);var vt=this.pow(B,new i(1).iushln(K-re-1));O=O.redMul(vt),B=vt.redSqr(),W=W.redMul(B),K=re}return O},E.prototype.invm=function(o){var h=o._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},E.prototype.pow=function(o,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return o.clone();var c=4,p=new Array(1<<c);p[0]=new i(1).toRed(this),p[1]=o;for(var b=2;b<p.length;b++)p[b]=this.mul(p[b-1],o);var v=p[0],f=0,d=0,m=h.bitLength()%26;for(m===0&&(m=26),b=h.length-1;b>=0;b--){for(var B=h.words[b],O=m-1;O>=0;O--){var W=B>>O&1;if(v!==p[0]&&(v=this.sqr(v)),W===0&&f===0){d=0;continue}f<<=1,f|=W,d++,!(d!==c&&(b!==0||O!==0))&&(v=this.mul(v,p[f]),d=0,f=0)}m=26}return v},E.prototype.convertTo=function(o){var h=o.umod(this.m);return h===o?h.clone():h},E.prototype.convertFrom=function(o){var h=o.clone();return h.red=null,h},i.mont=function(o){return new a(o)};function a(l){E.call(this,l),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(a,E),a.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},a.prototype.convertFrom=function(o){var h=this.imod(o.mul(this.rinv));return h.red=null,h},a.prototype.imul=function(o,h){if(o.isZero()||h.isZero())return o.words[0]=0,o.length=1,o;var c=o.imul(h),p=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=c.isub(p).iushrn(this.shift),v=b;return b.cmp(this.m)>=0?v=b.isub(this.m):b.cmpn(0)<0&&(v=b.iadd(this.m)),v._forceRed(this)},a.prototype.mul=function(o,h){if(o.isZero()||h.isZero())return new i(0)._forceRed(this);var c=o.mul(h),p=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=c.isub(p).iushrn(this.shift),v=b;return b.cmp(this.m)>=0?v=b.isub(this.m):b.cmpn(0)<0&&(v=b.iadd(this.m)),v._forceRed(this)},a.prototype.invm=function(o){var h=this.imod(o._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,Gr)})(Uo);var Oc=Uo.exports;function Lo(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bf={exports:{}};(function(r){(function(t){var e=function(C){var _,S=new Float64Array(16);if(C)for(_=0;_<C.length;_++)S[_]=C[_];return S},n=function(){throw new Error("no PRNG")},s=new Uint8Array(16),i=new Uint8Array(32);i[0]=9;var u=e(),g=e([1]),w=e([56129,1]),F=e([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),I=e([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),N=e([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),L=e([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),q=e([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Z(C,_,S,y){C[_]=S>>24&255,C[_+1]=S>>16&255,C[_+2]=S>>8&255,C[_+3]=S&255,C[_+4]=y>>24&255,C[_+5]=y>>16&255,C[_+6]=y>>8&255,C[_+7]=y&255}function tt(C,_,S,y,D){var j,U=0;for(j=0;j<D;j++)U|=C[_+j]^S[y+j];return(1&U-1>>>8)-1}function et(C,_,S,y){return tt(C,_,S,y,16)}function X(C,_,S,y){return tt(C,_,S,y,32)}function Q(C,_,S,y){for(var D=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,j=S[0]&255|(S[1]&255)<<8|(S[2]&255)<<16|(S[3]&255)<<24,U=S[4]&255|(S[5]&255)<<8|(S[6]&255)<<16|(S[7]&255)<<24,V=S[8]&255|(S[9]&255)<<8|(S[10]&255)<<16|(S[11]&255)<<24,rt=S[12]&255|(S[13]&255)<<8|(S[14]&255)<<16|(S[15]&255)<<24,dt=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,mt=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,le=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,bt=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,kt=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,qt=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,Yt=S[16]&255|(S[17]&255)<<8|(S[18]&255)<<16|(S[19]&255)<<24,Vt=S[20]&255|(S[21]&255)<<8|(S[22]&255)<<16|(S[23]&255)<<24,Wt=S[24]&255|(S[25]&255)<<8|(S[26]&255)<<16|(S[27]&255)<<24,Kt=S[28]&255|(S[29]&255)<<8|(S[30]&255)<<16|(S[31]&255)<<24,Ht=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,Et=D,Tt=j,yt=U,xt=V,Ct=rt,gt=dt,z=mt,Y=le,ot=bt,nt=kt,it=qt,ht=Yt,Qt=Vt,he=Wt,ve=Kt,ue=Ht,R,we=0;we<20;we+=2)R=Et+Qt|0,Ct^=R<<7|R>>>32-7,R=Ct+Et|0,ot^=R<<9|R>>>32-9,R=ot+Ct|0,Qt^=R<<13|R>>>32-13,R=Qt+ot|0,Et^=R<<18|R>>>32-18,R=gt+Tt|0,nt^=R<<7|R>>>32-7,R=nt+gt|0,he^=R<<9|R>>>32-9,R=he+nt|0,Tt^=R<<13|R>>>32-13,R=Tt+he|0,gt^=R<<18|R>>>32-18,R=it+z|0,ve^=R<<7|R>>>32-7,R=ve+it|0,yt^=R<<9|R>>>32-9,R=yt+ve|0,z^=R<<13|R>>>32-13,R=z+yt|0,it^=R<<18|R>>>32-18,R=ue+ht|0,xt^=R<<7|R>>>32-7,R=xt+ue|0,Y^=R<<9|R>>>32-9,R=Y+xt|0,ht^=R<<13|R>>>32-13,R=ht+Y|0,ue^=R<<18|R>>>32-18,R=Et+xt|0,Tt^=R<<7|R>>>32-7,R=Tt+Et|0,yt^=R<<9|R>>>32-9,R=yt+Tt|0,xt^=R<<13|R>>>32-13,R=xt+yt|0,Et^=R<<18|R>>>32-18,R=gt+Ct|0,z^=R<<7|R>>>32-7,R=z+gt|0,Y^=R<<9|R>>>32-9,R=Y+z|0,Ct^=R<<13|R>>>32-13,R=Ct+Y|0,gt^=R<<18|R>>>32-18,R=it+nt|0,ht^=R<<7|R>>>32-7,R=ht+it|0,ot^=R<<9|R>>>32-9,R=ot+ht|0,nt^=R<<13|R>>>32-13,R=nt+ot|0,it^=R<<18|R>>>32-18,R=ue+ve|0,Qt^=R<<7|R>>>32-7,R=Qt+ue|0,he^=R<<9|R>>>32-9,R=he+Qt|0,ve^=R<<13|R>>>32-13,R=ve+he|0,ue^=R<<18|R>>>32-18;Et=Et+D|0,Tt=Tt+j|0,yt=yt+U|0,xt=xt+V|0,Ct=Ct+rt|0,gt=gt+dt|0,z=z+mt|0,Y=Y+le|0,ot=ot+bt|0,nt=nt+kt|0,it=it+qt|0,ht=ht+Yt|0,Qt=Qt+Vt|0,he=he+Wt|0,ve=ve+Kt|0,ue=ue+Ht|0,C[0]=Et>>>0&255,C[1]=Et>>>8&255,C[2]=Et>>>16&255,C[3]=Et>>>24&255,C[4]=Tt>>>0&255,C[5]=Tt>>>8&255,C[6]=Tt>>>16&255,C[7]=Tt>>>24&255,C[8]=yt>>>0&255,C[9]=yt>>>8&255,C[10]=yt>>>16&255,C[11]=yt>>>24&255,C[12]=xt>>>0&255,C[13]=xt>>>8&255,C[14]=xt>>>16&255,C[15]=xt>>>24&255,C[16]=Ct>>>0&255,C[17]=Ct>>>8&255,C[18]=Ct>>>16&255,C[19]=Ct>>>24&255,C[20]=gt>>>0&255,C[21]=gt>>>8&255,C[22]=gt>>>16&255,C[23]=gt>>>24&255,C[24]=z>>>0&255,C[25]=z>>>8&255,C[26]=z>>>16&255,C[27]=z>>>24&255,C[28]=Y>>>0&255,C[29]=Y>>>8&255,C[30]=Y>>>16&255,C[31]=Y>>>24&255,C[32]=ot>>>0&255,C[33]=ot>>>8&255,C[34]=ot>>>16&255,C[35]=ot>>>24&255,C[36]=nt>>>0&255,C[37]=nt>>>8&255,C[38]=nt>>>16&255,C[39]=nt>>>24&255,C[40]=it>>>0&255,C[41]=it>>>8&255,C[42]=it>>>16&255,C[43]=it>>>24&255,C[44]=ht>>>0&255,C[45]=ht>>>8&255,C[46]=ht>>>16&255,C[47]=ht>>>24&255,C[48]=Qt>>>0&255,C[49]=Qt>>>8&255,C[50]=Qt>>>16&255,C[51]=Qt>>>24&255,C[52]=he>>>0&255,C[53]=he>>>8&255,C[54]=he>>>16&255,C[55]=he>>>24&255,C[56]=ve>>>0&255,C[57]=ve>>>8&255,C[58]=ve>>>16&255,C[59]=ve>>>24&255,C[60]=ue>>>0&255,C[61]=ue>>>8&255,C[62]=ue>>>16&255,C[63]=ue>>>24&255}function G(C,_,S,y){for(var D=y[0]&255|(y[1]&255)<<8|(y[2]&255)<<16|(y[3]&255)<<24,j=S[0]&255|(S[1]&255)<<8|(S[2]&255)<<16|(S[3]&255)<<24,U=S[4]&255|(S[5]&255)<<8|(S[6]&255)<<16|(S[7]&255)<<24,V=S[8]&255|(S[9]&255)<<8|(S[10]&255)<<16|(S[11]&255)<<24,rt=S[12]&255|(S[13]&255)<<8|(S[14]&255)<<16|(S[15]&255)<<24,dt=y[4]&255|(y[5]&255)<<8|(y[6]&255)<<16|(y[7]&255)<<24,mt=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,le=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,bt=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,kt=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,qt=y[8]&255|(y[9]&255)<<8|(y[10]&255)<<16|(y[11]&255)<<24,Yt=S[16]&255|(S[17]&255)<<8|(S[18]&255)<<16|(S[19]&255)<<24,Vt=S[20]&255|(S[21]&255)<<8|(S[22]&255)<<16|(S[23]&255)<<24,Wt=S[24]&255|(S[25]&255)<<8|(S[26]&255)<<16|(S[27]&255)<<24,Kt=S[28]&255|(S[29]&255)<<8|(S[30]&255)<<16|(S[31]&255)<<24,Ht=y[12]&255|(y[13]&255)<<8|(y[14]&255)<<16|(y[15]&255)<<24,Et=D,Tt=j,yt=U,xt=V,Ct=rt,gt=dt,z=mt,Y=le,ot=bt,nt=kt,it=qt,ht=Yt,Qt=Vt,he=Wt,ve=Kt,ue=Ht,R,we=0;we<20;we+=2)R=Et+Qt|0,Ct^=R<<7|R>>>32-7,R=Ct+Et|0,ot^=R<<9|R>>>32-9,R=ot+Ct|0,Qt^=R<<13|R>>>32-13,R=Qt+ot|0,Et^=R<<18|R>>>32-18,R=gt+Tt|0,nt^=R<<7|R>>>32-7,R=nt+gt|0,he^=R<<9|R>>>32-9,R=he+nt|0,Tt^=R<<13|R>>>32-13,R=Tt+he|0,gt^=R<<18|R>>>32-18,R=it+z|0,ve^=R<<7|R>>>32-7,R=ve+it|0,yt^=R<<9|R>>>32-9,R=yt+ve|0,z^=R<<13|R>>>32-13,R=z+yt|0,it^=R<<18|R>>>32-18,R=ue+ht|0,xt^=R<<7|R>>>32-7,R=xt+ue|0,Y^=R<<9|R>>>32-9,R=Y+xt|0,ht^=R<<13|R>>>32-13,R=ht+Y|0,ue^=R<<18|R>>>32-18,R=Et+xt|0,Tt^=R<<7|R>>>32-7,R=Tt+Et|0,yt^=R<<9|R>>>32-9,R=yt+Tt|0,xt^=R<<13|R>>>32-13,R=xt+yt|0,Et^=R<<18|R>>>32-18,R=gt+Ct|0,z^=R<<7|R>>>32-7,R=z+gt|0,Y^=R<<9|R>>>32-9,R=Y+z|0,Ct^=R<<13|R>>>32-13,R=Ct+Y|0,gt^=R<<18|R>>>32-18,R=it+nt|0,ht^=R<<7|R>>>32-7,R=ht+it|0,ot^=R<<9|R>>>32-9,R=ot+ht|0,nt^=R<<13|R>>>32-13,R=nt+ot|0,it^=R<<18|R>>>32-18,R=ue+ve|0,Qt^=R<<7|R>>>32-7,R=Qt+ue|0,he^=R<<9|R>>>32-9,R=he+Qt|0,ve^=R<<13|R>>>32-13,R=ve+he|0,ue^=R<<18|R>>>32-18;C[0]=Et>>>0&255,C[1]=Et>>>8&255,C[2]=Et>>>16&255,C[3]=Et>>>24&255,C[4]=gt>>>0&255,C[5]=gt>>>8&255,C[6]=gt>>>16&255,C[7]=gt>>>24&255,C[8]=it>>>0&255,C[9]=it>>>8&255,C[10]=it>>>16&255,C[11]=it>>>24&255,C[12]=ue>>>0&255,C[13]=ue>>>8&255,C[14]=ue>>>16&255,C[15]=ue>>>24&255,C[16]=z>>>0&255,C[17]=z>>>8&255,C[18]=z>>>16&255,C[19]=z>>>24&255,C[20]=Y>>>0&255,C[21]=Y>>>8&255,C[22]=Y>>>16&255,C[23]=Y>>>24&255,C[24]=ot>>>0&255,C[25]=ot>>>8&255,C[26]=ot>>>16&255,C[27]=ot>>>24&255,C[28]=nt>>>0&255,C[29]=nt>>>8&255,C[30]=nt>>>16&255,C[31]=nt>>>24&255}function k(C,_,S,y){Q(C,_,S,y)}function J(C,_,S,y){G(C,_,S,y)}var st=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function ut(C,_,S,y,D,j,U){var V=new Uint8Array(16),rt=new Uint8Array(64),dt,mt;for(mt=0;mt<16;mt++)V[mt]=0;for(mt=0;mt<8;mt++)V[mt]=j[mt];for(;D>=64;){for(k(rt,V,U,st),mt=0;mt<64;mt++)C[_+mt]=S[y+mt]^rt[mt];for(dt=1,mt=8;mt<16;mt++)dt=dt+(V[mt]&255)|0,V[mt]=dt&255,dt>>>=8;D-=64,_+=64,y+=64}if(D>0)for(k(rt,V,U,st),mt=0;mt<D;mt++)C[_+mt]=S[y+mt]^rt[mt];return 0}function at(C,_,S,y,D){var j=new Uint8Array(16),U=new Uint8Array(64),V,rt;for(rt=0;rt<16;rt++)j[rt]=0;for(rt=0;rt<8;rt++)j[rt]=y[rt];for(;S>=64;){for(k(U,j,D,st),rt=0;rt<64;rt++)C[_+rt]=U[rt];for(V=1,rt=8;rt<16;rt++)V=V+(j[rt]&255)|0,j[rt]=V&255,V>>>=8;S-=64,_+=64}if(S>0)for(k(U,j,D,st),rt=0;rt<S;rt++)C[_+rt]=U[rt];return 0}function Gt(C,_,S,y,D){var j=new Uint8Array(32);J(j,y,D,st);for(var U=new Uint8Array(8),V=0;V<8;V++)U[V]=y[V+16];return at(C,_,S,U,j)}function E(C,_,S,y,D,j,U){var V=new Uint8Array(32);J(V,j,U,st);for(var rt=new Uint8Array(8),dt=0;dt<8;dt++)rt[dt]=j[dt+16];return ut(C,_,S,y,D,rt,V)}var a=function(C){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var _,S,y,D,j,U,V,rt;_=C[0]&255|(C[1]&255)<<8,this.r[0]=_&8191,S=C[2]&255|(C[3]&255)<<8,this.r[1]=(_>>>13|S<<3)&8191,y=C[4]&255|(C[5]&255)<<8,this.r[2]=(S>>>10|y<<6)&7939,D=C[6]&255|(C[7]&255)<<8,this.r[3]=(y>>>7|D<<9)&8191,j=C[8]&255|(C[9]&255)<<8,this.r[4]=(D>>>4|j<<12)&255,this.r[5]=j>>>1&8190,U=C[10]&255|(C[11]&255)<<8,this.r[6]=(j>>>14|U<<2)&8191,V=C[12]&255|(C[13]&255)<<8,this.r[7]=(U>>>11|V<<5)&8065,rt=C[14]&255|(C[15]&255)<<8,this.r[8]=(V>>>8|rt<<8)&8191,this.r[9]=rt>>>5&127,this.pad[0]=C[16]&255|(C[17]&255)<<8,this.pad[1]=C[18]&255|(C[19]&255)<<8,this.pad[2]=C[20]&255|(C[21]&255)<<8,this.pad[3]=C[22]&255|(C[23]&255)<<8,this.pad[4]=C[24]&255|(C[25]&255)<<8,this.pad[5]=C[26]&255|(C[27]&255)<<8,this.pad[6]=C[28]&255|(C[29]&255)<<8,this.pad[7]=C[30]&255|(C[31]&255)<<8};a.prototype.blocks=function(C,_,S){for(var y=this.fin?0:2048,D,j,U,V,rt,dt,mt,le,bt,kt,qt,Yt,Vt,Wt,Kt,Ht,Et,Tt,yt,xt=this.h[0],Ct=this.h[1],gt=this.h[2],z=this.h[3],Y=this.h[4],ot=this.h[5],nt=this.h[6],it=this.h[7],ht=this.h[8],Qt=this.h[9],he=this.r[0],ve=this.r[1],ue=this.r[2],R=this.r[3],we=this.r[4],_e=this.r[5],Fe=this.r[6],ge=this.r[7],Ce=this.r[8],Be=this.r[9];S>=16;)D=C[_+0]&255|(C[_+1]&255)<<8,xt+=D&8191,j=C[_+2]&255|(C[_+3]&255)<<8,Ct+=(D>>>13|j<<3)&8191,U=C[_+4]&255|(C[_+5]&255)<<8,gt+=(j>>>10|U<<6)&8191,V=C[_+6]&255|(C[_+7]&255)<<8,z+=(U>>>7|V<<9)&8191,rt=C[_+8]&255|(C[_+9]&255)<<8,Y+=(V>>>4|rt<<12)&8191,ot+=rt>>>1&8191,dt=C[_+10]&255|(C[_+11]&255)<<8,nt+=(rt>>>14|dt<<2)&8191,mt=C[_+12]&255|(C[_+13]&255)<<8,it+=(dt>>>11|mt<<5)&8191,le=C[_+14]&255|(C[_+15]&255)<<8,ht+=(mt>>>8|le<<8)&8191,Qt+=le>>>5|y,bt=0,kt=bt,kt+=xt*he,kt+=Ct*(5*Be),kt+=gt*(5*Ce),kt+=z*(5*ge),kt+=Y*(5*Fe),bt=kt>>>13,kt&=8191,kt+=ot*(5*_e),kt+=nt*(5*we),kt+=it*(5*R),kt+=ht*(5*ue),kt+=Qt*(5*ve),bt+=kt>>>13,kt&=8191,qt=bt,qt+=xt*ve,qt+=Ct*he,qt+=gt*(5*Be),qt+=z*(5*Ce),qt+=Y*(5*ge),bt=qt>>>13,qt&=8191,qt+=ot*(5*Fe),qt+=nt*(5*_e),qt+=it*(5*we),qt+=ht*(5*R),qt+=Qt*(5*ue),bt+=qt>>>13,qt&=8191,Yt=bt,Yt+=xt*ue,Yt+=Ct*ve,Yt+=gt*he,Yt+=z*(5*Be),Yt+=Y*(5*Ce),bt=Yt>>>13,Yt&=8191,Yt+=ot*(5*ge),Yt+=nt*(5*Fe),Yt+=it*(5*_e),Yt+=ht*(5*we),Yt+=Qt*(5*R),bt+=Yt>>>13,Yt&=8191,Vt=bt,Vt+=xt*R,Vt+=Ct*ue,Vt+=gt*ve,Vt+=z*he,Vt+=Y*(5*Be),bt=Vt>>>13,Vt&=8191,Vt+=ot*(5*Ce),Vt+=nt*(5*ge),Vt+=it*(5*Fe),Vt+=ht*(5*_e),Vt+=Qt*(5*we),bt+=Vt>>>13,Vt&=8191,Wt=bt,Wt+=xt*we,Wt+=Ct*R,Wt+=gt*ue,Wt+=z*ve,Wt+=Y*he,bt=Wt>>>13,Wt&=8191,Wt+=ot*(5*Be),Wt+=nt*(5*Ce),Wt+=it*(5*ge),Wt+=ht*(5*Fe),Wt+=Qt*(5*_e),bt+=Wt>>>13,Wt&=8191,Kt=bt,Kt+=xt*_e,Kt+=Ct*we,Kt+=gt*R,Kt+=z*ue,Kt+=Y*ve,bt=Kt>>>13,Kt&=8191,Kt+=ot*he,Kt+=nt*(5*Be),Kt+=it*(5*Ce),Kt+=ht*(5*ge),Kt+=Qt*(5*Fe),bt+=Kt>>>13,Kt&=8191,Ht=bt,Ht+=xt*Fe,Ht+=Ct*_e,Ht+=gt*we,Ht+=z*R,Ht+=Y*ue,bt=Ht>>>13,Ht&=8191,Ht+=ot*ve,Ht+=nt*he,Ht+=it*(5*Be),Ht+=ht*(5*Ce),Ht+=Qt*(5*ge),bt+=Ht>>>13,Ht&=8191,Et=bt,Et+=xt*ge,Et+=Ct*Fe,Et+=gt*_e,Et+=z*we,Et+=Y*R,bt=Et>>>13,Et&=8191,Et+=ot*ue,Et+=nt*ve,Et+=it*he,Et+=ht*(5*Be),Et+=Qt*(5*Ce),bt+=Et>>>13,Et&=8191,Tt=bt,Tt+=xt*Ce,Tt+=Ct*ge,Tt+=gt*Fe,Tt+=z*_e,Tt+=Y*we,bt=Tt>>>13,Tt&=8191,Tt+=ot*R,Tt+=nt*ue,Tt+=it*ve,Tt+=ht*he,Tt+=Qt*(5*Be),bt+=Tt>>>13,Tt&=8191,yt=bt,yt+=xt*Be,yt+=Ct*Ce,yt+=gt*ge,yt+=z*Fe,yt+=Y*_e,bt=yt>>>13,yt&=8191,yt+=ot*we,yt+=nt*R,yt+=it*ue,yt+=ht*ve,yt+=Qt*he,bt+=yt>>>13,yt&=8191,bt=(bt<<2)+bt|0,bt=bt+kt|0,kt=bt&8191,bt=bt>>>13,qt+=bt,xt=kt,Ct=qt,gt=Yt,z=Vt,Y=Wt,ot=Kt,nt=Ht,it=Et,ht=Tt,Qt=yt,_+=16,S-=16;this.h[0]=xt,this.h[1]=Ct,this.h[2]=gt,this.h[3]=z,this.h[4]=Y,this.h[5]=ot,this.h[6]=nt,this.h[7]=it,this.h[8]=ht,this.h[9]=Qt},a.prototype.finish=function(C,_){var S=new Uint16Array(10),y,D,j,U;if(this.leftover){for(U=this.leftover,this.buffer[U++]=1;U<16;U++)this.buffer[U]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(y=this.h[1]>>>13,this.h[1]&=8191,U=2;U<10;U++)this.h[U]+=y,y=this.h[U]>>>13,this.h[U]&=8191;for(this.h[0]+=y*5,y=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=y,y=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=y,S[0]=this.h[0]+5,y=S[0]>>>13,S[0]&=8191,U=1;U<10;U++)S[U]=this.h[U]+y,y=S[U]>>>13,S[U]&=8191;for(S[9]-=8192,D=(y^1)-1,U=0;U<10;U++)S[U]&=D;for(D=~D,U=0;U<10;U++)this.h[U]=this.h[U]&D|S[U];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,j=this.h[0]+this.pad[0],this.h[0]=j&65535,U=1;U<8;U++)j=(this.h[U]+this.pad[U]|0)+(j>>>16)|0,this.h[U]=j&65535;C[_+0]=this.h[0]>>>0&255,C[_+1]=this.h[0]>>>8&255,C[_+2]=this.h[1]>>>0&255,C[_+3]=this.h[1]>>>8&255,C[_+4]=this.h[2]>>>0&255,C[_+5]=this.h[2]>>>8&255,C[_+6]=this.h[3]>>>0&255,C[_+7]=this.h[3]>>>8&255,C[_+8]=this.h[4]>>>0&255,C[_+9]=this.h[4]>>>8&255,C[_+10]=this.h[5]>>>0&255,C[_+11]=this.h[5]>>>8&255,C[_+12]=this.h[6]>>>0&255,C[_+13]=this.h[6]>>>8&255,C[_+14]=this.h[7]>>>0&255,C[_+15]=this.h[7]>>>8&255},a.prototype.update=function(C,_,S){var y,D;if(this.leftover){for(D=16-this.leftover,D>S&&(D=S),y=0;y<D;y++)this.buffer[this.leftover+y]=C[_+y];if(S-=D,_+=D,this.leftover+=D,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(S>=16&&(D=S-S%16,this.blocks(C,_,D),_+=D,S-=D),S){for(y=0;y<S;y++)this.buffer[this.leftover+y]=C[_+y];this.leftover+=S}};function l(C,_,S,y,D,j){var U=new a(j);return U.update(S,y,D),U.finish(C,_),0}function o(C,_,S,y,D,j){var U=new Uint8Array(16);return l(U,0,S,y,D,j),et(C,_,U,0)}function h(C,_,S,y,D){var j;if(S<32)return-1;for(E(C,0,_,0,S,y,D),l(C,16,C,32,S-32,C),j=0;j<16;j++)C[j]=0;return 0}function c(C,_,S,y,D){var j,U=new Uint8Array(32);if(S<32||(Gt(U,0,32,y,D),o(_,16,_,32,S-32,U)!==0))return-1;for(E(C,0,_,0,S,y,D),j=0;j<32;j++)C[j]=0;return 0}function p(C,_){var S;for(S=0;S<16;S++)C[S]=_[S]|0}function b(C){var _,S,y=1;for(_=0;_<16;_++)S=C[_]+y+65535,y=Math.floor(S/65536),C[_]=S-y*65536;C[0]+=y-1+37*(y-1)}function v(C,_,S){for(var y,D=~(S-1),j=0;j<16;j++)y=D&(C[j]^_[j]),C[j]^=y,_[j]^=y}function f(C,_){var S,y,D,j=e(),U=e();for(S=0;S<16;S++)U[S]=_[S];for(b(U),b(U),b(U),y=0;y<2;y++){for(j[0]=U[0]-65517,S=1;S<15;S++)j[S]=U[S]-65535-(j[S-1]>>16&1),j[S-1]&=65535;j[15]=U[15]-32767-(j[14]>>16&1),D=j[15]>>16&1,j[14]&=65535,v(U,j,1-D)}for(S=0;S<16;S++)C[2*S]=U[S]&255,C[2*S+1]=U[S]>>8}function d(C,_){var S=new Uint8Array(32),y=new Uint8Array(32);return f(S,C),f(y,_),X(S,0,y,0)}function m(C){var _=new Uint8Array(32);return f(_,C),_[0]&1}function B(C,_){var S;for(S=0;S<16;S++)C[S]=_[2*S]+(_[2*S+1]<<8);C[15]&=32767}function O(C,_,S){for(var y=0;y<16;y++)C[y]=_[y]+S[y]}function W(C,_,S){for(var y=0;y<16;y++)C[y]=_[y]-S[y]}function K(C,_,S){var y,D,j=0,U=0,V=0,rt=0,dt=0,mt=0,le=0,bt=0,kt=0,qt=0,Yt=0,Vt=0,Wt=0,Kt=0,Ht=0,Et=0,Tt=0,yt=0,xt=0,Ct=0,gt=0,z=0,Y=0,ot=0,nt=0,it=0,ht=0,Qt=0,he=0,ve=0,ue=0,R=S[0],we=S[1],_e=S[2],Fe=S[3],ge=S[4],Ce=S[5],Be=S[6],ze=S[7],Re=S[8],He=S[9],Ke=S[10],Ve=S[11],Xe=S[12],rr=S[13],nr=S[14],ir=S[15];y=_[0],j+=y*R,U+=y*we,V+=y*_e,rt+=y*Fe,dt+=y*ge,mt+=y*Ce,le+=y*Be,bt+=y*ze,kt+=y*Re,qt+=y*He,Yt+=y*Ke,Vt+=y*Ve,Wt+=y*Xe,Kt+=y*rr,Ht+=y*nr,Et+=y*ir,y=_[1],U+=y*R,V+=y*we,rt+=y*_e,dt+=y*Fe,mt+=y*ge,le+=y*Ce,bt+=y*Be,kt+=y*ze,qt+=y*Re,Yt+=y*He,Vt+=y*Ke,Wt+=y*Ve,Kt+=y*Xe,Ht+=y*rr,Et+=y*nr,Tt+=y*ir,y=_[2],V+=y*R,rt+=y*we,dt+=y*_e,mt+=y*Fe,le+=y*ge,bt+=y*Ce,kt+=y*Be,qt+=y*ze,Yt+=y*Re,Vt+=y*He,Wt+=y*Ke,Kt+=y*Ve,Ht+=y*Xe,Et+=y*rr,Tt+=y*nr,yt+=y*ir,y=_[3],rt+=y*R,dt+=y*we,mt+=y*_e,le+=y*Fe,bt+=y*ge,kt+=y*Ce,qt+=y*Be,Yt+=y*ze,Vt+=y*Re,Wt+=y*He,Kt+=y*Ke,Ht+=y*Ve,Et+=y*Xe,Tt+=y*rr,yt+=y*nr,xt+=y*ir,y=_[4],dt+=y*R,mt+=y*we,le+=y*_e,bt+=y*Fe,kt+=y*ge,qt+=y*Ce,Yt+=y*Be,Vt+=y*ze,Wt+=y*Re,Kt+=y*He,Ht+=y*Ke,Et+=y*Ve,Tt+=y*Xe,yt+=y*rr,xt+=y*nr,Ct+=y*ir,y=_[5],mt+=y*R,le+=y*we,bt+=y*_e,kt+=y*Fe,qt+=y*ge,Yt+=y*Ce,Vt+=y*Be,Wt+=y*ze,Kt+=y*Re,Ht+=y*He,Et+=y*Ke,Tt+=y*Ve,yt+=y*Xe,xt+=y*rr,Ct+=y*nr,gt+=y*ir,y=_[6],le+=y*R,bt+=y*we,kt+=y*_e,qt+=y*Fe,Yt+=y*ge,Vt+=y*Ce,Wt+=y*Be,Kt+=y*ze,Ht+=y*Re,Et+=y*He,Tt+=y*Ke,yt+=y*Ve,xt+=y*Xe,Ct+=y*rr,gt+=y*nr,z+=y*ir,y=_[7],bt+=y*R,kt+=y*we,qt+=y*_e,Yt+=y*Fe,Vt+=y*ge,Wt+=y*Ce,Kt+=y*Be,Ht+=y*ze,Et+=y*Re,Tt+=y*He,yt+=y*Ke,xt+=y*Ve,Ct+=y*Xe,gt+=y*rr,z+=y*nr,Y+=y*ir,y=_[8],kt+=y*R,qt+=y*we,Yt+=y*_e,Vt+=y*Fe,Wt+=y*ge,Kt+=y*Ce,Ht+=y*Be,Et+=y*ze,Tt+=y*Re,yt+=y*He,xt+=y*Ke,Ct+=y*Ve,gt+=y*Xe,z+=y*rr,Y+=y*nr,ot+=y*ir,y=_[9],qt+=y*R,Yt+=y*we,Vt+=y*_e,Wt+=y*Fe,Kt+=y*ge,Ht+=y*Ce,Et+=y*Be,Tt+=y*ze,yt+=y*Re,xt+=y*He,Ct+=y*Ke,gt+=y*Ve,z+=y*Xe,Y+=y*rr,ot+=y*nr,nt+=y*ir,y=_[10],Yt+=y*R,Vt+=y*we,Wt+=y*_e,Kt+=y*Fe,Ht+=y*ge,Et+=y*Ce,Tt+=y*Be,yt+=y*ze,xt+=y*Re,Ct+=y*He,gt+=y*Ke,z+=y*Ve,Y+=y*Xe,ot+=y*rr,nt+=y*nr,it+=y*ir,y=_[11],Vt+=y*R,Wt+=y*we,Kt+=y*_e,Ht+=y*Fe,Et+=y*ge,Tt+=y*Ce,yt+=y*Be,xt+=y*ze,Ct+=y*Re,gt+=y*He,z+=y*Ke,Y+=y*Ve,ot+=y*Xe,nt+=y*rr,it+=y*nr,ht+=y*ir,y=_[12],Wt+=y*R,Kt+=y*we,Ht+=y*_e,Et+=y*Fe,Tt+=y*ge,yt+=y*Ce,xt+=y*Be,Ct+=y*ze,gt+=y*Re,z+=y*He,Y+=y*Ke,ot+=y*Ve,nt+=y*Xe,it+=y*rr,ht+=y*nr,Qt+=y*ir,y=_[13],Kt+=y*R,Ht+=y*we,Et+=y*_e,Tt+=y*Fe,yt+=y*ge,xt+=y*Ce,Ct+=y*Be,gt+=y*ze,z+=y*Re,Y+=y*He,ot+=y*Ke,nt+=y*Ve,it+=y*Xe,ht+=y*rr,Qt+=y*nr,he+=y*ir,y=_[14],Ht+=y*R,Et+=y*we,Tt+=y*_e,yt+=y*Fe,xt+=y*ge,Ct+=y*Ce,gt+=y*Be,z+=y*ze,Y+=y*Re,ot+=y*He,nt+=y*Ke,it+=y*Ve,ht+=y*Xe,Qt+=y*rr,he+=y*nr,ve+=y*ir,y=_[15],Et+=y*R,Tt+=y*we,yt+=y*_e,xt+=y*Fe,Ct+=y*ge,gt+=y*Ce,z+=y*Be,Y+=y*ze,ot+=y*Re,nt+=y*He,it+=y*Ke,ht+=y*Ve,Qt+=y*Xe,he+=y*rr,ve+=y*nr,ue+=y*ir,j+=38*Tt,U+=38*yt,V+=38*xt,rt+=38*Ct,dt+=38*gt,mt+=38*z,le+=38*Y,bt+=38*ot,kt+=38*nt,qt+=38*it,Yt+=38*ht,Vt+=38*Qt,Wt+=38*he,Kt+=38*ve,Ht+=38*ue,D=1,y=j+D+65535,D=Math.floor(y/65536),j=y-D*65536,y=U+D+65535,D=Math.floor(y/65536),U=y-D*65536,y=V+D+65535,D=Math.floor(y/65536),V=y-D*65536,y=rt+D+65535,D=Math.floor(y/65536),rt=y-D*65536,y=dt+D+65535,D=Math.floor(y/65536),dt=y-D*65536,y=mt+D+65535,D=Math.floor(y/65536),mt=y-D*65536,y=le+D+65535,D=Math.floor(y/65536),le=y-D*65536,y=bt+D+65535,D=Math.floor(y/65536),bt=y-D*65536,y=kt+D+65535,D=Math.floor(y/65536),kt=y-D*65536,y=qt+D+65535,D=Math.floor(y/65536),qt=y-D*65536,y=Yt+D+65535,D=Math.floor(y/65536),Yt=y-D*65536,y=Vt+D+65535,D=Math.floor(y/65536),Vt=y-D*65536,y=Wt+D+65535,D=Math.floor(y/65536),Wt=y-D*65536,y=Kt+D+65535,D=Math.floor(y/65536),Kt=y-D*65536,y=Ht+D+65535,D=Math.floor(y/65536),Ht=y-D*65536,y=Et+D+65535,D=Math.floor(y/65536),Et=y-D*65536,j+=D-1+37*(D-1),D=1,y=j+D+65535,D=Math.floor(y/65536),j=y-D*65536,y=U+D+65535,D=Math.floor(y/65536),U=y-D*65536,y=V+D+65535,D=Math.floor(y/65536),V=y-D*65536,y=rt+D+65535,D=Math.floor(y/65536),rt=y-D*65536,y=dt+D+65535,D=Math.floor(y/65536),dt=y-D*65536,y=mt+D+65535,D=Math.floor(y/65536),mt=y-D*65536,y=le+D+65535,D=Math.floor(y/65536),le=y-D*65536,y=bt+D+65535,D=Math.floor(y/65536),bt=y-D*65536,y=kt+D+65535,D=Math.floor(y/65536),kt=y-D*65536,y=qt+D+65535,D=Math.floor(y/65536),qt=y-D*65536,y=Yt+D+65535,D=Math.floor(y/65536),Yt=y-D*65536,y=Vt+D+65535,D=Math.floor(y/65536),Vt=y-D*65536,y=Wt+D+65535,D=Math.floor(y/65536),Wt=y-D*65536,y=Kt+D+65535,D=Math.floor(y/65536),Kt=y-D*65536,y=Ht+D+65535,D=Math.floor(y/65536),Ht=y-D*65536,y=Et+D+65535,D=Math.floor(y/65536),Et=y-D*65536,j+=D-1+37*(D-1),C[0]=j,C[1]=U,C[2]=V,C[3]=rt,C[4]=dt,C[5]=mt,C[6]=le,C[7]=bt,C[8]=kt,C[9]=qt,C[10]=Yt,C[11]=Vt,C[12]=Wt,C[13]=Kt,C[14]=Ht,C[15]=Et}function pt(C,_){K(C,_,_)}function re(C,_){var S=e(),y;for(y=0;y<16;y++)S[y]=_[y];for(y=253;y>=0;y--)pt(S,S),y!==2&&y!==4&&K(S,S,_);for(y=0;y<16;y++)C[y]=S[y]}function vt(C,_){var S=e(),y;for(y=0;y<16;y++)S[y]=_[y];for(y=250;y>=0;y--)pt(S,S),y!==1&&K(S,S,_);for(y=0;y<16;y++)C[y]=S[y]}function Ot(C,_,S){var y=new Uint8Array(32),D=new Float64Array(80),j,U,V=e(),rt=e(),dt=e(),mt=e(),le=e(),bt=e();for(U=0;U<31;U++)y[U]=_[U];for(y[31]=_[31]&127|64,y[0]&=248,B(D,S),U=0;U<16;U++)rt[U]=D[U],mt[U]=V[U]=dt[U]=0;for(V[0]=mt[0]=1,U=254;U>=0;--U)j=y[U>>>3]>>>(U&7)&1,v(V,rt,j),v(dt,mt,j),O(le,V,dt),W(V,V,dt),O(dt,rt,mt),W(rt,rt,mt),pt(mt,le),pt(bt,V),K(V,dt,V),K(dt,rt,le),O(le,V,dt),W(V,V,dt),pt(rt,V),W(dt,mt,bt),K(V,dt,w),O(V,V,mt),K(dt,dt,V),K(V,mt,bt),K(mt,rt,D),pt(rt,le),v(V,rt,j),v(dt,mt,j);for(U=0;U<16;U++)D[U+16]=V[U],D[U+32]=dt[U],D[U+48]=rt[U],D[U+64]=mt[U];var kt=D.subarray(32),qt=D.subarray(16);return re(kt,kt),K(qt,qt,kt),f(C,qt),0}function Ae(C,_){return Ot(C,_,i)}function Rt(C,_){return n(_,32),Ae(C,_)}function Zt(C,_,S){var y=new Uint8Array(32);return Ot(y,S,_),J(C,s,y,st)}var Ee=h,_t=c;function oe(C,_,S,y,D,j){var U=new Uint8Array(32);return Zt(U,D,j),Ee(C,_,S,y,U)}function Se(C,_,S,y,D,j){var U=new Uint8Array(32);return Zt(U,D,j),_t(C,_,S,y,U)}var Dt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ne(C,_,S,y){for(var D=new Int32Array(16),j=new Int32Array(16),U,V,rt,dt,mt,le,bt,kt,qt,Yt,Vt,Wt,Kt,Ht,Et,Tt,yt,xt,Ct,gt,z,Y,ot,nt,it,ht,Qt=C[0],he=C[1],ve=C[2],ue=C[3],R=C[4],we=C[5],_e=C[6],Fe=C[7],ge=_[0],Ce=_[1],Be=_[2],ze=_[3],Re=_[4],He=_[5],Ke=_[6],Ve=_[7],Xe=0;y>=128;){for(Ct=0;Ct<16;Ct++)gt=8*Ct+Xe,D[Ct]=S[gt+0]<<24|S[gt+1]<<16|S[gt+2]<<8|S[gt+3],j[Ct]=S[gt+4]<<24|S[gt+5]<<16|S[gt+6]<<8|S[gt+7];for(Ct=0;Ct<80;Ct++)if(U=Qt,V=he,rt=ve,dt=ue,mt=R,le=we,bt=_e,kt=Fe,qt=ge,Yt=Ce,Vt=Be,Wt=ze,Kt=Re,Ht=He,Et=Ke,Tt=Ve,z=Fe,Y=Ve,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=(R>>>14|Re<<32-14)^(R>>>18|Re<<32-18)^(Re>>>41-32|R<<32-(41-32)),Y=(Re>>>14|R<<32-14)^(Re>>>18|R<<32-18)^(R>>>41-32|Re<<32-(41-32)),ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,z=R&we^~R&_e,Y=Re&He^~Re&Ke,ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,z=Dt[Ct*2],Y=Dt[Ct*2+1],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,z=D[Ct%16],Y=j[Ct%16],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,yt=it&65535|ht<<16,xt=ot&65535|nt<<16,z=yt,Y=xt,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=(Qt>>>28|ge<<32-28)^(ge>>>34-32|Qt<<32-(34-32))^(ge>>>39-32|Qt<<32-(39-32)),Y=(ge>>>28|Qt<<32-28)^(Qt>>>34-32|ge<<32-(34-32))^(Qt>>>39-32|ge<<32-(39-32)),ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,z=Qt&he^Qt&ve^he&ve,Y=ge&Ce^ge&Be^Ce&Be,ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,kt=it&65535|ht<<16,Tt=ot&65535|nt<<16,z=dt,Y=Wt,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=yt,Y=xt,ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,dt=it&65535|ht<<16,Wt=ot&65535|nt<<16,he=U,ve=V,ue=rt,R=dt,we=mt,_e=le,Fe=bt,Qt=kt,Ce=qt,Be=Yt,ze=Vt,Re=Wt,He=Kt,Ke=Ht,Ve=Et,ge=Tt,Ct%16===15)for(gt=0;gt<16;gt++)z=D[gt],Y=j[gt],ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=D[(gt+9)%16],Y=j[(gt+9)%16],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,yt=D[(gt+1)%16],xt=j[(gt+1)%16],z=(yt>>>1|xt<<32-1)^(yt>>>8|xt<<32-8)^yt>>>7,Y=(xt>>>1|yt<<32-1)^(xt>>>8|yt<<32-8)^(xt>>>7|yt<<32-7),ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,yt=D[(gt+14)%16],xt=j[(gt+14)%16],z=(yt>>>19|xt<<32-19)^(xt>>>61-32|yt<<32-(61-32))^yt>>>6,Y=(xt>>>19|yt<<32-19)^(yt>>>61-32|xt<<32-(61-32))^(xt>>>6|yt<<32-6),ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,D[gt]=it&65535|ht<<16,j[gt]=ot&65535|nt<<16;z=Qt,Y=ge,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=C[0],Y=_[0],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,C[0]=Qt=it&65535|ht<<16,_[0]=ge=ot&65535|nt<<16,z=he,Y=Ce,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=C[1],Y=_[1],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,C[1]=he=it&65535|ht<<16,_[1]=Ce=ot&65535|nt<<16,z=ve,Y=Be,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=C[2],Y=_[2],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,C[2]=ve=it&65535|ht<<16,_[2]=Be=ot&65535|nt<<16,z=ue,Y=ze,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=C[3],Y=_[3],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,C[3]=ue=it&65535|ht<<16,_[3]=ze=ot&65535|nt<<16,z=R,Y=Re,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=C[4],Y=_[4],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,C[4]=R=it&65535|ht<<16,_[4]=Re=ot&65535|nt<<16,z=we,Y=He,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=C[5],Y=_[5],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,C[5]=we=it&65535|ht<<16,_[5]=He=ot&65535|nt<<16,z=_e,Y=Ke,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=C[6],Y=_[6],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,C[6]=_e=it&65535|ht<<16,_[6]=Ke=ot&65535|nt<<16,z=Fe,Y=Ve,ot=Y&65535,nt=Y>>>16,it=z&65535,ht=z>>>16,z=C[7],Y=_[7],ot+=Y&65535,nt+=Y>>>16,it+=z&65535,ht+=z>>>16,nt+=ot>>>16,it+=nt>>>16,ht+=it>>>16,C[7]=Fe=it&65535|ht<<16,_[7]=Ve=ot&65535|nt<<16,Xe+=128,y-=128}return y}function xe(C,_,S){var y=new Int32Array(8),D=new Int32Array(8),j=new Uint8Array(256),U,V=S;for(y[0]=1779033703,y[1]=3144134277,y[2]=1013904242,y[3]=2773480762,y[4]=1359893119,y[5]=2600822924,y[6]=528734635,y[7]=1541459225,D[0]=4089235720,D[1]=2227873595,D[2]=4271175723,D[3]=1595750129,D[4]=2917565137,D[5]=725511199,D[6]=4215389547,D[7]=327033209,ne(y,D,_,S),S%=128,U=0;U<S;U++)j[U]=_[V-S+U];for(j[S]=128,S=256-128*(S<112?1:0),j[S-9]=0,Z(j,S-8,V/536870912|0,V<<3),ne(y,D,j,S),U=0;U<8;U++)Z(C,8*U,y[U],D[U]);return 0}function Ft(C,_){var S=e(),y=e(),D=e(),j=e(),U=e(),V=e(),rt=e(),dt=e(),mt=e();W(S,C[1],C[0]),W(mt,_[1],_[0]),K(S,S,mt),O(y,C[0],C[1]),O(mt,_[0],_[1]),K(y,y,mt),K(D,C[3],_[3]),K(D,D,I),K(j,C[2],_[2]),O(j,j,j),W(U,y,S),W(V,j,D),O(rt,j,D),O(dt,y,S),K(C[0],U,V),K(C[1],dt,rt),K(C[2],rt,V),K(C[3],U,dt)}function Jt(C,_,S){var y;for(y=0;y<4;y++)v(C[y],_[y],S)}function pe(C,_){var S=e(),y=e(),D=e();re(D,_[2]),K(S,_[0],D),K(y,_[1],D),f(C,y),C[31]^=m(S)<<7}function St(C,_,S){var y,D;for(p(C[0],u),p(C[1],g),p(C[2],g),p(C[3],u),D=255;D>=0;--D)y=S[D/8|0]>>(D&7)&1,Jt(C,_,y),Ft(_,C),Ft(C,C),Jt(C,_,y)}function te(C,_){var S=[e(),e(),e(),e()];p(S[0],N),p(S[1],L),p(S[2],g),K(S[3],N,L),St(C,S,_)}function ye(C,_,S){var y=new Uint8Array(64),D=[e(),e(),e(),e()],j;for(S||n(_,32),xe(y,_,32),y[0]&=248,y[31]&=127,y[31]|=64,te(D,y),pe(C,D),j=0;j<32;j++)_[j+32]=C[j];return 0}var It=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function M(C,_){var S,y,D,j;for(y=63;y>=32;--y){for(S=0,D=y-32,j=y-12;D<j;++D)_[D]+=S-16*_[y]*It[D-(y-32)],S=Math.floor((_[D]+128)/256),_[D]-=S*256;_[D]+=S,_[y]=0}for(S=0,D=0;D<32;D++)_[D]+=S-(_[31]>>4)*It[D],S=_[D]>>8,_[D]&=255;for(D=0;D<32;D++)_[D]-=S*It[D];for(y=0;y<32;y++)_[y+1]+=_[y]>>8,C[y]=_[y]&255}function x(C){var _=new Float64Array(64),S;for(S=0;S<64;S++)_[S]=C[S];for(S=0;S<64;S++)C[S]=0;M(C,_)}function A(C,_,S,y){var D=new Uint8Array(64),j=new Uint8Array(64),U=new Uint8Array(64),V,rt,dt=new Float64Array(64),mt=[e(),e(),e(),e()];xe(D,y,32),D[0]&=248,D[31]&=127,D[31]|=64;var le=S+64;for(V=0;V<S;V++)C[64+V]=_[V];for(V=0;V<32;V++)C[32+V]=D[32+V];for(xe(U,C.subarray(32),S+32),x(U),te(mt,U),pe(C,mt),V=32;V<64;V++)C[V]=y[V];for(xe(j,C,S+64),x(j),V=0;V<64;V++)dt[V]=0;for(V=0;V<32;V++)dt[V]=U[V];for(V=0;V<32;V++)for(rt=0;rt<32;rt++)dt[V+rt]+=j[V]*D[rt];return M(C.subarray(32),dt),le}function T(C,_){var S=e(),y=e(),D=e(),j=e(),U=e(),V=e(),rt=e();return p(C[2],g),B(C[1],_),pt(D,C[1]),K(j,D,F),W(D,D,C[2]),O(j,C[2],j),pt(U,j),pt(V,U),K(rt,V,U),K(S,rt,D),K(S,S,j),vt(S,S),K(S,S,D),K(S,S,j),K(S,S,j),K(C[0],S,j),pt(y,C[0]),K(y,y,j),d(y,D)&&K(C[0],C[0],q),pt(y,C[0]),K(y,y,j),d(y,D)?-1:(m(C[0])===_[31]>>7&&W(C[0],u,C[0]),K(C[3],C[0],C[1]),0)}function P(C,_,S,y){var D,j=new Uint8Array(32),U=new Uint8Array(64),V=[e(),e(),e(),e()],rt=[e(),e(),e(),e()];if(S<64||T(rt,y))return-1;for(D=0;D<S;D++)C[D]=_[D];for(D=0;D<32;D++)C[D+32]=y[D];if(xe(U,C,S),x(U),St(V,rt,U),te(rt,_.subarray(32)),Ft(V,rt),pe(j,V),S-=64,X(_,0,j,0)){for(D=0;D<S;D++)C[D]=0;return-1}for(D=0;D<S;D++)C[D]=_[D+64];return S}var $=32,H=24,Mt=32,ct=16,At=32,zt=32,ft=32,ee=32,De=32,Ut=H,fe=Mt,Ue=ct,Bt=64,Xt=32,Me=64,Nt=32,ae=64;t.lowlevel={crypto_core_hsalsa20:J,crypto_stream_xor:E,crypto_stream:Gt,crypto_stream_salsa20_xor:ut,crypto_stream_salsa20:at,crypto_onetimeauth:l,crypto_onetimeauth_verify:o,crypto_verify_16:et,crypto_verify_32:X,crypto_secretbox:h,crypto_secretbox_open:c,crypto_scalarmult:Ot,crypto_scalarmult_base:Ae,crypto_box_beforenm:Zt,crypto_box_afternm:Ee,crypto_box:oe,crypto_box_open:Se,crypto_box_keypair:Rt,crypto_hash:xe,crypto_sign:A,crypto_sign_keypair:ye,crypto_sign_open:P,crypto_secretbox_KEYBYTES:$,crypto_secretbox_NONCEBYTES:H,crypto_secretbox_ZEROBYTES:Mt,crypto_secretbox_BOXZEROBYTES:ct,crypto_scalarmult_BYTES:At,crypto_scalarmult_SCALARBYTES:zt,crypto_box_PUBLICKEYBYTES:ft,crypto_box_SECRETKEYBYTES:ee,crypto_box_BEFORENMBYTES:De,crypto_box_NONCEBYTES:Ut,crypto_box_ZEROBYTES:fe,crypto_box_BOXZEROBYTES:Ue,crypto_sign_BYTES:Bt,crypto_sign_PUBLICKEYBYTES:Xt,crypto_sign_SECRETKEYBYTES:Me,crypto_sign_SEEDBYTES:Nt,crypto_hash_BYTES:ae,gf:e,D:F,L:It,pack25519:f,unpack25519:B,M:K,A:O,S:pt,Z:W,pow2523:vt,add:Ft,set25519:p,modL:M,scalarmult:St,scalarbase:te};function Ie(C,_){if(C.length!==$)throw new Error("bad key size");if(_.length!==H)throw new Error("bad nonce size")}function Lt(C,_){if(C.length!==ft)throw new Error("bad public key size");if(_.length!==ee)throw new Error("bad secret key size")}function jt(){for(var C=0;C<arguments.length;C++)if(!(arguments[C]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Te(C){for(var _=0;_<C.length;_++)C[_]=0}t.randomBytes=function(C){var _=new Uint8Array(C);return n(_,C),_},t.secretbox=function(C,_,S){jt(C,_,S),Ie(S,_);for(var y=new Uint8Array(Mt+C.length),D=new Uint8Array(y.length),j=0;j<C.length;j++)y[j+Mt]=C[j];return h(D,y,y.length,_,S),D.subarray(ct)},t.secretbox.open=function(C,_,S){jt(C,_,S),Ie(S,_);for(var y=new Uint8Array(ct+C.length),D=new Uint8Array(y.length),j=0;j<C.length;j++)y[j+ct]=C[j];return y.length<32||c(D,y,y.length,_,S)!==0?null:D.subarray(Mt)},t.secretbox.keyLength=$,t.secretbox.nonceLength=H,t.secretbox.overheadLength=ct,t.scalarMult=function(C,_){if(jt(C,_),C.length!==zt)throw new Error("bad n size");if(_.length!==At)throw new Error("bad p size");var S=new Uint8Array(At);return Ot(S,C,_),S},t.scalarMult.base=function(C){if(jt(C),C.length!==zt)throw new Error("bad n size");var _=new Uint8Array(At);return Ae(_,C),_},t.scalarMult.scalarLength=zt,t.scalarMult.groupElementLength=At,t.box=function(C,_,S,y){var D=t.box.before(S,y);return t.secretbox(C,_,D)},t.box.before=function(C,_){jt(C,_),Lt(C,_);var S=new Uint8Array(De);return Zt(S,C,_),S},t.box.after=t.secretbox,t.box.open=function(C,_,S,y){var D=t.box.before(S,y);return t.secretbox.open(C,_,D)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var C=new Uint8Array(ft),_=new Uint8Array(ee);return Rt(C,_),{publicKey:C,secretKey:_}},t.box.keyPair.fromSecretKey=function(C){if(jt(C),C.length!==ee)throw new Error("bad secret key size");var _=new Uint8Array(ft);return Ae(_,C),{publicKey:_,secretKey:new Uint8Array(C)}},t.box.publicKeyLength=ft,t.box.secretKeyLength=ee,t.box.sharedKeyLength=De,t.box.nonceLength=Ut,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(C,_){if(jt(C,_),_.length!==Me)throw new Error("bad secret key size");var S=new Uint8Array(Bt+C.length);return A(S,C,C.length,_),S},t.sign.open=function(C,_){if(jt(C,_),_.length!==Xt)throw new Error("bad public key size");var S=new Uint8Array(C.length),y=P(S,C,C.length,_);if(y<0)return null;for(var D=new Uint8Array(y),j=0;j<D.length;j++)D[j]=S[j];return D},t.sign.detached=function(C,_){for(var S=t.sign(C,_),y=new Uint8Array(Bt),D=0;D<y.length;D++)y[D]=S[D];return y},t.sign.detached.verify=function(C,_,S){if(jt(C,_,S),_.length!==Bt)throw new Error("bad signature size");if(S.length!==Xt)throw new Error("bad public key size");var y=new Uint8Array(Bt+C.length),D=new Uint8Array(Bt+C.length),j;for(j=0;j<Bt;j++)y[j]=_[j];for(j=0;j<C.length;j++)y[j+Bt]=C[j];return P(D,y,y.length,S)>=0},t.sign.keyPair=function(){var C=new Uint8Array(Xt),_=new Uint8Array(Me);return ye(C,_),{publicKey:C,secretKey:_}},t.sign.keyPair.fromSecretKey=function(C){if(jt(C),C.length!==Me)throw new Error("bad secret key size");for(var _=new Uint8Array(Xt),S=0;S<_.length;S++)_[S]=C[32+S];return{publicKey:_,secretKey:new Uint8Array(C)}},t.sign.keyPair.fromSeed=function(C){if(jt(C),C.length!==Nt)throw new Error("bad seed size");for(var _=new Uint8Array(Xt),S=new Uint8Array(Me),y=0;y<32;y++)S[y]=C[y];return ye(_,S,!0),{publicKey:_,secretKey:S}},t.sign.publicKeyLength=Xt,t.sign.secretKeyLength=Me,t.sign.seedLength=Nt,t.sign.signatureLength=Bt,t.hash=function(C){jt(C);var _=new Uint8Array(ae);return xe(_,C,C.length),_},t.hash.hashLength=ae,t.verify=function(C,_){return jt(C,_),C.length===0||_.length===0||C.length!==_.length?!1:tt(C,0,_,0,C.length)===0},t.setPRNG=function(C){n=C},function(){var C=typeof self<"u"?self.crypto||self.msCrypto:null;if(C&&C.getRandomValues){var _=65536;t.setPRNG(function(S,y){var D,j=new Uint8Array(y);for(D=0;D<y;D+=_)C.getRandomValues(j.subarray(D,D+Math.min(y-D,_)));for(D=0;D<y;D++)S[D]=j[D];Te(j)})}else typeof Lo<"u"&&(C=Po,C&&C.randomBytes&&t.setPRNG(function(S,y){var D,j=C.randomBytes(y);for(D=0;D<y;D++)S[D]=j[D];Te(j)}))}()})(r.exports?r.exports:self.nacl=self.nacl||{})})(bf);var Ef=bf.exports;const ci=ti(Ef);var $o={exports:{}};$o.exports;(function(r){(function(t,e){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function s(E,a){E.super_=a;var l=function(){};l.prototype=a.prototype,E.prototype=new l,E.prototype.constructor=E}function i(E,a,l){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(E||0,a||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{u=Lo("buffer").Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,o){if(typeof a=="number")return this._initNumber(a,l,o);if(typeof a=="object")return this._initArray(a,l,o);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var h=0;a[0]==="-"&&h++,l===16?this._parseHex(a,h):this._parseBase(a,l,h),a[0]==="-"&&(this.negative=1),this.strip(),o==="le"&&this._initArray(this.toArray(),l,o)},i.prototype._initNumber=function(a,l,o){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),o==="le"&&this._initArray(this.toArray(),l,o)},i.prototype._initArray=function(a,l,o){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var c,p,b=0;if(o==="be")for(h=a.length-1,c=0;h>=0;h-=3)p=a[h]|a[h-1]<<8|a[h-2]<<16,this.words[c]|=p<<b&67108863,this.words[c+1]=p>>>26-b&67108863,b+=24,b>=26&&(b-=26,c++);else if(o==="le")for(h=0,c=0;h<a.length;h+=3)p=a[h]|a[h+1]<<8|a[h+2]<<16,this.words[c]|=p<<b&67108863,this.words[c+1]=p>>>26-b&67108863,b+=24,b>=26&&(b-=26,c++);return this.strip()};function g(E,a,l){for(var o=0,h=Math.min(E.length,l),c=a;c<h;c++){var p=E.charCodeAt(c)-48;o<<=4,p>=49&&p<=54?o|=p-49+10:p>=17&&p<=22?o|=p-17+10:o|=p&15}return o}i.prototype._parseHex=function(a,l){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var h,c,p=0;for(o=a.length-6,h=0;o>=l;o-=6)c=g(a,o,o+6),this.words[h]|=c<<p&67108863,this.words[h+1]|=c>>>26-p&4194303,p+=24,p>=26&&(p-=26,h++);o+6!==l&&(c=g(a,l,o+6),this.words[h]|=c<<p&67108863,this.words[h+1]|=c>>>26-p&4194303),this.strip()};function w(E,a,l,o){for(var h=0,c=Math.min(E.length,l),p=a;p<c;p++){var b=E.charCodeAt(p)-48;h*=o,b>=49?h+=b-49+10:b>=17?h+=b-17+10:h+=b}return h}i.prototype._parseBase=function(a,l,o){this.words=[0],this.length=1;for(var h=0,c=1;c<=67108863;c*=l)h++;h--,c=c/l|0;for(var p=a.length-o,b=p%h,v=Math.min(p,p-b)+o,f=0,d=o;d<v;d+=h)f=w(a,d,d+h,l),this.imuln(c),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(b!==0){var m=1;for(f=w(a,d,a.length,l),d=0;d<b;d++)m*=l;this.imuln(m),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var F=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var o;if(a===16||a==="hex"){o="";for(var h=0,c=0,p=0;p<this.length;p++){var b=this.words[p],v=((b<<h|c)&16777215).toString(16);c=b>>>24-h&16777215,c!==0||p!==this.length-1?o=F[6-v.length]+v+o:o=v+o,h+=2,h>=26&&(h-=26,p--)}for(c!==0&&(o=c.toString(16)+o);o.length%l!==0;)o="0"+o;return this.negative!==0&&(o="-"+o),o}if(a===(a|0)&&a>=2&&a<=36){var f=I[a],d=N[a];o="";var m=this.clone();for(m.negative=0;!m.isZero();){var B=m.modn(d).toString(a);m=m.idivn(d),m.isZero()?o=B+o:o=F[f-B.length]+B+o}for(this.isZero()&&(o="0"+o);o.length%l!==0;)o="0"+o;return this.negative!==0&&(o="-"+o),o}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(a,l){return n(typeof u<"u"),this.toArrayLike(u,a,l)},i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)},i.prototype.toArrayLike=function(a,l,o){var h=this.byteLength(),c=o||Math.max(1,h);n(h<=c,"byte array longer than desired length"),n(c>0,"Requested array length <= 0"),this.strip();var p=l==="le",b=new a(c),v,f,d=this.clone();if(p){for(f=0;!d.isZero();f++)v=d.andln(255),d.iushrn(8),b[f]=v;for(;f<c;f++)b[f]=0}else{for(f=0;f<c-h;f++)b[f]=0;for(f=0;!d.isZero();f++)v=d.andln(255),d.iushrn(8),b[c-f-1]=v}return b},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,o=0;return l>=4096&&(o+=13,l>>>=13),l>=64&&(o+=7,l>>>=7),l>=8&&(o+=4,l>>>=4),l>=2&&(o+=2,l>>>=2),o+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,o=0;return l&8191||(o+=13,l>>>=13),l&127||(o+=7,l>>>=7),l&15||(o+=4,l>>>=4),l&3||(o+=2,l>>>=2),l&1||o++,o},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function L(E){for(var a=new Array(E.bitLength()),l=0;l<a.length;l++){var o=l/26|0,h=l%26;a[l]=(E.words[o]&1<<h)>>>h}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var o=this._zeroBits(this.words[l]);if(a+=o,o!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var o=0;o<l.length;o++)this.words[o]=this.words[o]&a.words[o];return this.length=l.length,this.strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,o;this.length>a.length?(l=this,o=a):(l=a,o=this);for(var h=0;h<o.length;h++)this.words[h]=l.words[h]^o.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,o=a%26;this._expand(l),o>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return o>0&&(this.words[h]=~this.words[h]&67108863>>26-o),this.strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var o=a/26|0,h=a%26;return this._expand(o+1),l?this.words[o]=this.words[o]|1<<h:this.words[o]=this.words[o]&~(1<<h),this.strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var o,h;this.length>a.length?(o=this,h=a):(o=a,h=this);for(var c=0,p=0;p<h.length;p++)l=(o.words[p]|0)+(h.words[p]|0)+c,this.words[p]=l&67108863,c=l>>>26;for(;c!==0&&p<o.length;p++)l=(o.words[p]|0)+c,this.words[p]=l&67108863,c=l>>>26;if(this.length=o.length,c!==0)this.words[this.length]=c,this.length++;else if(o!==this)for(;p<o.length;p++)this.words[p]=o.words[p];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var o=this.cmp(a);if(o===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,c;o>0?(h=this,c=a):(h=a,c=this);for(var p=0,b=0;b<c.length;b++)l=(h.words[b]|0)-(c.words[b]|0)+p,p=l>>26,this.words[b]=l&67108863;for(;p!==0&&b<h.length;b++)l=(h.words[b]|0)+p,p=l>>26,this.words[b]=l&67108863;if(p===0&&b<h.length&&h!==this)for(;b<h.length;b++)this.words[b]=h.words[b];return this.length=Math.max(this.length,b),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function q(E,a,l){l.negative=a.negative^E.negative;var o=E.length+a.length|0;l.length=o,o=o-1|0;var h=E.words[0]|0,c=a.words[0]|0,p=h*c,b=p&67108863,v=p/67108864|0;l.words[0]=b;for(var f=1;f<o;f++){for(var d=v>>>26,m=v&67108863,B=Math.min(f,a.length-1),O=Math.max(0,f-E.length+1);O<=B;O++){var W=f-O|0;h=E.words[W]|0,c=a.words[O]|0,p=h*c+m,d+=p/67108864|0,m=p&67108863}l.words[f]=m|0,v=d|0}return v!==0?l.words[f]=v|0:l.length--,l.strip()}var Z=function(a,l,o){var h=a.words,c=l.words,p=o.words,b=0,v,f,d,m=h[0]|0,B=m&8191,O=m>>>13,W=h[1]|0,K=W&8191,pt=W>>>13,re=h[2]|0,vt=re&8191,Ot=re>>>13,Ae=h[3]|0,Rt=Ae&8191,Zt=Ae>>>13,Ee=h[4]|0,_t=Ee&8191,oe=Ee>>>13,Se=h[5]|0,Dt=Se&8191,ne=Se>>>13,xe=h[6]|0,Ft=xe&8191,Jt=xe>>>13,pe=h[7]|0,St=pe&8191,te=pe>>>13,ye=h[8]|0,It=ye&8191,M=ye>>>13,x=h[9]|0,A=x&8191,T=x>>>13,P=c[0]|0,$=P&8191,H=P>>>13,Mt=c[1]|0,ct=Mt&8191,At=Mt>>>13,zt=c[2]|0,ft=zt&8191,ee=zt>>>13,De=c[3]|0,Ut=De&8191,fe=De>>>13,Ue=c[4]|0,Bt=Ue&8191,Xt=Ue>>>13,Me=c[5]|0,Nt=Me&8191,ae=Me>>>13,Ie=c[6]|0,Lt=Ie&8191,jt=Ie>>>13,Te=c[7]|0,C=Te&8191,_=Te>>>13,S=c[8]|0,y=S&8191,D=S>>>13,j=c[9]|0,U=j&8191,V=j>>>13;o.negative=a.negative^l.negative,o.length=19,v=Math.imul(B,$),f=Math.imul(B,H),f=f+Math.imul(O,$)|0,d=Math.imul(O,H);var rt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(rt>>>26)|0,rt&=67108863,v=Math.imul(K,$),f=Math.imul(K,H),f=f+Math.imul(pt,$)|0,d=Math.imul(pt,H),v=v+Math.imul(B,ct)|0,f=f+Math.imul(B,At)|0,f=f+Math.imul(O,ct)|0,d=d+Math.imul(O,At)|0;var dt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(dt>>>26)|0,dt&=67108863,v=Math.imul(vt,$),f=Math.imul(vt,H),f=f+Math.imul(Ot,$)|0,d=Math.imul(Ot,H),v=v+Math.imul(K,ct)|0,f=f+Math.imul(K,At)|0,f=f+Math.imul(pt,ct)|0,d=d+Math.imul(pt,At)|0,v=v+Math.imul(B,ft)|0,f=f+Math.imul(B,ee)|0,f=f+Math.imul(O,ft)|0,d=d+Math.imul(O,ee)|0;var mt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(mt>>>26)|0,mt&=67108863,v=Math.imul(Rt,$),f=Math.imul(Rt,H),f=f+Math.imul(Zt,$)|0,d=Math.imul(Zt,H),v=v+Math.imul(vt,ct)|0,f=f+Math.imul(vt,At)|0,f=f+Math.imul(Ot,ct)|0,d=d+Math.imul(Ot,At)|0,v=v+Math.imul(K,ft)|0,f=f+Math.imul(K,ee)|0,f=f+Math.imul(pt,ft)|0,d=d+Math.imul(pt,ee)|0,v=v+Math.imul(B,Ut)|0,f=f+Math.imul(B,fe)|0,f=f+Math.imul(O,Ut)|0,d=d+Math.imul(O,fe)|0;var le=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(le>>>26)|0,le&=67108863,v=Math.imul(_t,$),f=Math.imul(_t,H),f=f+Math.imul(oe,$)|0,d=Math.imul(oe,H),v=v+Math.imul(Rt,ct)|0,f=f+Math.imul(Rt,At)|0,f=f+Math.imul(Zt,ct)|0,d=d+Math.imul(Zt,At)|0,v=v+Math.imul(vt,ft)|0,f=f+Math.imul(vt,ee)|0,f=f+Math.imul(Ot,ft)|0,d=d+Math.imul(Ot,ee)|0,v=v+Math.imul(K,Ut)|0,f=f+Math.imul(K,fe)|0,f=f+Math.imul(pt,Ut)|0,d=d+Math.imul(pt,fe)|0,v=v+Math.imul(B,Bt)|0,f=f+Math.imul(B,Xt)|0,f=f+Math.imul(O,Bt)|0,d=d+Math.imul(O,Xt)|0;var bt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(bt>>>26)|0,bt&=67108863,v=Math.imul(Dt,$),f=Math.imul(Dt,H),f=f+Math.imul(ne,$)|0,d=Math.imul(ne,H),v=v+Math.imul(_t,ct)|0,f=f+Math.imul(_t,At)|0,f=f+Math.imul(oe,ct)|0,d=d+Math.imul(oe,At)|0,v=v+Math.imul(Rt,ft)|0,f=f+Math.imul(Rt,ee)|0,f=f+Math.imul(Zt,ft)|0,d=d+Math.imul(Zt,ee)|0,v=v+Math.imul(vt,Ut)|0,f=f+Math.imul(vt,fe)|0,f=f+Math.imul(Ot,Ut)|0,d=d+Math.imul(Ot,fe)|0,v=v+Math.imul(K,Bt)|0,f=f+Math.imul(K,Xt)|0,f=f+Math.imul(pt,Bt)|0,d=d+Math.imul(pt,Xt)|0,v=v+Math.imul(B,Nt)|0,f=f+Math.imul(B,ae)|0,f=f+Math.imul(O,Nt)|0,d=d+Math.imul(O,ae)|0;var kt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(kt>>>26)|0,kt&=67108863,v=Math.imul(Ft,$),f=Math.imul(Ft,H),f=f+Math.imul(Jt,$)|0,d=Math.imul(Jt,H),v=v+Math.imul(Dt,ct)|0,f=f+Math.imul(Dt,At)|0,f=f+Math.imul(ne,ct)|0,d=d+Math.imul(ne,At)|0,v=v+Math.imul(_t,ft)|0,f=f+Math.imul(_t,ee)|0,f=f+Math.imul(oe,ft)|0,d=d+Math.imul(oe,ee)|0,v=v+Math.imul(Rt,Ut)|0,f=f+Math.imul(Rt,fe)|0,f=f+Math.imul(Zt,Ut)|0,d=d+Math.imul(Zt,fe)|0,v=v+Math.imul(vt,Bt)|0,f=f+Math.imul(vt,Xt)|0,f=f+Math.imul(Ot,Bt)|0,d=d+Math.imul(Ot,Xt)|0,v=v+Math.imul(K,Nt)|0,f=f+Math.imul(K,ae)|0,f=f+Math.imul(pt,Nt)|0,d=d+Math.imul(pt,ae)|0,v=v+Math.imul(B,Lt)|0,f=f+Math.imul(B,jt)|0,f=f+Math.imul(O,Lt)|0,d=d+Math.imul(O,jt)|0;var qt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(qt>>>26)|0,qt&=67108863,v=Math.imul(St,$),f=Math.imul(St,H),f=f+Math.imul(te,$)|0,d=Math.imul(te,H),v=v+Math.imul(Ft,ct)|0,f=f+Math.imul(Ft,At)|0,f=f+Math.imul(Jt,ct)|0,d=d+Math.imul(Jt,At)|0,v=v+Math.imul(Dt,ft)|0,f=f+Math.imul(Dt,ee)|0,f=f+Math.imul(ne,ft)|0,d=d+Math.imul(ne,ee)|0,v=v+Math.imul(_t,Ut)|0,f=f+Math.imul(_t,fe)|0,f=f+Math.imul(oe,Ut)|0,d=d+Math.imul(oe,fe)|0,v=v+Math.imul(Rt,Bt)|0,f=f+Math.imul(Rt,Xt)|0,f=f+Math.imul(Zt,Bt)|0,d=d+Math.imul(Zt,Xt)|0,v=v+Math.imul(vt,Nt)|0,f=f+Math.imul(vt,ae)|0,f=f+Math.imul(Ot,Nt)|0,d=d+Math.imul(Ot,ae)|0,v=v+Math.imul(K,Lt)|0,f=f+Math.imul(K,jt)|0,f=f+Math.imul(pt,Lt)|0,d=d+Math.imul(pt,jt)|0,v=v+Math.imul(B,C)|0,f=f+Math.imul(B,_)|0,f=f+Math.imul(O,C)|0,d=d+Math.imul(O,_)|0;var Yt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,v=Math.imul(It,$),f=Math.imul(It,H),f=f+Math.imul(M,$)|0,d=Math.imul(M,H),v=v+Math.imul(St,ct)|0,f=f+Math.imul(St,At)|0,f=f+Math.imul(te,ct)|0,d=d+Math.imul(te,At)|0,v=v+Math.imul(Ft,ft)|0,f=f+Math.imul(Ft,ee)|0,f=f+Math.imul(Jt,ft)|0,d=d+Math.imul(Jt,ee)|0,v=v+Math.imul(Dt,Ut)|0,f=f+Math.imul(Dt,fe)|0,f=f+Math.imul(ne,Ut)|0,d=d+Math.imul(ne,fe)|0,v=v+Math.imul(_t,Bt)|0,f=f+Math.imul(_t,Xt)|0,f=f+Math.imul(oe,Bt)|0,d=d+Math.imul(oe,Xt)|0,v=v+Math.imul(Rt,Nt)|0,f=f+Math.imul(Rt,ae)|0,f=f+Math.imul(Zt,Nt)|0,d=d+Math.imul(Zt,ae)|0,v=v+Math.imul(vt,Lt)|0,f=f+Math.imul(vt,jt)|0,f=f+Math.imul(Ot,Lt)|0,d=d+Math.imul(Ot,jt)|0,v=v+Math.imul(K,C)|0,f=f+Math.imul(K,_)|0,f=f+Math.imul(pt,C)|0,d=d+Math.imul(pt,_)|0,v=v+Math.imul(B,y)|0,f=f+Math.imul(B,D)|0,f=f+Math.imul(O,y)|0,d=d+Math.imul(O,D)|0;var Vt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,v=Math.imul(A,$),f=Math.imul(A,H),f=f+Math.imul(T,$)|0,d=Math.imul(T,H),v=v+Math.imul(It,ct)|0,f=f+Math.imul(It,At)|0,f=f+Math.imul(M,ct)|0,d=d+Math.imul(M,At)|0,v=v+Math.imul(St,ft)|0,f=f+Math.imul(St,ee)|0,f=f+Math.imul(te,ft)|0,d=d+Math.imul(te,ee)|0,v=v+Math.imul(Ft,Ut)|0,f=f+Math.imul(Ft,fe)|0,f=f+Math.imul(Jt,Ut)|0,d=d+Math.imul(Jt,fe)|0,v=v+Math.imul(Dt,Bt)|0,f=f+Math.imul(Dt,Xt)|0,f=f+Math.imul(ne,Bt)|0,d=d+Math.imul(ne,Xt)|0,v=v+Math.imul(_t,Nt)|0,f=f+Math.imul(_t,ae)|0,f=f+Math.imul(oe,Nt)|0,d=d+Math.imul(oe,ae)|0,v=v+Math.imul(Rt,Lt)|0,f=f+Math.imul(Rt,jt)|0,f=f+Math.imul(Zt,Lt)|0,d=d+Math.imul(Zt,jt)|0,v=v+Math.imul(vt,C)|0,f=f+Math.imul(vt,_)|0,f=f+Math.imul(Ot,C)|0,d=d+Math.imul(Ot,_)|0,v=v+Math.imul(K,y)|0,f=f+Math.imul(K,D)|0,f=f+Math.imul(pt,y)|0,d=d+Math.imul(pt,D)|0,v=v+Math.imul(B,U)|0,f=f+Math.imul(B,V)|0,f=f+Math.imul(O,U)|0,d=d+Math.imul(O,V)|0;var Wt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,v=Math.imul(A,ct),f=Math.imul(A,At),f=f+Math.imul(T,ct)|0,d=Math.imul(T,At),v=v+Math.imul(It,ft)|0,f=f+Math.imul(It,ee)|0,f=f+Math.imul(M,ft)|0,d=d+Math.imul(M,ee)|0,v=v+Math.imul(St,Ut)|0,f=f+Math.imul(St,fe)|0,f=f+Math.imul(te,Ut)|0,d=d+Math.imul(te,fe)|0,v=v+Math.imul(Ft,Bt)|0,f=f+Math.imul(Ft,Xt)|0,f=f+Math.imul(Jt,Bt)|0,d=d+Math.imul(Jt,Xt)|0,v=v+Math.imul(Dt,Nt)|0,f=f+Math.imul(Dt,ae)|0,f=f+Math.imul(ne,Nt)|0,d=d+Math.imul(ne,ae)|0,v=v+Math.imul(_t,Lt)|0,f=f+Math.imul(_t,jt)|0,f=f+Math.imul(oe,Lt)|0,d=d+Math.imul(oe,jt)|0,v=v+Math.imul(Rt,C)|0,f=f+Math.imul(Rt,_)|0,f=f+Math.imul(Zt,C)|0,d=d+Math.imul(Zt,_)|0,v=v+Math.imul(vt,y)|0,f=f+Math.imul(vt,D)|0,f=f+Math.imul(Ot,y)|0,d=d+Math.imul(Ot,D)|0,v=v+Math.imul(K,U)|0,f=f+Math.imul(K,V)|0,f=f+Math.imul(pt,U)|0,d=d+Math.imul(pt,V)|0;var Kt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,v=Math.imul(A,ft),f=Math.imul(A,ee),f=f+Math.imul(T,ft)|0,d=Math.imul(T,ee),v=v+Math.imul(It,Ut)|0,f=f+Math.imul(It,fe)|0,f=f+Math.imul(M,Ut)|0,d=d+Math.imul(M,fe)|0,v=v+Math.imul(St,Bt)|0,f=f+Math.imul(St,Xt)|0,f=f+Math.imul(te,Bt)|0,d=d+Math.imul(te,Xt)|0,v=v+Math.imul(Ft,Nt)|0,f=f+Math.imul(Ft,ae)|0,f=f+Math.imul(Jt,Nt)|0,d=d+Math.imul(Jt,ae)|0,v=v+Math.imul(Dt,Lt)|0,f=f+Math.imul(Dt,jt)|0,f=f+Math.imul(ne,Lt)|0,d=d+Math.imul(ne,jt)|0,v=v+Math.imul(_t,C)|0,f=f+Math.imul(_t,_)|0,f=f+Math.imul(oe,C)|0,d=d+Math.imul(oe,_)|0,v=v+Math.imul(Rt,y)|0,f=f+Math.imul(Rt,D)|0,f=f+Math.imul(Zt,y)|0,d=d+Math.imul(Zt,D)|0,v=v+Math.imul(vt,U)|0,f=f+Math.imul(vt,V)|0,f=f+Math.imul(Ot,U)|0,d=d+Math.imul(Ot,V)|0;var Ht=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,v=Math.imul(A,Ut),f=Math.imul(A,fe),f=f+Math.imul(T,Ut)|0,d=Math.imul(T,fe),v=v+Math.imul(It,Bt)|0,f=f+Math.imul(It,Xt)|0,f=f+Math.imul(M,Bt)|0,d=d+Math.imul(M,Xt)|0,v=v+Math.imul(St,Nt)|0,f=f+Math.imul(St,ae)|0,f=f+Math.imul(te,Nt)|0,d=d+Math.imul(te,ae)|0,v=v+Math.imul(Ft,Lt)|0,f=f+Math.imul(Ft,jt)|0,f=f+Math.imul(Jt,Lt)|0,d=d+Math.imul(Jt,jt)|0,v=v+Math.imul(Dt,C)|0,f=f+Math.imul(Dt,_)|0,f=f+Math.imul(ne,C)|0,d=d+Math.imul(ne,_)|0,v=v+Math.imul(_t,y)|0,f=f+Math.imul(_t,D)|0,f=f+Math.imul(oe,y)|0,d=d+Math.imul(oe,D)|0,v=v+Math.imul(Rt,U)|0,f=f+Math.imul(Rt,V)|0,f=f+Math.imul(Zt,U)|0,d=d+Math.imul(Zt,V)|0;var Et=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Et>>>26)|0,Et&=67108863,v=Math.imul(A,Bt),f=Math.imul(A,Xt),f=f+Math.imul(T,Bt)|0,d=Math.imul(T,Xt),v=v+Math.imul(It,Nt)|0,f=f+Math.imul(It,ae)|0,f=f+Math.imul(M,Nt)|0,d=d+Math.imul(M,ae)|0,v=v+Math.imul(St,Lt)|0,f=f+Math.imul(St,jt)|0,f=f+Math.imul(te,Lt)|0,d=d+Math.imul(te,jt)|0,v=v+Math.imul(Ft,C)|0,f=f+Math.imul(Ft,_)|0,f=f+Math.imul(Jt,C)|0,d=d+Math.imul(Jt,_)|0,v=v+Math.imul(Dt,y)|0,f=f+Math.imul(Dt,D)|0,f=f+Math.imul(ne,y)|0,d=d+Math.imul(ne,D)|0,v=v+Math.imul(_t,U)|0,f=f+Math.imul(_t,V)|0,f=f+Math.imul(oe,U)|0,d=d+Math.imul(oe,V)|0;var Tt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,v=Math.imul(A,Nt),f=Math.imul(A,ae),f=f+Math.imul(T,Nt)|0,d=Math.imul(T,ae),v=v+Math.imul(It,Lt)|0,f=f+Math.imul(It,jt)|0,f=f+Math.imul(M,Lt)|0,d=d+Math.imul(M,jt)|0,v=v+Math.imul(St,C)|0,f=f+Math.imul(St,_)|0,f=f+Math.imul(te,C)|0,d=d+Math.imul(te,_)|0,v=v+Math.imul(Ft,y)|0,f=f+Math.imul(Ft,D)|0,f=f+Math.imul(Jt,y)|0,d=d+Math.imul(Jt,D)|0,v=v+Math.imul(Dt,U)|0,f=f+Math.imul(Dt,V)|0,f=f+Math.imul(ne,U)|0,d=d+Math.imul(ne,V)|0;var yt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(yt>>>26)|0,yt&=67108863,v=Math.imul(A,Lt),f=Math.imul(A,jt),f=f+Math.imul(T,Lt)|0,d=Math.imul(T,jt),v=v+Math.imul(It,C)|0,f=f+Math.imul(It,_)|0,f=f+Math.imul(M,C)|0,d=d+Math.imul(M,_)|0,v=v+Math.imul(St,y)|0,f=f+Math.imul(St,D)|0,f=f+Math.imul(te,y)|0,d=d+Math.imul(te,D)|0,v=v+Math.imul(Ft,U)|0,f=f+Math.imul(Ft,V)|0,f=f+Math.imul(Jt,U)|0,d=d+Math.imul(Jt,V)|0;var xt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(xt>>>26)|0,xt&=67108863,v=Math.imul(A,C),f=Math.imul(A,_),f=f+Math.imul(T,C)|0,d=Math.imul(T,_),v=v+Math.imul(It,y)|0,f=f+Math.imul(It,D)|0,f=f+Math.imul(M,y)|0,d=d+Math.imul(M,D)|0,v=v+Math.imul(St,U)|0,f=f+Math.imul(St,V)|0,f=f+Math.imul(te,U)|0,d=d+Math.imul(te,V)|0;var Ct=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,v=Math.imul(A,y),f=Math.imul(A,D),f=f+Math.imul(T,y)|0,d=Math.imul(T,D),v=v+Math.imul(It,U)|0,f=f+Math.imul(It,V)|0,f=f+Math.imul(M,U)|0,d=d+Math.imul(M,V)|0;var gt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(gt>>>26)|0,gt&=67108863,v=Math.imul(A,U),f=Math.imul(A,V),f=f+Math.imul(T,U)|0,d=Math.imul(T,V);var z=(b+v|0)+((f&8191)<<13)|0;return b=(d+(f>>>13)|0)+(z>>>26)|0,z&=67108863,p[0]=rt,p[1]=dt,p[2]=mt,p[3]=le,p[4]=bt,p[5]=kt,p[6]=qt,p[7]=Yt,p[8]=Vt,p[9]=Wt,p[10]=Kt,p[11]=Ht,p[12]=Et,p[13]=Tt,p[14]=yt,p[15]=xt,p[16]=Ct,p[17]=gt,p[18]=z,b!==0&&(p[19]=b,o.length++),o};Math.imul||(Z=q);function tt(E,a,l){l.negative=a.negative^E.negative,l.length=E.length+a.length;for(var o=0,h=0,c=0;c<l.length-1;c++){var p=h;h=0;for(var b=o&67108863,v=Math.min(c,a.length-1),f=Math.max(0,c-E.length+1);f<=v;f++){var d=c-f,m=E.words[d]|0,B=a.words[f]|0,O=m*B,W=O&67108863;p=p+(O/67108864|0)|0,W=W+b|0,b=W&67108863,p=p+(W>>>26)|0,h+=p>>>26,p&=67108863}l.words[c]=b,o=p,p=h}return o!==0?l.words[c]=o:l.length--,l.strip()}function et(E,a,l){var o=new X;return o.mulp(E,a,l)}i.prototype.mulTo=function(a,l){var o,h=this.length+a.length;return this.length===10&&a.length===10?o=Z(this,a,l):h<63?o=q(this,a,l):h<1024?o=tt(this,a,l):o=et(this,a,l),o};function X(E,a){this.x=E,this.y=a}X.prototype.makeRBT=function(a){for(var l=new Array(a),o=i.prototype._countBits(a)-1,h=0;h<a;h++)l[h]=this.revBin(h,o,a);return l},X.prototype.revBin=function(a,l,o){if(a===0||a===o-1)return a;for(var h=0,c=0;c<l;c++)h|=(a&1)<<l-c-1,a>>=1;return h},X.prototype.permute=function(a,l,o,h,c,p){for(var b=0;b<p;b++)h[b]=l[a[b]],c[b]=o[a[b]]},X.prototype.transform=function(a,l,o,h,c,p){this.permute(p,a,l,o,h,c);for(var b=1;b<c;b<<=1)for(var v=b<<1,f=Math.cos(2*Math.PI/v),d=Math.sin(2*Math.PI/v),m=0;m<c;m+=v)for(var B=f,O=d,W=0;W<b;W++){var K=o[m+W],pt=h[m+W],re=o[m+W+b],vt=h[m+W+b],Ot=B*re-O*vt;vt=B*vt+O*re,re=Ot,o[m+W]=K+re,h[m+W]=pt+vt,o[m+W+b]=K-re,h[m+W+b]=pt-vt,W!==v&&(Ot=f*B-d*O,O=f*O+d*B,B=Ot)}},X.prototype.guessLen13b=function(a,l){var o=Math.max(l,a)|1,h=o&1,c=0;for(o=o/2|0;o;o=o>>>1)c++;return 1<<c+1+h},X.prototype.conjugate=function(a,l,o){if(!(o<=1))for(var h=0;h<o/2;h++){var c=a[h];a[h]=a[o-h-1],a[o-h-1]=c,c=l[h],l[h]=-l[o-h-1],l[o-h-1]=-c}},X.prototype.normalize13b=function(a,l){for(var o=0,h=0;h<l/2;h++){var c=Math.round(a[2*h+1]/l)*8192+Math.round(a[2*h]/l)+o;a[h]=c&67108863,c<67108864?o=0:o=c/67108864|0}return a},X.prototype.convert13b=function(a,l,o,h){for(var c=0,p=0;p<l;p++)c=c+(a[p]|0),o[2*p]=c&8191,c=c>>>13,o[2*p+1]=c&8191,c=c>>>13;for(p=2*l;p<h;++p)o[p]=0;n(c===0),n((c&-8192)===0)},X.prototype.stub=function(a){for(var l=new Array(a),o=0;o<a;o++)l[o]=0;return l},X.prototype.mulp=function(a,l,o){var h=2*this.guessLen13b(a.length,l.length),c=this.makeRBT(h),p=this.stub(h),b=new Array(h),v=new Array(h),f=new Array(h),d=new Array(h),m=new Array(h),B=new Array(h),O=o.words;O.length=h,this.convert13b(a.words,a.length,b,h),this.convert13b(l.words,l.length,d,h),this.transform(b,p,v,f,h,c),this.transform(d,p,m,B,h,c);for(var W=0;W<h;W++){var K=v[W]*m[W]-f[W]*B[W];f[W]=v[W]*B[W]+f[W]*m[W],v[W]=K}return this.conjugate(v,f,h),this.transform(v,f,O,p,h,c),this.conjugate(O,p,h),this.normalize13b(O,h),o.negative=a.negative^l.negative,o.length=a.length+l.length,o.strip()},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),et(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){n(typeof a=="number"),n(a<67108864);for(var l=0,o=0;o<this.length;o++){var h=(this.words[o]|0)*a,c=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=c>>>26,this.words[o]=c&67108863}return l!==0&&(this.words[o]=l,this.length++),this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=L(a);if(l.length===0)return new i(1);for(var o=this,h=0;h<l.length&&l[h]===0;h++,o=o.sqr());if(++h<l.length)for(var c=o.sqr();h<l.length;h++,c=c.sqr())l[h]!==0&&(o=o.mul(c));return o},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,o=(a-l)/26,h=67108863>>>26-l<<26-l,c;if(l!==0){var p=0;for(c=0;c<this.length;c++){var b=this.words[c]&h,v=(this.words[c]|0)-b<<l;this.words[c]=v|p,p=b>>>26-l}p&&(this.words[c]=p,this.length++)}if(o!==0){for(c=this.length-1;c>=0;c--)this.words[c+o]=this.words[c];for(c=0;c<o;c++)this.words[c]=0;this.length+=o}return this.strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,o){n(typeof a=="number"&&a>=0);var h;l?h=(l-l%26)/26:h=0;var c=a%26,p=Math.min((a-c)/26,this.length),b=67108863^67108863>>>c<<c,v=o;if(h-=p,h=Math.max(0,h),v){for(var f=0;f<p;f++)v.words[f]=this.words[f];v.length=p}if(p!==0)if(this.length>p)for(this.length-=p,f=0;f<this.length;f++)this.words[f]=this.words[f+p];else this.words[0]=0,this.length=1;var d=0;for(f=this.length-1;f>=0&&(d!==0||f>=h);f--){var m=this.words[f]|0;this.words[f]=d<<26-c|m>>>c,d=m&b}return v&&d!==0&&(v.words[v.length++]=d),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(a,l,o){return n(this.negative===0),this.iushrn(a,l,o)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,o=(a-l)/26,h=1<<l;if(this.length<=o)return!1;var c=this.words[o];return!!(c&h)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,o=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=o)return this;if(l!==0&&o++,this.length=Math.min(o,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,o){var h=a.length+o,c;this._expand(h);var p,b=0;for(c=0;c<a.length;c++){p=(this.words[c+o]|0)+b;var v=(a.words[c]|0)*l;p-=v&67108863,b=(p>>26)-(v/67108864|0),this.words[c+o]=p&67108863}for(;c<this.length-o;c++)p=(this.words[c+o]|0)+b,b=p>>26,this.words[c+o]=p&67108863;if(b===0)return this.strip();for(n(b===-1),b=0,c=0;c<this.length;c++)p=-(this.words[c]|0)+b,b=p>>26,this.words[c]=p&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(a,l){var o=this.length-a.length,h=this.clone(),c=a,p=c.words[c.length-1]|0,b=this._countBits(p);o=26-b,o!==0&&(c=c.ushln(o),h.iushln(o),p=c.words[c.length-1]|0);var v=h.length-c.length,f;if(l!=="mod"){f=new i(null),f.length=v+1,f.words=new Array(f.length);for(var d=0;d<f.length;d++)f.words[d]=0}var m=h.clone()._ishlnsubmul(c,1,v);m.negative===0&&(h=m,f&&(f.words[v]=1));for(var B=v-1;B>=0;B--){var O=(h.words[c.length+B]|0)*67108864+(h.words[c.length+B-1]|0);for(O=Math.min(O/p|0,67108863),h._ishlnsubmul(c,O,B);h.negative!==0;)O--,h.negative=0,h._ishlnsubmul(c,1,B),h.isZero()||(h.negative^=1);f&&(f.words[B]=O)}return f&&f.strip(),h.strip(),l!=="div"&&o!==0&&h.iushrn(o),{div:f||null,mod:h}},i.prototype.divmod=function(a,l,o){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,c,p;return this.negative!==0&&a.negative===0?(p=this.neg().divmod(a,l),l!=="mod"&&(h=p.div.neg()),l!=="div"&&(c=p.mod.neg(),o&&c.negative!==0&&c.iadd(a)),{div:h,mod:c}):this.negative===0&&a.negative!==0?(p=this.divmod(a.neg(),l),l!=="mod"&&(h=p.div.neg()),{div:h,mod:p.mod}):this.negative&a.negative?(p=this.neg().divmod(a.neg(),l),l!=="div"&&(c=p.mod.neg(),o&&c.negative!==0&&c.isub(a)),{div:p.div,mod:c}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var o=l.div.negative!==0?l.mod.isub(a):l.mod,h=a.ushrn(1),c=a.andln(1),p=o.cmp(h);return p<0||c===1&&p===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(a){n(a<=67108863);for(var l=(1<<26)%a,o=0,h=this.length-1;h>=0;h--)o=(l*o+(this.words[h]|0))%a;return o},i.prototype.idivn=function(a){n(a<=67108863);for(var l=0,o=this.length-1;o>=0;o--){var h=(this.words[o]|0)+l*67108864;this.words[o]=h/a|0,l=h%a}return this.strip()},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,o=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),c=new i(0),p=new i(0),b=new i(1),v=0;l.isEven()&&o.isEven();)l.iushrn(1),o.iushrn(1),++v;for(var f=o.clone(),d=l.clone();!l.isZero();){for(var m=0,B=1;!(l.words[0]&B)&&m<26;++m,B<<=1);if(m>0)for(l.iushrn(m);m-- >0;)(h.isOdd()||c.isOdd())&&(h.iadd(f),c.isub(d)),h.iushrn(1),c.iushrn(1);for(var O=0,W=1;!(o.words[0]&W)&&O<26;++O,W<<=1);if(O>0)for(o.iushrn(O);O-- >0;)(p.isOdd()||b.isOdd())&&(p.iadd(f),b.isub(d)),p.iushrn(1),b.iushrn(1);l.cmp(o)>=0?(l.isub(o),h.isub(p),c.isub(b)):(o.isub(l),p.isub(h),b.isub(c))}return{a:p,b,gcd:o.iushln(v)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,o=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),c=new i(0),p=o.clone();l.cmpn(1)>0&&o.cmpn(1)>0;){for(var b=0,v=1;!(l.words[0]&v)&&b<26;++b,v<<=1);if(b>0)for(l.iushrn(b);b-- >0;)h.isOdd()&&h.iadd(p),h.iushrn(1);for(var f=0,d=1;!(o.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(o.iushrn(f);f-- >0;)c.isOdd()&&c.iadd(p),c.iushrn(1);l.cmp(o)>=0?(l.isub(o),h.isub(c)):(o.isub(l),c.isub(h))}var m;return l.cmpn(1)===0?m=h:m=c,m.cmpn(0)<0&&m.iadd(a),m},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),o=a.clone();l.negative=0,o.negative=0;for(var h=0;l.isEven()&&o.isEven();h++)l.iushrn(1),o.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;o.isEven();)o.iushrn(1);var c=l.cmp(o);if(c<0){var p=l;l=o,o=p}else if(c===0||o.cmpn(1)===0)break;l.isub(o)}while(!0);return o.iushln(h)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,o=(a-l)/26,h=1<<l;if(this.length<=o)return this._expand(o+1),this.words[o]|=h,this;for(var c=h,p=o;c!==0&&p<this.length;p++){var b=this.words[p]|0;b+=c,c=b>>>26,b&=67108863,this.words[p]=b}return c!==0&&(this.words[p]=c,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var o;if(this.length>1)o=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var h=this.words[0]|0;o=h===a?0:h<a?-1:1}return this.negative!==0?-o|0:o},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,o=this.length-1;o>=0;o--){var h=this.words[o]|0,c=a.words[o]|0;if(h!==c){h<c?l=-1:h>c&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new at(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function G(E,a){this.name=E,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},G.prototype.ireduce=function(a){var l=a,o;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),o=l.bitLength();while(o>this.n);var h=o<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip(),l},G.prototype.split=function(a,l){a.iushrn(this.n,0,l)},G.prototype.imulK=function(a){return a.imul(this.k)};function k(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(k,G),k.prototype.split=function(a,l){for(var o=4194303,h=Math.min(a.length,9),c=0;c<h;c++)l.words[c]=a.words[c];if(l.length=h,a.length<=9){a.words[0]=0,a.length=1;return}var p=a.words[9];for(l.words[l.length++]=p&o,c=10;c<a.length;c++){var b=a.words[c]|0;a.words[c-10]=(b&o)<<4|p>>>22,p=b}p>>>=22,a.words[c-10]=p,p===0&&a.length>10?a.length-=10:a.length-=9},k.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,o=0;o<a.length;o++){var h=a.words[o]|0;l+=h*977,a.words[o]=l&67108863,l=h*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function J(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(J,G);function st(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(st,G);function ut(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(ut,G),ut.prototype.imulK=function(a){for(var l=0,o=0;o<a.length;o++){var h=(a.words[o]|0)*19+l,c=h&67108863;h>>>=26,a.words[o]=c,l=h}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(Q[a])return Q[a];var l;if(a==="k256")l=new k;else if(a==="p224")l=new J;else if(a==="p192")l=new st;else if(a==="p25519")l=new ut;else throw new Error("Unknown prime "+a);return Q[a]=l,l};function at(E){if(typeof E=="string"){var a=i._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}at.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},at.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},at.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},at.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},at.prototype.add=function(a,l){this._verify2(a,l);var o=a.add(l);return o.cmp(this.m)>=0&&o.isub(this.m),o._forceRed(this)},at.prototype.iadd=function(a,l){this._verify2(a,l);var o=a.iadd(l);return o.cmp(this.m)>=0&&o.isub(this.m),o},at.prototype.sub=function(a,l){this._verify2(a,l);var o=a.sub(l);return o.cmpn(0)<0&&o.iadd(this.m),o._forceRed(this)},at.prototype.isub=function(a,l){this._verify2(a,l);var o=a.isub(l);return o.cmpn(0)<0&&o.iadd(this.m),o},at.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},at.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},at.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},at.prototype.isqr=function(a){return this.imul(a,a.clone())},at.prototype.sqr=function(a){return this.mul(a,a)},at.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var o=this.m.add(new i(1)).iushrn(2);return this.pow(a,o)}for(var h=this.m.subn(1),c=0;!h.isZero()&&h.andln(1)===0;)c++,h.iushrn(1);n(!h.isZero());var p=new i(1).toRed(this),b=p.redNeg(),v=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,v).cmp(b)!==0;)f.redIAdd(b);for(var d=this.pow(f,h),m=this.pow(a,h.addn(1).iushrn(1)),B=this.pow(a,h),O=c;B.cmp(p)!==0;){for(var W=B,K=0;W.cmp(p)!==0;K++)W=W.redSqr();n(K<O);var pt=this.pow(d,new i(1).iushln(O-K-1));m=m.redMul(pt),d=pt.redSqr(),B=B.redMul(d),O=K}return m},at.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},at.prototype.pow=function(a,l){if(l.isZero())return new i(1);if(l.cmpn(1)===0)return a.clone();var o=4,h=new Array(1<<o);h[0]=new i(1).toRed(this),h[1]=a;for(var c=2;c<h.length;c++)h[c]=this.mul(h[c-1],a);var p=h[0],b=0,v=0,f=l.bitLength()%26;for(f===0&&(f=26),c=l.length-1;c>=0;c--){for(var d=l.words[c],m=f-1;m>=0;m--){var B=d>>m&1;if(p!==h[0]&&(p=this.sqr(p)),B===0&&b===0){v=0;continue}b<<=1,b|=B,v++,!(v!==o&&(c!==0||m!==0))&&(p=this.mul(p,h[b]),v=0,b=0)}f=26}return p},at.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},at.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new Gt(a)};function Gt(E){at.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Gt,at),Gt.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Gt.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},Gt.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var o=a.imul(l),h=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=o.isub(h).iushrn(this.shift),p=c;return c.cmp(this.m)>=0?p=c.isub(this.m):c.cmpn(0)<0&&(p=c.iadd(this.m)),p._forceRed(this)},Gt.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var o=a.mul(l),h=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=o.isub(h).iushrn(this.shift),p=c;return c.cmp(this.m)>=0?p=c.isub(this.m):c.cmpn(0)<0&&(p=c.iadd(this.m)),p._forceRed(this)},Gt.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,Gr)})($o);var kc=$o.exports,Oo={exports:{}};Oo.exports;(function(r){(function(t,e){function n(E,a){if(!E)throw new Error(a||"Assertion failed")}function s(E,a){E.super_=a;var l=function(){};l.prototype=a.prototype,E.prototype=new l,E.prototype.constructor=E}function i(E,a,l){if(i.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(E||0,a||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var u;try{u=Lo("buffer").Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,o){if(typeof a=="number")return this._initNumber(a,l,o);if(typeof a=="object")return this._initArray(a,l,o);l==="hex"&&(l=16),n(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var h=0;a[0]==="-"&&h++,l===16?this._parseHex(a,h):this._parseBase(a,l,h),a[0]==="-"&&(this.negative=1),this.strip(),o==="le"&&this._initArray(this.toArray(),l,o)},i.prototype._initNumber=function(a,l,o){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(n(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),o==="le"&&this._initArray(this.toArray(),l,o)},i.prototype._initArray=function(a,l,o){if(n(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var c,p,b=0;if(o==="be")for(h=a.length-1,c=0;h>=0;h-=3)p=a[h]|a[h-1]<<8|a[h-2]<<16,this.words[c]|=p<<b&67108863,this.words[c+1]=p>>>26-b&67108863,b+=24,b>=26&&(b-=26,c++);else if(o==="le")for(h=0,c=0;h<a.length;h+=3)p=a[h]|a[h+1]<<8|a[h+2]<<16,this.words[c]|=p<<b&67108863,this.words[c+1]=p>>>26-b&67108863,b+=24,b>=26&&(b-=26,c++);return this.strip()};function g(E,a,l){for(var o=0,h=Math.min(E.length,l),c=a;c<h;c++){var p=E.charCodeAt(c)-48;o<<=4,p>=49&&p<=54?o|=p-49+10:p>=17&&p<=22?o|=p-17+10:o|=p&15}return o}i.prototype._parseHex=function(a,l){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var h,c,p=0;for(o=a.length-6,h=0;o>=l;o-=6)c=g(a,o,o+6),this.words[h]|=c<<p&67108863,this.words[h+1]|=c>>>26-p&4194303,p+=24,p>=26&&(p-=26,h++);o+6!==l&&(c=g(a,l,o+6),this.words[h]|=c<<p&67108863,this.words[h+1]|=c>>>26-p&4194303),this.strip()};function w(E,a,l,o){for(var h=0,c=Math.min(E.length,l),p=a;p<c;p++){var b=E.charCodeAt(p)-48;h*=o,b>=49?h+=b-49+10:b>=17?h+=b-17+10:h+=b}return h}i.prototype._parseBase=function(a,l,o){this.words=[0],this.length=1;for(var h=0,c=1;c<=67108863;c*=l)h++;h--,c=c/l|0;for(var p=a.length-o,b=p%h,v=Math.min(p,p-b)+o,f=0,d=o;d<v;d+=h)f=w(a,d,d+h,l),this.imuln(c),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(b!==0){var m=1;for(f=w(a,d,a.length,l),d=0;d<b;d++)m*=l;this.imuln(m),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var F=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var o;if(a===16||a==="hex"){o="";for(var h=0,c=0,p=0;p<this.length;p++){var b=this.words[p],v=((b<<h|c)&16777215).toString(16);c=b>>>24-h&16777215,c!==0||p!==this.length-1?o=F[6-v.length]+v+o:o=v+o,h+=2,h>=26&&(h-=26,p--)}for(c!==0&&(o=c.toString(16)+o);o.length%l!==0;)o="0"+o;return this.negative!==0&&(o="-"+o),o}if(a===(a|0)&&a>=2&&a<=36){var f=I[a],d=N[a];o="";var m=this.clone();for(m.negative=0;!m.isZero();){var B=m.modn(d).toString(a);m=m.idivn(d),m.isZero()?o=B+o:o=F[f-B.length]+B+o}for(this.isZero()&&(o="0"+o);o.length%l!==0;)o="0"+o;return this.negative!==0&&(o="-"+o),o}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(a,l){return n(typeof u<"u"),this.toArrayLike(u,a,l)},i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)},i.prototype.toArrayLike=function(a,l,o){var h=this.byteLength(),c=o||Math.max(1,h);n(h<=c,"byte array longer than desired length"),n(c>0,"Requested array length <= 0"),this.strip();var p=l==="le",b=new a(c),v,f,d=this.clone();if(p){for(f=0;!d.isZero();f++)v=d.andln(255),d.iushrn(8),b[f]=v;for(;f<c;f++)b[f]=0}else{for(f=0;f<c-h;f++)b[f]=0;for(f=0;!d.isZero();f++)v=d.andln(255),d.iushrn(8),b[c-f-1]=v}return b},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,o=0;return l>=4096&&(o+=13,l>>>=13),l>=64&&(o+=7,l>>>=7),l>=8&&(o+=4,l>>>=4),l>=2&&(o+=2,l>>>=2),o+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,o=0;return l&8191||(o+=13,l>>>=13),l&127||(o+=7,l>>>=7),l&15||(o+=4,l>>>=4),l&3||(o+=2,l>>>=2),l&1||o++,o},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function L(E){for(var a=new Array(E.bitLength()),l=0;l<a.length;l++){var o=l/26|0,h=l%26;a[l]=(E.words[o]&1<<h)>>>h}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var o=this._zeroBits(this.words[l]);if(a+=o,o!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this.strip()},i.prototype.ior=function(a){return n((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var o=0;o<l.length;o++)this.words[o]=this.words[o]&a.words[o];return this.length=l.length,this.strip()},i.prototype.iand=function(a){return n((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,o;this.length>a.length?(l=this,o=a):(l=a,o=this);for(var h=0;h<o.length;h++)this.words[h]=l.words[h]^o.words[h];if(this!==l)for(;h<l.length;h++)this.words[h]=l.words[h];return this.length=l.length,this.strip()},i.prototype.ixor=function(a){return n((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){n(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,o=a%26;this._expand(l),o>0&&l--;for(var h=0;h<l;h++)this.words[h]=~this.words[h]&67108863;return o>0&&(this.words[h]=~this.words[h]&67108863>>26-o),this.strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){n(typeof a=="number"&&a>=0);var o=a/26|0,h=a%26;return this._expand(o+1),l?this.words[o]=this.words[o]|1<<h:this.words[o]=this.words[o]&~(1<<h),this.strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var o,h;this.length>a.length?(o=this,h=a):(o=a,h=this);for(var c=0,p=0;p<h.length;p++)l=(o.words[p]|0)+(h.words[p]|0)+c,this.words[p]=l&67108863,c=l>>>26;for(;c!==0&&p<o.length;p++)l=(o.words[p]|0)+c,this.words[p]=l&67108863,c=l>>>26;if(this.length=o.length,c!==0)this.words[this.length]=c,this.length++;else if(o!==this)for(;p<o.length;p++)this.words[p]=o.words[p];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var o=this.cmp(a);if(o===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,c;o>0?(h=this,c=a):(h=a,c=this);for(var p=0,b=0;b<c.length;b++)l=(h.words[b]|0)-(c.words[b]|0)+p,p=l>>26,this.words[b]=l&67108863;for(;p!==0&&b<h.length;b++)l=(h.words[b]|0)+p,p=l>>26,this.words[b]=l&67108863;if(p===0&&b<h.length&&h!==this)for(;b<h.length;b++)this.words[b]=h.words[b];return this.length=Math.max(this.length,b),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function q(E,a,l){l.negative=a.negative^E.negative;var o=E.length+a.length|0;l.length=o,o=o-1|0;var h=E.words[0]|0,c=a.words[0]|0,p=h*c,b=p&67108863,v=p/67108864|0;l.words[0]=b;for(var f=1;f<o;f++){for(var d=v>>>26,m=v&67108863,B=Math.min(f,a.length-1),O=Math.max(0,f-E.length+1);O<=B;O++){var W=f-O|0;h=E.words[W]|0,c=a.words[O]|0,p=h*c+m,d+=p/67108864|0,m=p&67108863}l.words[f]=m|0,v=d|0}return v!==0?l.words[f]=v|0:l.length--,l.strip()}var Z=function(a,l,o){var h=a.words,c=l.words,p=o.words,b=0,v,f,d,m=h[0]|0,B=m&8191,O=m>>>13,W=h[1]|0,K=W&8191,pt=W>>>13,re=h[2]|0,vt=re&8191,Ot=re>>>13,Ae=h[3]|0,Rt=Ae&8191,Zt=Ae>>>13,Ee=h[4]|0,_t=Ee&8191,oe=Ee>>>13,Se=h[5]|0,Dt=Se&8191,ne=Se>>>13,xe=h[6]|0,Ft=xe&8191,Jt=xe>>>13,pe=h[7]|0,St=pe&8191,te=pe>>>13,ye=h[8]|0,It=ye&8191,M=ye>>>13,x=h[9]|0,A=x&8191,T=x>>>13,P=c[0]|0,$=P&8191,H=P>>>13,Mt=c[1]|0,ct=Mt&8191,At=Mt>>>13,zt=c[2]|0,ft=zt&8191,ee=zt>>>13,De=c[3]|0,Ut=De&8191,fe=De>>>13,Ue=c[4]|0,Bt=Ue&8191,Xt=Ue>>>13,Me=c[5]|0,Nt=Me&8191,ae=Me>>>13,Ie=c[6]|0,Lt=Ie&8191,jt=Ie>>>13,Te=c[7]|0,C=Te&8191,_=Te>>>13,S=c[8]|0,y=S&8191,D=S>>>13,j=c[9]|0,U=j&8191,V=j>>>13;o.negative=a.negative^l.negative,o.length=19,v=Math.imul(B,$),f=Math.imul(B,H),f=f+Math.imul(O,$)|0,d=Math.imul(O,H);var rt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(rt>>>26)|0,rt&=67108863,v=Math.imul(K,$),f=Math.imul(K,H),f=f+Math.imul(pt,$)|0,d=Math.imul(pt,H),v=v+Math.imul(B,ct)|0,f=f+Math.imul(B,At)|0,f=f+Math.imul(O,ct)|0,d=d+Math.imul(O,At)|0;var dt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(dt>>>26)|0,dt&=67108863,v=Math.imul(vt,$),f=Math.imul(vt,H),f=f+Math.imul(Ot,$)|0,d=Math.imul(Ot,H),v=v+Math.imul(K,ct)|0,f=f+Math.imul(K,At)|0,f=f+Math.imul(pt,ct)|0,d=d+Math.imul(pt,At)|0,v=v+Math.imul(B,ft)|0,f=f+Math.imul(B,ee)|0,f=f+Math.imul(O,ft)|0,d=d+Math.imul(O,ee)|0;var mt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(mt>>>26)|0,mt&=67108863,v=Math.imul(Rt,$),f=Math.imul(Rt,H),f=f+Math.imul(Zt,$)|0,d=Math.imul(Zt,H),v=v+Math.imul(vt,ct)|0,f=f+Math.imul(vt,At)|0,f=f+Math.imul(Ot,ct)|0,d=d+Math.imul(Ot,At)|0,v=v+Math.imul(K,ft)|0,f=f+Math.imul(K,ee)|0,f=f+Math.imul(pt,ft)|0,d=d+Math.imul(pt,ee)|0,v=v+Math.imul(B,Ut)|0,f=f+Math.imul(B,fe)|0,f=f+Math.imul(O,Ut)|0,d=d+Math.imul(O,fe)|0;var le=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(le>>>26)|0,le&=67108863,v=Math.imul(_t,$),f=Math.imul(_t,H),f=f+Math.imul(oe,$)|0,d=Math.imul(oe,H),v=v+Math.imul(Rt,ct)|0,f=f+Math.imul(Rt,At)|0,f=f+Math.imul(Zt,ct)|0,d=d+Math.imul(Zt,At)|0,v=v+Math.imul(vt,ft)|0,f=f+Math.imul(vt,ee)|0,f=f+Math.imul(Ot,ft)|0,d=d+Math.imul(Ot,ee)|0,v=v+Math.imul(K,Ut)|0,f=f+Math.imul(K,fe)|0,f=f+Math.imul(pt,Ut)|0,d=d+Math.imul(pt,fe)|0,v=v+Math.imul(B,Bt)|0,f=f+Math.imul(B,Xt)|0,f=f+Math.imul(O,Bt)|0,d=d+Math.imul(O,Xt)|0;var bt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(bt>>>26)|0,bt&=67108863,v=Math.imul(Dt,$),f=Math.imul(Dt,H),f=f+Math.imul(ne,$)|0,d=Math.imul(ne,H),v=v+Math.imul(_t,ct)|0,f=f+Math.imul(_t,At)|0,f=f+Math.imul(oe,ct)|0,d=d+Math.imul(oe,At)|0,v=v+Math.imul(Rt,ft)|0,f=f+Math.imul(Rt,ee)|0,f=f+Math.imul(Zt,ft)|0,d=d+Math.imul(Zt,ee)|0,v=v+Math.imul(vt,Ut)|0,f=f+Math.imul(vt,fe)|0,f=f+Math.imul(Ot,Ut)|0,d=d+Math.imul(Ot,fe)|0,v=v+Math.imul(K,Bt)|0,f=f+Math.imul(K,Xt)|0,f=f+Math.imul(pt,Bt)|0,d=d+Math.imul(pt,Xt)|0,v=v+Math.imul(B,Nt)|0,f=f+Math.imul(B,ae)|0,f=f+Math.imul(O,Nt)|0,d=d+Math.imul(O,ae)|0;var kt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(kt>>>26)|0,kt&=67108863,v=Math.imul(Ft,$),f=Math.imul(Ft,H),f=f+Math.imul(Jt,$)|0,d=Math.imul(Jt,H),v=v+Math.imul(Dt,ct)|0,f=f+Math.imul(Dt,At)|0,f=f+Math.imul(ne,ct)|0,d=d+Math.imul(ne,At)|0,v=v+Math.imul(_t,ft)|0,f=f+Math.imul(_t,ee)|0,f=f+Math.imul(oe,ft)|0,d=d+Math.imul(oe,ee)|0,v=v+Math.imul(Rt,Ut)|0,f=f+Math.imul(Rt,fe)|0,f=f+Math.imul(Zt,Ut)|0,d=d+Math.imul(Zt,fe)|0,v=v+Math.imul(vt,Bt)|0,f=f+Math.imul(vt,Xt)|0,f=f+Math.imul(Ot,Bt)|0,d=d+Math.imul(Ot,Xt)|0,v=v+Math.imul(K,Nt)|0,f=f+Math.imul(K,ae)|0,f=f+Math.imul(pt,Nt)|0,d=d+Math.imul(pt,ae)|0,v=v+Math.imul(B,Lt)|0,f=f+Math.imul(B,jt)|0,f=f+Math.imul(O,Lt)|0,d=d+Math.imul(O,jt)|0;var qt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(qt>>>26)|0,qt&=67108863,v=Math.imul(St,$),f=Math.imul(St,H),f=f+Math.imul(te,$)|0,d=Math.imul(te,H),v=v+Math.imul(Ft,ct)|0,f=f+Math.imul(Ft,At)|0,f=f+Math.imul(Jt,ct)|0,d=d+Math.imul(Jt,At)|0,v=v+Math.imul(Dt,ft)|0,f=f+Math.imul(Dt,ee)|0,f=f+Math.imul(ne,ft)|0,d=d+Math.imul(ne,ee)|0,v=v+Math.imul(_t,Ut)|0,f=f+Math.imul(_t,fe)|0,f=f+Math.imul(oe,Ut)|0,d=d+Math.imul(oe,fe)|0,v=v+Math.imul(Rt,Bt)|0,f=f+Math.imul(Rt,Xt)|0,f=f+Math.imul(Zt,Bt)|0,d=d+Math.imul(Zt,Xt)|0,v=v+Math.imul(vt,Nt)|0,f=f+Math.imul(vt,ae)|0,f=f+Math.imul(Ot,Nt)|0,d=d+Math.imul(Ot,ae)|0,v=v+Math.imul(K,Lt)|0,f=f+Math.imul(K,jt)|0,f=f+Math.imul(pt,Lt)|0,d=d+Math.imul(pt,jt)|0,v=v+Math.imul(B,C)|0,f=f+Math.imul(B,_)|0,f=f+Math.imul(O,C)|0,d=d+Math.imul(O,_)|0;var Yt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,v=Math.imul(It,$),f=Math.imul(It,H),f=f+Math.imul(M,$)|0,d=Math.imul(M,H),v=v+Math.imul(St,ct)|0,f=f+Math.imul(St,At)|0,f=f+Math.imul(te,ct)|0,d=d+Math.imul(te,At)|0,v=v+Math.imul(Ft,ft)|0,f=f+Math.imul(Ft,ee)|0,f=f+Math.imul(Jt,ft)|0,d=d+Math.imul(Jt,ee)|0,v=v+Math.imul(Dt,Ut)|0,f=f+Math.imul(Dt,fe)|0,f=f+Math.imul(ne,Ut)|0,d=d+Math.imul(ne,fe)|0,v=v+Math.imul(_t,Bt)|0,f=f+Math.imul(_t,Xt)|0,f=f+Math.imul(oe,Bt)|0,d=d+Math.imul(oe,Xt)|0,v=v+Math.imul(Rt,Nt)|0,f=f+Math.imul(Rt,ae)|0,f=f+Math.imul(Zt,Nt)|0,d=d+Math.imul(Zt,ae)|0,v=v+Math.imul(vt,Lt)|0,f=f+Math.imul(vt,jt)|0,f=f+Math.imul(Ot,Lt)|0,d=d+Math.imul(Ot,jt)|0,v=v+Math.imul(K,C)|0,f=f+Math.imul(K,_)|0,f=f+Math.imul(pt,C)|0,d=d+Math.imul(pt,_)|0,v=v+Math.imul(B,y)|0,f=f+Math.imul(B,D)|0,f=f+Math.imul(O,y)|0,d=d+Math.imul(O,D)|0;var Vt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,v=Math.imul(A,$),f=Math.imul(A,H),f=f+Math.imul(T,$)|0,d=Math.imul(T,H),v=v+Math.imul(It,ct)|0,f=f+Math.imul(It,At)|0,f=f+Math.imul(M,ct)|0,d=d+Math.imul(M,At)|0,v=v+Math.imul(St,ft)|0,f=f+Math.imul(St,ee)|0,f=f+Math.imul(te,ft)|0,d=d+Math.imul(te,ee)|0,v=v+Math.imul(Ft,Ut)|0,f=f+Math.imul(Ft,fe)|0,f=f+Math.imul(Jt,Ut)|0,d=d+Math.imul(Jt,fe)|0,v=v+Math.imul(Dt,Bt)|0,f=f+Math.imul(Dt,Xt)|0,f=f+Math.imul(ne,Bt)|0,d=d+Math.imul(ne,Xt)|0,v=v+Math.imul(_t,Nt)|0,f=f+Math.imul(_t,ae)|0,f=f+Math.imul(oe,Nt)|0,d=d+Math.imul(oe,ae)|0,v=v+Math.imul(Rt,Lt)|0,f=f+Math.imul(Rt,jt)|0,f=f+Math.imul(Zt,Lt)|0,d=d+Math.imul(Zt,jt)|0,v=v+Math.imul(vt,C)|0,f=f+Math.imul(vt,_)|0,f=f+Math.imul(Ot,C)|0,d=d+Math.imul(Ot,_)|0,v=v+Math.imul(K,y)|0,f=f+Math.imul(K,D)|0,f=f+Math.imul(pt,y)|0,d=d+Math.imul(pt,D)|0,v=v+Math.imul(B,U)|0,f=f+Math.imul(B,V)|0,f=f+Math.imul(O,U)|0,d=d+Math.imul(O,V)|0;var Wt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,v=Math.imul(A,ct),f=Math.imul(A,At),f=f+Math.imul(T,ct)|0,d=Math.imul(T,At),v=v+Math.imul(It,ft)|0,f=f+Math.imul(It,ee)|0,f=f+Math.imul(M,ft)|0,d=d+Math.imul(M,ee)|0,v=v+Math.imul(St,Ut)|0,f=f+Math.imul(St,fe)|0,f=f+Math.imul(te,Ut)|0,d=d+Math.imul(te,fe)|0,v=v+Math.imul(Ft,Bt)|0,f=f+Math.imul(Ft,Xt)|0,f=f+Math.imul(Jt,Bt)|0,d=d+Math.imul(Jt,Xt)|0,v=v+Math.imul(Dt,Nt)|0,f=f+Math.imul(Dt,ae)|0,f=f+Math.imul(ne,Nt)|0,d=d+Math.imul(ne,ae)|0,v=v+Math.imul(_t,Lt)|0,f=f+Math.imul(_t,jt)|0,f=f+Math.imul(oe,Lt)|0,d=d+Math.imul(oe,jt)|0,v=v+Math.imul(Rt,C)|0,f=f+Math.imul(Rt,_)|0,f=f+Math.imul(Zt,C)|0,d=d+Math.imul(Zt,_)|0,v=v+Math.imul(vt,y)|0,f=f+Math.imul(vt,D)|0,f=f+Math.imul(Ot,y)|0,d=d+Math.imul(Ot,D)|0,v=v+Math.imul(K,U)|0,f=f+Math.imul(K,V)|0,f=f+Math.imul(pt,U)|0,d=d+Math.imul(pt,V)|0;var Kt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,v=Math.imul(A,ft),f=Math.imul(A,ee),f=f+Math.imul(T,ft)|0,d=Math.imul(T,ee),v=v+Math.imul(It,Ut)|0,f=f+Math.imul(It,fe)|0,f=f+Math.imul(M,Ut)|0,d=d+Math.imul(M,fe)|0,v=v+Math.imul(St,Bt)|0,f=f+Math.imul(St,Xt)|0,f=f+Math.imul(te,Bt)|0,d=d+Math.imul(te,Xt)|0,v=v+Math.imul(Ft,Nt)|0,f=f+Math.imul(Ft,ae)|0,f=f+Math.imul(Jt,Nt)|0,d=d+Math.imul(Jt,ae)|0,v=v+Math.imul(Dt,Lt)|0,f=f+Math.imul(Dt,jt)|0,f=f+Math.imul(ne,Lt)|0,d=d+Math.imul(ne,jt)|0,v=v+Math.imul(_t,C)|0,f=f+Math.imul(_t,_)|0,f=f+Math.imul(oe,C)|0,d=d+Math.imul(oe,_)|0,v=v+Math.imul(Rt,y)|0,f=f+Math.imul(Rt,D)|0,f=f+Math.imul(Zt,y)|0,d=d+Math.imul(Zt,D)|0,v=v+Math.imul(vt,U)|0,f=f+Math.imul(vt,V)|0,f=f+Math.imul(Ot,U)|0,d=d+Math.imul(Ot,V)|0;var Ht=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,v=Math.imul(A,Ut),f=Math.imul(A,fe),f=f+Math.imul(T,Ut)|0,d=Math.imul(T,fe),v=v+Math.imul(It,Bt)|0,f=f+Math.imul(It,Xt)|0,f=f+Math.imul(M,Bt)|0,d=d+Math.imul(M,Xt)|0,v=v+Math.imul(St,Nt)|0,f=f+Math.imul(St,ae)|0,f=f+Math.imul(te,Nt)|0,d=d+Math.imul(te,ae)|0,v=v+Math.imul(Ft,Lt)|0,f=f+Math.imul(Ft,jt)|0,f=f+Math.imul(Jt,Lt)|0,d=d+Math.imul(Jt,jt)|0,v=v+Math.imul(Dt,C)|0,f=f+Math.imul(Dt,_)|0,f=f+Math.imul(ne,C)|0,d=d+Math.imul(ne,_)|0,v=v+Math.imul(_t,y)|0,f=f+Math.imul(_t,D)|0,f=f+Math.imul(oe,y)|0,d=d+Math.imul(oe,D)|0,v=v+Math.imul(Rt,U)|0,f=f+Math.imul(Rt,V)|0,f=f+Math.imul(Zt,U)|0,d=d+Math.imul(Zt,V)|0;var Et=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Et>>>26)|0,Et&=67108863,v=Math.imul(A,Bt),f=Math.imul(A,Xt),f=f+Math.imul(T,Bt)|0,d=Math.imul(T,Xt),v=v+Math.imul(It,Nt)|0,f=f+Math.imul(It,ae)|0,f=f+Math.imul(M,Nt)|0,d=d+Math.imul(M,ae)|0,v=v+Math.imul(St,Lt)|0,f=f+Math.imul(St,jt)|0,f=f+Math.imul(te,Lt)|0,d=d+Math.imul(te,jt)|0,v=v+Math.imul(Ft,C)|0,f=f+Math.imul(Ft,_)|0,f=f+Math.imul(Jt,C)|0,d=d+Math.imul(Jt,_)|0,v=v+Math.imul(Dt,y)|0,f=f+Math.imul(Dt,D)|0,f=f+Math.imul(ne,y)|0,d=d+Math.imul(ne,D)|0,v=v+Math.imul(_t,U)|0,f=f+Math.imul(_t,V)|0,f=f+Math.imul(oe,U)|0,d=d+Math.imul(oe,V)|0;var Tt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,v=Math.imul(A,Nt),f=Math.imul(A,ae),f=f+Math.imul(T,Nt)|0,d=Math.imul(T,ae),v=v+Math.imul(It,Lt)|0,f=f+Math.imul(It,jt)|0,f=f+Math.imul(M,Lt)|0,d=d+Math.imul(M,jt)|0,v=v+Math.imul(St,C)|0,f=f+Math.imul(St,_)|0,f=f+Math.imul(te,C)|0,d=d+Math.imul(te,_)|0,v=v+Math.imul(Ft,y)|0,f=f+Math.imul(Ft,D)|0,f=f+Math.imul(Jt,y)|0,d=d+Math.imul(Jt,D)|0,v=v+Math.imul(Dt,U)|0,f=f+Math.imul(Dt,V)|0,f=f+Math.imul(ne,U)|0,d=d+Math.imul(ne,V)|0;var yt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(yt>>>26)|0,yt&=67108863,v=Math.imul(A,Lt),f=Math.imul(A,jt),f=f+Math.imul(T,Lt)|0,d=Math.imul(T,jt),v=v+Math.imul(It,C)|0,f=f+Math.imul(It,_)|0,f=f+Math.imul(M,C)|0,d=d+Math.imul(M,_)|0,v=v+Math.imul(St,y)|0,f=f+Math.imul(St,D)|0,f=f+Math.imul(te,y)|0,d=d+Math.imul(te,D)|0,v=v+Math.imul(Ft,U)|0,f=f+Math.imul(Ft,V)|0,f=f+Math.imul(Jt,U)|0,d=d+Math.imul(Jt,V)|0;var xt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(xt>>>26)|0,xt&=67108863,v=Math.imul(A,C),f=Math.imul(A,_),f=f+Math.imul(T,C)|0,d=Math.imul(T,_),v=v+Math.imul(It,y)|0,f=f+Math.imul(It,D)|0,f=f+Math.imul(M,y)|0,d=d+Math.imul(M,D)|0,v=v+Math.imul(St,U)|0,f=f+Math.imul(St,V)|0,f=f+Math.imul(te,U)|0,d=d+Math.imul(te,V)|0;var Ct=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,v=Math.imul(A,y),f=Math.imul(A,D),f=f+Math.imul(T,y)|0,d=Math.imul(T,D),v=v+Math.imul(It,U)|0,f=f+Math.imul(It,V)|0,f=f+Math.imul(M,U)|0,d=d+Math.imul(M,V)|0;var gt=(b+v|0)+((f&8191)<<13)|0;b=(d+(f>>>13)|0)+(gt>>>26)|0,gt&=67108863,v=Math.imul(A,U),f=Math.imul(A,V),f=f+Math.imul(T,U)|0,d=Math.imul(T,V);var z=(b+v|0)+((f&8191)<<13)|0;return b=(d+(f>>>13)|0)+(z>>>26)|0,z&=67108863,p[0]=rt,p[1]=dt,p[2]=mt,p[3]=le,p[4]=bt,p[5]=kt,p[6]=qt,p[7]=Yt,p[8]=Vt,p[9]=Wt,p[10]=Kt,p[11]=Ht,p[12]=Et,p[13]=Tt,p[14]=yt,p[15]=xt,p[16]=Ct,p[17]=gt,p[18]=z,b!==0&&(p[19]=b,o.length++),o};Math.imul||(Z=q);function tt(E,a,l){l.negative=a.negative^E.negative,l.length=E.length+a.length;for(var o=0,h=0,c=0;c<l.length-1;c++){var p=h;h=0;for(var b=o&67108863,v=Math.min(c,a.length-1),f=Math.max(0,c-E.length+1);f<=v;f++){var d=c-f,m=E.words[d]|0,B=a.words[f]|0,O=m*B,W=O&67108863;p=p+(O/67108864|0)|0,W=W+b|0,b=W&67108863,p=p+(W>>>26)|0,h+=p>>>26,p&=67108863}l.words[c]=b,o=p,p=h}return o!==0?l.words[c]=o:l.length--,l.strip()}function et(E,a,l){var o=new X;return o.mulp(E,a,l)}i.prototype.mulTo=function(a,l){var o,h=this.length+a.length;return this.length===10&&a.length===10?o=Z(this,a,l):h<63?o=q(this,a,l):h<1024?o=tt(this,a,l):o=et(this,a,l),o};function X(E,a){this.x=E,this.y=a}X.prototype.makeRBT=function(a){for(var l=new Array(a),o=i.prototype._countBits(a)-1,h=0;h<a;h++)l[h]=this.revBin(h,o,a);return l},X.prototype.revBin=function(a,l,o){if(a===0||a===o-1)return a;for(var h=0,c=0;c<l;c++)h|=(a&1)<<l-c-1,a>>=1;return h},X.prototype.permute=function(a,l,o,h,c,p){for(var b=0;b<p;b++)h[b]=l[a[b]],c[b]=o[a[b]]},X.prototype.transform=function(a,l,o,h,c,p){this.permute(p,a,l,o,h,c);for(var b=1;b<c;b<<=1)for(var v=b<<1,f=Math.cos(2*Math.PI/v),d=Math.sin(2*Math.PI/v),m=0;m<c;m+=v)for(var B=f,O=d,W=0;W<b;W++){var K=o[m+W],pt=h[m+W],re=o[m+W+b],vt=h[m+W+b],Ot=B*re-O*vt;vt=B*vt+O*re,re=Ot,o[m+W]=K+re,h[m+W]=pt+vt,o[m+W+b]=K-re,h[m+W+b]=pt-vt,W!==v&&(Ot=f*B-d*O,O=f*O+d*B,B=Ot)}},X.prototype.guessLen13b=function(a,l){var o=Math.max(l,a)|1,h=o&1,c=0;for(o=o/2|0;o;o=o>>>1)c++;return 1<<c+1+h},X.prototype.conjugate=function(a,l,o){if(!(o<=1))for(var h=0;h<o/2;h++){var c=a[h];a[h]=a[o-h-1],a[o-h-1]=c,c=l[h],l[h]=-l[o-h-1],l[o-h-1]=-c}},X.prototype.normalize13b=function(a,l){for(var o=0,h=0;h<l/2;h++){var c=Math.round(a[2*h+1]/l)*8192+Math.round(a[2*h]/l)+o;a[h]=c&67108863,c<67108864?o=0:o=c/67108864|0}return a},X.prototype.convert13b=function(a,l,o,h){for(var c=0,p=0;p<l;p++)c=c+(a[p]|0),o[2*p]=c&8191,c=c>>>13,o[2*p+1]=c&8191,c=c>>>13;for(p=2*l;p<h;++p)o[p]=0;n(c===0),n((c&-8192)===0)},X.prototype.stub=function(a){for(var l=new Array(a),o=0;o<a;o++)l[o]=0;return l},X.prototype.mulp=function(a,l,o){var h=2*this.guessLen13b(a.length,l.length),c=this.makeRBT(h),p=this.stub(h),b=new Array(h),v=new Array(h),f=new Array(h),d=new Array(h),m=new Array(h),B=new Array(h),O=o.words;O.length=h,this.convert13b(a.words,a.length,b,h),this.convert13b(l.words,l.length,d,h),this.transform(b,p,v,f,h,c),this.transform(d,p,m,B,h,c);for(var W=0;W<h;W++){var K=v[W]*m[W]-f[W]*B[W];f[W]=v[W]*B[W]+f[W]*m[W],v[W]=K}return this.conjugate(v,f,h),this.transform(v,f,O,p,h,c),this.conjugate(O,p,h),this.normalize13b(O,h),o.negative=a.negative^l.negative,o.length=a.length+l.length,o.strip()},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),et(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){n(typeof a=="number"),n(a<67108864);for(var l=0,o=0;o<this.length;o++){var h=(this.words[o]|0)*a,c=(h&67108863)+(l&67108863);l>>=26,l+=h/67108864|0,l+=c>>>26,this.words[o]=c&67108863}return l!==0&&(this.words[o]=l,this.length++),this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=L(a);if(l.length===0)return new i(1);for(var o=this,h=0;h<l.length&&l[h]===0;h++,o=o.sqr());if(++h<l.length)for(var c=o.sqr();h<l.length;h++,c=c.sqr())l[h]!==0&&(o=o.mul(c));return o},i.prototype.iushln=function(a){n(typeof a=="number"&&a>=0);var l=a%26,o=(a-l)/26,h=67108863>>>26-l<<26-l,c;if(l!==0){var p=0;for(c=0;c<this.length;c++){var b=this.words[c]&h,v=(this.words[c]|0)-b<<l;this.words[c]=v|p,p=b>>>26-l}p&&(this.words[c]=p,this.length++)}if(o!==0){for(c=this.length-1;c>=0;c--)this.words[c+o]=this.words[c];for(c=0;c<o;c++)this.words[c]=0;this.length+=o}return this.strip()},i.prototype.ishln=function(a){return n(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,o){n(typeof a=="number"&&a>=0);var h;l?h=(l-l%26)/26:h=0;var c=a%26,p=Math.min((a-c)/26,this.length),b=67108863^67108863>>>c<<c,v=o;if(h-=p,h=Math.max(0,h),v){for(var f=0;f<p;f++)v.words[f]=this.words[f];v.length=p}if(p!==0)if(this.length>p)for(this.length-=p,f=0;f<this.length;f++)this.words[f]=this.words[f+p];else this.words[0]=0,this.length=1;var d=0;for(f=this.length-1;f>=0&&(d!==0||f>=h);f--){var m=this.words[f]|0;this.words[f]=d<<26-c|m>>>c,d=m&b}return v&&d!==0&&(v.words[v.length++]=d),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(a,l,o){return n(this.negative===0),this.iushrn(a,l,o)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,o=(a-l)/26,h=1<<l;if(this.length<=o)return!1;var c=this.words[o];return!!(c&h)},i.prototype.imaskn=function(a){n(typeof a=="number"&&a>=0);var l=a%26,o=(a-l)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=o)return this;if(l!==0&&o++,this.length=Math.min(o,this.length),l!==0){var h=67108863^67108863>>>l<<l;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return n(typeof a=="number"),n(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(n(typeof a=="number"),n(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,o){var h=a.length+o,c;this._expand(h);var p,b=0;for(c=0;c<a.length;c++){p=(this.words[c+o]|0)+b;var v=(a.words[c]|0)*l;p-=v&67108863,b=(p>>26)-(v/67108864|0),this.words[c+o]=p&67108863}for(;c<this.length-o;c++)p=(this.words[c+o]|0)+b,b=p>>26,this.words[c+o]=p&67108863;if(b===0)return this.strip();for(n(b===-1),b=0,c=0;c<this.length;c++)p=-(this.words[c]|0)+b,b=p>>26,this.words[c]=p&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(a,l){var o=this.length-a.length,h=this.clone(),c=a,p=c.words[c.length-1]|0,b=this._countBits(p);o=26-b,o!==0&&(c=c.ushln(o),h.iushln(o),p=c.words[c.length-1]|0);var v=h.length-c.length,f;if(l!=="mod"){f=new i(null),f.length=v+1,f.words=new Array(f.length);for(var d=0;d<f.length;d++)f.words[d]=0}var m=h.clone()._ishlnsubmul(c,1,v);m.negative===0&&(h=m,f&&(f.words[v]=1));for(var B=v-1;B>=0;B--){var O=(h.words[c.length+B]|0)*67108864+(h.words[c.length+B-1]|0);for(O=Math.min(O/p|0,67108863),h._ishlnsubmul(c,O,B);h.negative!==0;)O--,h.negative=0,h._ishlnsubmul(c,1,B),h.isZero()||(h.negative^=1);f&&(f.words[B]=O)}return f&&f.strip(),h.strip(),l!=="div"&&o!==0&&h.iushrn(o),{div:f||null,mod:h}},i.prototype.divmod=function(a,l,o){if(n(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,c,p;return this.negative!==0&&a.negative===0?(p=this.neg().divmod(a,l),l!=="mod"&&(h=p.div.neg()),l!=="div"&&(c=p.mod.neg(),o&&c.negative!==0&&c.iadd(a)),{div:h,mod:c}):this.negative===0&&a.negative!==0?(p=this.divmod(a.neg(),l),l!=="mod"&&(h=p.div.neg()),{div:h,mod:p.mod}):this.negative&a.negative?(p=this.neg().divmod(a.neg(),l),l!=="div"&&(c=p.mod.neg(),o&&c.negative!==0&&c.isub(a)),{div:p.div,mod:c}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var o=l.div.negative!==0?l.mod.isub(a):l.mod,h=a.ushrn(1),c=a.andln(1),p=o.cmp(h);return p<0||c===1&&p===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modn=function(a){n(a<=67108863);for(var l=(1<<26)%a,o=0,h=this.length-1;h>=0;h--)o=(l*o+(this.words[h]|0))%a;return o},i.prototype.idivn=function(a){n(a<=67108863);for(var l=0,o=this.length-1;o>=0;o--){var h=(this.words[o]|0)+l*67108864;this.words[o]=h/a|0,l=h%a}return this.strip()},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){n(a.negative===0),n(!a.isZero());var l=this,o=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),c=new i(0),p=new i(0),b=new i(1),v=0;l.isEven()&&o.isEven();)l.iushrn(1),o.iushrn(1),++v;for(var f=o.clone(),d=l.clone();!l.isZero();){for(var m=0,B=1;!(l.words[0]&B)&&m<26;++m,B<<=1);if(m>0)for(l.iushrn(m);m-- >0;)(h.isOdd()||c.isOdd())&&(h.iadd(f),c.isub(d)),h.iushrn(1),c.iushrn(1);for(var O=0,W=1;!(o.words[0]&W)&&O<26;++O,W<<=1);if(O>0)for(o.iushrn(O);O-- >0;)(p.isOdd()||b.isOdd())&&(p.iadd(f),b.isub(d)),p.iushrn(1),b.iushrn(1);l.cmp(o)>=0?(l.isub(o),h.isub(p),c.isub(b)):(o.isub(l),p.isub(h),b.isub(c))}return{a:p,b,gcd:o.iushln(v)}},i.prototype._invmp=function(a){n(a.negative===0),n(!a.isZero());var l=this,o=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var h=new i(1),c=new i(0),p=o.clone();l.cmpn(1)>0&&o.cmpn(1)>0;){for(var b=0,v=1;!(l.words[0]&v)&&b<26;++b,v<<=1);if(b>0)for(l.iushrn(b);b-- >0;)h.isOdd()&&h.iadd(p),h.iushrn(1);for(var f=0,d=1;!(o.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(o.iushrn(f);f-- >0;)c.isOdd()&&c.iadd(p),c.iushrn(1);l.cmp(o)>=0?(l.isub(o),h.isub(c)):(o.isub(l),c.isub(h))}var m;return l.cmpn(1)===0?m=h:m=c,m.cmpn(0)<0&&m.iadd(a),m},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),o=a.clone();l.negative=0,o.negative=0;for(var h=0;l.isEven()&&o.isEven();h++)l.iushrn(1),o.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;o.isEven();)o.iushrn(1);var c=l.cmp(o);if(c<0){var p=l;l=o,o=p}else if(c===0||o.cmpn(1)===0)break;l.isub(o)}while(!0);return o.iushln(h)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){n(typeof a=="number");var l=a%26,o=(a-l)/26,h=1<<l;if(this.length<=o)return this._expand(o+1),this.words[o]|=h,this;for(var c=h,p=o;c!==0&&p<this.length;p++){var b=this.words[p]|0;b+=c,c=b>>>26,b&=67108863,this.words[p]=b}return c!==0&&(this.words[p]=c,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var o;if(this.length>1)o=1;else{l&&(a=-a),n(a<=67108863,"Number is too big");var h=this.words[0]|0;o=h===a?0:h<a?-1:1}return this.negative!==0?-o|0:o},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,o=this.length-1;o>=0;o--){var h=this.words[o]|0,c=a.words[o]|0;if(h!==c){h<c?l=-1:h>c&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new at(a)},i.prototype.toRed=function(a){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return n(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return n(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function G(E,a){this.name=E,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}G.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},G.prototype.ireduce=function(a){var l=a,o;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),o=l.bitLength();while(o>this.n);var h=o<this.n?-1:l.ucmp(this.p);return h===0?(l.words[0]=0,l.length=1):h>0?l.isub(this.p):l.strip(),l},G.prototype.split=function(a,l){a.iushrn(this.n,0,l)},G.prototype.imulK=function(a){return a.imul(this.k)};function k(){G.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(k,G),k.prototype.split=function(a,l){for(var o=4194303,h=Math.min(a.length,9),c=0;c<h;c++)l.words[c]=a.words[c];if(l.length=h,a.length<=9){a.words[0]=0,a.length=1;return}var p=a.words[9];for(l.words[l.length++]=p&o,c=10;c<a.length;c++){var b=a.words[c]|0;a.words[c-10]=(b&o)<<4|p>>>22,p=b}p>>>=22,a.words[c-10]=p,p===0&&a.length>10?a.length-=10:a.length-=9},k.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,o=0;o<a.length;o++){var h=a.words[o]|0;l+=h*977,a.words[o]=l&67108863,l=h*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function J(){G.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(J,G);function st(){G.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(st,G);function ut(){G.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(ut,G),ut.prototype.imulK=function(a){for(var l=0,o=0;o<a.length;o++){var h=(a.words[o]|0)*19+l,c=h&67108863;h>>>=26,a.words[o]=c,l=h}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(Q[a])return Q[a];var l;if(a==="k256")l=new k;else if(a==="p224")l=new J;else if(a==="p192")l=new st;else if(a==="p25519")l=new ut;else throw new Error("Unknown prime "+a);return Q[a]=l,l};function at(E){if(typeof E=="string"){var a=i._prime(E);this.m=a.p,this.prime=a}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}at.prototype._verify1=function(a){n(a.negative===0,"red works only with positives"),n(a.red,"red works only with red numbers")},at.prototype._verify2=function(a,l){n((a.negative|l.negative)===0,"red works only with positives"),n(a.red&&a.red===l.red,"red works only with red numbers")},at.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},at.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},at.prototype.add=function(a,l){this._verify2(a,l);var o=a.add(l);return o.cmp(this.m)>=0&&o.isub(this.m),o._forceRed(this)},at.prototype.iadd=function(a,l){this._verify2(a,l);var o=a.iadd(l);return o.cmp(this.m)>=0&&o.isub(this.m),o},at.prototype.sub=function(a,l){this._verify2(a,l);var o=a.sub(l);return o.cmpn(0)<0&&o.iadd(this.m),o._forceRed(this)},at.prototype.isub=function(a,l){this._verify2(a,l);var o=a.isub(l);return o.cmpn(0)<0&&o.iadd(this.m),o},at.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},at.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},at.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},at.prototype.isqr=function(a){return this.imul(a,a.clone())},at.prototype.sqr=function(a){return this.mul(a,a)},at.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(n(l%2===1),l===3){var o=this.m.add(new i(1)).iushrn(2);return this.pow(a,o)}for(var h=this.m.subn(1),c=0;!h.isZero()&&h.andln(1)===0;)c++,h.iushrn(1);n(!h.isZero());var p=new i(1).toRed(this),b=p.redNeg(),v=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,v).cmp(b)!==0;)f.redIAdd(b);for(var d=this.pow(f,h),m=this.pow(a,h.addn(1).iushrn(1)),B=this.pow(a,h),O=c;B.cmp(p)!==0;){for(var W=B,K=0;W.cmp(p)!==0;K++)W=W.redSqr();n(K<O);var pt=this.pow(d,new i(1).iushln(O-K-1));m=m.redMul(pt),d=pt.redSqr(),B=B.redMul(d),O=K}return m},at.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},at.prototype.pow=function(a,l){if(l.isZero())return new i(1);if(l.cmpn(1)===0)return a.clone();var o=4,h=new Array(1<<o);h[0]=new i(1).toRed(this),h[1]=a;for(var c=2;c<h.length;c++)h[c]=this.mul(h[c-1],a);var p=h[0],b=0,v=0,f=l.bitLength()%26;for(f===0&&(f=26),c=l.length-1;c>=0;c--){for(var d=l.words[c],m=f-1;m>=0;m--){var B=d>>m&1;if(p!==h[0]&&(p=this.sqr(p)),B===0&&b===0){v=0;continue}b<<=1,b|=B,v++,!(v!==o&&(c!==0||m!==0))&&(p=this.mul(p,h[b]),v=0,b=0)}f=26}return p},at.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},at.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new Gt(a)};function Gt(E){at.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Gt,at),Gt.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Gt.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},Gt.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var o=a.imul(l),h=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=o.isub(h).iushrn(this.shift),p=c;return c.cmp(this.m)>=0?p=c.isub(this.m):c.cmpn(0)<0&&(p=c.iadd(this.m)),p._forceRed(this)},Gt.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var o=a.mul(l),h=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=o.isub(h).iushrn(this.shift),p=c;return c.cmp(this.m)>=0?p=c.isub(this.m):c.cmpn(0)<0&&(p=c.iadd(this.m)),p._forceRed(this)},Gt.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(r,Gr)})(Oo);var jc=Oo.exports,qc=function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"},Wc=qc,Hc=function(t){return typeof t!="string"?t:Wc(t)?t.slice(2):t},Ln=jc,La=Hc,Kc=function(t){if(typeof t=="string"||typeof t=="number"){var e=new Ln(1),n=String(t).toLowerCase().trim(),s=n.substr(0,2)==="0x"||n.substr(0,3)==="-0x",i=La(n);if(i.substr(0,1)==="-"&&(i=La(i.slice(1)),e=new Ln(-1,10)),i=i===""?"0":i,!i.match(/^-?[0-9]+$/)&&i.match(/^[0-9A-Fa-f]+$/)||i.match(/^[a-fA-F]+$/)||s===!0&&i.match(/^[0-9A-Fa-f]+$/))return new Ln(i,16).mul(e);if((i.match(/^-?[0-9]+$/)||i==="")&&s===!1)return new Ln(i,10).mul(e)}else if(typeof t=="object"&&t.toString&&!t.pop&&!t.push&&t.toString(10).match(/^-?[0-9]+$/)&&(t.mul||t.dividedToIntegerBy))return new Ln(t.toString(10),10);throw new Error("[number-to-bn] while converting number "+JSON.stringify(t)+" to BN.js instance, error: invalid number value. Value must be an integer, hex string, BN or BigNumber instance. Note, decimals are not supported.")},En=kc,Vc=Kc,Gc=new En(0),xf=new En(-1),zn={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function ko(r){var t=r?r.toLowerCase():"ether",e=zn[t];if(typeof e!="string")throw new Error("[ethjs-unit] the unit provided "+r+" doesn't exists, please use the one of the following units "+JSON.stringify(zn,null,2));return new En(e,10)}function Af(r){if(typeof r=="string"){if(!r.match(/^-?[0-9.]+$/))throw new Error("while converting number to string, invalid number value '"+r+"', should be a number matching (^-?[0-9.]+).");return r}else{if(typeof r=="number")return String(r);if(typeof r=="object"&&r.toString&&(r.toTwos||r.dividedToIntegerBy))return r.toPrecision?String(r.toPrecision()):r.toString(10)}throw new Error("while converting number to string, invalid number value '"+r+"' type "+typeof r+".")}function zc(r,t,e){var n=Vc(r),s=n.lt(Gc),i=ko(t),u=zn[t].length-1||1,g=e||{};s&&(n=n.mul(xf));for(var w=n.mod(i).toString(10);w.length<u;)w="0"+w;g.pad||(w=w.match(/^([0-9]*[1-9]|0)(0*)/)[1]);var F=n.div(i).toString(10);g.commify&&(F=F.replace(/\B(?=(\d{3})+(?!\d))/g,","));var I=""+F+(w=="0"?"":"."+w);return s&&(I="-"+I),I}function Yc(r,t){var e=Af(r),n=ko(t),s=zn[t].length-1||1,i=e.substring(0,1)==="-";if(i&&(e=e.substring(1)),e===".")throw new Error("[ethjs-unit] while converting number "+r+" to wei, invalid value");var u=e.split(".");if(u.length>2)throw new Error("[ethjs-unit] while converting number "+r+" to wei,  too many decimal points");var g=u[0],w=u[1];if(g||(g="0"),w||(w="0"),w.length>s)throw new Error("[ethjs-unit] while converting number "+r+" to wei, too many decimal places");for(;w.length<s;)w+="0";g=new En(g),w=new En(w);var F=g.mul(n).add(w);return i&&(F=F.mul(xf)),new En(F.toString(10),10)}var Zc={unitMap:zn,numberToString:Af,getValueOfUnit:ko,fromWei:zc,toWei:Yc};/**
 * @file Web Cryptography API shim
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */(function(r,t){typeof define=="function"&&define.amd?define([],function(){return t(r)}):typeof module=="object"&&module.exports?module.exports=t(r):t(r)})(typeof self<"u"?self:globalThis,function(r){if(typeof Promise!="function")throw"Promise support required";var t=r.crypto||r.msCrypto;if(!t)return;var e=t.subtle||t.webkitSubtle;if(!e)return;var n=r.Crypto||t.constructor||Object,s=r.SubtleCrypto||e.constructor||Object;r.CryptoKey||r.Key;var i=r.navigator.userAgent.indexOf("Edge/")>-1,u=!!r.msCrypto&&!i,g=!t.subtle&&!!t.webkitSubtle;if(!u&&!g)return;function w(E){return btoa(E).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function F(E){return E+="===",E=E.slice(0,-E.length%4),atob(E.replace(/-/g,"+").replace(/_/g,"/"))}function I(E){for(var a=new Uint8Array(E.length),l=0;l<E.length;l++)a[l]=E.charCodeAt(l);return a}function N(E){return E instanceof ArrayBuffer&&(E=new Uint8Array(E)),String.fromCharCode.apply(String,E)}function L(E){var a={name:(E.name||E||"").toUpperCase().replace("V","v")};switch(a.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":E.length&&(a.length=E.length);break;case"HMAC":E.hash&&(a.hash=L(E.hash)),E.length&&(a.length=E.length);break;case"RSAES-PKCS1-v1_5":E.publicExponent&&(a.publicExponent=new Uint8Array(E.publicExponent)),E.modulusLength&&(a.modulusLength=E.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":E.hash&&(a.hash=L(E.hash)),E.publicExponent&&(a.publicExponent=new Uint8Array(E.publicExponent)),E.modulusLength&&(a.modulusLength=E.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return a}function q(E){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[E.name][(E.hash||{}).name||E.length||""]}function Z(E){(E instanceof ArrayBuffer||E instanceof Uint8Array)&&(E=JSON.parse(decodeURIComponent(escape(N(E)))));var a={kty:E.kty,alg:E.alg,ext:E.ext||E.extractable};switch(a.kty){case"oct":a.k=E.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(l){l in E&&(a[l]=E[l])});break;default:throw new TypeError("Unsupported key type")}return a}function tt(E){var a=Z(E);return u&&(a.extractable=a.ext,delete a.ext),I(unescape(encodeURIComponent(JSON.stringify(a)))).buffer}function et(E){var a=k(E),l=!1;a.length>2&&(l=!0,a.shift());var o={ext:!0};switch(a[0][0]){case"1.2.840.113549.1.1.1":var h=["n","e","d","p","q","dp","dq","qi"],c=k(a[1]);l&&c.shift();for(var p=0;p<c.length;p++)c[p][0]||(c[p]=c[p].subarray(1)),o[h[p]]=w(N(c[p]));o.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return o}function X(E){var a,l=[["",null]],o=!1;switch(E.kty){case"RSA":for(var h=["n","e","d","p","q","dp","dq","qi"],c=[],p=0;p<h.length&&h[p]in E;p++){var b=c[p]=I(F(E[h[p]]));b[0]&128&&(c[p]=new Uint8Array(b.length+1),c[p].set(b,1))}c.length>2&&(o=!0,c.unshift(new Uint8Array([0]))),l[0][0]="1.2.840.113549.1.1.1",a=c;break;default:throw new TypeError("Unsupported key type")}return l.push(new Uint8Array(J(a)).buffer),o?l.unshift(new Uint8Array([0])):l[1]={tag:3,value:l[1]},new Uint8Array(J(l)).buffer}var Q={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},G={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};function k(E,a){if(E instanceof ArrayBuffer&&(E=new Uint8Array(E)),a||(a={pos:0,end:E.length}),a.end-a.pos<2||a.end>E.length)throw new RangeError("Malformed DER");var l=E[a.pos++],o=E[a.pos++];if(o>=128){if(o&=127,a.end-a.pos<o)throw new RangeError("Malformed DER");for(var h=0;o--;)h<<=8,h|=E[a.pos++];o=h}if(a.end-a.pos<o)throw new RangeError("Malformed DER");var c;switch(l){case 2:c=E.subarray(a.pos,a.pos+=o);break;case 3:if(E[a.pos++])throw new Error("Unsupported bit string");o--;case 4:c=new Uint8Array(E.subarray(a.pos,a.pos+=o)).buffer;break;case 5:c=null;break;case 6:var p=btoa(N(E.subarray(a.pos,a.pos+=o)));if(!(p in Q))throw new Error("Unsupported OBJECT ID "+p);c=Q[p];break;case 48:c=[];for(var b=a.pos+o;a.pos<b;)c.push(k(E,a));break;default:throw new Error("Unsupported DER tag 0x"+l.toString(16))}return c}function J(E,a){a||(a=[]);var l=0,o=0,h=a.length+2;if(a.push(0,0),E instanceof Uint8Array){l=2,o=E.length;for(var c=0;c<o;c++)a.push(E[c])}else if(E instanceof ArrayBuffer){l=4,o=E.byteLength,E=new Uint8Array(E);for(var c=0;c<o;c++)a.push(E[c])}else if(E===null)l=5,o=0;else if(typeof E=="string"&&E in G){var p=I(atob(G[E]));l=6,o=p.length;for(var c=0;c<o;c++)a.push(p[c])}else if(E instanceof Array){for(var c=0;c<E.length;c++)J(E[c],a);l=48,o=a.length-h}else if(typeof E=="object"&&E.tag===3&&E.value instanceof ArrayBuffer){E=new Uint8Array(E.value),l=3,o=E.byteLength,a.push(0);for(var c=0;c<o;c++)a.push(E[c]);o++}else throw new Error("Unsupported DER value "+E);if(o>=128){var b=o,o=4;for(a.splice(h,0,b>>24&255,b>>16&255,b>>8&255,b&255);o>1&&!(b>>24);)b<<=8,o--;o<4&&a.splice(h,4-o),o|=128}return a.splice(h-2,2,l,o),a}function st(E,a,l,o){Object.defineProperties(this,{_key:{value:E},type:{value:E.type,enumerable:!0},extractable:{value:l===void 0?E.extractable:l,enumerable:!0},algorithm:{value:a===void 0?E.algorithm:a,enumerable:!0},usages:{value:o===void 0?E.usages:o,enumerable:!0}})}function ut(E){return E==="verify"||E==="encrypt"||E==="wrapKey"}function at(E){return E==="sign"||E==="decrypt"||E==="unwrapKey"}if(["generateKey","importKey","unwrapKey"].forEach(function(E){var a=e[E];e[E]=function(l,o,h){var c=[].slice.call(arguments),p,b,v;switch(E){case"generateKey":p=L(l),b=o,v=h;break;case"importKey":p=L(h),b=c[3],v=c[4],l==="jwk"&&(o=Z(o),o.alg||(o.alg=q(p)),o.key_ops||(o.key_ops=o.kty!=="oct"?"d"in o?v.filter(at):v.filter(ut):v.slice()),c[1]=tt(o));break;case"unwrapKey":p=c[4],b=c[5],v=c[6],c[2]=h._key;break}if(E==="generateKey"&&p.name==="HMAC"&&p.hash)return p.length=p.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[p.hash.name],e.importKey("raw",t.getRandomValues(new Uint8Array(p.length+7>>3)),p,b,v);if(g&&E==="generateKey"&&p.name==="RSASSA-PKCS1-v1_5"&&(!p.modulusLength||p.modulusLength>=2048))return l=L(l),l.name="RSAES-PKCS1-v1_5",delete l.hash,e.generateKey(l,!0,["encrypt","decrypt"]).then(function(d){return Promise.all([e.exportKey("jwk",d.publicKey),e.exportKey("jwk",d.privateKey)])}).then(function(d){return d[0].alg=d[1].alg=q(p),d[0].key_ops=v.filter(ut),d[1].key_ops=v.filter(at),Promise.all([e.importKey("jwk",d[0],p,!0,d[0].key_ops),e.importKey("jwk",d[1],p,b,d[1].key_ops)])}).then(function(d){return{publicKey:d[0],privateKey:d[1]}});if((g||u&&(p.hash||{}).name==="SHA-1")&&E==="importKey"&&l==="jwk"&&p.name==="HMAC"&&o.kty==="oct")return e.importKey("raw",I(F(o.k)),h,c[3],c[4]);if(g&&E==="importKey"&&(l==="spki"||l==="pkcs8"))return e.importKey("jwk",et(o),h,c[3],c[4]);if(u&&E==="unwrapKey")return e.decrypt(c[3],h,o).then(function(d){return e.importKey(l,d,c[4],c[5],c[6])});var f;try{f=a.apply(e,c)}catch(d){return Promise.reject(d)}return u&&(f=new Promise(function(d,m){f.onabort=f.onerror=function(B){m(B)},f.oncomplete=function(B){d(B.target.result)}})),f=f.then(function(d){return p.name==="HMAC"&&(p.length||(p.length=8*d.algorithm.length)),p.name.search("RSA")==0&&(p.modulusLength||(p.modulusLength=(d.publicKey||d).algorithm.modulusLength),p.publicExponent||(p.publicExponent=(d.publicKey||d).algorithm.publicExponent)),d.publicKey&&d.privateKey?d={publicKey:new st(d.publicKey,p,b,v.filter(ut)),privateKey:new st(d.privateKey,p,b,v.filter(at))}:d=new st(d,p,b,v),d}),f}}),["exportKey","wrapKey"].forEach(function(E){var a=e[E];e[E]=function(l,o,h){var c=[].slice.call(arguments);switch(E){case"exportKey":c[1]=o._key;break;case"wrapKey":c[1]=o._key,c[2]=h._key;break}if((g||u&&(o.algorithm.hash||{}).name==="SHA-1")&&E==="exportKey"&&l==="jwk"&&o.algorithm.name==="HMAC"&&(c[0]="raw"),g&&E==="exportKey"&&(l==="spki"||l==="pkcs8")&&(c[0]="jwk"),u&&E==="wrapKey")return e.exportKey(l,o).then(function(b){return l==="jwk"&&(b=I(unescape(encodeURIComponent(JSON.stringify(Z(b)))))),e.encrypt(c[3],h,b)});var p;try{p=a.apply(e,c)}catch(b){return Promise.reject(b)}return u&&(p=new Promise(function(b,v){p.onabort=p.onerror=function(f){v(f)},p.oncomplete=function(f){b(f.target.result)}})),E==="exportKey"&&l==="jwk"&&(p=p.then(function(b){return(g||u&&(o.algorithm.hash||{}).name==="SHA-1")&&o.algorithm.name==="HMAC"?{kty:"oct",alg:q(o.algorithm),key_ops:o.usages.slice(),ext:!0,k:w(N(b))}:(b=Z(b),b.alg||(b.alg=q(o.algorithm)),b.key_ops||(b.key_ops=o.type==="public"?o.usages.filter(ut):o.type==="private"?o.usages.filter(at):o.usages.slice()),b)})),g&&E==="exportKey"&&(l==="spki"||l==="pkcs8")&&(p=p.then(function(b){return b=X(Z(b)),b})),p}}),["encrypt","decrypt","sign","verify"].forEach(function(E){var a=e[E];e[E]=function(l,o,h,c){if(u&&(!h.byteLength||c&&!c.byteLength))throw new Error("Empy input is not allowed");var p=[].slice.call(arguments),b=L(l);if(u&&E==="decrypt"&&b.name==="AES-GCM"){var v=l.tagLength>>3;p[2]=(h.buffer||h).slice(0,h.byteLength-v),l.tag=(h.buffer||h).slice(h.byteLength-v)}p[1]=o._key;var f;try{f=a.apply(e,p)}catch(d){return Promise.reject(d)}return u&&(f=new Promise(function(d,m){f.onabort=f.onerror=function(B){m(B)},f.oncomplete=function(O){var O=O.target.result;if(E==="encrypt"&&O instanceof AesGcmEncryptResult){var W=O.ciphertext,K=O.tag;O=new Uint8Array(W.byteLength+K.byteLength),O.set(new Uint8Array(W),0),O.set(new Uint8Array(K),W.byteLength),O=O.buffer}d(O)}})),f}}),u){var Gt=e.digest;e.digest=function(E,a){if(!a.byteLength)throw new Error("Empy input is not allowed");var l;try{l=Gt.call(e,E,a)}catch(o){return Promise.reject(o)}return l=new Promise(function(o,h){l.onabort=l.onerror=function(c){h(c)},l.oncomplete=function(c){o(c.target.result)}}),l},r.crypto=Object.create(t,{getRandomValues:{value:function(E){return t.getRandomValues(E)}},subtle:{value:e}}),r.CryptoKey=st}g&&(t.subtle=e,r.Crypto=n,r.SubtleCrypto=s,r.CryptoKey=st)});const Jc=window.crypto,Xc=Object.freeze(Object.defineProperty({__proto__:null,default:Jc},Symbol.toStringTag,{value:"Module"})),Qc=Jr(Xc),jo=Oc,rs=Ef,Cf=Zc,Bf=typeof self<"u"&&self.crypto&&self.crypto.subtle;let Mf=null;Bf||(Mf=Qc);function td(r){return Bf?crypto.subtle.digest("SHA-256",r):Mf.subtle.digest({name:"SHA-256"},r)}function ed(r){if(!jo.isBN(r)&&typeof r!="string")throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return Cf.toWei(r,"gwei")}function rd(r){if(!jo.isBN(r)&&typeof r!="string")throw new Error("Please pass numbers as strings or BN objects to avoid precision errors.");return Cf.fromWei(r,"gwei")}const _f=[],no={};for(let r=0;r<=255;r++){let t=r.toString(16);t.length<2&&(t="0"+t),_f.push(t),no[t]=r}function nd(r){const t=[];for(let e=0;e<r.byteLength;e++)t.push(_f[r[e]]);return t.join("")}function id(r){r=r.toLowerCase();const t=r.length;if(t%2!==0)throw"hex string must have length a multiple of 2";const e=t/2,n=new Uint8Array(e);for(let s=0;s<e;s++){const i=s*2,u=r.substring(i,i+2);if(!no.hasOwnProperty(u))throw new Error("invalid hex character "+u);n[s]=no[u]}return n}function sd(r,t=1){let e,n;t===1&&(e=new ArrayBuffer(r.length),n=new Uint8Array(e)),t===2&&(e=new ArrayBuffer(r.length*2),n=new Uint16Array(e)),t===4&&(e=new ArrayBuffer(r.length*4),n=new Uint32Array(e));for(let s=0,i=r.length;s<i;s++)n[s]=r.charCodeAt(s);return new Uint8Array(n.buffer)}function od(r,t){r^=4294967295;for(let n=0;n<t.length;n++)r^=t[n],r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1,r=r&1?r>>>1^2197175160:r>>>1;return r^4294967295}function ad(r){const t=od(0,r),e=new ArrayBuffer(4);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e).reverse()}function fd(r){let e=0;const n=new Uint8Array(r.length+2);n.set(r);for(let s of n){let i=128;for(;i>0;)e<<=1,s&i&&(e+=1),i>>=1,e>65535&&(e&=65535,e^=4129)}return new Uint8Array([Math.floor(e/256),e%256])}function ld(r,t){const e=new Uint8Array(r.length+t.length);return e.set(r),e.set(t,r.length),e}function hd(r,t){return r.toString()===t.toString()}const Rr=(()=>{const r=[],t="A".charCodeAt(0),e="a".charCodeAt(0),n="0".charCodeAt(0);for(let s=0;s<26;++s)r.push(String.fromCharCode(t+s));for(let s=0;s<26;++s)r.push(String.fromCharCode(e+s));for(let s=0;s<10;++s)r.push(String.fromCharCode(n+s));return r.push("+"),r.push("/"),r})();function ud(r){let t="",e;const n=r.length;for(e=2;e<n;e+=3)t+=Rr[r[e-2]>>2],t+=Rr[(r[e-2]&3)<<4|r[e-1]>>4],t+=Rr[(r[e-1]&15)<<2|r[e]>>6],t+=Rr[r[e]&63];return e===n+1&&(t+=Rr[r[e-2]>>2],t+=Rr[(r[e-2]&3)<<4],t+="=="),e===n&&(t+=Rr[r[e-2]>>2],t+=Rr[(r[e-2]&3)<<4|r[e-1]>>4],t+=Rr[(r[e-1]&15)<<2],t+="="),t}function Ff(r){return typeof self>"u"?Buffer.from(r,"base64").toString("binary"):atob(r)}function cd(r){return typeof self>"u"?Buffer.from(r,"binary").toString("base64"):btoa(r)}function dd(r){const t=Ff(r),e=t.length,n=new Uint8Array(e);for(let s=0;s<e;s++)n[s]=t.charCodeAt(s);return n}function pd(r,t){let e=0;for(let n=0;n<r;n++)e*=256,e+=t[n];return e}function vd(r){return rs.sign.keyPair.fromSeed(r)}function gd(){return rs.sign.keyPair()}function md(){return rs.sign.keyPair().secretKey.slice(0,32)}var ns={BN:jo,nacl:rs,sha256:td,fromNano:rd,toNano:ed,bytesToHex:nd,hexToBytes:id,stringToBytes:sd,crc32c:ad,crc16:fd,concatBytes:ld,bytesToBase64:ud,base64ToBytes:dd,base64toString:Ff,stringToBase64:cd,compareBytes:hd,readNBytesUIntFromArray:pd,keyPairFromSeed:vd,newKeyPair:gd,newSeed:md},Sf={};const{crc16:Df,hexToBytes:yd,bytesToHex:wd,stringToBytes:bd,base64toString:Ed,stringToBase64:xd}=ns,io=17,If=81,so=128;function Ad(r){if(r.length!==48)throw new Error("User-friendly address should contain strictly 48 characters");const t=bd(Ed(r));if(t.length!==36)throw"Unknown address type: byte length is not equal to 36";const e=t.slice(0,34),n=t.slice(34,36),s=Df(e);if(!(s[0]===n[0]&&s[1]===n[1]))throw"Wrong crc16 hashsum";let i=e[0],u=!1,g=!1;if(i&so&&(u=!0,i=i^so),i!==io&&i!==If)throw"Unknown address tag";g=i===io;let w=null;if(e[1]===255?w=-1:w=e[1],w!==0&&w!==-1)throw new Error("Invalid address wc "+w);const F=e.slice(2,34);return{isTestOnly:u,isBounceable:g,workchain:w,hashPart:F}}let Cd=class oo{static isValid(t){try{return new oo(t),!0}catch{return!1}}constructor(t){if(t==null)throw"Invalid address";if(t instanceof oo){this.wc=t.wc,this.hashPart=t.hashPart,this.isTestOnly=t.isTestOnly,this.isUserFriendly=t.isUserFriendly,this.isBounceable=t.isBounceable,this.isUrlSafe=t.isUrlSafe;return}if(t.search(/\-/)>0||t.search(/_/)>0?(this.isUrlSafe=!0,t=t.replace(/\-/g,"+").replace(/_/g,"/")):this.isUrlSafe=!1,t.indexOf(":")>-1){const e=t.split(":");if(e.length!==2)throw new Error("Invalid address "+t);const n=parseInt(e[0]);if(n!==0&&n!==-1)throw new Error("Invalid address wc "+t);const s=e[1];if(s.length!==64)throw new Error("Invalid address hex "+t);this.isUserFriendly=!1,this.wc=n,this.hashPart=yd(s),this.isTestOnly=!1,this.isBounceable=!1}else{this.isUserFriendly=!0;const e=Ad(t);this.wc=e.workchain,this.hashPart=e.hashPart,this.isTestOnly=e.isTestOnly,this.isBounceable=e.isBounceable}}toString(t,e,n,s){if(t===void 0&&(t=this.isUserFriendly),e===void 0&&(e=this.isUrlSafe),n===void 0&&(n=this.isBounceable),s===void 0&&(s=this.isTestOnly),t){let i=n?io:If;s&&(i|=so);const u=new Int8Array(34);u[0]=i,u[1]=this.wc,u.set(this.hashPart,2);const g=new Uint8Array(36);g.set(u),g.set(Df(u),34);let w=xd(String.fromCharCode.apply(null,new Uint8Array(g)));return e&&(w=w.replace(/\+/g,"-").replace(/\//g,"_")),w}else return this.wc+":"+wd(this.hashPart)}};Sf.default=Cd;var Tf={};const{hexToBytes:Bd,bytesToHex:Md}=ns;let _d=class ao{static isValid(t){try{return new ao(t),!0}catch{return!1}}constructor(t){if(t==null)throw"Invalid address";if(t instanceof ao)this.bytes=t.bytes;else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("invalid adnl bytes length");this.bytes=t}else if(typeof t=="string"){if(t.length!==64)throw new Error("invalid adnl hex length");this.bytes=Bd(t)}else throw new Error("unsupported type")}toHex(){let t=Md(this.bytes);for(;t.length<64;)t="0"+t;return t}};Tf.default=_d;var Rf={};const{hexToBytes:Fd,bytesToHex:Sd}=ns;let Dd=class fo{static isValid(t){try{return new fo(t),!0}catch{return!1}}constructor(t){if(t==null)throw"Invalid address";if(t instanceof fo)this.bytes=t.bytes;else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("invalid bag id bytes length");this.bytes=t}else if(typeof t=="string"){if(t.length!==64)throw new Error("invalid bag id hex length");this.bytes=Fd(t)}else throw new Error("unsupported type")}toHex(){let t=Sd(this.bytes);for(;t.length<64;)t="0"+t;return t}};Rf.default=Dd;const{BN:Nf,nacl:Id,sha256:Td,fromNano:Rd,toNano:Nd,bytesToHex:Ud,hexToBytes:Pd,stringToBytes:Ld,crc32c:$d,crc16:Od,concatBytes:kd,bytesToBase64:jd,base64ToBytes:qd,base64toString:Wd,stringToBase64:Hd,compareBytes:Kd,readNBytesUIntFromArray:Vd,keyPairFromSeed:Gd,newKeyPair:zd,newSeed:Yd}=ns,Uf=Sf.default,Zd=Tf.default,Jd=Rf.default;function Xd(r){const t="ton://transfer/";if(!r.startsWith(t))throw new Error("must starts with "+t);const e=r.substring(t.length).split("?");if(e.length>2)throw new Error('multiple "?"');const n=e[0];if(!Uf.isValid(n))throw new Error("invalid address format "+n);const s={address:n},i=e[1];if(i&&i.length){const u=i.split("&").map(g=>g.split("="));for(const g of u){if(g.length!==2)throw new Error("invalid url pair");const w=g[0],F=g[1];if(w==="amount"){if(s.amount)throw new Error("amount already set");if(new Nf(F).isNeg())throw new Error("negative amount");s.amount=F}else if(w==="text"){if(s.text)throw new Error("text already set");s.text=decodeURIComponent(F)}else throw new Error("unknown url var "+w)}}return s}function Qd(r,t,e){let n="ton://transfer/"+r;const s=[];return t&&s.push("amount="+t),e&&s.push("text="+encodeURIComponent(e)),s.length===0?n:n+"?"+s.join("&")}var Ge={Address:Uf,AdnlAddress:Zd,StorageBagId:Jd,BN:Nf,nacl:Id,sha256:Td,fromNano:Rd,toNano:Nd,bytesToHex:Ud,hexToBytes:Pd,stringToBytes:Ld,crc32c:$d,crc16:Od,concatBytes:kd,bytesToBase64:jd,base64ToBytes:qd,base64toString:Wd,stringToBase64:Hd,compareBytes:Kd,readNBytesUIntFromArray:Vd,parseTransferUrl:Xd,formatTransferUrl:Qd,keyPairFromSeed:Gd,newKeyPair:zd,newSeed:Yd};const{BN:$n,bytesToHex:t1}=Ge;let e1=class Pf{constructor(t){this.array=Uint8Array.from({length:Math.ceil(t/8)},()=>0),this.cursor=0,this.length=t}getFreeBits(){return this.length-this.cursor}getUsedBits(){return this.cursor}getUsedBytes(){return Math.ceil(this.cursor/8)}get(t){return(this.array[t/8|0]&1<<7-t%8)>0}checkRange(t){if(t>this.length)throw Error("BitString overflow")}on(t){this.checkRange(t),this.array[t/8|0]|=1<<7-t%8}off(t){this.checkRange(t),this.array[t/8|0]&=~(1<<7-t%8)}toggle(t){this.checkRange(t),this.array[t/8|0]^=1<<7-t%8}forEach(t){const e=this.cursor;for(let n=0;n<e;n++)t(this.get(n))}writeBit(t){t&&t>0?this.on(this.cursor):this.off(this.cursor),this.cursor=this.cursor+1}writeBitArray(t){for(let e=0;e<t.length;e++)this.writeBit(t[e])}writeUint(t,e){if(t=new $n(t),e==0||t.toString(2).length>e){if(t==0)return;throw Error("bitLength is too small for number, got number="+t+",bitLength="+e)}const n=t.toString(2,e);for(let s=0;s<e;s++)this.writeBit(n[s]==1)}writeInt(t,e){if(t=new $n(t),e==1){if(t==-1){this.writeBit(!0);return}if(t==0){this.writeBit(!1);return}throw Error("Bitlength is too small for number")}else if(t.isNeg()){this.writeBit(!0);const s=new $n(2).pow(new $n(e-1));this.writeUint(s.add(t),e-1)}else this.writeBit(!1),this.writeUint(t,e-1)}writeUint8(t){this.writeUint(t,8)}writeBytes(t){for(let e=0;e<t.length;e++)this.writeUint8(t[e])}writeString(t){this.writeBytes(new TextEncoder().encode(t))}writeGrams(t){if(t==0)this.writeUint(0,4);else{t=new $n(t);const e=Math.ceil(t.toString(16).length/2);this.writeUint(e,4),this.writeUint(t,e*8)}}writeCoins(t){this.writeGrams(t)}writeAddress(t){t==null?this.writeUint(0,2):(this.writeUint(2,2),this.writeUint(0,1),this.writeInt(t.wc,8),this.writeBytes(t.hashPart))}writeBitString(t){t.forEach(e=>{this.writeBit(e)})}clone(){const t=new Pf(0);return t.array=this.array.slice(0),t.length=this.length,t.cursor=this.cursor,t}toString(){return this.toHex()}getTopUppedArray(){const t=this.clone();let e=Math.ceil(t.cursor/8)*8-t.cursor;if(e>0)for(e=e-1,t.writeBit(!0);e>0;)e=e-1,t.writeBit(!1);return t.array=t.array.slice(0,Math.ceil(t.cursor/8)),t.array}toHex(){if(this.cursor%4===0){const t=t1(this.array.slice(0,Math.ceil(this.cursor/8))).toUpperCase();return this.cursor%8===0?t:t.substr(0,t.length-1)}else{const t=this.clone();for(t.writeBit(1);t.cursor%4!==0;)t.writeBit(0);return t.toHex().toUpperCase()+"_"}}setTopUppedArray(t,e=!0){if(this.length=t.length*8,this.array=t,this.cursor=this.length,!(e||!this.length)){let n=!1;for(let s=0;s<7;s++)if(this.cursor-=1,this.get(this.cursor)){n=!0,this.off(this.cursor);break}if(!n)throw console.log(t,e),new Error("Incorrect TopUppedArray")}}};var qo={BitString:e1};const{BN:Qr,Address:r1,bytesToHex:n1}=Ge,{BitString:i1}=qo;let s1=class{constructor(t,e,n){this.array=t,this.length=e,this.readCursor=0,this.refs=n,this.refCursor=0}getFreeBits(){return this.length-this.readCursor}checkRange(t){if(t>this.length)throw Error("BitString overflow")}get(t){return this.checkRange(t),(this.array[t/8|0]&1<<7-t%8)>0}loadBit(){const t=this.get(this.readCursor);return this.readCursor++,t}loadBits(t){const e=new i1(t);for(let n=0;n<t;n++)e.writeBit(this.loadBit());return e.array}loadUint(t){if(t<1)throw"Incorrect bitLength";let e="";for(let n=0;n<t;n++)e+=this.loadBit()?"1":"0";return new Qr(e,2)}loadInt(t){if(t<1)throw"Incorrect bitLength";const e=this.loadBit();if(t===1)return e?new Qr(-1):new Qr(0);let n=this.loadUint(t-1);if(e){const i=new Qr(2).pow(new Qr(t-1));n-=i}return n}loadVarUint(t){const e=this.loadUint(new Qr(t).toString(2).length-1);return e.toNumber()===0?new Qr(0):this.loadUint(e*8)}loadCoins(){return this.loadVarUint(16)}loadAddress(){const t=this.loadUint(2);if(t.toNumber()===0)return null;if(t.toNumber()!==2)throw new Error("unsupported address type");if(this.loadBit())throw new Error("unsupported address type");const e=this.loadInt(8).toNumber(),n=this.loadBits(256);return new r1(e+":"+n1(n))}loadRef(){if(this.refCursor>=4)throw new Error("refs overflow");const t=this.refs[this.refCursor];return this.refCursor++,t}};var Lf={Slice:s1};const{BitString:$a}=qo,{bytesToBase64:Y6,compareBytes:di,concatBytes:On,crc32c:$f,hexToBytes:ri,readNBytesUIntFromArray:nn,sha256:o1,bytesToHex:Z6}=Ge,{Slice:a1}=Lf,Of=ri("B5EE9C72"),f1=ri("68ff65f3"),l1=ri("acc3a728");let kf=class{constructor(){this.bits=new $a(1023),this.refs=[],this.isExotic=!1}static fromBoc(t){return Oa(t)}static oneFromBoc(t){const e=Oa(t);if(e.length!==1)throw new Error("expected 1 root cell but have "+e.length);return e[0]}writeCell(t){this.bits.writeBitString(t.bits),this.refs=this.refs.concat(t.refs)}getMaxLevel(){let t=0;for(let e in this.refs){const n=this.refs[e];n.getMaxLevel()>t&&(t=n.getMaxLevel())}return t}isExplicitlyStoredHashes(){return 0}getMaxDepth(){let t=0;if(this.refs.length>0){for(let e in this.refs){const n=this.refs[e];n.getMaxDepth()>t&&(t=n.getMaxDepth())}t=t+1}return t}getMaxDepthAsArray(){const t=this.getMaxDepth(),e=Uint8Array.from({length:2},()=>0);return e[1]=t%256,e[0]=Math.floor(t/256),e}getRefsDescriptor(){const t=Uint8Array.from({length:1},()=>0);return t[0]=this.refs.length+this.isExotic*8+this.getMaxLevel()*32,t}getBitsDescriptor(){const t=Uint8Array.from({length:1},()=>0);return t[0]=Math.ceil(this.bits.cursor/8)+Math.floor(this.bits.cursor/8),t}getDataWithDescriptors(){const t=this.getRefsDescriptor(),e=this.getBitsDescriptor(),n=this.bits.getTopUppedArray();return On(On(t,e),n)}async getRepr(){const t=[];t.push(this.getDataWithDescriptors());for(let n in this.refs){const s=this.refs[n];t.push(s.getMaxDepthAsArray())}for(let n in this.refs){const s=this.refs[n];t.push(await s.hash())}let e=new Uint8Array;for(let n in t){const s=t[n];e=On(e,s)}return e}async hash(){return new Uint8Array(await o1(await this.getRepr()))}beginParse(){const t=this.refs.map(e=>e.beginParse());return new a1(this.bits.array.slice(),this.bits.length,t)}print(t){t=t||"";let e=t+"x{"+this.bits.toHex()+`}
`;for(let n in this.refs){const s=this.refs[n];e+=s.print(t+" ")}return e}async toBoc(t=!0,e=!0,n=!1,s=0){const u=await this.treeWalk(),g=u[0],w=u[1],F=g.length,I=F.toString(2).length,N=Math.min(Math.ceil(I/8),1);let L=0,q=[];for(let Q of g)q.push(L),L=L+await Q[1].bocSerializationSize(w,N);const Z=L.toString(2).length,tt=Math.max(Math.ceil(Z/8),1),et=new $a((1023+32*4+32*3)*g.length);et.writeBytes(Of),et.writeBitArray([t,e,n]),et.writeUint(s,2),et.writeUint(N,3),et.writeUint8(tt),et.writeUint(F,N*8),et.writeUint(1,N*8),et.writeUint(0,N*8),et.writeUint(L,tt*8),et.writeUint(0,N*8),t&&g.forEach((Q,G)=>et.writeUint(q[G],tt*8));for(let Q of g){const G=await Q[1].serializeForBoc(w,N);et.writeBytes(G)}let X=et.getTopUppedArray();return e&&(X=On(X,$f(X))),X}async serializeForBoc(t,e){const n=[];if(n.push(this.getDataWithDescriptors()),this.isExplicitlyStoredHashes())throw new Error("Cell hashes explicit storing is not implemented");for(let i in this.refs){const g=await this.refs[i].hash();let F=t[g].toString(16);F.length%2&&(F="0"+F);const I=ri(F);n.push(I)}let s=new Uint8Array;for(let i in n){const u=n[i];s=On(s,u)}return s}async bocSerializationSize(t,e){return(await this.serializeForBoc(t,e)).length}async treeWalk(){return qf(this,[],{})}};async function jf(r,t,e){const n=r[e];for(let i in r)r[i]>n&&(r[i]=r[i]-1);r[e]=t.length-1;const s=t.splice(n,1)[0];t.push(s);for(let i of s[1].refs)await jf(r,t,await i.hash())}async function qf(r,t,e,n=null){const s=await r.hash();if(s in e)return n&&e[n]>e[s]&&await jf(e,t,s),[t,e];e[s]=t.length,t.push([s,r]);for(let i of r.refs){const u=await qf(i,t,e,s);t=u[0],e=u[1]}return[t,e]}function h1(r){if(r.length<4+1)throw"Not enough bytes for magic prefix";const t=r,e=r.slice(0,4);r=r.slice(4);let n,s,i,u,g;if(di(e,Of)){const et=r[0];n=et&128,s=et&64,i=et&32,u=(et&16)*2+(et&8),g=et%8}if(di(e,f1)&&(n=1,s=0,i=0,u=0,g=r[0]),di(e,l1)&&(n=1,s=1,i=0,u=0,g=r[0]),r=r.slice(1),r.length<1+5*g)throw"Not enough bytes for encoding cells counters";const w=r[0];r=r.slice(1);const F=nn(g,r);r=r.slice(g);const I=nn(g,r);r=r.slice(g);const N=nn(g,r);r=r.slice(g);const L=nn(w,r);if(r=r.slice(w),r.length<I*g)throw"Not enough bytes for encoding root cells hashes";let q=[];for(let et=0;et<I;et++)q.push(nn(g,r)),r=r.slice(g);let Z=!1;if(n){if(Z=[],r.length<w*F)throw"Not enough bytes for index encoding";for(let et=0;et<F;et++)Z.push(nn(w,r)),r=r.slice(w)}if(r.length<L)throw"Not enough bytes for cells data";const tt=r.slice(0,L);if(r=r.slice(L),s){if(r.length<4)throw"Not enough bytes for crc32c hashsum";const et=t.length;if(!di($f(t.slice(0,et-4)),r.slice(0,4)))throw"Crc32c hashsum mismatch";r=r.slice(4)}if(r.length)throw"Too much bytes in BoC serialization";return{has_idx:n,hash_crc32:s,has_cache_bits:i,flags:u,size_bytes:g,off_bytes:w,cells_num:F,roots_num:I,absent_num:N,tot_cells_size:L,root_list:q,index:Z,cells_data:tt}}function u1(r,t){if(r.length<2)throw"Not enough bytes to encode cell descriptors";const e=r[0],n=r[1];r=r.slice(2);const s=e&8,i=e%8,u=Math.ceil(n/2),g=!(n%2);let w=new kf;if(w.isExotic=s,r.length<u+t*i)throw"Not enough bytes to encode cell data";w.bits.setTopUppedArray(r.slice(0,u),g),r=r.slice(u);for(let F=0;F<i;F++)w.refs.push(nn(t,r)),r=r.slice(t);return{cell:w,residue:r}}function Oa(r){typeof r=="string"&&(r=ri(r));const t=h1(r);let e=t.cells_data,n=[];for(let i=0;i<t.cells_num;i++){let u=u1(e,t.size_bytes);e=u.residue,n.push(u.cell)}for(let i=t.cells_num-1;i>=0;i--){let u=n[i];for(let g=0;g<u.refs.length;g++){const w=u.refs[g];if(w<i)throw"Topological order is broken";u.refs[g]=n[w]}}let s=[];for(let i of t.root_list)s.push(n[i]);return s}var c1={Cell:kf};const{BitString:d1}=qo,{Cell:p1}=c1,{Slice:v1}=Lf;var je={BitString:d1,Cell:p1,Slice:v1};const{Cell:vn}=je,{Address:Or,bytesToBase64:kn,bytesToHex:g1,BN:m1}=Ge;let y1=class Ti{constructor(t,e){this.provider=t,this.options=e,this.address=e.address?new Or(e.address):null,e.wc||(e.wc=this.address?this.address.wc:0),this.methods={}}async getAddress(){return this.address||(this.address=(await this.createStateInit()).address),this.address}createCodeCell(){if(!this.options.code)throw new Error("Contract: options.code is not defined");return this.options.code}createDataCell(){return new vn}async createStateInit(){const t=this.createCodeCell(),e=this.createDataCell(),n=Ti.createStateInit(t,e),s=await n.hash(),i=new Or(this.options.wc+":"+g1(s));return{stateInit:n,address:i,code:t,data:e}}static createStateInit(t,e,n=null,s=null,i=null){if(n)throw"Library in state init is not implemented";if(s)throw"Split depth in state init is not implemented";if(i)throw"Ticktock in state init is not implemented";const u=new vn;return u.bits.writeBitArray([!!s,!!i,!!t,!!e,!!n]),t&&u.refs.push(t),e&&u.refs.push(e),n&&u.refs.push(n),u}static createInternalMessageHeader(t,e=0,n=!0,s=null,i=!1,u=null,g=null,w=0,F=0,I=0,N=0){const L=new vn;if(L.bits.writeBit(!1),L.bits.writeBit(n),s!==null?L.bits.writeBit(s):L.bits.writeBit(new Or(t).isBounceable),L.bits.writeBit(i),L.bits.writeAddress(u?new Or(u):null),L.bits.writeAddress(new Or(t)),L.bits.writeGrams(e),g)throw"Currency collections are not implemented yet";return L.bits.writeBit(!!g),L.bits.writeGrams(w),L.bits.writeGrams(F),L.bits.writeUint(I,64),L.bits.writeUint(N,32),L}static createExternalMessageHeader(t,e=null,n=0){const s=new vn;return s.bits.writeUint(2,2),s.bits.writeAddress(e?new Or(e):null),s.bits.writeAddress(new Or(t)),s.bits.writeGrams(n),s}static createOutMsg(t,e,n,s=null){let i=new vn;n&&(n.refs?i=n:typeof n=="string"?n.length>0&&(i.bits.writeUint(0,32),i.bits.writeString(n)):i.bits.writeBytes(n));const u=Ti.createInternalMessageHeader(new Or(t),new m1(e));return Ti.createCommonMsgInfo(u,s,i)}static createCommonMsgInfo(t,e=null,n=null){const s=new vn;return s.writeCell(t),e?(s.bits.writeBit(!0),s.bits.writeBit(!0),s.refs.push(e)):s.bits.writeBit(!1),n?s.bits.getFreeBits()>=n.bits.getUsedBits()&&s.refs.length+n.refs.length<=4?(s.bits.writeBit(!1),s.writeCell(n)):(s.bits.writeBit(!0),s.refs.push(n)):s.bits.writeBit(!1),s}static createMethod(t,e){return{getQuery:async()=>(await e).message,send:async()=>{const n=await e,s=kn(await n.message.toBoc(!1));return t.sendBoc(s)},estimateFee:async()=>{const n=await e,s=n.code?{address:n.address.toString(!0,!0,!1),body:kn(await n.body.toBoc(!1)),init_code:kn(await n.code.toBoc(!1)),init_data:kn(await n.data.toBoc(!1))}:{address:n.address.toString(!0,!0,!0),body:kn(await n.body.toBoc(!1))};return t.getEstimateFee(s)}}}};var ur={Contract:y1};const{Cell:w1}=je,{Address:b1,BN:X6,bytesToHex:E1}=Ge,{Contract:Is}=ur;let x1=class{constructor(t,e){this.transport=t,this.ton=e,this.ADDRESS_FORMAT_HEX=0,this.ADDRESS_FORMAT_USER_FRIENDLY=1,this.ADDRESS_FORMAT_URL_SAFE=2,this.ADDRESS_FORMAT_BOUNCEABLE=4,this.ADDRESS_FORMAT_TEST_ONLY=8}async getAppConfiguration(){const t=await this.transport.send(224,1,0,0);return{version:""+t[0]+"."+t[1]+"."+t[2]}}async getPublicKey(t,e){const n=Buffer.alloc(4);n.writeInt32BE(t);const s=await this.transport.send(224,2,e?1:0,0,n),i=s[0];return{publicKey:new Uint8Array(s.slice(1,1+i))}}async getAddress(t,e,n){const s=Buffer.alloc(4);s.writeInt32BE(t);const i=await this.transport.send(224,5,e?1:0,n,s),u=i[0],g=new Uint8Array(i.slice(1,1+u));return{address:new b1("0:"+E1(g))}}async sign(t,e){const n=Buffer.alloc(4);n.writeInt32BE(t);const s=Buffer.concat([n,Buffer.from(e)]),i=await this.transport.send(224,3,0,0,s),u=i[0];return{signature:i.slice(1,1+u)}}async transfer(t,e,n,s,i,u){const w=await e.createTransferMessage(null,n,s,i,null,3,!0),F=Buffer.alloc(4);F.writeInt32BE(t);const I=Buffer.concat([F,Buffer.from(await w.signingMessage.toBoc())]),N=await this.transport.send(224,4,u,0,I),L=N[0],q=N.slice(1,1+L),Z=new Uint8Array(q),tt=new w1;tt.bits.writeBytes(Z),tt.writeCell(w.signingMessage);let et=null,X=null,Q=null;if(i===0){const ut=await e.createStateInit();et=ut.stateInit,X=ut.code,Q=ut.data}const G=await e.getAddress(),k=Is.createExternalMessageHeader(G),J=Is.createCommonMsgInfo(k,et,tt),st=new Promise(ut=>{ut({address:G,message:J,body:tt,signature:Z,signingMessage:w.signingMessage,stateInit:et,code:X,data:Q})});return Is.createMethod(this.ton.provider,st)}};var A1=x1,Wf={},Hf={};const{BN:Ts,base64ToBytes:ka}=Ge,{Cell:ja}=je;let C1=class sn{static parseObject(t){const e=t["@type"];switch(e){case"tvm.list":case"tvm.tuple":return t.elements.map(sn.parseObject);case"tvm.cell":return ja.oneFromBoc(ka(t.bytes));case"tvm.stackEntryCell":return sn.parseObject(t.cell);case"tvm.stackEntryTuple":return sn.parseObject(t.tuple);case"tvm.stackEntryNumber":return sn.parseObject(t.number);case"tvm.numberDecimal":return new Ts(t.number,10);default:throw new Error("unknown type "+e)}}static parseResponseStack(t){const e=t[0],n=t[1];switch(e){case"num":return new Ts(n.replace(/0x/,""),16);case"list":case"tuple":return sn.parseObject(n);case"cell":const s=ka(n.bytes);return ja.oneFromBoc(s);default:throw new Error("unknown type "+e)}}static parseResponse(t){if(t.exit_code!==0){const n=new Error("http provider parse response error");throw n.result=t,n}const e=t.stack.map(sn.parseResponseStack);return e.length===1?e[0]:e}static makeArg(t){if(t instanceof Ts||t instanceof Number)return["num",t];throw new Error("unknown arg type "+t)}static makeArgs(t){return t.map(this.makeArg)}};Hf.default=C1;const{Cell:B1}=je,{base64ToBytes:M1}=Ge,_1=Hf.default;typeof fetch>"u"&&(fetch=Po);const lo="-9223372036854775808";let Kf=class{constructor(t,e){this.host=t||"https://toncenter.com/api/v2/jsonRPC",this.options=e||{}}sendImpl(t,e){const n={"Content-Type":"application/json"};return this.options.apiKey&&(n["X-API-Key"]=this.options.apiKey),fetch(t,{method:"POST",headers:n,body:JSON.stringify(e)}).then(s=>s.json()).then(({result:s,error:i})=>s||Promise.reject(i))}send(t,e){return this.sendImpl(this.host,{id:1,jsonrpc:"2.0",method:t,params:e})}async getAddressInfo(t){return this.send("getAddressInformation",{address:t})}async getExtendedAddressInfo(t){return this.send("getExtendedAddressInformation",{address:t})}async getWalletInfo(t){return this.send("getWalletInformation",{address:t})}async getTransactions(t,e=20,n=void 0,s=void 0,i=void 0,u=void 0){return this.send("getTransactions",{address:t,limit:e,lt:n,hash:s,to_lt:i,archival:u})}async getBalance(t){return this.send("getAddressBalance",{address:t})}async sendBoc(t){return this.send("sendBoc",{boc:t})}async sendQuery(t){return this.send("sendQuerySimple",t)}async getEstimateFee(t){return this.send("estimateFee",t)}async call(t,e,n=[]){return this.send("runGetMethod",{address:t,method:e,stack:n})}async call2(t,e,n=[]){const s=await this.send("runGetMethod",{address:t,method:e,stack:n});return _1.parseResponse(s)}async getConfigParam(t){const e=await this.send("getConfigParam",{config_id:t});if(e["@type"]!=="configInfo")throw new Error("getConfigParam expected type configInfo");if(!e.config)throw new Error("getConfigParam expected config");if(e.config["@type"]!=="tvm.cell")throw new Error("getConfigParam expected type tvm.cell");if(!e.config.bytes)throw new Error("getConfigParam expected bytes");return B1.oneFromBoc(M1(e.config.bytes))}async getMasterchainInfo(){return this.send("getMasterchainInfo",{})}async getBlockShards(t){return this.send("shards",{seqno:t})}async getBlockTransactions(t,e,n){return this.send("getBlockTransactions",{workchain:t,shard:e,seqno:n})}async getMasterchainBlockTransactions(t){return this.getBlockTransactions(-1,lo,t)}async getBlockHeader(t,e,n){return this.send("getBlockHeader",{workchain:t,shard:e,seqno:n})}async getMasterchainBlockHeader(t){return this.getBlockHeader(-1,lo,t)}};Kf.SHARD_ID_ALL=lo;Wf.default=Kf;var Vf={};const{Contract:_r}=ur,{Cell:pi}=je,{nacl:vi,stringToBytes:eA,Address:rA,BN:nA}=Ge;let F1=class extends _r{constructor(t,e){if(!e.publicKey&&!e.address)throw new Error("WalletContract required publicKey or address in options");super(t,e),this.methods={transfer:n=>_r.createMethod(t,this.createTransferMessage(n.secretKey,n.toAddress,n.amount,n.seqno,n.payload,n.sendMode,!n.secretKey,n.stateInit,n.expireAt)),transfers:n=>_r.createMethod(t,this.createTransferMessages(n.secretKey,n.seqno,n.messages,!n.secretKey,n.expireAt)),seqno:()=>({call:async()=>{const n=await this.getAddress();let s=null;try{s=(await t.call2(n.toString(),"seqno")).toNumber()}catch{}return s}})},this.deploy=n=>_r.createMethod(t,this.createInitExternalMessage(n))}getName(){throw new Error("override me")}createDataCell(){const t=new pi;return t.bits.writeUint(0,32),t.bits.writeBytes(this.options.publicKey),t}createSigningMessage(t){t=t||0;const e=new pi;return e.bits.writeUint(t,32),e}async createInitExternalMessage(t){if(!this.options.publicKey){const N=vi.sign.keyPair.fromSecretKey(t);this.options.publicKey=N.publicKey}const{stateInit:e,address:n,code:s,data:i}=await this.createStateInit(),u=this.createSigningMessage(),g=vi.sign.detached(await u.hash(),t),w=new pi;w.bits.writeBytes(g),w.writeCell(u);const F=_r.createExternalMessageHeader(n),I=_r.createCommonMsgInfo(F,e,w);return{address:n,message:I,body:w,signingMessage:u,stateInit:e,code:s,data:i}}async createExternalMessage(t,e,n,s=!1){const i=s?new Uint8Array(64):vi.sign.detached(await t.hash(),e),u=new pi;u.bits.writeBytes(i),u.writeCell(t);let g=null,w=null,F=null;if(n===0){if(!this.options.publicKey){const Z=vi.sign.keyPair.fromSecretKey(e);this.options.publicKey=Z.publicKey}const q=await this.createStateInit();g=q.stateInit,w=q.code,F=q.data}const I=await this.getAddress(),N=_r.createExternalMessageHeader(I),L=_r.createCommonMsgInfo(N,g,u);return{address:I,message:L,body:u,signature:i,signingMessage:t,stateInit:g,code:w,data:F}}async createTransferMessage(t,e,n,s,i="",u=3,g=!1,w=null,F=void 0){if(s==null||s<0)throw new Error("seqno must be number >= 0");const I=this.createSigningMessage(s,F);return u==null&&(u=3),I.bits.writeUint8(u),I.refs.push(_r.createOutMsg(e,n,i,w)),this.createExternalMessage(I,t,s,g)}async createTransferMessages(t,e,n,s=!1,i=void 0){if(e==null||e<0)throw new Error("seqno must be number >= 0");const u=this.createSigningMessage(e,i);if(n.length<1||n.length>4)throw new Error("put 1-4 messages");for(let g of n){let w=g.sendMode;w==null&&(w=3),u.bits.writeUint8(w),u.refs.push(_r.createOutMsg(g.toAddress,g.amount,g.payload,g.stateInit))}return this.createExternalMessage(u,t,e,s)}};var Tn={WalletContract:F1};const{Cell:Wo}=je,{WalletContract:Ho}=Tn;let S1=class extends Ho{constructor(t,e){e.code=Wo.oneFromBoc("B5EE9C72410101010044000084FF0020DDA4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED5441FDF089"),super(t,e)}getName(){return"simpleR1"}},D1=class extends Ho{constructor(t,e){e.code=Wo.oneFromBoc("B5EE9C724101010100530000A2FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54D0E2786F"),super(t,e)}getName(){return"simpleR2"}},I1=class extends Ho{constructor(t,e){e.code=Wo.oneFromBoc("B5EE9C7241010101005F0000BAFF0020DD2082014C97BA218201339CBAB19C71B0ED44D0D31FD70BFFE304E0A4F260810200D71820D70B1FED44D0D31FD3FFD15112BAF2A122F901541044F910F2A2F80001D31F3120D74A96D307D402FB00DED1A4C8CB1FCBFFC9ED54B5B86E42"),super(t,e)}getName(){return"simpleR3"}};var T1={SimpleWalletContractR1:S1,SimpleWalletContractR2:D1,SimpleWalletContractR3:I1};const{Cell:Ko}=je,{WalletContract:R1}=Tn;class Gf extends R1{createSigningMessage(t,e){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const n=new Ko;if(n.bits.writeUint(t,32),t===0)for(let s=0;s<32;s++)n.bits.writeBit(1);else n.bits.writeUint(e,32);return n}}let N1=class extends Gf{constructor(t,e){e.code=Ko.oneFromBoc("B5EE9C724101010100570000AAFF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31F01F823BBF263ED44D0D31FD3FFD15131BAF2A103F901541042F910F2A2F800029320D74A96D307D402FB00E8D1A4C8CB1FCBFFC9ED54A1370BB6"),super(t,e)}getName(){return"v2R1"}},U1=class extends Gf{constructor(t,e){e.code=Ko.oneFromBoc("B5EE9C724101010100630000C2FF0020DD2082014C97BA218201339CBAB19C71B0ED44D0D31FD70BFFE304E0A4F2608308D71820D31FD31F01F823BBF263ED44D0D31FD3FFD15131BAF2A103F901541042F910F2A2F800029320D74A96D307D402FB00E8D1A4C8CB1FCBFFC9ED54044CD7A1"),super(t,e)}getName(){return"v2R2"}};var P1={WalletV2ContractR1:N1,WalletV2ContractR2:U1};const{BN:yn}=Ge;function zf(r){if(r.loadBits(512),r.loadUint(32).toNumber()!==698983191)throw new Error("invalid walletId");const e=r.loadUint(32).toNumber(),n=r.loadUint(32).toNumber();if(r.loadUint(8).toNumber()!==3)throw new Error("invalid sendMode");let i=r.loadRef();if(i.loadBit())throw Error("invalid internal header");if(!i.loadBit())throw Error("invalid ihrDisabled");const u=i.loadBit();if(i.loadBit())throw Error("invalid bounced");if(i.loadAddress()!==null)throw Error("invalid externalSourceAddress");const w=i.loadAddress(),F=i.loadCoins();if(i.loadBit())throw Error("invalid currencyCollection");if(!i.loadCoins().eq(new yn(0)))throw new Error("invalid ihrFees");if(!i.loadCoins().eq(new yn(0)))throw new Error("invalid fwdFees");if(!i.loadUint(64).eq(new yn(0)))throw new Error("invalid createdLt");if(!i.loadUint(32).eq(new yn(0)))throw new Error("invalid createdAt");i.loadBit()&&i.loadRef();let Z=null;if(i.getFreeBits()>0&&(i.loadBit()&&(i=i.loadRef()),i.getFreeBits()>32)){const tt=i.loadUint(32),et=i.loadBits(i.getFreeBits());Z=tt.eq(new yn(0))?new TextDecoder().decode(et):""}return{toAddress:w,value:F,bounce:u,seqno:n,expireAt:e,payload:Z}}function L1(r){const t=r.beginParse();if(t.loadUint(2).toNumber()!==2)throw Error("invalid header");if(t.loadAddress()!==null)throw Error("invalid externalSourceAddress");const n=t.loadAddress();if(!t.loadCoins().eq(new yn(0)))throw new Error("invalid externalImportFee");t.loadBit()&&t.loadBit()&&t.loadRef();const i=t.loadBit()?t.loadRef():t;return{fromAddress:n,...zf(i)}}var Vo={parseWalletV3TransferQuery:L1,parseWalletV3TransferBody:zf};const{Cell:ki}=je,{WalletContract:$1}=Tn,{parseWalletV3TransferQuery:Yf,parseWalletV3TransferBody:Zf}=Vo;class Jf extends $1{createSigningMessage(t,e){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const n=new ki;if(n.bits.writeUint(this.options.walletId,32),t===0)for(let s=0;s<32;s++)n.bits.writeBit(1);else n.bits.writeUint(e,32);return n.bits.writeUint(t,32),n}createDataCell(){const t=new ki;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t}}let Go=class extends Jf{constructor(t,e){e.code=ki.oneFromBoc("B5EE9C724101010100620000C0FF0020DD2082014C97BA9730ED44D0D70B1FE0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED543FBE6EE0"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc)}getName(){return"v3R1"}};Go.parseTransferQuery=Yf;Go.parseTransferBody=Zf;let zo=class extends Jf{constructor(t,e){e.code=ki.oneFromBoc("B5EE9C724101010100710000DEFF0020DD2082014C97BA218201339CBAB19F71B0ED44D0D31FD31F31D70BFFE304E0A4F2608308D71820D31FD31FD31FF82313BBF263ED44D0D31FD31FD3FFD15132BAF2A15144BAF2A204F901541055F910F2A3F8009320D74A96D307D402FB00E8D101A4C8CB1FCB1FCBFFC9ED5410BD6DAD"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc)}getName(){return"v3R2"}};zo.parseTransferQuery=Yf;zo.parseTransferBody=Zf;var O1={WalletV3ContractR1:Go,WalletV3ContractR2:zo};const{Cell:Rs}=je,{WalletContract:k1}=Tn,{parseWalletV3TransferQuery:j1,parseWalletV3TransferBody:q1}=Vo;let Yo=class extends k1{constructor(t,e){e.code=Rs.oneFromBoc("B5EE9C72410215010002F5000114FF00F4A413F4BCF2C80B010201200203020148040504F8F28308D71820D31FD31FD31F02F823BBF263ED44D0D31FD31FD3FFF404D15143BAF2A15151BAF2A205F901541064F910F2A3F80024A4C8CB1F5240CB1F5230CBFF5210F400C9ED54F80F01D30721C0009F6C519320D74A96D307D402FB00E830E021C001E30021C002E30001C0039130E30D03A4C8CB1F12CB1FCBFF1112131403EED001D0D3030171B0915BE021D749C120915BE001D31F218210706C7567BD228210626C6E63BDB022821064737472BDB0925F03E002FA403020FA4401C8CA07CBFFC9D0ED44D0810140D721F404305C810108F40A6FA131B3925F05E004D33FC8258210706C7567BA9131E30D248210626C6E63BAE30004060708020120090A005001FA00F404308210706C7567831EB17080185005CB0527CF165003FA02F40012CB69CB1F5210CB3F0052F8276F228210626C6E63831EB17080185005CB0527CF1624FA0214CB6A13CB1F5230CB3F01FA02F4000092821064737472BA8E3504810108F45930ED44D0810140D720C801CF16F400C9ED54821064737472831EB17080185004CB0558CF1622FA0212CB6ACB1FCB3F9410345F04E2C98040FB000201200B0C0059BD242B6F6A2684080A06B90FA0218470D4080847A4937D29910CE6903E9FF9837812801B7810148987159F31840201580D0E0011B8C97ED44D0D70B1F8003DB29DFB513420405035C87D010C00B23281F2FFF274006040423D029BE84C600201200F100019ADCE76A26840206B90EB85FFC00019AF1DF6A26840106B90EB858FC0006ED207FA00D4D422F90005C8CA0715CBFFC9D077748018C8CB05CB0222CF165005FA0214CB6B12CCCCC971FB00C84014810108F451F2A702006C810108D718C8542025810108F451F2A782106E6F746570748018C8CB05CB025004CF16821005F5E100FA0213CB6A12CB1FC971FB00020072810108D718305202810108F459F2A7F82582106473747270748018C8CB05CB025005CF16821005F5E100FA0214CB6A13CB1F12CB3FC973FB00000AF400C9ED5446A9F34F"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this)}getName(){return"v4R1"}createSigningMessage(t,e,n){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const s=new Rs;if(s.bits.writeUint(this.options.walletId,32),t===0)for(let i=0;i<32;i++)s.bits.writeBit(1);else s.bits.writeUint(e,32);return s.bits.writeUint(t,32),n||s.bits.writeUint(0,8),s}createDataCell(){const t=new Rs;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t.bits.writeUint(0,1),t}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}};Yo.parseTransferQuery=j1;Yo.parseTransferBody=q1;var W1={WalletV4ContractR1:Yo};const{Cell:Ns}=je,{Contract:Us}=ur,{Address:qa,bytesToHex:H1,BN:dA,toNano:K1}=Ge,{WalletContract:V1}=Tn,{parseWalletV3TransferQuery:G1,parseWalletV3TransferBody:z1}=Vo;let Zo=class extends V1{constructor(t,e){e.code=Ns.oneFromBoc("B5EE9C72410214010002D4000114FF00F4A413F4BCF2C80B010201200203020148040504F8F28308D71820D31FD31FD31F02F823BBF264ED44D0D31FD31FD3FFF404D15143BAF2A15151BAF2A205F901541064F910F2A3F80024A4C8CB1F5240CB1F5230CBFF5210F400C9ED54F80F01D30721C0009F6C519320D74A96D307D402FB00E830E021C001E30021C002E30001C0039130E30D03A4C8CB1F12CB1FCBFF1011121302E6D001D0D3032171B0925F04E022D749C120925F04E002D31F218210706C7567BD22821064737472BDB0925F05E003FA403020FA4401C8CA07CBFFC9D0ED44D0810140D721F404305C810108F40A6FA131B3925F07E005D33FC8258210706C7567BA923830E30D03821064737472BA925F06E30D06070201200809007801FA00F40430F8276F2230500AA121BEF2E0508210706C7567831EB17080185004CB0526CF1658FA0219F400CB6917CB1F5260CB3F20C98040FB0006008A5004810108F45930ED44D0810140D720C801CF16F400C9ED540172B08E23821064737472831EB17080185005CB055003CF1623FA0213CB6ACB1FCB3FC98040FB00925F03E20201200A0B0059BD242B6F6A2684080A06B90FA0218470D4080847A4937D29910CE6903E9FF9837812801B7810148987159F31840201580C0D0011B8C97ED44D0D70B1F8003DB29DFB513420405035C87D010C00B23281F2FFF274006040423D029BE84C600201200E0F0019ADCE76A26840206B90EB85FFC00019AF1DF6A26840106B90EB858FC0006ED207FA00D4D422F90005C8CA0715CBFFC9D077748018C8CB05CB0222CF165005FA0214CB6B12CCCCC973FB00C84014810108F451F2A7020070810108D718FA00D33FC8542047810108F451F2A782106E6F746570748018C8CB05CB025006CF165004FA0214CB6A12CB1FCB3FC973FB0002006C810108D718FA00D33F305224810108F459F2A782106473747270748018C8CB05CB025005CF165003FA0213CB6ACB1F12CB3FC973FB00000AF400C9ED54696225E5"),super(t,e),this.options.walletId||(this.options.walletId=698983191+this.options.wc),this.methods.deployAndInstallPlugin=n=>Us.createMethod(t,this.deployAndInstallPlugin(n)),this.methods.installPlugin=n=>Us.createMethod(t,this.installPlugin(n)),this.methods.removePlugin=n=>Us.createMethod(t,this.removePlugin(n)),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.isPluginInstalled=this.isPluginInstalled.bind(this),this.methods.getPluginsList=this.getPluginsList.bind(this)}getName(){return"v4R2"}createSigningMessage(t,e,n){t=t||0,e=e||Math.floor(Date.now()/1e3)+60;const s=new Ns;if(s.bits.writeUint(this.options.walletId,32),t===0)for(let i=0;i<32;i++)s.bits.writeBit(1);else s.bits.writeUint(e,32);return s.bits.writeUint(t,32),n||s.bits.writeUint(0,8),s}createDataCell(){const t=new Ns;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t.bits.writeUint(0,1),t}async deployAndInstallPlugin(t){const{secretKey:e,seqno:n,pluginWc:s,amount:i,stateInit:u,body:g,expireAt:w}=t,F=this.createSigningMessage(n,w,!0);return F.bits.writeUint(1,8),F.bits.writeInt(s,8),F.bits.writeGrams(i),F.refs.push(u),F.refs.push(g),this.createExternalMessage(F,e,n,!1)}async _setPlugin(t,e){const{secretKey:n,seqno:s,amount:i,queryId:u,expireAt:g}=t,w=new qa(t.pluginAddress),F=this.createSigningMessage(s,g,!0);return F.bits.writeUint(e?2:3,8),F.bits.writeInt(w.wc,8),F.bits.writeBytes(w.hashPart),F.bits.writeGrams(i||K1("0.1")),F.bits.writeUint(u||0,64),this.createExternalMessage(F,n,s,!1)}async installPlugin(t){return this._setPlugin(t,!0)}async removePlugin(t){return this._setPlugin(t,!1)}async getWalletId(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}async isPluginInstalled(t){t=new qa(t);const e="0x"+H1(t.hashPart),n=await this.getAddress();return!(await this.provider.call2(n.toString(),"is_plugin_installed",[["num",t.wc],["num",e]])).isZero()}async getPluginsList(){const t=s=>s[0].toNumber()+":"+s[1].toString(16),e=await this.getAddress();return(await this.provider.call2(e.toString(),"get_plugin_list")).map(t)}};Zo.parseTransferQuery=G1;Zo.parseTransferBody=z1;var Y1={WalletV4ContractR2:Zo};const{SimpleWalletContractR1:Xf,SimpleWalletContractR2:Qf,SimpleWalletContractR3:tl}=T1,{WalletV2ContractR1:el,WalletV2ContractR2:rl}=P1,{WalletV3ContractR1:nl,WalletV3ContractR2:il}=O1,{WalletV4ContractR1:sl}=W1,{WalletV4ContractR2:ol}=Y1,al={simpleR1:Xf,simpleR2:Qf,simpleR3:tl,v2R1:el,v2R2:rl,v3R1:nl,v3R2:il,v4R1:sl,v4R2:ol},fl=[Xf,Qf,tl,el,rl,nl,il,sl,ol];let Jo=class{constructor(t){this.provider=t,this.all=al,this.list=fl,this.defaultVersion="v3R1",this.default=this.all[this.defaultVersion]}create(t){return new this.default(this.provider,t)}};Jo.all=al;Jo.list=fl;Vf.default=Jo;var ll={};const{Cell:gi}=je,{Address:gA,BN:mA,toNano:yA,bytesToHex:wA,hexToBytes:bA,nacl:EA,stringToBytes:xA,bytesToBase64:AA,base64ToBytes:Wa}=Ge,{WalletContract:Z1}=Tn,J1=698983191;class Ps extends Z1{constructor(t,e){e.code=gi.oneFromBoc("B5EE9C7241021E01000261000114FF00F4A413F4BCF2C80B010201200203020148040501F2F28308D71820D31FD31FD31F802403F823BB13F2F2F003802251A9BA1AF2F4802351B7BA1BF2F4801F0BF9015410C5F9101AF2F4F8005057F823F0065098F823F0062071289320D74A8E8BD30731D4511BDB3C12B001E8309229A0DF72FB02069320D74A96D307D402FB00E8D103A4476814154330F004ED541D0202CD0607020120131402012008090201200F100201200A0B002D5ED44D0D31FD31FD3FFD3FFF404FA00F404FA00F404D1803F7007434C0C05C6C2497C0F83E900C0871C02497C0F80074C7C87040A497C1383C00D46D3C00608420BABE7114AC2F6C2497C338200A208420BABE7106EE86BCBD20084AE0840EE6B2802FBCBD01E0C235C62008087E4055040DBE4404BCBD34C7E00A60840DCEAA7D04EE84BCBD34C034C7CC0078C3C412040DD78CA00C0D0E00130875D27D2A1BE95B0C60000C1039480AF00500161037410AF0050810575056001010244300F004ED540201201112004548E1E228020F4966FA520933023BB9131E2209835FA00D113A14013926C21E2B3E6308003502323287C5F287C572FFC4F2FFFD00007E80BD00007E80BD00326000431448A814C4E0083D039BE865BE803444E800A44C38B21400FE809004E0083D10C06002012015160015BDE9F780188242F847800C02012017180201481B1C002DB5187E006D88868A82609E00C6207E00C63F04EDE20B30020158191A0017ADCE76A268699F98EB85FFC00017AC78F6A268698F98EB858FC00011B325FB513435C2C7E00017B1D1BE08E0804230FB50F620002801D0D3030178B0925B7FE0FA4031FA403001F001A80EDAA4"),super(t,e),this.options.walletId||(this.options.walletId=J1+this.options.wc),this.methods.getPublicKey=this.getPublicKey.bind(this),this.methods.getWalletId=this.getWalletId.bind(this),this.methods.getLiquidBalance=this.getLiquidBalance.bind(this),this.methods.getNominalRestrictedBalance=this.getNominalRestrictedBalance.bind(this),this.methods.getNominalLockedBalance=this.getNominalLockedBalance.bind(this)}getName(){return"lockup-0.1"}createSigningMessage(t,e){t=t||0;const n=new gi;if(n.bits.writeUint(this.options.walletId,32),t===0)for(let s=0;s<32;s++)n.bits.writeBit(1);else{const i=Math.floor(new Date().getTime()/1e3);n.bits.writeUint(i+60,32)}return n.bits.writeUint(t,32),n}createDataCell(){const t=new gi;return t.bits.writeUint(0,32),t.bits.writeUint(this.options.walletId,32),t.bits.writeBytes(this.options.publicKey),t.bits.writeBytes(Wa(this.options.config.config_public_key)),this.options.config.allowed_destinations?(t.bits.writeUint(1,1),t.refs.push(gi.oneFromBoc(Wa(this.options.config.allowed_destinations)))):t.bits.writeUint(0,1),t.bits.writeGrams(0),t.bits.writeUint(0,1),t.bits.writeGrams(0),t.bits.writeUint(0,1),t}async getWalletId(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_subwallet_id")).toNumber()}async getPublicKey(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_public_key")}async getLiquidBalance(){const t=await this.getBalances();return t[0]-t[1]-t[2]}async getNominalRestrictedBalance(){return await this.getBalances()[1]}async getNominalLockedBalance(){return await this.getBalances()[2]}async getBalances(){const t=await this.getAddress();return this.provider.call2(t.toString(),"get_balances")}}ll.default={LockupWalletV1:Ps,all:{"lockup-0.1":Ps},list:[Ps]};var hl={};const{Address:X1}=Ge,{Cell:Q1}=je,tp=0,ep=1,rp=0,Xo=1,ul=r=>new TextEncoder().encode(encodeURI(r)),cl=r=>new TextDecoder().decode(r),np=r=>{const t=new Q1;return t.bits.writeUint(Xo,8),t.bits.writeBytes(ul(r)),t},ip=r=>{if(r.bits.array[0]!==Xo)throw new Error("no OFFCHAIN_CONTENT_PREFIX");let t=0,e=r;for(;e;)t+=e.bits.array.length,e=e.refs[0];const n=new Uint8Array(t);for(t=0,e=r;e;)n.set(e.bits.array,t),t+=e.bits.array.length,e=e.refs[0];return cl(n.slice(1))},Ha=(r,t,e)=>{let n=BigInt(0);for(let s=0;s<e;s++)n*=BigInt(2),n+=BigInt(r.get(t+s));return n},dl=r=>{let t=Ha(r.bits,3,8);t>BigInt(127)&&(t=t-BigInt(256));const e=Ha(r.bits,3+8,256);if(t.toString(10)+":"+e.toString(16)=="0:0")return null;const n=t.toString(10)+":"+e.toString(16).padStart(64,"0");return new X1(n)},sp=async(r,t)=>{const e=await r.call2(t,"royalty_params"),n=e[0].toNumber(),s=e[1].toNumber(),i=n/s,u=dl(e[2]);return{royalty:i,royaltyBase:s,royaltyFactor:n,royaltyAddress:u}};var Er={SNAKE_DATA_PREFIX:tp,CHUNK_DATA_PREFIX:ep,ONCHAIN_CONTENT_PREFIX:rp,OFFCHAIN_CONTENT_PREFIX:Xo,parseAddress:dl,serializeUri:ul,parseUri:cl,createOffchainUriCell:np,parseOffchainUriCell:ip,getRoyaltyParams:sp};const{Contract:op}=ur,{Cell:vr}=je,{Address:CA,bytesToBase64:ap,BN:fp}=Ge,{parseAddress:Ka}=Er,{createOffchainUriCell:lp,serializeUri:Va,parseOffchainUriCell:Ga,getRoyaltyParams:hp}=Er;let up=class extends op{constructor(t,e){if(e.wc=0,e.code=e.code||vr.oneFromBoc("B5EE9C724102140100021F000114FF00F4A413F4BCF2C80B0102016202030202CD04050201200E0F04E7D10638048ADF000E8698180B8D848ADF07D201800E98FE99FF6A2687D20699FEA6A6A184108349E9CA829405D47141BAF8280E8410854658056B84008646582A802E78B127D010A65B509E58FE59F80E78B64C0207D80701B28B9E382F970C892E000F18112E001718112E001F181181981E0024060708090201200A0B00603502D33F5313BBF2E1925313BA01FA00D43028103459F0068E1201A44343C85005CF1613CB3FCCCCCCC9ED54925F05E200A6357003D4308E378040F4966FA5208E2906A4208100FABE93F2C18FDE81019321A05325BBF2F402FA00D43022544B30F00623BA9302A402DE04926C21E2B3E6303250444313C85005CF1613CB3FCCCCCCC9ED54002C323401FA40304144C85005CF1613CB3FCCCCCCC9ED54003C8E15D4D43010344130C85005CF1613CB3FCCCCCCC9ED54E05F04840FF2F00201200C0D003D45AF0047021F005778018C8CB0558CF165004FA0213CB6B12CCCCC971FB008002D007232CFFE0A33C5B25C083232C044FD003D0032C03260001B3E401D3232C084B281F2FFF2742002012010110025BC82DF6A2687D20699FEA6A6A182DE86A182C40043B8B5D31ED44D0FA40D33FD4D4D43010245F04D0D431D430D071C8CB0701CF16CCC980201201213002FB5DAFDA89A1F481A67FA9A9A860D883A1A61FA61FF480610002DB4F47DA89A1F481A67FA9A9A86028BE09E008E003E00B01A500C6E"),e.royalty>1)throw new Error("royalty > 1");e.royaltyBase=1e3,e.royaltyFactor=Math.floor(e.royalty*e.royaltyBase),super(t,e),this.methods.getCollectionData=this.getCollectionData.bind(this),this.methods.getNftItemAddressByIndex=this.getNftItemAddressByIndex.bind(this),this.methods.getNftItemContent=this.getNftItemContent.bind(this),this.methods.getRoyaltyParams=this.getRoyaltyParams.bind(this)}createContentCell(t){const e=lp(t.collectionContentUri),n=new vr;n.bits.writeBytes(Va(t.nftItemContentBaseUri));const s=new vr;return s.refs[0]=e,s.refs[1]=n,s}createRoyaltyCell(t){const e=new vr;return e.bits.writeUint(t.royaltyFactor,16),e.bits.writeUint(t.royaltyBase,16),e.bits.writeAddress(t.royaltyAddress),e}createDataCell(){const t=new vr;return t.bits.writeAddress(this.options.ownerAddress),t.bits.writeUint(0,64),t.refs[0]=this.createContentCell(this.options),t.refs[1]=vr.oneFromBoc(this.options.nftItemCodeHex),t.refs[2]=this.createRoyaltyCell(this.options),t}createMintBody(t){const e=new vr;e.bits.writeUint(1,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeUint(t.itemIndex,64),e.bits.writeCoins(t.amount);const n=new vr;n.bits.writeAddress(t.itemOwnerAddress);const s=new vr;return s.bits.writeBytes(Va(t.itemContentUri)),n.refs[0]=s,e.refs[0]=n,e}createGetRoyaltyParamsBody(t){const e=new vr;return e.bits.writeUint(1765620048,32),e.bits.writeUint(t.queryId||0,64),e}createChangeOwnerBody(t){if(t.newOwnerAddress===void 0)throw new Error("Specify newOwnerAddress");const e=new vr;return e.bits.writeUint(3,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newOwnerAddress),e}createEditContentBody(t){if(t.royalty>1)throw new Error("royalty > 1");t.royaltyBase=1e3,t.royaltyFactor=Math.floor(t.royalty*t.royaltyBase);const e=new vr;return e.bits.writeUint(4,32),e.bits.writeUint(t.queryId||0,64),e.refs[0]=this.createContentCell(t),e.refs[1]=this.createRoyaltyCell(t),e}async getCollectionData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_collection_data"),n=e[0];let s=NaN;try{s=n.toNumber()}catch{}const i=e[1];let u=null;try{u=Ga(i)}catch{}const g=Ka(e[2]);return{nextItemIndex:s,itemsCount:n,ownerAddress:g,collectionContentCell:i,collectionContentUri:u}}async getNftItemContent(t){const e=await this.getAddress(),n=await t.getData();if(n.isInitialized){const s=await this.provider.call2(e.toString(),"get_nft_content",[["num",n.itemIndex.toString(10)],["tvm.Cell",ap(await n.contentCell.toBoc(!1))]]);n.contentUri=null;try{n.contentUri=Ga(s)}catch{}}return n}async getNftItemAddressByIndex(t){t=new fp(t);const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_nft_address_by_index",[["num",t.toString(10)]]);return Ka(n)}async getRoyaltyParams(){const t=await this.getAddress();return hp(this.provider,t.toString())}};var cp={NftCollection:up};const{Contract:dp}=ur,{Cell:mi}=je,{Address:MA,BN:pp}=Ge,{parseAddress:za,getRoyaltyParams:vp}=Er,{parseOffchainUriCell:gp}=Er,pl="B5EE9C7241020D010001D0000114FF00F4A413F4BCF2C80B0102016202030202CE04050009A11F9FE00502012006070201200B0C02D70C8871C02497C0F83434C0C05C6C2497C0F83E903E900C7E800C5C75C87E800C7E800C3C00812CE3850C1B088D148CB1C17CB865407E90350C0408FC00F801B4C7F4CFE08417F30F45148C2EA3A1CC840DD78C9004F80C0D0D0D4D60840BF2C9A884AEB8C097C12103FCBC20080900113E910C1C2EBCB8536001F65135C705F2E191FA4021F001FA40D20031FA00820AFAF0801BA121945315A0A1DE22D70B01C300209206A19136E220C2FFF2E192218E3E821005138D91C85009CF16500BCF16712449145446A0708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB00104794102A375BE20A00727082108B77173505C8CBFF5004CF1610248040708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB000082028E3526F0018210D53276DB103744006D71708010C8CB055007CF165005FA0215CB6A12CB1FCB3F226EB39458CF17019132E201C901FB0093303234E25502F003003B3B513434CFFE900835D27080269FC07E90350C04090408F80C1C165B5B60001D00F232CFD633C58073C5B3327B5520BF75041B";let vl=class extends dp{constructor(t,e){e.wc=0,e.code=e.code||mi.oneFromBoc(pl),super(t,e),this.methods.getData=this.getData.bind(this)}createDataCell(){const t=new mi;return t.bits.writeUint(this.options.index,64),t.bits.writeAddress(this.options.collectionAddress),t}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_nft_data"),n=e[0].toNumber()===-1,s=e[1];let i=NaN;try{i=s.toNumber()}catch{}const u=za(e[2]),g=n?za(e[3]):null,w=e[4];let F=null;try{F=n&&u===null?gp(w):null}catch{}return{isInitialized:n,index:i,itemIndex:s,collectionAddress:u,ownerAddress:g,contentCell:w,contentUri:F}}async createTransferBody(t){const e=new mi;return e.bits.writeUint(1607220500,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newOwnerAddress),e.bits.writeAddress(t.responseAddress),e.bits.writeBit(!1),e.bits.writeCoins(t.forwardAmount||new pp(0)),e.bits.writeBit(!1),t.forwardPayload&&e.bits.writeBytes(t.forwardPayload),e}createGetStaticDataBody(t){const e=new mi;return e.bits.writeUint(801842850,32),e.bits.writeUint(t.queryId||0,64),e}async getRoyaltyParams(){const t=await this.getAddress();return vp(this.provider,t.toString())}};vl.codeHex=pl;var mp={NftItem:vl};const{Contract:yp}=ur,{Cell:Ya}=je;let wp=class extends yp{constructor(t,e){e.wc=0,e.code=e.code||Ya.oneFromBoc("B5EE9C7241010401006D000114FF00F4A413F4BCF2C80B01020120020300AAD23221C700915BE0D0D3030171B0915BE0FA40ED44D0FA403012C705F2E19101D31F01C0018E2BFA003001D4D43021F90070C8CA07CBFFC9D077748018C8CB05CB0258CF165004FA0213CB6BCCCCC971FB00915BE20004F2308EF7CCE7"),super(t,e)}createDataCell(){const t=new Ya;return t.bits.writeAddress(this.options.ownerAddress),t}};var bp={NftMarketplace:wp};const{Contract:Ep}=ur,{Cell:yi}=je,{parseAddress:wi}=Er,gl="B5EE9C7241020A010001B4000114FF00F4A413F4BCF2C80B01020120020302014804050004F2300202CD0607002FA03859DA89A1F481F481F481F401A861A1F401F481F4006101F7D00E8698180B8D8492F82707D201876A2687D207D207D207D006A18116BA4E10159C71D991B1B2990E382C92F837028916382F970FA01698FC1080289C6C8895D7970FAE99F98FD2018201A642802E78B2801E78B00E78B00FD016664F6AA701363804C9B081B2299823878027003698FE99F9810E000C92F857010C0801F5D41081DCD650029285029185F7970E101E87D007D207D0018384008646582A804E78B28B9D090D0A85AD08A500AFD010AE5B564B8FD80384008646582AC678B2803FD010B65B564B8FD80384008646582A802E78B00FD0109E5B564B8FD80381041082FE61E8A10C00C646582A802E78B117D010A65B509E58F8A40900C8C0029A3110471036454012F004E032363704C0038E4782103B9ACA0015BEF2E1C95312C70559C705B1F2E1CA702082105FCC3D14218010C8CB055006CF1622FA0215CB6A14CB1F14CB3F21CF1601CF16CA0021FA02CA00C98100A0FB00E05F06840FF2F0002ACB3F22CF1658CF16CA0021FA02CA00C98100A0FB00AECABAD1";let ml=class extends Ep{constructor(t,e){e.wc=0,e.code=e.code||yi.oneFromBoc(gl),super(t,e),this.methods.getData=this.getData.bind(this)}createDataCell(){const t=new yi;t.bits.writeAddress(this.options.marketplaceAddress),t.bits.writeAddress(this.options.nftAddress),t.bits.writeAddress(null),t.bits.writeCoins(this.options.fullPrice);const e=new yi;return e.bits.writeCoins(this.options.marketplaceFee),e.bits.writeAddress(this.options.royaltyAddress),e.bits.writeCoins(this.options.royaltyAmount),t.refs[0]=e,t}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_sale_data"),n=wi(e[0]),s=wi(e[1]),i=wi(e[2]),u=e[3],g=e[4],w=wi(e[5]),F=e[6];return{marketplaceAddress:n,nftAddress:s,nftOwnerAddress:i,fullPrice:u,marketplaceFee:g,royaltyAddress:w,royaltyAmount:F}}async createCancelBody(t){const e=new yi;return e.bits.writeUint(3,32),e.bits.writeUint(t.queryId||0,64),e}};ml.codeHex=gl;var xp={NftSale:ml};const{NftCollection:Ap}=cp,{NftItem:Cp}=mp,{NftMarketplace:Bp}=bp,{NftSale:Mp}=xp;hl.default={NftCollection:Ap,NftItem:Cp,NftMarketplace:Bp,NftSale:Mp};var yl={};const{Contract:_p}=ur,{Cell:kr}=je,{createOffchainUriCell:Za,parseOffchainUriCell:Fp,parseAddress:Ja}=Er,{Address:DA,BN:Sp,bytesToBase64:Dp}=Ge;let Ip=class extends _p{constructor(t,e){e.wc=0,e.code=e.code||kr.oneFromBoc("B5EE9C7241020B010001ED000114FF00F4A413F4BCF2C80B0102016202030202CC040502037A60090A03EFD9910E38048ADF068698180B8D848ADF07D201800E98FE99FF6A2687D007D206A6A18400AA9385D47181A9AA8AAE382F9702480FD207D006A18106840306B90FD001812881A28217804502A906428027D012C678B666664F6AA7041083DEECBEF29385D71811A92E001F1811802600271812F82C207F97840607080093DFC142201B82A1009AA0A01E428027D012C678B00E78B666491646580897A007A00658064907C80383A6465816503E5FFE4E83BC00C646582AC678B28027D0109E5B589666664B8FD80400FE3603FA00FA40F82854120870542013541403C85004FA0258CF1601CF16CCC922C8CB0112F400F400CB00C9F9007074C8CB02CA07CBFFC9D05008C705F2E04A12A1035024C85004FA0258CF16CCCCC9ED5401FA403020D70B01C3008E1F8210D53276DB708010C8CB055003CF1622FA0212CB6ACB1FCB3FC98042FB00915BE200303515C705F2E049FA403059C85004FA0258CF16CCCCC9ED54002E5143C705F2E049D43001C85004FA0258CF16CCCCC9ED54007DADBCF6A2687D007D206A6A183618FC1400B82A1009AA0A01E428027D012C678B00E78B666491646580897A007A00658064FC80383A6465816503E5FFE4E840001FAF16F6A2687D007D206A6A183FAA904051007F09"),super(t,e)}createDataCell(){const t=new kr;return t.bits.writeCoins(0),t.bits.writeAddress(this.options.adminAddress),t.refs[0]=Za(this.options.jettonContentUri),t.refs[1]=kr.oneFromBoc(this.options.jettonWalletCodeHex),t}createMintBody(t){const e=new kr;e.bits.writeUint(21,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.destination),e.bits.writeCoins(t.amount);const n=new kr;return n.bits.writeUint(395134233,32),n.bits.writeUint(t.queryId||0,64),n.bits.writeCoins(t.jettonAmount),n.bits.writeAddress(null),n.bits.writeAddress(null),n.bits.writeCoins(new Sp(0)),n.bits.writeBit(!1),e.refs[0]=n,e}createChangeAdminBody(t){if(t.newAdminAddress===void 0)throw new Error("Specify newAdminAddress");const e=new kr;return e.bits.writeUint(3,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newAdminAddress),e}createEditContentBody(t){const e=new kr;return e.bits.writeUint(4,32),e.bits.writeUint(t.queryId||0,64),e.refs[0]=Za(t.jettonContentUri),e}async getJettonData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_jetton_data"),n=e[0],s=e[1].toNumber()===-1,i=Ja(e[2]),u=e[3];let g=null;try{g=Fp(u)}catch{}const w=e[4];return{totalSupply:n,isMutable:s,adminAddress:i,jettonContentCell:u,jettonContentUri:g,jettonWalletCode:w}}async getJettonWalletAddress(t){const e=await this.getAddress(),n=new kr;n.bits.writeAddress(t);const s=await this.provider.call2(e.toString(),"get_wallet_address",[["tvm.Slice",Dp(await n.toBoc(!1))]]);return Ja(s)}};var Tp={JettonMinter:Ip};const{Contract:Rp}=ur,{Cell:Ls}=je,{parseAddress:Xa}=Er,{BN:Np}=Ge,wl="B5EE9C7241021201000328000114FF00F4A413F4BCF2C80B0102016202030202CC0405001BA0F605DA89A1F401F481F481A8610201D40607020148080900BB0831C02497C138007434C0C05C6C2544D7C0FC02F83E903E900C7E800C5C75C87E800C7E800C00B4C7E08403E29FA954882EA54C4D167C0238208405E3514654882EA58C511100FC02780D60841657C1EF2EA4D67C02B817C12103FCBC2000113E910C1C2EBCB853600201200A0B020120101101F500F4CFFE803E90087C007B51343E803E903E90350C144DA8548AB1C17CB8B04A30BFFCB8B0950D109C150804D50500F214013E809633C58073C5B33248B232C044BD003D0032C032483E401C1D3232C0B281F2FFF274013E903D010C7E801DE0063232C1540233C59C3E8085F2DAC4F3208405E351467232C7C6600C03F73B51343E803E903E90350C0234CFFE80145468017E903E9014D6F1C1551CDB5C150804D50500F214013E809633C58073C5B33248B232C044BD003D0032C0327E401C1D3232C0B281F2FFF274140371C1472C7CB8B0C2BE80146A2860822625A020822625A004AD822860822625A028062849F8C3C975C2C070C008E00D0E0F009ACB3F5007FA0222CF165006CF1625FA025003CF16C95005CC2391729171E25008A813A08208989680AA008208989680A0A014BCF2E2C504C98040FB001023C85004FA0258CF1601CF16CCC9ED5400705279A018A182107362D09CC8CB1F5230CB3F58FA025007CF165007CF16C9718018C8CB0524CF165006FA0215CB6A14CCC971FB0010241023000E10491038375F040076C200B08E218210D53276DB708010C8CB055008CF165004FA0216CB6A12CB1F12CB3FC972FB0093356C21E203C85004FA0258CF1601CF16CCC9ED5400DB3B51343E803E903E90350C01F4CFFE803E900C145468549271C17CB8B049F0BFFCB8B0A0822625A02A8005A805AF3CB8B0E0841EF765F7B232C7C572CFD400FE8088B3C58073C5B25C60063232C14933C59C3E80B2DAB33260103EC01004F214013E809633C58073C5B3327B55200083200835C87B51343E803E903E90350C0134C7E08405E3514654882EA0841EF765F784EE84AC7CB8B174CFCC7E800C04E81408F214013E809633C58073C5B3327B55205ECCF23D";let bl=class extends Rp{constructor(t,e){e.wc=0,e.code=e.code||Ls.oneFromBoc(wl),super(t,e)}async createTransferBody(t){const e=new Ls;return e.bits.writeUint(260734629,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeCoins(t.jettonAmount),e.bits.writeAddress(t.toAddress),e.bits.writeAddress(t.responseAddress),e.bits.writeBit(!1),e.bits.writeCoins(t.forwardAmount||new Np(0)),e.bits.writeBit(!1),t.forwardPayload&&e.bits.writeBytes(t.forwardPayload),e}async createBurnBody(t){const e=new Ls;return e.bits.writeUint(1499400124,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeCoins(t.jettonAmount),e.bits.writeAddress(t.responseAddress),e}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_wallet_data"),n=e[0],s=Xa(e[1]),i=Xa(e[2]),u=e[3];return{balance:n,ownerAddress:s,jettonMinterAddress:i,jettonWalletCode:u}}};bl.codeHex=wl;var Up={JettonWallet:bl};const{JettonMinter:Pp}=Tp,{JettonWallet:Lp}=Up;yl.default={JettonMinter:Pp,JettonWallet:Lp};const $p=10*1e3,Op=1*1e3,Qa=r=>({workchain:r.workchain,shardId:r.shard,shardBlockNumber:r.seqno});let kp=class{constructor(t,e,n,s){this.provider=t,this.storage=e,this.onBlock=n,this.startMcBlockNumber=s?s.startMcBlockNumber:void 0,this.mcInterval=(s?s.mcInterval:void 0)||$p,this.shardsInterval=(s?s.shardsInterval:void 0)||Op}async start(){if(this.stop(),!this.startMcBlockNumber&&(this.startMcBlockNumber=(await this.provider.getMasterchainInfo()).last.seqno,!this.startMcBlockNumber))throw new Error("Cannot get start mc block number from provider");const t=await this.provider.getMasterchainBlockHeader(this.startMcBlockNumber);if(this.startLT=t.end_lt,!this.startLT)throw new Error("Cannot get startLT from provider");let e=!1;const n=async()=>{if(!e){e=!0;try{const u=await this.storage.getLastMasterchainBlockNumber()||this.startMcBlockNumber;if(!u)throw new Error("no init masterchain block in storage");const g=(await this.provider.getMasterchainInfo()).last.seqno;if(!g)throw new Error("invalid last masterchain block from provider");for(let w=u+1;w<g;w++){const F=await this.provider.getBlockShards(w),I=await this.provider.getMasterchainBlockHeader(w);await this.onBlock(I,F),await this.storage.insertBlocks(w,F.shards.map(Qa))}}catch(u){console.error(u)}e=!1}};this.mcIntervalId=setInterval(()=>n(),this.mcInterval),n();let s=!1;const i=async()=>{if(!s){s=!0;try{const u=await this.storage.getUnprocessedShardBlock();if(u){const{workchain:g,shardId:w,shardBlockNumber:F}=u,I=await this.provider.getBlockHeader(g,w,F);if(I.end_lt<this.startLT)await this.storage.setBlockProcessed(g,w,F,[]);else{await this.onBlock(I);const N=I.prev_blocks.map(Qa);await this.storage.setBlockProcessed(g,w,F,N)}}}catch(u){console.log(u)}s=!1}};this.shardsIntervalId=setInterval(()=>i(),this.shardsInterval)}stop(){clearInterval(this.mcIntervalId),clearInterval(this.shardsIntervalId)}};var jp={BlockSubscription:kp};let qp=class{constructor(t){this.masterchainBlocks={},this.shardchainBlocks={},this.logFunction=t}async insertShardBlocks(t){for(const{workchain:e,shardId:n,shardBlockNumber:s}of t)this.shardchainBlocks[e+"_"+n+"_"+s]===void 0&&(this.logFunction&&this.logFunction("insert shard "+e+" "+n+" "+s),this.shardchainBlocks[e+"_"+n+"_"+s]=!1)}async insertBlocks(t,e){if(this.logFunction&&this.logFunction("mc processed "+t),this.masterchainBlocks[t]!==void 0)throw new Error("mc already exists "+t);this.masterchainBlocks[t]=!0,await this.insertShardBlocks(e)}async getLastMasterchainBlockNumber(){return Object.keys(this.masterchainBlocks).map(e=>Number(e)).sort((e,n)=>n-e)[0]}async setBlockProcessed(t,e,n,s){if(this.logFunction&&this.logFunction("shard processed "+t+" "+e+" "+n),this.shardchainBlocks[t+"_"+e+"_"+n]===void 0)throw new Error("shard not exists "+t+"_"+e+"_"+n);this.shardchainBlocks[t+"_"+e+"_"+n]=!0,await this.insertShardBlocks(s)}async getUnprocessedShardBlock(){for(let t in this.shardchainBlocks)if(this.shardchainBlocks[t]===!1){const e=t.split("_");return{workchain:Number(e[0]),shardId:e[1],shardBlockNumber:Number(e[2])}}}};var Wp={InMemoryBlockStorage:qp};const{BlockSubscription:Hp}=jp,{InMemoryBlockStorage:Kp}=Wp;var Vp={BlockSubscription:Hp,InMemoryBlockStorage:Kp};const{Contract:bi}=ur,{Cell:jn}=je,{hexToBytes:UA,BN:t0,nacl:PA,bytesToBase64:LA}=Ge;let Gp=class extends bi{constructor(t,e){e.code=jn.oneFromBoc("B5EE9C7241020F01000262000114FF00F4A413F4BCF2C80B0102012002030201480405036AF230DB3C5335A127A904F82327A128A90401BC5135A0F823B913B0F29EF800725210BE945387F0078E855386DB3CA4E2F82302DB3C0B0C0D0202CD06070121A0D0C9B67813F488DE0411F488DE0410130B048FD6D9E05E8698198FD201829846382C74E2F841999E98F9841083239BA395D497803F018B841083AB735BBED9E702984E382D9C74688462F863841083AB735BBED9E70156BA4E09040B0A0A080269F10FD22184093886D9E7C12C1083239BA39384008646582A803678B2801FD010A65B5658F89659FE4B9FD803FC1083239BA396D9E40E0A04F08E8D108C5F0C708210756E6B77DB3CE00AD31F308210706C7567831EB15210BA8F48305324A126A904F82326A127A904BEF27109FA4430A619F833D078D721D70B3F5260A11BBE8E923036F82370708210737562732759DB3C5077DE106910581047103645135042DB3CE0395F076C2232821064737472BA0A0A0D09011A8E897F821064737472DB3CE0300A006821B39982100400000072FB02DE70F8276F118010C8CB055005CF1621FA0214F40013CB6912CB1F830602948100A032DEC901FB000030ED44D0FA40FA40FA00D31FD31FD31FD31FD31FD307D31F30018021FA443020813A98DB3C01A619F833D078D721D70B3FA070F8258210706C7567228018C8CB055007CF165004FA0215CB6A12CB1F13CB3F01FA02CB00C973FB000E0040C8500ACF165008CF165006FA0214CB1F12CB1FCB1FCB1FCB1FCB07CB1FC9ED54005801A615F833D020D70B078100D1BA95810088D721DED307218100DDBA028100DEBA12B1F2E047D33F30A8AB0FE5855AB4"),super(t,e),this.methods.pay=()=>bi.createMethod(t,this.createPayExternalMessage()),this.methods.getSubscriptionData=this.getSubscriptionData.bind(this)}createDataCell(){const t=new jn;return t.bits.writeAddress(this.options.wallet),t.bits.writeAddress(this.options.beneficiary),t.bits.writeGrams(this.options.amount),t.bits.writeUint(this.options.period,32),t.bits.writeUint(this.options.startAt,32),t.bits.writeUint(this.options.timeout,32),t.bits.writeUint(0,32),t.bits.writeUint(0,32),t.bits.writeUint(0,8),t.bits.writeUint(this.options.subscriptionId,32),t}createBody(){const t=new jn;return t.bits.writeUint(new t0(1886156135).add(new t0(2147483648)),32),t}createSelfDestructBody(){const t=new jn;return t.bits.writeUint(1685288050,32),t}async getSubscriptionData(){const t=Z=>Z[0].toNumber()+":"+Z[1].toString(16),e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_subscription_data"),s=t(n[0]),i=t(n[1]),u=n[2],g=n[3].toNumber(),w=n[4].toNumber(),F=n[5].toNumber(),I=n[6].toNumber(),N=n[7].toNumber(),L=n[8].toNumber(),q=n[9].toNumber();return{wallet:s,beneficiary:i,amount:u,period:g,startAt:w,timeout:F,lastPayment:I,lastRequest:N,failedAttempts:L,subscriptionId:q}}async createPayExternalMessage(){const t=await this.getAddress(),e=bi.createExternalMessageHeader(t),n=bi.createCommonMsgInfo(e,null,null),s=new jn;return s.bits.writeUint(Math.floor(Date.now()/1e3),64),{address:t,message:n,body:s}}};var zp={SubscriptionContract:Gp};const{Cell:or}=je,Yp=(r,t)=>{if(t.length!==256/8)throw new Error("invalid publicKey length");r.bits.writeBytes(t)},is=(r,t)=>{if(t.length!==512/8)throw new Error("invalid signature length");r.bits.writeBytes(t)},ho=r=>{const t=new or;return is(t,r),t},El=(r,t)=>{if(t){if(r.bits.writeBit(1),r.refs.length>=4)throw new Error("refs overflow");r.refs.push(t)}else r.bits.writeBit(0)},xl=El,Al=1768843636,Cl=1131179891,Bl=1128492404,Ml=1433289580,_l=1130915665,Fl=1131168622,Sl=1130910580,Dl=1741148801,Zp=235282626,Jp=1433884798,Xp=2040604399,Qp=521476815,tv=143567410,ev=1727459433,Il=625158801,rv=-572749638,nv=r=>{const t=new or;return t.bits.writeUint(Dl,32),t.bits.writeCoins(r.coinsA),t.bits.writeCoins(r.coinsB),t},iv=r=>{const t=new or;return t.bits.writeUint(Al,32),t.bits.writeUint(r.channelId,128),t.bits.writeCoins(r.balanceA),t.bits.writeCoins(r.balanceB),t},sv=r=>{const t=new or;return t.bits.writeUint(Cl,32),t.bits.writeUint(r.channelId,128),t.bits.writeCoins(r.balanceA),t.bits.writeCoins(r.balanceB),t.bits.writeUint(r.seqnoA,64),t.bits.writeUint(r.seqnoB,64),t},ov=r=>{const t=new or;return t.bits.writeUint(Bl,32),t.bits.writeUint(r.channelId,128),t.bits.writeUint(r.seqnoA,64),t.bits.writeUint(r.seqnoB,64),t},av=r=>{const t=new or;return t.bits.writeCoins(r.amount),t.writeCell(r.condition),t},fv=r=>{const t=new or;return t.bits.writeUint(r.seqno,64),t.bits.writeCoins(r.sentCoins),xl(t,r.conditionals),t},lv=r=>{const t=new or;return t.bits.writeUint(Sl,32),t.bits.writeUint(r.channelId,128),t.writeCell(r.semiChannelBody),El(t,r.counterpartySemiChannelBody),t},hv=r=>{const t=new or;return is(t,r.signature),t.writeCell(r.state),t},uv=r=>{const t=new or;return t.bits.writeUint(Ml,32),t.bits.writeUint(r.channelId,128),t.refs[0]=r.signedSemiChannelStateA,t.refs[1]=r.signedSemiChannelStateB,t},cv=r=>{const t=new or;return t.bits.writeUint(_l,32),t.bits.writeUint(r.channelId,128),t.refs[0]=r.signedSemiChannelStateA,t.refs[1]=r.signedSemiChannelStateB,t},dv=r=>{const t=new or;return t.bits.writeUint(Fl,32),t.bits.writeUint(r.channelId,128),xl(t,r.conditionalsToSettle),t},pv=()=>{const r=new or;return r.bits.writeUint(Il,32),r},vv=r=>{const t=new or;return t.bits.writeUint(r.op,32),t.bits.writeBit(r.isA),is(t,r.signature),t.writeCell(r.cell),t},gv=r=>{const t=new or;return t.bits.writeUint(r.op,32),t.refs[0]=ho(r.signatureA),t.refs[1]=ho(r.signatureB),t.writeCell(r.cell),t};var mv={writePublicKey:Yp,writeSignature:is,createSignatureCell:ho,tag_init:Al,tag_cooperative_close:Cl,tag_cooperative_commit:Bl,tag_start_uncooperative_close:Ml,tag_challenge_state:_l,tag_settle_conditionals:Fl,tag_state:Sl,op_top_up_balance:Dl,op_init_channel:Zp,op_cooperative_close:Jp,op_cooperative_commit:Xp,op_start_uncooperative_close:Qp,op_challenge_quarantined_state:tv,op_settle_conditionals:ev,op_finish_uncooperative_close:Il,op_channel_closed:rv,createTopUpBalance:nv,createInitChannelBody:iv,createCooperativeCloseChannelBody:sv,createCooperativeCommitBody:ov,createConditionalPayment:av,createSemiChannelBody:fv,createSemiChannelState:lv,createSignedSemiChannelState:hv,createStartUncooperativeCloseBody:uv,createChallengeQuarantinedStateBody:cv,createSettleConditionalsBody:dv,createFinishUncooperativeClose:pv,createOneSignature:vv,createTwoSignature:gv};const{Contract:yv}=ur,{Cell:Ei}=je,{nacl:qn,hexToBytes:wv,BN:gn}=Ge,{parseAddress:e0}=Er,{writePublicKey:r0,writeSignature:OA,createSignatureCell:kA,tag_init:jA,tag_cooperative_close:qA,tag_cooperative_commit:WA,tag_start_uncooperative_close:HA,tag_challenge_state:KA,tag_settle_conditionals:VA,tag_state:GA,op_top_up_balance:zA,op_init_channel:bv,op_cooperative_close:Ev,op_cooperative_commit:xv,op_start_uncooperative_close:Av,op_challenge_quarantined_state:Cv,op_settle_conditionals:Bv,op_finish_uncooperative_close:YA,op_channel_closed:ZA,createTopUpBalance:Mv,createInitChannelBody:_v,createCooperativeCloseChannelBody:n0,createCooperativeCommitBody:Fv,createConditionalPayment:JA,createSemiChannelBody:xi,createSemiChannelState:i0,createSignedSemiChannelState:Sv,createStartUncooperativeCloseBody:Dv,createChallengeQuarantinedStateBody:Iv,createSettleConditionalsBody:Tv,createFinishUncooperativeClose:Rv,createOneSignature:Nv,createTwoSignature:Uv}=mv,Tl="B5EE9C72410230010007FB000114FF00F4A413F4BCF2C80B0102012002030201480405000AF26C21F0190202CB06070201202E2F020120080902012016170201200A0B0201200C0D0009D3610F80CC001D6B5007434C7FE8034C7CC1BC0FE19E0201580E0F0201201011002D3E11DBC4BE11DBC43232C7FE11DBC47E80B2C7F2407320008B083E1B7B51343480007E187E80007E18BE80007E18F4FFC07E1934FFC07E1974DFC07E19BC01887080A7F4C7C07E1A34C7C07E1A7D01007E1AB7807080E535007E1AF7BE1B2002012012130201201415008D3E13723E11BE117E113E10540132803E10BE80BE10FE8084F2FFC4B2FFF2DFFC02887080A7FE12BE127E121400F2C7C4B2C7FD0037807080E53E12C073253E1333C5B8B27B5520004D1C3C02FE106CFCB8193E803E800C3E1096283E18BE10C0683E18FE10BE10E8006EFCB819BC032000CF1D3C02FE106CFCB819348020C235C6083E4040E4BE1124BE117890CC3E443CB81974C7C060841A5B9A5D2EBCB81A3E118074DFD66EBCB81CBE803E800C3E1094882FBE10D4882FAC3CB819807E18BE18FE12F43E800C3E10BE10E80068006E7CB8199FFE187C0320004120843777222E9C20043232C15401B3C594013E808532DA84B2C7F2DFF2407EC02002012018190201D42B2C0201201A1B0201201E1F0201201C1D00E5473F00BD401D001D401D021F90102D31F01821043436D74BAF2E068F84601D37F59BAF2E072F844544355F910F8454330F910B0F2E065D33FD33F30F84822B9F84922B9B0F2E06C21F86820F869F84A6E915B8E19F84AD0D33FFA003171D721D33F305033BC02BCB1936DF86ADEE2F800F00C8006F3E12F43E800C7E903E900C3E09DBC41CBE10D62F24CC20C1B7BE10FE11963C03FE10BE11A04020BC03DC3E185C3E189C3E18DB7E1ABC032000B51D3C02F5007400750074087E4040B4C7C0608410DB1BDCEEBCB81A3E118074DFD66EBCB81CBE111510D57E443E1150CC3E442C3CB8197E80007E18BE80007E18F4CFF4CFCC3E1208AE7E1248AE6C3CB81B007E1A3E1A7E003C042001C1573F00BF84A6EF2E06AD2008308D71820F9012392F84492F845E24130F910F2E065D31F018210556E436CBAF2E068F84601D37F59BAF2E072D401D08308D71820F901F8444130F910F2E06501D430D08308D71820F901F8454130F910F2E06501820020120222301FED31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE2303205D31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE23032F8485280BEF8495250BEB0524BBE1AB0527ABE19210064B05215BE14B05248BE17B0F2E06970F82305C8CB3F5004FA0215F40015CB3F5004FA0212F400CB1F12CA00CA00C9F86AF00C01C31CFC02FE129BACFCB81AF48020C235C6083E4048E4BE1124BE1178904C3E443CB81974C7C0608410DA19D46EBCB81A3E118074DFD66EBCB81CB5007420C235C6083E407E11104C3E443CB81940750C3420C235C6083E407E11504C3E443CB81940602403F71CFC02FE129BACFCB81AF48020C235C6083E4048E4BE1124BE1178904C3E443CB81974C7C0608410DB10DBAEBCB81A3E118074DFD66EBCB81CBD010C3E12B434CFFE803D0134CFFE803D0134C7FE11DBC4148828083E08EE7CB81BBE11DBC4A83E08EF3CB81C34800C151D5A64D6D4C8F7A2B98E82A49B08B8C3816028292A01FCD31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE2303205D31F01821043685374BAF2E068F84601D37F59BAF2E072D33FFA00F404552003D200019AD401D0D33FFA00F40430937F206DE230325339BE5381BEB0F8495250BEB0F8485290BEB02502FE5237BE16B05262BEB0F2E06927C20097F84918BEF2E0699137E222C20097F84813BEF2E0699132E2F84AD0D33FFA00F404D33FFA00F404D31FF8476F105220A0F823BCF2E06FD200D20030B3F2E073209C3537373A5274BC5263BC12B18E11323939395250BC5299BC18B14650134440E25319BAB3F2E06D9130E30D7F05C82627002496F8476F1114A098F8476F1117A00603E203003ECB3F5004FA0215F40012CB3F5004FA0213F400CB1F12CA00CA00C9F86AF00C00620A8020F4966FA5208E213050038020F4666FA1208E1001FA00ED1E15DA119450C3A00B9133E2923430E202926C21E2B31B000C3535075063140038C8CB3F5004FA0212F400CB3F5003FA0213F400CB1FCA00C9F86AF00C00D51D3C02FE129BACFCB81AFE12B434CFFE803D010C74CFFE803D010C74C7CC3E11DBC4283E11DBC4A83E08EE7CB81C7E003E10886808E87E18BE10D400E816287E18FE10F04026BE10BE10E83E189C3E18F7BE10B04026BE10FE10A83E18DC3E18F780693E1A293E1A7C042001F53B7EF4C7C8608419F1F4A06EA4CC7C037808608403818830AEA54C7C03B6CC780C882084155DD61FAEA54C3C0476CC780820841E6849BBEEA54C3C04B6CC7808208407C546B3EEA54C3C0576CC780820840223AA8CAEA54C3C05B6CC7808208419BDBC1A6EA54C3C05F6CC780C60840950CAA46EA53C0636CC78202D0008840FF2F00075BC7FE3A7805FC25E87D007D207D20184100D0CAF6A1EC7C217C21B7817C227C22B7817C237C23FC247C24B7817C2524C3B7818823881B22A021984008DBD0CABA7805FC20C8B870FC253748B8F07C256840206B90FD0018C020EB90FD0018B8EB90E98F987C23B7882908507C11DE491839707C23B788507C23B789507C11DE48B9F03A4331C4966";var tn;let Rl=(tn=class extends yv{constructor(t,e){e.publicKeyA=e.isA?e.myKeyPair.publicKey:e.hisPublicKey,e.publicKeyB=e.isA?e.hisPublicKey:e.myKeyPair.publicKey,e.wc=e.wc||0,e.code=e.code||Ei.oneFromBoc(Tl),super(t,e)}createDataCell(){var s,i,u;const t=new Ei;t.bits.writeBit(0),t.bits.writeCoins(0),t.bits.writeCoins(0),r0(t,this.options.publicKeyA),r0(t,this.options.publicKeyB),t.bits.writeUint(this.options.channelId,128);const e=new Ei;e.bits.writeUint(((s=this.options.closingConfig)==null?void 0:s.quarantineDuration)||0,32),e.bits.writeCoins(((i=this.options.closingConfig)==null?void 0:i.misbehaviorFine)||new gn(0)),e.bits.writeUint(((u=this.options.closingConfig)==null?void 0:u.conditionalCloseDuration)||0,32),t.refs[0]=e,t.bits.writeUint(0,32),t.bits.writeUint(0,32),t.bits.writeBit(!1);const n=new Ei;return n.bits.writeCoins(this.options.excessFee||new gn(0)),n.bits.writeAddress(this.options.addressA),n.bits.writeAddress(this.options.addressB),t.refs[1]=n,t}async createOneSignature(t,e){const n=qn.sign.detached(await e.hash(),this.options.myKeyPair.secretKey);return{cell:Nv({op:t,isA:this.options.isA,signature:n,cell:e}),signature:n}}async createTwoSignature(t,e,n){const s=qn.sign.detached(await n.hash(),this.options.myKeyPair.secretKey),i=this.options.isA?s:e,u=this.options.isA?e:s;return{cell:Uv({op:t,signatureA:i,signatureB:u,cell:n}),signature:s}}async createTopUpBalance(t){return Mv(t)}async createInitChannel(t){return this.createOneSignature(bv,_v({...t,channelId:this.options.channelId}))}async createCooperativeCloseChannel(t){return t.hisSignature||(t.hisSignature=new Uint8Array(512/8)),this.createTwoSignature(Ev,t.hisSignature,n0({...t,channelId:this.options.channelId}))}async createCooperativeCommit(t){return t.hisSignature||(t.hisSignature=new Uint8Array(512/8)),this.createTwoSignature(xv,t.hisSignature,Fv({...t,channelId:this.options.channelId}))}async createSignedSemiChannelState(t){const e=i0({channelId:this.options.channelId,semiChannelBody:xi({seqno:t.mySeqno,sentCoins:t.mySentCoins,conditionals:null}),counterpartySemiChannelBody:t.hisSeqno===void 0?null:xi({seqno:t.hisSeqno,sentCoins:t.hisSentCoins,conditionals:null})}),n=qn.sign.detached(await e.hash(),this.options.myKeyPair.secretKey);return{cell:Sv({signature:n,state:e}),signature:n}}async signState(t){const e=this.options.isA?t.seqnoA:t.seqnoB,n=this.options.isA?t.seqnoB:t.seqnoA,s=this.options.initBalanceA.gt(t.balanceA)?this.options.initBalanceA.sub(t.balanceA):new gn(0),i=this.options.initBalanceB.gt(t.balanceB)?this.options.initBalanceB.sub(t.balanceB):new gn(0),u=this.options.isA?s:i,g=this.options.isA?i:s,{cell:w,signature:F}=await this.createSignedSemiChannelState({mySeqno:e,mySentCoins:u,hisSeqno:n,hisSentCoins:g});return F}async verifyState(t,e){const n=this.options.isA?t.seqnoB:t.seqnoA,s=this.options.isA?t.seqnoA:t.seqnoB,i=this.options.initBalanceA.gt(t.balanceA)?this.options.initBalanceA.sub(t.balanceA):new gn(0),u=this.options.initBalanceB.gt(t.balanceB)?this.options.initBalanceB.sub(t.balanceB):new gn(0),g=this.options.isA?u:i,w=this.options.isA?i:u,I=await i0({channelId:this.options.channelId,semiChannelBody:xi({seqno:n,sentCoins:g,conditionals:null}),counterpartySemiChannelBody:s===void 0?null:xi({seqno:s,sentCoins:w,conditionals:null})}).hash();return qn.sign.detached.verify(I,e,this.options.isA?this.options.publicKeyB:this.options.publicKeyA)}async signClose(t){const{cell:e,signature:n}=await this.createCooperativeCloseChannel(t);return n}async verifyClose(t,e){const s=await(await n0({...t,channelId:this.options.channelId})).hash();return qn.sign.detached.verify(s,e,this.options.isA?this.options.publicKeyB:this.options.publicKeyA)}async createStartUncooperativeClose(t){return this.createOneSignature(Av,Dv({...t,channelId:this.options.channelId}))}async createChallengeQuarantinedState(t){return this.createOneSignature(Cv,Iv({...t,channelId:this.options.channelId}))}async createSettleConditionals(t){return this.createOneSignature(Bv,Tv({...t,channelId:this.options.channelId}))}async createFinishUncooperativeClose(){return Rv()}async getChannelState(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_channel_state",[])).toNumber()}async getData(){const t=G=>{let k=G.toString(16);return k.length%2!==0&&(k="0"+k),wv(k)},e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_channel_data",[]),s=n[0].toNumber(),i=n[1][0],u=n[1][1],g=t(n[2][0]),w=t(n[2][1]),F=n[3],I=n[4][0].toNumber(),N=n[4][1],L=n[4][2].toNumber(),q=n[5][0],Z=n[5][1],tt=n[6],et=n[7][0],X=e0(n[7][1]),Q=e0(n[7][2]);return{state:s,balanceA:i,balanceB:u,publicKeyA:g,publicKeyB:w,channelId:F,quarantineDuration:I,misbehaviorFine:N,conditionalCloseDuration:L,seqnoA:q,seqnoB:Z,quarantine:tt,excessFee:et,addressA:X,addressB:Q}}fromWallet(t){const{wallet:e,secretKey:n}=t,s=(i,u)=>{const g=async w=>{const F=u?(await this.createStateInit()).stateInit:null,I=await this.getAddress(),N=await e.methods.seqno().call()||0,L=await i;return e.methods.transfer({secretKey:n,toAddress:I.toString(!0,!0,!0),amount:w,seqno:N,payload:L,stateInit:F,sendMode:3})};return{send:w=>g(w).then(F=>F.send()),estimateFee:w=>g(w).then(F=>F.estimateFee())}};return{deploy:()=>s(null,!0),init:i=>s(this.createInitChannel(i).then(u=>u.cell)),topUp:i=>s(this.createTopUpBalance(i)),close:i=>s(this.createCooperativeCloseChannel(i).then(u=>u.cell)),commit:i=>s(this.createCooperativeCommit(i).then(u=>u.cell)),startUncooperativeClose:i=>s(this.createStartUncooperativeClose(i).then(u=>u.cell)),challengeQuarantinedState:i=>s(this.createChallengeQuarantinedState(i).then(u=>u.cell)),settleConditionals:i=>s(this.createSettleConditionals(i).then(u=>u.cell)),finishUncooperativeClose:()=>s(this.createFinishUncooperativeClose())}}},dn(tn,"STATE_UNINITED",0),dn(tn,"STATE_OPEN",1),dn(tn,"STATE_CLOSURE_STARTED",2),dn(tn,"STATE_SETTLING_CONDITIONALS",3),dn(tn,"STATE_AWAITING_FINALIZATION",4),tn);Rl.codeHex=Tl;var Pv={PaymentChannel:Rl};const{PaymentChannel:Nl}=Pv;let Lv=class{constructor(t){this.provider=t}createChannel(t){return new Nl(this.provider,t)}};var $v={Payments:Lv,PaymentChannel:Nl},Qo={exports:{}},xn=typeof Reflect=="object"?Reflect:null,s0=xn&&typeof xn.apply=="function"?xn.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},Ri;xn&&typeof xn.ownKeys=="function"?Ri=xn.ownKeys:Object.getOwnPropertySymbols?Ri=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Ri=function(t){return Object.getOwnPropertyNames(t)};function Ov(r){console&&console.warn&&console.warn(r)}var Ul=Number.isNaN||function(t){return t!==t};function Pe(){Pe.init.call(this)}Qo.exports=Pe;Qo.exports.once=Wv;Pe.EventEmitter=Pe;Pe.prototype._events=void 0;Pe.prototype._eventsCount=0;Pe.prototype._maxListeners=void 0;var o0=10;function ss(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Pe,"defaultMaxListeners",{enumerable:!0,get:function(){return o0},set:function(r){if(typeof r!="number"||r<0||Ul(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");o0=r}});Pe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Pe.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Ul(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Pl(r){return r._maxListeners===void 0?Pe.defaultMaxListeners:r._maxListeners}Pe.prototype.getMaxListeners=function(){return Pl(this)};Pe.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var s=t==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var u;if(e.length>0&&(u=e[0]),u instanceof Error)throw u;var g=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw g.context=u,g}var w=i[t];if(w===void 0)return!1;if(typeof w=="function")s0(w,this,e);else for(var F=w.length,I=jl(w,F),n=0;n<F;++n)s0(I[n],this,e);return!0};function Ll(r,t,e,n){var s,i,u;if(ss(e),i=r._events,i===void 0?(i=r._events=Object.create(null),r._eventsCount=0):(i.newListener!==void 0&&(r.emit("newListener",t,e.listener?e.listener:e),i=r._events),u=i[t]),u===void 0)u=i[t]=e,++r._eventsCount;else if(typeof u=="function"?u=i[t]=n?[e,u]:[u,e]:n?u.unshift(e):u.push(e),s=Pl(r),s>0&&u.length>s&&!u.warned){u.warned=!0;var g=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");g.name="MaxListenersExceededWarning",g.emitter=r,g.type=t,g.count=u.length,Ov(g)}return r}Pe.prototype.addListener=function(t,e){return Ll(this,t,e,!1)};Pe.prototype.on=Pe.prototype.addListener;Pe.prototype.prependListener=function(t,e){return Ll(this,t,e,!0)};function kv(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $l(r,t,e){var n={fired:!1,wrapFn:void 0,target:r,type:t,listener:e},s=kv.bind(n);return s.listener=e,n.wrapFn=s,s}Pe.prototype.once=function(t,e){return ss(e),this.on(t,$l(this,t,e)),this};Pe.prototype.prependOnceListener=function(t,e){return ss(e),this.prependListener(t,$l(this,t,e)),this};Pe.prototype.removeListener=function(t,e){var n,s,i,u,g;if(ss(e),s=this._events,s===void 0)return this;if(n=s[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(i=-1,u=n.length-1;u>=0;u--)if(n[u]===e||n[u].listener===e){g=n[u].listener,i=u;break}if(i<0)return this;i===0?n.shift():jv(n,i),n.length===1&&(s[t]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",t,g||e)}return this};Pe.prototype.off=Pe.prototype.removeListener;Pe.prototype.removeAllListeners=function(t){var e,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var i=Object.keys(n),u;for(s=0;s<i.length;++s)u=i[s],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this};function Ol(r,t,e){var n=r._events;if(n===void 0)return[];var s=n[t];return s===void 0?[]:typeof s=="function"?e?[s.listener||s]:[s]:e?qv(s):jl(s,s.length)}Pe.prototype.listeners=function(t){return Ol(this,t,!0)};Pe.prototype.rawListeners=function(t){return Ol(this,t,!1)};Pe.listenerCount=function(r,t){return typeof r.listenerCount=="function"?r.listenerCount(t):kl.call(r,t)};Pe.prototype.listenerCount=kl;function kl(r){var t=this._events;if(t!==void 0){var e=t[r];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}Pe.prototype.eventNames=function(){return this._eventsCount>0?Ri(this._events):[]};function jl(r,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=r[n];return e}function jv(r,t){for(;t+1<r.length;t++)r[t]=r[t+1];r.pop()}function qv(r){for(var t=new Array(r.length),e=0;e<t.length;++e)t[e]=r[e].listener||r[e];return t}function Wv(r,t){return new Promise(function(e,n){function s(u){r.removeListener(t,i),n(u)}function i(){typeof r.removeListener=="function"&&r.removeListener("error",s),e([].slice.call(arguments))}ql(r,t,i,{once:!0}),t!=="error"&&Hv(r,s,{once:!0})})}function Hv(r,t,e){typeof r.on=="function"&&ql(r,"error",t,e)}function ql(r,t,e,n){if(typeof r.on=="function")n.once?r.once(t,e):r.on(t,e);else if(typeof r.addEventListener=="function")r.addEventListener(t,function s(i){n.once&&r.removeEventListener(t,s),e(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var Kv=Qo.exports;const Vv=ti(Kv);var Wl={},Hl={},ta=function(r,t){Hl[r]=t},lt=function(r){var t=function(n,s){Object.assign(this,s),this.name=r,this.message=n||r,this.stack=new Error().stack};return t.prototype=new Error,Wl[r]=t,t},Kl=function(r){if(typeof r=="object"&&r){try{var t=JSON.parse(r.message);t.message&&t.name&&(r=t)}catch{}var e=void 0;if(typeof r.name=="string"){var n=r.name,s=Hl[n];if(s)e=s(r);else{var i=n==="Error"?Error:Wl[n];i||(console.warn("deserializing an unknown class '"+n+"'"),i=lt(n)),e=Object.create(i.prototype);try{for(var u in r)r.hasOwnProperty(u)&&(e[u]=r[u])}catch{}}}else e=new Error(r.message);return!e.stack&&Error.captureStackTrace&&Error.captureStackTrace(e,Kl),e}return new Error(String(r))},Gv=function(r){return r&&(typeof r=="object"?Vl(r,[]):typeof r=="function"?"[Function: "+(r.name||"anonymous")+"]":r)};function Vl(r,t){var e={};t.push(r);for(var n=0,s=Object.keys(r);n<s.length;n++){var i=s[n],u=r[i];if(typeof u!="function"){if(!u||typeof u!="object"){e[i]=u;continue}if(t.indexOf(r[i])===-1){e[i]=Vl(r[i],t.slice(0));continue}e[i]="[Circular]"}}return typeof r.name=="string"&&(e.name=r.name),typeof r.message=="string"&&(e.message=r.message),typeof r.stack=="string"&&(e.stack=r.stack),e}var zv=lt("AccountNameRequired"),Yv=lt("AccountNotSupported"),Zv=lt("AmountRequired"),Jv=lt("BluetoothRequired"),Xv=lt("BtcUnmatchedApp"),Qv=lt("CantOpenDevice"),tg=lt("CashAddrNotSupported"),eg=lt("CurrencyNotSupported"),rg=lt("DeviceAppVerifyNotSupported"),ng=lt("DeviceGenuineSocketEarlyClose"),ig=lt("DeviceNotGenuine"),sg=lt("DeviceOnDashboardExpected"),og=lt("DeviceOnDashboardUnexpected"),ag=lt("DeviceInOSUExpected"),fg=lt("DeviceHalted"),lg=lt("DeviceNameInvalid"),hg=lt("DeviceSocketFail"),ug=lt("DeviceSocketNoBulkStatus"),os=lt("DisconnectedDevice"),ea=lt("DisconnectedDeviceDuringOperation"),cg=lt("EnpointConfig"),dg=lt("EthAppPleaseEnableContractData"),pg=lt("FeeEstimationFailed"),vg=lt("FirmwareNotRecognized"),gg=lt("HardResetFail"),mg=lt("InvalidXRPTag"),yg=lt("InvalidAddress"),wg=lt("InvalidAddressBecauseDestinationIsAlsoSource"),bg=lt("LatestMCUInstalledError"),Eg=lt("UnknownMCU"),xg=lt("LedgerAPIError"),Ag=lt("LedgerAPIErrorWithMessage"),Cg=lt("LedgerAPINotAvailable"),Bg=lt("ManagerAppAlreadyInstalled"),Mg=lt("ManagerAppRelyOnBTC"),_g=lt("ManagerAppDepInstallRequired"),Fg=lt("ManagerAppDepUninstallRequired"),Sg=lt("ManagerDeviceLocked"),Dg=lt("ManagerFirmwareNotEnoughSpace"),Ig=lt("ManagerNotEnoughSpace"),Tg=lt("ManagerUninstallBTCDep"),Rg=lt("NetworkDown"),Ng=lt("NoAddressesFound"),Ug=lt("NotEnoughBalance"),Pg=lt("NotEnoughBalanceToDelegate"),Lg=lt("NotEnoughBalanceInParentAccount"),$g=lt("NotEnoughSpendableBalance"),Og=lt("NotEnoughBalanceBecauseDestinationNotCreated"),kg=lt("NoAccessToCamera"),jg=lt("NotEnoughGas"),qg=lt("NotSupportedLegacyAddress"),Wg=lt("GasLessThanEstimate"),Hg=lt("PasswordsDontMatch"),Kg=lt("PasswordIncorrect"),Vg=lt("RecommendSubAccountsToEmpty"),Gg=lt("RecommendUndelegation"),zg=lt("TimeoutTagged"),Yg=lt("UnexpectedBootloader"),Zg=lt("MCUNotGenuineToDashboard"),Jg=lt("RecipientRequired"),Xg=lt("UnavailableTezosOriginatedAccountReceive"),Qg=lt("UnavailableTezosOriginatedAccountSend"),tm=lt("UpdateFetchFileFail"),em=lt("UpdateIncorrectHash"),rm=lt("UpdateIncorrectSig"),nm=lt("UpdateYourApp"),im=lt("UserRefusedDeviceNameChange"),sm=lt("UserRefusedAddress"),om=lt("UserRefusedFirmwareUpdate"),am=lt("UserRefusedAllowManager"),fm=lt("UserRefusedOnDevice"),Yn=lt("TransportOpenUserCancelled"),uo=lt("TransportInterfaceNotAvailable"),Gl=lt("TransportRaceCondition"),zl=lt("TransportWebUSBGestureRequired"),lm=lt("DeviceShouldStayInApp"),hm=lt("WebsocketConnectionError"),um=lt("WebsocketConnectionFailed"),cm=lt("WrongDeviceForAccount"),dm=lt("WrongAppForCurrency"),pm=lt("ETHAddressNonEIP"),vm=lt("CantScanQRCode"),gm=lt("FeeNotLoaded"),mm=lt("FeeRequired"),ym=lt("FeeTooHigh"),wm=lt("SyncError"),bm=lt("PairingFailed"),Em=lt("GenuineCheckFailed"),xm=lt("LedgerAPI4xx"),Am=lt("LedgerAPI5xx"),Cm=lt("FirmwareOrAppUpdateRequired"),Bm=lt("NoDBPathGiven"),Mm=lt("DBWrongPassword"),_m=lt("DBNotReset");function Kr(r,t){this.name="TransportError",this.message=r,this.stack=new Error().stack,this.id=t}Kr.prototype=new Error;ta("TransportError",function(r){return new Kr(r.message,r.id)});var ji={PIN_REMAINING_ATTEMPTS:25536,INCORRECT_LENGTH:26368,MISSING_CRITICAL_PARAMETER:26624,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,SECURITY_STATUS_NOT_SATISFIED:27010,CONDITIONS_OF_USE_NOT_SATISFIED:27013,INCORRECT_DATA:27264,NOT_ENOUGH_MEMORY_SPACE:27268,REFERENCED_DATA_NOT_FOUND:27272,FILE_ALREADY_EXISTS:27273,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,CLA_NOT_SUPPORTED:28160,TECHNICAL_PROBLEM:28416,OK:36864,MEMORY_PROBLEM:37440,NO_EF_SELECTED:37888,INVALID_OFFSET:37890,FILE_NOT_FOUND:37892,INCONSISTENT_FILE:37896,ALGORITHM_NOT_SUPPORTED:38020,INVALID_KCV:38021,CODE_NOT_INITIALIZED:38914,ACCESS_CONDITION_NOT_FULFILLED:38916,CONTRADICTION_SECRET_CODE_STATUS:38920,CONTRADICTION_INVALIDATION:38928,CODE_BLOCKED:38976,MAX_VALUE_REACHED:38992,GP_AUTH_FAILED:25344,LICENSING:28482,HALTED:28586};function Yl(r){switch(r){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received"}if(28416<=r&&r<=28671)return"Internal error, please report"}function as(r){this.name="TransportStatusError";var t=Object.keys(ji).find(function(s){return ji[s]===r})||"UNKNOWN_ERROR",e=Yl(r)||t,n=r.toString(16);this.message="Ledger device: "+e+" (0x"+n+")",this.stack=new Error().stack,this.statusCode=r,this.statusText=t}as.prototype=new Error;ta("TransportStatusError",function(r){return new as(r.statusCode)});const Fm=Object.freeze(Object.defineProperty({__proto__:null,AccountNameRequiredError:zv,AccountNotSupported:Yv,AmountRequired:Zv,BluetoothRequired:Jv,BtcUnmatchedApp:Xv,CantOpenDevice:Qv,CantScanQRCode:vm,CashAddrNotSupported:tg,CurrencyNotSupported:eg,DBNotReset:_m,DBWrongPassword:Mm,DeviceAppVerifyNotSupported:rg,DeviceGenuineSocketEarlyClose:ng,DeviceHalted:fg,DeviceInOSUExpected:ag,DeviceNameInvalid:lg,DeviceNotGenuineError:ig,DeviceOnDashboardExpected:sg,DeviceOnDashboardUnexpected:og,DeviceShouldStayInApp:lm,DeviceSocketFail:hg,DeviceSocketNoBulkStatus:ug,DisconnectedDevice:os,DisconnectedDeviceDuringOperation:ea,ETHAddressNonEIP:pm,EnpointConfigError:cg,EthAppPleaseEnableContractData:dg,FeeEstimationFailed:pg,FeeNotLoaded:gm,FeeRequired:mm,FeeTooHigh:ym,FirmwareNotRecognized:vg,FirmwareOrAppUpdateRequired:Cm,GasLessThanEstimate:Wg,GenuineCheckFailed:Em,HardResetFail:gg,InvalidAddress:yg,InvalidAddressBecauseDestinationIsAlsoSource:wg,InvalidXRPTag:mg,LatestMCUInstalledError:bg,LedgerAPI4xx:xm,LedgerAPI5xx:Am,LedgerAPIError:xg,LedgerAPIErrorWithMessage:Ag,LedgerAPINotAvailable:Cg,MCUNotGenuineToDashboard:Zg,ManagerAppAlreadyInstalledError:Bg,ManagerAppDepInstallRequired:_g,ManagerAppDepUninstallRequired:Fg,ManagerAppRelyOnBTCError:Mg,ManagerDeviceLockedError:Sg,ManagerFirmwareNotEnoughSpaceError:Dg,ManagerNotEnoughSpaceError:Ig,ManagerUninstallBTCDep:Tg,NetworkDown:Rg,NoAccessToCamera:kg,NoAddressesFound:Ng,NoDBPathGiven:Bm,NotEnoughBalance:Ug,NotEnoughBalanceBecauseDestinationNotCreated:Og,NotEnoughBalanceInParentAccount:Lg,NotEnoughBalanceToDelegate:Pg,NotEnoughGas:jg,NotEnoughSpendableBalance:$g,NotSupportedLegacyAddress:qg,PairingFailed:bm,PasswordIncorrectError:Kg,PasswordsDontMatchError:Hg,RecipientRequired:Jg,RecommendSubAccountsToEmpty:Vg,RecommendUndelegation:Gg,StatusCodes:ji,SyncError:wm,TimeoutTagged:zg,TransportError:Kr,TransportInterfaceNotAvailable:uo,TransportOpenUserCancelled:Yn,TransportRaceCondition:Gl,TransportStatusError:as,TransportWebUSBGestureRequired:zl,UnavailableTezosOriginatedAccountReceive:Xg,UnavailableTezosOriginatedAccountSend:Qg,UnexpectedBootloader:Yg,UnknownMCU:Eg,UpdateFetchFileFail:tm,UpdateIncorrectHash:em,UpdateIncorrectSig:rm,UpdateYourApp:nm,UserRefusedAddress:sm,UserRefusedAllowManager:am,UserRefusedDeviceNameChange:im,UserRefusedFirmwareUpdate:om,UserRefusedOnDevice:fm,WebsocketConnectionError:hm,WebsocketConnectionFailed:um,WrongAppForCurrency:dm,WrongDeviceForAccount:cm,addCustomErrorDeserializer:ta,createCustomErrorClass:lt,deserializeError:Kl,getAltStatusMessage:Yl,serializeError:Gv},Symbol.toStringTag,{value:"Module"}));class $r{constructor(){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new Vv,this.send=async(t,e,n,s,i=Buffer.alloc(0),u=[ji.OK])=>{if(i.length>=256)throw new Kr("data.length exceed 256 bytes limit. Got: "+i.length,"DataLengthTooBig");const g=await this.exchange(Buffer.concat([Buffer.from([t,e,n,s]),Buffer.from([i.length]),i])),w=g.readUInt16BE(g.length-2);if(!u.some(F=>F===w))throw new as(w);return g},this.exchangeBusyPromise=void 0,this.exchangeAtomicImpl=async t=>{if(this.exchangeBusyPromise)throw new Gl("An action was already pending on the Ledger device. Please deny or reconnect.");let e;const n=new Promise(u=>{e=u});this.exchangeBusyPromise=n;let s=!1;const i=setTimeout(()=>{s=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{const u=await t();return s&&this.emit("responsive"),u}finally{clearTimeout(i),e&&e(),this.exchangeBusyPromise=null}},this._appAPIlock=null}exchange(t){throw new Error("exchange not implemented")}setScrambleKey(t){}close(){return Promise.resolve()}on(t,e){this._events.on(t,e)}off(t,e){this._events.removeListener(t,e)}emit(t,...e){this._events.emit(t,...e)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(t){this.exchangeTimeout=t}setExchangeUnresponsiveTimeout(t){this.unresponsiveTimeout=t}static create(t=3e3,e){return new Promise((n,s)=>{let i=!1;const u=this.listen({next:w=>{i=!0,u&&u.unsubscribe(),g&&clearTimeout(g),this.open(w.descriptor,t).then(n,s)},error:w=>{g&&clearTimeout(g),s(w)},complete:()=>{g&&clearTimeout(g),i||s(new Kr(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),g=e?setTimeout(()=>{u.unsubscribe(),s(new Kr(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},e):null})}decorateAppAPIMethods(t,e,n){for(let s of e)t[s]=this.decorateAppAPIMethod(s,t[s],t,n)}decorateAppAPIMethod(t,e,n,s){return async(...i)=>{const{_appAPIlock:u}=this;if(u)return Promise.reject(new Kr("Ledger Device is busy (lock "+u+")","TransportLocked"));try{return this._appAPIlock=t,this.setScrambleKey(s),await e.apply(n,i)}finally{this._appAPIlock=null}}}}$r.isSupported=void 0;$r.list=void 0;$r.listen=void 0;$r.open=void 0;$r.ErrorMessage_ListenTimeout="No Ledger device found (timeout)";$r.ErrorMessage_NoDeviceFound="No Ledger device found";var ra={};const Zl=Jr(Fm);Object.defineProperty(ra,"__esModule",{value:!0});var na=ra.default=void 0,$s=Zl;const a0=5;function Sm(r){const t=Buffer.alloc(2);return t.writeUInt16BE(r,0),t}const Dm={data:Buffer.alloc(0),dataLength:0,sequence:0},Im=(r,t)=>({makeBlocks(e){let n=Buffer.concat([Sm(e.length),e]);const s=t-5,i=Math.ceil(n.length/s);n=Buffer.concat([n,Buffer.alloc(i*s-n.length+1).fill(0)]);const u=[];for(let g=0;g<i;g++){const w=Buffer.alloc(5);w.writeUInt16BE(r,0),w.writeUInt8(a0,2),w.writeUInt16BE(g,3);const F=n.slice(g*s,(g+1)*s);u.push(Buffer.concat([w,F]))}return u},reduceResponse(e,n){let{data:s,dataLength:i,sequence:u}=e||Dm;if(n.readUInt16BE(0)!==r)throw new $s.TransportError("Invalid channel","InvalidChannel");if(n.readUInt8(2)!==a0)throw new $s.TransportError("Invalid tag","InvalidTag");if(n.readUInt16BE(3)!==u)throw new $s.TransportError("Invalid sequence","InvalidSequence");e||(i=n.readUInt16BE(5)),u++;const g=n.slice(e?5:7);return s=Buffer.concat([s,g]),s.length>i&&(s=s.slice(0,i)),{data:s,dataLength:i,sequence:u}},getReducedResult(e){if(e&&e.dataLength===e.data.length)return e.data}});var Tm=Im;na=ra.default=Tm;var co={exports:{}};const Rm="2.0.0",Nm=256,Um=Number.MAX_SAFE_INTEGER||9007199254740991,Pm=16,Lm=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var fs={MAX_LENGTH:Nm,MAX_SAFE_COMPONENT_LENGTH:Pm,MAX_SAFE_INTEGER:Um,RELEASE_TYPES:Lm,SEMVER_SPEC_VERSION:Rm,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const $m=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var ls=$m;(function(r,t){const{MAX_SAFE_COMPONENT_LENGTH:e}=fs,n=ls;t=r.exports={};const s=t.re=[],i=t.src=[],u=t.t={};let g=0;const w=(F,I,N)=>{const L=g++;n(F,L,I),u[F]=L,i[L]=I,s[L]=new RegExp(I,N?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*"),w("NUMERICIDENTIFIERLOOSE","[0-9]+"),w("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),w("MAINVERSION",`(${i[u.NUMERICIDENTIFIER]})\\.(${i[u.NUMERICIDENTIFIER]})\\.(${i[u.NUMERICIDENTIFIER]})`),w("MAINVERSIONLOOSE",`(${i[u.NUMERICIDENTIFIERLOOSE]})\\.(${i[u.NUMERICIDENTIFIERLOOSE]})\\.(${i[u.NUMERICIDENTIFIERLOOSE]})`),w("PRERELEASEIDENTIFIER",`(?:${i[u.NUMERICIDENTIFIER]}|${i[u.NONNUMERICIDENTIFIER]})`),w("PRERELEASEIDENTIFIERLOOSE",`(?:${i[u.NUMERICIDENTIFIERLOOSE]}|${i[u.NONNUMERICIDENTIFIER]})`),w("PRERELEASE",`(?:-(${i[u.PRERELEASEIDENTIFIER]}(?:\\.${i[u.PRERELEASEIDENTIFIER]})*))`),w("PRERELEASELOOSE",`(?:-?(${i[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[u.PRERELEASEIDENTIFIERLOOSE]})*))`),w("BUILDIDENTIFIER","[0-9A-Za-z-]+"),w("BUILD",`(?:\\+(${i[u.BUILDIDENTIFIER]}(?:\\.${i[u.BUILDIDENTIFIER]})*))`),w("FULLPLAIN",`v?${i[u.MAINVERSION]}${i[u.PRERELEASE]}?${i[u.BUILD]}?`),w("FULL",`^${i[u.FULLPLAIN]}$`),w("LOOSEPLAIN",`[v=\\s]*${i[u.MAINVERSIONLOOSE]}${i[u.PRERELEASELOOSE]}?${i[u.BUILD]}?`),w("LOOSE",`^${i[u.LOOSEPLAIN]}$`),w("GTLT","((?:<|>)?=?)"),w("XRANGEIDENTIFIERLOOSE",`${i[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),w("XRANGEIDENTIFIER",`${i[u.NUMERICIDENTIFIER]}|x|X|\\*`),w("XRANGEPLAIN",`[v=\\s]*(${i[u.XRANGEIDENTIFIER]})(?:\\.(${i[u.XRANGEIDENTIFIER]})(?:\\.(${i[u.XRANGEIDENTIFIER]})(?:${i[u.PRERELEASE]})?${i[u.BUILD]}?)?)?`),w("XRANGEPLAINLOOSE",`[v=\\s]*(${i[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[u.XRANGEIDENTIFIERLOOSE]})(?:${i[u.PRERELEASELOOSE]})?${i[u.BUILD]}?)?)?`),w("XRANGE",`^${i[u.GTLT]}\\s*${i[u.XRANGEPLAIN]}$`),w("XRANGELOOSE",`^${i[u.GTLT]}\\s*${i[u.XRANGEPLAINLOOSE]}$`),w("COERCE",`(^|[^\\d])(\\d{1,${e}})(?:\\.(\\d{1,${e}}))?(?:\\.(\\d{1,${e}}))?(?:$|[^\\d])`),w("COERCERTL",i[u.COERCE],!0),w("LONETILDE","(?:~>?)"),w("TILDETRIM",`(\\s*)${i[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",w("TILDE",`^${i[u.LONETILDE]}${i[u.XRANGEPLAIN]}$`),w("TILDELOOSE",`^${i[u.LONETILDE]}${i[u.XRANGEPLAINLOOSE]}$`),w("LONECARET","(?:\\^)"),w("CARETTRIM",`(\\s*)${i[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",w("CARET",`^${i[u.LONECARET]}${i[u.XRANGEPLAIN]}$`),w("CARETLOOSE",`^${i[u.LONECARET]}${i[u.XRANGEPLAINLOOSE]}$`),w("COMPARATORLOOSE",`^${i[u.GTLT]}\\s*(${i[u.LOOSEPLAIN]})$|^$`),w("COMPARATOR",`^${i[u.GTLT]}\\s*(${i[u.FULLPLAIN]})$|^$`),w("COMPARATORTRIM",`(\\s*)${i[u.GTLT]}\\s*(${i[u.LOOSEPLAIN]}|${i[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",w("HYPHENRANGE",`^\\s*(${i[u.XRANGEPLAIN]})\\s+-\\s+(${i[u.XRANGEPLAIN]})\\s*$`),w("HYPHENRANGELOOSE",`^\\s*(${i[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[u.XRANGEPLAINLOOSE]})\\s*$`),w("STAR","(<|>)?=?\\s*\\*"),w("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),w("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(co,co.exports);var ni=co.exports;const Om=Object.freeze({loose:!0}),km=Object.freeze({}),jm=r=>r?typeof r!="object"?Om:r:km;var ia=jm;const f0=/^[0-9]+$/,Jl=(r,t)=>{const e=f0.test(r),n=f0.test(t);return e&&n&&(r=+r,t=+t),r===t?0:e&&!n?-1:n&&!e?1:r<t?-1:1},qm=(r,t)=>Jl(t,r);var Xl={compareIdentifiers:Jl,rcompareIdentifiers:qm};const Ai=ls,{MAX_LENGTH:l0,MAX_SAFE_INTEGER:Ci}=fs,{re:h0,t:u0}=ni,Wm=ia,{compareIdentifiers:mn}=Xl;let Hm=class Fr{constructor(t,e){if(e=Wm(e),t instanceof Fr){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>l0)throw new TypeError(`version is longer than ${l0} characters`);Ai("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?h0[u0.LOOSE]:h0[u0.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Ci||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ci||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ci||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<Ci)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ai("SemVer.compare",this.version,this.options,t),!(t instanceof Fr)){if(typeof t=="string"&&t===this.version)return 0;t=new Fr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Fr||(t=new Fr(t,this.options)),mn(this.major,t.major)||mn(this.minor,t.minor)||mn(this.patch,t.patch)}comparePre(t){if(t instanceof Fr||(t=new Fr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],s=t.prerelease[e];if(Ai("prerelease compare",e,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return mn(n,s)}while(++e)}compareBuild(t){t instanceof Fr||(t=new Fr(t,this.options));let e=0;do{const n=this.build[e],s=t.build[e];if(Ai("prerelease compare",e,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return mn(n,s)}while(++e)}inc(t,e,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,n),this.inc("pre",e,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e,n),this.inc("pre",e,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(n)?1:0;if(!e&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(e===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(e){let i=[e,s];n===!1&&(i=[e]),mn(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};var ar=Hm;const c0=ar,Km=(r,t,e=!1)=>{if(r instanceof c0)return r;try{return new c0(r,t)}catch(n){if(!e)return null;throw n}};var Rn=Km;const Vm=Rn,Gm=(r,t)=>{const e=Vm(r,t);return e?e.version:null};var zm=Gm;const Ym=Rn,Zm=(r,t)=>{const e=Ym(r.trim().replace(/^[=v]+/,""),t);return e?e.version:null};var Jm=Zm;const d0=ar,Xm=(r,t,e,n,s)=>{typeof e=="string"&&(s=n,n=e,e=void 0);try{return new d0(r instanceof d0?r.version:r,e).inc(t,n,s).version}catch{return null}};var Qm=Xm;const p0=Rn,ty=(r,t)=>{const e=p0(r,null,!0),n=p0(t,null,!0),s=e.compare(n);if(s===0)return null;const i=s>0,u=i?e:n,g=i?n:e,w=!!u.prerelease.length,F=w?"pre":"";return e.major!==n.major?F+"major":e.minor!==n.minor?F+"minor":e.patch!==n.patch?F+"patch":w?"prerelease":g.patch?"patch":g.minor?"minor":"major"};var ey=ty;const ry=ar,ny=(r,t)=>new ry(r,t).major;var iy=ny;const sy=ar,oy=(r,t)=>new sy(r,t).minor;var ay=oy;const fy=ar,ly=(r,t)=>new fy(r,t).patch;var hy=ly;const uy=Rn,cy=(r,t)=>{const e=uy(r,t);return e&&e.prerelease.length?e.prerelease:null};var dy=cy;const v0=ar,py=(r,t,e)=>new v0(r,e).compare(new v0(t,e));var Cr=py;const vy=Cr,gy=(r,t,e)=>vy(t,r,e);var my=gy;const yy=Cr,wy=(r,t)=>yy(r,t,!0);var by=wy;const g0=ar,Ey=(r,t,e)=>{const n=new g0(r,e),s=new g0(t,e);return n.compare(s)||n.compareBuild(s)};var sa=Ey;const xy=sa,Ay=(r,t)=>r.sort((e,n)=>xy(e,n,t));var Cy=Ay;const By=sa,My=(r,t)=>r.sort((e,n)=>By(n,e,t));var _y=My;const Fy=Cr,Sy=(r,t,e)=>Fy(r,t,e)>0;var hs=Sy;const Dy=Cr,Iy=(r,t,e)=>Dy(r,t,e)<0;var oa=Iy;const Ty=Cr,Ry=(r,t,e)=>Ty(r,t,e)===0;var Ql=Ry;const Ny=Cr,Uy=(r,t,e)=>Ny(r,t,e)!==0;var th=Uy;const Py=Cr,Ly=(r,t,e)=>Py(r,t,e)>=0;var aa=Ly;const $y=Cr,Oy=(r,t,e)=>$y(r,t,e)<=0;var fa=Oy;const ky=Ql,jy=th,qy=hs,Wy=aa,Hy=oa,Ky=fa,Vy=(r,t,e,n)=>{switch(t){case"===":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r===e;case"!==":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r!==e;case"":case"=":case"==":return ky(r,e,n);case"!=":return jy(r,e,n);case">":return qy(r,e,n);case">=":return Wy(r,e,n);case"<":return Hy(r,e,n);case"<=":return Ky(r,e,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var eh=Vy;const Gy=ar,zy=Rn,{re:Bi,t:Mi}=ni,Yy=(r,t)=>{if(r instanceof Gy)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;t=t||{};let e=null;if(!t.rtl)e=r.match(Bi[Mi.COERCE]);else{let n;for(;(n=Bi[Mi.COERCERTL].exec(r))&&(!e||e.index+e[0].length!==r.length);)(!e||n.index+n[0].length!==e.index+e[0].length)&&(e=n),Bi[Mi.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Bi[Mi.COERCERTL].lastIndex=-1}return e===null?null:zy(`${e[2]}.${e[3]||"0"}.${e[4]||"0"}`,t)};var Zy=Yy,Os,m0;function Jy(){return m0||(m0=1,Os=function(r){r.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Os}var ks,y0;function Xy(){if(y0)return ks;y0=1,ks=r,r.Node=s,r.create=r;function r(i){var u=this;if(u instanceof r||(u=new r),u.tail=null,u.head=null,u.length=0,i&&typeof i.forEach=="function")i.forEach(function(F){u.push(F)});else if(arguments.length>0)for(var g=0,w=arguments.length;g<w;g++)u.push(arguments[g]);return u}r.prototype.removeNode=function(i){if(i.list!==this)throw new Error("removing node which does not belong to this list");var u=i.next,g=i.prev;return u&&(u.prev=g),g&&(g.next=u),i===this.head&&(this.head=u),i===this.tail&&(this.tail=g),i.list.length--,i.next=null,i.prev=null,i.list=null,u},r.prototype.unshiftNode=function(i){if(i!==this.head){i.list&&i.list.removeNode(i);var u=this.head;i.list=this,i.next=u,u&&(u.prev=i),this.head=i,this.tail||(this.tail=i),this.length++}},r.prototype.pushNode=function(i){if(i!==this.tail){i.list&&i.list.removeNode(i);var u=this.tail;i.list=this,i.prev=u,u&&(u.next=i),this.tail=i,this.head||(this.head=i),this.length++}},r.prototype.push=function(){for(var i=0,u=arguments.length;i<u;i++)e(this,arguments[i]);return this.length},r.prototype.unshift=function(){for(var i=0,u=arguments.length;i<u;i++)n(this,arguments[i]);return this.length},r.prototype.pop=function(){if(this.tail){var i=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,i}},r.prototype.shift=function(){if(this.head){var i=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,i}},r.prototype.forEach=function(i,u){u=u||this;for(var g=this.head,w=0;g!==null;w++)i.call(u,g.value,w,this),g=g.next},r.prototype.forEachReverse=function(i,u){u=u||this;for(var g=this.tail,w=this.length-1;g!==null;w--)i.call(u,g.value,w,this),g=g.prev},r.prototype.get=function(i){for(var u=0,g=this.head;g!==null&&u<i;u++)g=g.next;if(u===i&&g!==null)return g.value},r.prototype.getReverse=function(i){for(var u=0,g=this.tail;g!==null&&u<i;u++)g=g.prev;if(u===i&&g!==null)return g.value},r.prototype.map=function(i,u){u=u||this;for(var g=new r,w=this.head;w!==null;)g.push(i.call(u,w.value,this)),w=w.next;return g},r.prototype.mapReverse=function(i,u){u=u||this;for(var g=new r,w=this.tail;w!==null;)g.push(i.call(u,w.value,this)),w=w.prev;return g},r.prototype.reduce=function(i,u){var g,w=this.head;if(arguments.length>1)g=u;else if(this.head)w=this.head.next,g=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var F=0;w!==null;F++)g=i(g,w.value,F),w=w.next;return g},r.prototype.reduceReverse=function(i,u){var g,w=this.tail;if(arguments.length>1)g=u;else if(this.tail)w=this.tail.prev,g=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var F=this.length-1;w!==null;F--)g=i(g,w.value,F),w=w.prev;return g},r.prototype.toArray=function(){for(var i=new Array(this.length),u=0,g=this.head;g!==null;u++)i[u]=g.value,g=g.next;return i},r.prototype.toArrayReverse=function(){for(var i=new Array(this.length),u=0,g=this.tail;g!==null;u++)i[u]=g.value,g=g.prev;return i},r.prototype.slice=function(i,u){u=u||this.length,u<0&&(u+=this.length),i=i||0,i<0&&(i+=this.length);var g=new r;if(u<i||u<0)return g;i<0&&(i=0),u>this.length&&(u=this.length);for(var w=0,F=this.head;F!==null&&w<i;w++)F=F.next;for(;F!==null&&w<u;w++,F=F.next)g.push(F.value);return g},r.prototype.sliceReverse=function(i,u){u=u||this.length,u<0&&(u+=this.length),i=i||0,i<0&&(i+=this.length);var g=new r;if(u<i||u<0)return g;i<0&&(i=0),u>this.length&&(u=this.length);for(var w=this.length,F=this.tail;F!==null&&w>u;w--)F=F.prev;for(;F!==null&&w>i;w--,F=F.prev)g.push(F.value);return g},r.prototype.splice=function(i,u,...g){i>this.length&&(i=this.length-1),i<0&&(i=this.length+i);for(var w=0,F=this.head;F!==null&&w<i;w++)F=F.next;for(var I=[],w=0;F&&w<u;w++)I.push(F.value),F=this.removeNode(F);F===null&&(F=this.tail),F!==this.head&&F!==this.tail&&(F=F.prev);for(var w=0;w<g.length;w++)F=t(this,F,g[w]);return I},r.prototype.reverse=function(){for(var i=this.head,u=this.tail,g=i;g!==null;g=g.prev){var w=g.prev;g.prev=g.next,g.next=w}return this.head=u,this.tail=i,this};function t(i,u,g){var w=u===i.head?new s(g,null,u,i):new s(g,u,u.next,i);return w.next===null&&(i.tail=w),w.prev===null&&(i.head=w),i.length++,w}function e(i,u){i.tail=new s(u,i.tail,null,i),i.head||(i.head=i.tail),i.length++}function n(i,u){i.head=new s(u,null,i.head,i),i.tail||(i.tail=i.head),i.length++}function s(i,u,g,w){if(!(this instanceof s))return new s(i,u,g,w);this.list=w,this.value=i,u?(u.next=this,this.prev=u):this.prev=null,g?(g.prev=this,this.next=g):this.next=null}try{Jy()(r)}catch{}return ks}var js,w0;function Qy(){if(w0)return js;w0=1;const r=Xy(),t=Symbol("max"),e=Symbol("length"),n=Symbol("lengthCalculator"),s=Symbol("allowStale"),i=Symbol("maxAge"),u=Symbol("dispose"),g=Symbol("noDisposeOnSet"),w=Symbol("lruList"),F=Symbol("cache"),I=Symbol("updateAgeOnGet"),N=()=>1;class L{constructor(k){if(typeof k=="number"&&(k={max:k}),k||(k={}),k.max&&(typeof k.max!="number"||k.max<0))throw new TypeError("max must be a non-negative number");this[t]=k.max||1/0;const J=k.length||N;if(this[n]=typeof J!="function"?N:J,this[s]=k.stale||!1,k.maxAge&&typeof k.maxAge!="number")throw new TypeError("maxAge must be a number");this[i]=k.maxAge||0,this[u]=k.dispose,this[g]=k.noDisposeOnSet||!1,this[I]=k.updateAgeOnGet||!1,this.reset()}set max(k){if(typeof k!="number"||k<0)throw new TypeError("max must be a non-negative number");this[t]=k||1/0,tt(this)}get max(){return this[t]}set allowStale(k){this[s]=!!k}get allowStale(){return this[s]}set maxAge(k){if(typeof k!="number")throw new TypeError("maxAge must be a non-negative number");this[i]=k,tt(this)}get maxAge(){return this[i]}set lengthCalculator(k){typeof k!="function"&&(k=N),k!==this[n]&&(this[n]=k,this[e]=0,this[w].forEach(J=>{J.length=this[n](J.value,J.key),this[e]+=J.length})),tt(this)}get lengthCalculator(){return this[n]}get length(){return this[e]}get itemCount(){return this[w].length}rforEach(k,J){J=J||this;for(let st=this[w].tail;st!==null;){const ut=st.prev;Q(this,k,st,J),st=ut}}forEach(k,J){J=J||this;for(let st=this[w].head;st!==null;){const ut=st.next;Q(this,k,st,J),st=ut}}keys(){return this[w].toArray().map(k=>k.key)}values(){return this[w].toArray().map(k=>k.value)}reset(){this[u]&&this[w]&&this[w].length&&this[w].forEach(k=>this[u](k.key,k.value)),this[F]=new Map,this[w]=new r,this[e]=0}dump(){return this[w].map(k=>Z(this,k)?!1:{k:k.key,v:k.value,e:k.now+(k.maxAge||0)}).toArray().filter(k=>k)}dumpLru(){return this[w]}set(k,J,st){if(st=st||this[i],st&&typeof st!="number")throw new TypeError("maxAge must be a number");const ut=st?Date.now():0,at=this[n](J,k);if(this[F].has(k)){if(at>this[t])return et(this,this[F].get(k)),!1;const a=this[F].get(k).value;return this[u]&&(this[g]||this[u](k,a.value)),a.now=ut,a.maxAge=st,a.value=J,this[e]+=at-a.length,a.length=at,this.get(k),tt(this),!0}const Gt=new X(k,J,at,ut,st);return Gt.length>this[t]?(this[u]&&this[u](k,J),!1):(this[e]+=Gt.length,this[w].unshift(Gt),this[F].set(k,this[w].head),tt(this),!0)}has(k){if(!this[F].has(k))return!1;const J=this[F].get(k).value;return!Z(this,J)}get(k){return q(this,k,!0)}peek(k){return q(this,k,!1)}pop(){const k=this[w].tail;return k?(et(this,k),k.value):null}del(k){et(this,this[F].get(k))}load(k){this.reset();const J=Date.now();for(let st=k.length-1;st>=0;st--){const ut=k[st],at=ut.e||0;if(at===0)this.set(ut.k,ut.v);else{const Gt=at-J;Gt>0&&this.set(ut.k,ut.v,Gt)}}}prune(){this[F].forEach((k,J)=>q(this,J,!1))}}const q=(G,k,J)=>{const st=G[F].get(k);if(st){const ut=st.value;if(Z(G,ut)){if(et(G,st),!G[s])return}else J&&(G[I]&&(st.value.now=Date.now()),G[w].unshiftNode(st));return ut.value}},Z=(G,k)=>{if(!k||!k.maxAge&&!G[i])return!1;const J=Date.now()-k.now;return k.maxAge?J>k.maxAge:G[i]&&J>G[i]},tt=G=>{if(G[e]>G[t])for(let k=G[w].tail;G[e]>G[t]&&k!==null;){const J=k.prev;et(G,k),k=J}},et=(G,k)=>{if(k){const J=k.value;G[u]&&G[u](J.key,J.value),G[e]-=J.length,G[F].delete(J.key),G[w].removeNode(k)}};class X{constructor(k,J,st,ut,at){this.key=k,this.value=J,this.length=st,this.now=ut,this.maxAge=at||0}}const Q=(G,k,J,st)=>{let ut=J.value;Z(G,ut)&&(et(G,J),G[s]||(ut=void 0)),ut&&k.call(st,ut.value,ut.key,G)};return js=L,js}var qs,b0;function Br(){if(b0)return qs;b0=1;class r{constructor(h,c){if(c=n(c),h instanceof r)return h.loose===!!c.loose&&h.includePrerelease===!!c.includePrerelease?h:new r(h.raw,c);if(h instanceof s)return this.raw=h.value,this.set=[[h]],this.format(),this;if(this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease,this.raw=h,this.set=h.split("||").map(p=>this.parseRange(p.trim())).filter(p=>p.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${h}`);if(this.set.length>1){const p=this.set[0];if(this.set=this.set.filter(b=>!Z(b[0])),this.set.length===0)this.set=[p];else if(this.set.length>1){for(const b of this.set)if(b.length===1&&tt(b[0])){this.set=[b];break}}}this.format()}format(){return this.range=this.set.map(h=>h.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(h){h=h.trim();const p=((this.options.includePrerelease&&L)|(this.options.loose&&q))+":"+h,b=e.get(p);if(b)return b;const v=this.options.loose,f=v?g[w.HYPHENRANGELOOSE]:g[w.HYPHENRANGE];h=h.replace(f,a(this.options.includePrerelease)),i("hyphen replace",h),h=h.replace(g[w.COMPARATORTRIM],F),i("comparator trim",h),h=h.replace(g[w.TILDETRIM],I),h=h.replace(g[w.CARETTRIM],N),h=h.split(/\s+/).join(" ");let d=h.split(" ").map(W=>X(W,this.options)).join(" ").split(/\s+/).map(W=>E(W,this.options));v&&(d=d.filter(W=>(i("loose invalid filter",W,this.options),!!W.match(g[w.COMPARATORLOOSE])))),i("range list",d);const m=new Map,B=d.map(W=>new s(W,this.options));for(const W of B){if(Z(W))return[W];m.set(W.value,W)}m.size>1&&m.has("")&&m.delete("");const O=[...m.values()];return e.set(p,O),O}intersects(h,c){if(!(h instanceof r))throw new TypeError("a Range is required");return this.set.some(p=>et(p,c)&&h.set.some(b=>et(b,c)&&p.every(v=>b.every(f=>v.intersects(f,c)))))}test(h){if(!h)return!1;if(typeof h=="string")try{h=new u(h,this.options)}catch{return!1}for(let c=0;c<this.set.length;c++)if(l(this.set[c],h,this.options))return!0;return!1}}qs=r;const t=Qy(),e=new t({max:1e3}),n=ia,s=us(),i=ls,u=ar,{re:g,t:w,comparatorTrimReplace:F,tildeTrimReplace:I,caretTrimReplace:N}=ni,{FLAG_INCLUDE_PRERELEASE:L,FLAG_LOOSE:q}=fs,Z=o=>o.value==="<0.0.0-0",tt=o=>o.value==="",et=(o,h)=>{let c=!0;const p=o.slice();let b=p.pop();for(;c&&p.length;)c=p.every(v=>b.intersects(v,h)),b=p.pop();return c},X=(o,h)=>(i("comp",o,h),o=J(o,h),i("caret",o),o=G(o,h),i("tildes",o),o=ut(o,h),i("xrange",o),o=Gt(o,h),i("stars",o),o),Q=o=>!o||o.toLowerCase()==="x"||o==="*",G=(o,h)=>o.trim().split(/\s+/).map(c=>k(c,h)).join(" "),k=(o,h)=>{const c=h.loose?g[w.TILDELOOSE]:g[w.TILDE];return o.replace(c,(p,b,v,f,d)=>{i("tilde",o,p,b,v,f,d);let m;return Q(b)?m="":Q(v)?m=`>=${b}.0.0 <${+b+1}.0.0-0`:Q(f)?m=`>=${b}.${v}.0 <${b}.${+v+1}.0-0`:d?(i("replaceTilde pr",d),m=`>=${b}.${v}.${f}-${d} <${b}.${+v+1}.0-0`):m=`>=${b}.${v}.${f} <${b}.${+v+1}.0-0`,i("tilde return",m),m})},J=(o,h)=>o.trim().split(/\s+/).map(c=>st(c,h)).join(" "),st=(o,h)=>{i("caret",o,h);const c=h.loose?g[w.CARETLOOSE]:g[w.CARET],p=h.includePrerelease?"-0":"";return o.replace(c,(b,v,f,d,m)=>{i("caret",o,b,v,f,d,m);let B;return Q(v)?B="":Q(f)?B=`>=${v}.0.0${p} <${+v+1}.0.0-0`:Q(d)?v==="0"?B=`>=${v}.${f}.0${p} <${v}.${+f+1}.0-0`:B=`>=${v}.${f}.0${p} <${+v+1}.0.0-0`:m?(i("replaceCaret pr",m),v==="0"?f==="0"?B=`>=${v}.${f}.${d}-${m} <${v}.${f}.${+d+1}-0`:B=`>=${v}.${f}.${d}-${m} <${v}.${+f+1}.0-0`:B=`>=${v}.${f}.${d}-${m} <${+v+1}.0.0-0`):(i("no pr"),v==="0"?f==="0"?B=`>=${v}.${f}.${d}${p} <${v}.${f}.${+d+1}-0`:B=`>=${v}.${f}.${d}${p} <${v}.${+f+1}.0-0`:B=`>=${v}.${f}.${d} <${+v+1}.0.0-0`),i("caret return",B),B})},ut=(o,h)=>(i("replaceXRanges",o,h),o.split(/\s+/).map(c=>at(c,h)).join(" ")),at=(o,h)=>{o=o.trim();const c=h.loose?g[w.XRANGELOOSE]:g[w.XRANGE];return o.replace(c,(p,b,v,f,d,m)=>{i("xRange",o,p,b,v,f,d,m);const B=Q(v),O=B||Q(f),W=O||Q(d),K=W;return b==="="&&K&&(b=""),m=h.includePrerelease?"-0":"",B?b===">"||b==="<"?p="<0.0.0-0":p="*":b&&K?(O&&(f=0),d=0,b===">"?(b=">=",O?(v=+v+1,f=0,d=0):(f=+f+1,d=0)):b==="<="&&(b="<",O?v=+v+1:f=+f+1),b==="<"&&(m="-0"),p=`${b+v}.${f}.${d}${m}`):O?p=`>=${v}.0.0${m} <${+v+1}.0.0-0`:W&&(p=`>=${v}.${f}.0${m} <${v}.${+f+1}.0-0`),i("xRange return",p),p})},Gt=(o,h)=>(i("replaceStars",o,h),o.trim().replace(g[w.STAR],"")),E=(o,h)=>(i("replaceGTE0",o,h),o.trim().replace(g[h.includePrerelease?w.GTE0PRE:w.GTE0],"")),a=o=>(h,c,p,b,v,f,d,m,B,O,W,K,pt)=>(Q(p)?c="":Q(b)?c=`>=${p}.0.0${o?"-0":""}`:Q(v)?c=`>=${p}.${b}.0${o?"-0":""}`:f?c=`>=${c}`:c=`>=${c}${o?"-0":""}`,Q(B)?m="":Q(O)?m=`<${+B+1}.0.0-0`:Q(W)?m=`<${B}.${+O+1}.0-0`:K?m=`<=${B}.${O}.${W}-${K}`:o?m=`<${B}.${O}.${+W+1}-0`:m=`<=${m}`,`${c} ${m}`.trim()),l=(o,h,c)=>{for(let p=0;p<o.length;p++)if(!o[p].test(h))return!1;if(h.prerelease.length&&!c.includePrerelease){for(let p=0;p<o.length;p++)if(i(o[p].semver),o[p].semver!==s.ANY&&o[p].semver.prerelease.length>0){const b=o[p].semver;if(b.major===h.major&&b.minor===h.minor&&b.patch===h.patch)return!0}return!1}return!0};return qs}var Ws,E0;function us(){if(E0)return Ws;E0=1;const r=Symbol("SemVer ANY");class t{static get ANY(){return r}constructor(I,N){if(N=e(N),I instanceof t){if(I.loose===!!N.loose)return I;I=I.value}u("comparator",I,N),this.options=N,this.loose=!!N.loose,this.parse(I),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(I){const N=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],L=I.match(N);if(!L)throw new TypeError(`Invalid comparator: ${I}`);this.operator=L[1]!==void 0?L[1]:"",this.operator==="="&&(this.operator=""),L[2]?this.semver=new g(L[2],this.options.loose):this.semver=r}toString(){return this.value}test(I){if(u("Comparator.test",I,this.options.loose),this.semver===r||I===r)return!0;if(typeof I=="string")try{I=new g(I,this.options)}catch{return!1}return i(I,this.operator,this.semver,this.options)}intersects(I,N){if(!(I instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new w(I.value,N).test(this.value):I.operator===""?I.value===""?!0:new w(this.value,N).test(I.semver):(N=e(N),N.includePrerelease&&(this.value==="<0.0.0-0"||I.value==="<0.0.0-0")||!N.includePrerelease&&(this.value.startsWith("<0.0.0")||I.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&I.operator.startsWith(">")||this.operator.startsWith("<")&&I.operator.startsWith("<")||this.semver.version===I.semver.version&&this.operator.includes("=")&&I.operator.includes("=")||i(this.semver,"<",I.semver,N)&&this.operator.startsWith(">")&&I.operator.startsWith("<")||i(this.semver,">",I.semver,N)&&this.operator.startsWith("<")&&I.operator.startsWith(">")))}}Ws=t;const e=ia,{re:n,t:s}=ni,i=eh,u=ls,g=ar,w=Br();return Ws}const tw=Br(),ew=(r,t,e)=>{try{t=new tw(t,e)}catch{return!1}return t.test(r)};var cs=ew;const rw=Br(),nw=(r,t)=>new rw(r,t).set.map(e=>e.map(n=>n.value).join(" ").trim().split(" "));var iw=nw;const sw=ar,ow=Br(),aw=(r,t,e)=>{let n=null,s=null,i=null;try{i=new ow(t,e)}catch{return null}return r.forEach(u=>{i.test(u)&&(!n||s.compare(u)===-1)&&(n=u,s=new sw(n,e))}),n};var fw=aw;const lw=ar,hw=Br(),uw=(r,t,e)=>{let n=null,s=null,i=null;try{i=new hw(t,e)}catch{return null}return r.forEach(u=>{i.test(u)&&(!n||s.compare(u)===1)&&(n=u,s=new lw(n,e))}),n};var cw=uw;const Hs=ar,dw=Br(),x0=hs,pw=(r,t)=>{r=new dw(r,t);let e=new Hs("0.0.0");if(r.test(e)||(e=new Hs("0.0.0-0"),r.test(e)))return e;e=null;for(let n=0;n<r.set.length;++n){const s=r.set[n];let i=null;s.forEach(u=>{const g=new Hs(u.semver.version);switch(u.operator){case">":g.prerelease.length===0?g.patch++:g.prerelease.push(0),g.raw=g.format();case"":case">=":(!i||x0(g,i))&&(i=g);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${u.operator}`)}}),i&&(!e||x0(e,i))&&(e=i)}return e&&r.test(e)?e:null};var vw=pw;const gw=Br(),mw=(r,t)=>{try{return new gw(r,t).range||"*"}catch{return null}};var yw=mw;const ww=ar,rh=us(),{ANY:bw}=rh,Ew=Br(),xw=cs,A0=hs,C0=oa,Aw=fa,Cw=aa,Bw=(r,t,e,n)=>{r=new ww(r,n),t=new Ew(t,n);let s,i,u,g,w;switch(e){case">":s=A0,i=Aw,u=C0,g=">",w=">=";break;case"<":s=C0,i=Cw,u=A0,g="<",w="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(xw(r,t,n))return!1;for(let F=0;F<t.set.length;++F){const I=t.set[F];let N=null,L=null;if(I.forEach(q=>{q.semver===bw&&(q=new rh(">=0.0.0")),N=N||q,L=L||q,s(q.semver,N.semver,n)?N=q:u(q.semver,L.semver,n)&&(L=q)}),N.operator===g||N.operator===w||(!L.operator||L.operator===g)&&i(r,L.semver))return!1;if(L.operator===w&&u(r,L.semver))return!1}return!0};var la=Bw;const Mw=la,_w=(r,t,e)=>Mw(r,t,">",e);var Fw=_w;const Sw=la,Dw=(r,t,e)=>Sw(r,t,"<",e);var Iw=Dw;const B0=Br(),Tw=(r,t,e)=>(r=new B0(r,e),t=new B0(t,e),r.intersects(t,e));var Rw=Tw;const Nw=cs,Uw=Cr;var Pw=(r,t,e)=>{const n=[];let s=null,i=null;const u=r.sort((I,N)=>Uw(I,N,e));for(const I of u)Nw(I,t,e)?(i=I,s||(s=I)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);const g=[];for(const[I,N]of n)I===N?g.push(I):!N&&I===u[0]?g.push("*"):N?I===u[0]?g.push(`<=${N}`):g.push(`${I} - ${N}`):g.push(`>=${I}`);const w=g.join(" || "),F=typeof t.raw=="string"?t.raw:String(t);return w.length<F.length?w:t};const M0=Br(),ha=us(),{ANY:Ks}=ha,Wn=cs,ua=Cr,Lw=(r,t,e={})=>{if(r===t)return!0;r=new M0(r,e),t=new M0(t,e);let n=!1;t:for(const s of r.set){for(const i of t.set){const u=Ow(s,i,e);if(n=n||u!==null,u)continue t}if(n)return!1}return!0},$w=[new ha(">=0.0.0-0")],_0=[new ha(">=0.0.0")],Ow=(r,t,e)=>{if(r===t)return!0;if(r.length===1&&r[0].semver===Ks){if(t.length===1&&t[0].semver===Ks)return!0;e.includePrerelease?r=$w:r=_0}if(t.length===1&&t[0].semver===Ks){if(e.includePrerelease)return!0;t=_0}const n=new Set;let s,i;for(const q of r)q.operator===">"||q.operator===">="?s=F0(s,q,e):q.operator==="<"||q.operator==="<="?i=S0(i,q,e):n.add(q.semver);if(n.size>1)return null;let u;if(s&&i){if(u=ua(s.semver,i.semver,e),u>0)return null;if(u===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const q of n){if(s&&!Wn(q,String(s),e)||i&&!Wn(q,String(i),e))return null;for(const Z of t)if(!Wn(q,String(Z),e))return!1;return!0}let g,w,F,I,N=i&&!e.includePrerelease&&i.semver.prerelease.length?i.semver:!1,L=s&&!e.includePrerelease&&s.semver.prerelease.length?s.semver:!1;N&&N.prerelease.length===1&&i.operator==="<"&&N.prerelease[0]===0&&(N=!1);for(const q of t){if(I=I||q.operator===">"||q.operator===">=",F=F||q.operator==="<"||q.operator==="<=",s){if(L&&q.semver.prerelease&&q.semver.prerelease.length&&q.semver.major===L.major&&q.semver.minor===L.minor&&q.semver.patch===L.patch&&(L=!1),q.operator===">"||q.operator===">="){if(g=F0(s,q,e),g===q&&g!==s)return!1}else if(s.operator===">="&&!Wn(s.semver,String(q),e))return!1}if(i){if(N&&q.semver.prerelease&&q.semver.prerelease.length&&q.semver.major===N.major&&q.semver.minor===N.minor&&q.semver.patch===N.patch&&(N=!1),q.operator==="<"||q.operator==="<="){if(w=S0(i,q,e),w===q&&w!==i)return!1}else if(i.operator==="<="&&!Wn(i.semver,String(q),e))return!1}if(!q.operator&&(i||s)&&u!==0)return!1}return!(s&&F&&!i&&u!==0||i&&I&&!s&&u!==0||L||N)},F0=(r,t,e)=>{if(!r)return t;const n=ua(r.semver,t.semver,e);return n>0?r:n<0||t.operator===">"&&r.operator===">="?t:r},S0=(r,t,e)=>{if(!r)return t;const n=ua(r.semver,t.semver,e);return n<0?r:n>0||t.operator==="<"&&r.operator==="<="?t:r};var kw=Lw;const Vs=ni,D0=fs,jw=ar,I0=Xl,qw=Rn,Ww=zm,Hw=Jm,Kw=Qm,Vw=ey,Gw=iy,zw=ay,Yw=hy,Zw=dy,Jw=Cr,Xw=my,Qw=by,t2=sa,e2=Cy,r2=_y,n2=hs,i2=oa,s2=Ql,o2=th,a2=aa,f2=fa,l2=eh,h2=Zy,u2=us(),c2=Br(),d2=cs,p2=iw,v2=fw,g2=cw,m2=vw,y2=yw,w2=la,b2=Fw,E2=Iw,x2=Rw,A2=Pw,C2=kw;var B2={parse:qw,valid:Ww,clean:Hw,inc:Kw,diff:Vw,major:Gw,minor:zw,patch:Yw,prerelease:Zw,compare:Jw,rcompare:Xw,compareLoose:Qw,compareBuild:t2,sort:e2,rsort:r2,gt:n2,lt:i2,eq:s2,neq:o2,gte:a2,lte:f2,cmp:l2,coerce:h2,Comparator:u2,Range:c2,satisfies:d2,toComparators:p2,maxSatisfying:v2,minSatisfying:g2,minVersion:m2,validRange:y2,outside:w2,gtr:b2,ltr:E2,intersects:x2,simplifyRange:A2,subset:C2,SemVer:jw,re:Vs.re,src:Vs.src,tokens:Vs.t,SEMVER_SPEC_VERSION:D0.SEMVER_SPEC_VERSION,RELEASE_TYPES:D0.RELEASE_TYPES,compareIdentifiers:I0.compareIdentifiers,rcompareIdentifiers:I0.rcompareIdentifiers};const T0=ti(B2),po={blue:{id:"blue",productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,blockSize:4*1024,getBlockSize:r=>4*1024},nanoS:{id:"nanoS",productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,blockSize:4*1024,getBlockSize:r=>T0.lt(T0.coerce(r),"2.0.0")?4*1024:2*1024},nanoX:{id:"nanoX",productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,blockSize:4*1024,getBlockSize:r=>4*1024,bluetoothSpec:[{serviceUuid:"d973f2e0-b19e-11e2-9e96-0800200c9a66",notifyUuid:"d973f2e1-b19e-11e2-9e96-0800200c9a66",writeUuid:"d973f2e2-b19e-11e2-9e96-0800200c9a66"},{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572"}]}},R0=Object.values(po),ds=11415,ps=r=>{const t=R0.find(s=>s.legacyUsbProductId===r);if(t)return t;const e=r>>8;return R0.find(s=>s.productIdMM===e)},nh=[],vo={};for(let r in po){const t=po[r],{bluetoothSpec:e}=t;if(e)for(let n=0;n<e.length;n++){const s=e[n];nh.push(s.serviceUuid),vo[s.serviceUuid]=vo[s.serviceUuid.replace(/-/g,"")]={deviceModel:t,...s}}}const M2=()=>nh,_2=r=>vo[r.toLowerCase()];let F2=0;const qr=[],Je=(r,t,e)=>{const n={type:r,id:String(++F2),date:new Date};t&&(n.message=t),e&&(n.data=e),S2(n)},ih=r=>(qr.push(r),()=>{const t=qr.indexOf(r);t!==-1&&(qr[t]=qr[qr.length-1],qr.pop())});function S2(r){for(let t=0;t<qr.length;t++)try{qr[t](r)}catch(e){console.error(e)}}typeof window<"u"&&(window.__ledgerLogsListen=ih);const D2=Object.freeze(Object.defineProperty({__proto__:null,listen:ih,log:Je},Symbol.toStringTag,{value:"Module"})),I2=[{vendorId:ds}];async function sh(){return await navigator.usb.requestDevice({filters:I2})}async function ca(){return(await navigator.usb.getDevices()).filter(t=>t.vendorId===ds)}async function T2(){const r=await ca();return r.length>0?r[0]:sh()}const R2=()=>Promise.resolve(!!navigator&&!!navigator.usb&&typeof navigator.usb.getDevices=="function"),N2=1,N0=3;let vs=class Ni extends $r{constructor(t,e){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.interfaceNumber=void 0,this._disconnectEmitted=!1,this._emitDisconnect=n=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",n))},this.exchange=n=>this.exchangeAtomicImpl(async()=>{const{channel:s,packetSize:i}=this;Je("apdu","=> "+n.toString("hex"));const u=na(s,i),g=u.makeBlocks(n);for(let I=0;I<g.length;I++)await this.device.transferOut(N0,g[I]);let w,F;for(;!(w=u.getReducedResult(F));){const I=await this.device.transferIn(N0,i),N=Buffer.from(I.data.buffer);F=u.reduceResponse(F,N)}return Je("apdu","<= "+w.toString("hex")),w}).catch(s=>{throw s&&s.message&&s.message.includes("disconnected")?(this._emitDisconnect(s),new ea(s.message)):s}),this.device=t,this.interfaceNumber=e,this.deviceModel=ps(t.productId)}static async request(){const t=await sh();return Ni.open(t)}static async openConnected(){const t=await ca();return t.length===0?null:Ni.open(t[0])}static async open(t){await t.open(),t.configuration===null&&await t.selectConfiguration(N2),await U0(t);const e=t.configurations[0].interfaces.find(({alternates:u})=>u.some(g=>g.interfaceClass===255));if(!e)throw new uo("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const n=e.interfaceNumber;try{await t.claimInterface(n)}catch(u){throw await t.close(),new uo(u.message)}const s=new Ni(t,n),i=u=>{t===u.device&&(navigator.usb.removeEventListener("disconnect",i),s._emitDisconnect(new os))};return navigator.usb.addEventListener("disconnect",i),s}async close(){await this.exchangeBusyPromise,await this.device.releaseInterface(this.interfaceNumber),await U0(this.device),await this.device.close()}setScrambleKey(){}};vs.isSupported=R2;vs.list=ca;vs.listen=r=>{let t=!1;T2().then(n=>{if(!t){const s=ps(n.productId);r.next({type:"add",descriptor:n,deviceModel:s}),r.complete()}},n=>{window.DOMException&&n instanceof window.DOMException&&n.code===18?r.error(new zl(n.message)):r.error(new Yn(n.message))});function e(){t=!0}return{unsubscribe:e}};async function U0(r){try{await r.reset()}catch(t){console.warn(t)}}const U2=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"})),P2=Jr(U2),L2=[{vendorId:ds}],$2=()=>Promise.resolve(!!(global.navigator&&global.navigator.hid)),qi=()=>{const{hid:r}=navigator;if(!r)throw new Kr("navigator.hid is not supported","HIDNotSupported");return r};async function oh(){const r=await qi().requestDevice({filters:L2});return Array.isArray(r)?r:[r]}async function da(){return(await qi().getDevices()).filter(t=>t.vendorId===ds)}async function O2(){const r=await da();return r.length>0?r[0]:(await oh())[0]}let gs=class Ui extends $r{constructor(t){super(),this.device=void 0,this.deviceModel=void 0,this.channel=Math.floor(Math.random()*65535),this.packetSize=64,this.inputs=[],this.inputCallback=void 0,this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise(e=>{this.inputCallback=e}),this.onInputReport=e=>{const n=Buffer.from(e.data.buffer);this.inputCallback?(this.inputCallback(n),this.inputCallback=null):this.inputs.push(n)},this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.exchange=e=>this.exchangeAtomicImpl(async()=>{const{channel:n,packetSize:s}=this;Je("apdu","=> "+e.toString("hex"));const i=na(n,s),u=i.makeBlocks(e);for(let F=0;F<u.length;F++)await this.device.sendReport(0,u[F]);let g,w;for(;!(g=i.getReducedResult(w));){const F=await this.read();w=i.reduceResponse(w,F)}return Je("apdu","<= "+g.toString("hex")),g}).catch(n=>{throw n&&n.message&&n.message.includes("write")?(this._emitDisconnect(n),new ea(n.message)):n}),this.device=t,this.deviceModel=ps(t.productId),t.addEventListener("inputreport",this.onInputReport)}static async request(){const[t]=await oh();return Ui.open(t)}static async openConnected(){const t=await da();return t.length===0?null:Ui.open(t[0])}static async open(t){await t.open();const e=new Ui(t),n=s=>{t===s.device&&(qi().removeEventListener("disconnect",n),e._emitDisconnect(new os))};return qi().addEventListener("disconnect",n),e}async close(){await this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),await this.device.close()}setScrambleKey(){}};gs.isSupported=$2;gs.list=da;gs.listen=r=>{let t=!1;O2().then(n=>{if(!n)r.error(new Yn("Access denied to use Ledger device"));else if(!t){const s=ps(n.productId);r.next({type:"add",descriptor:n,deviceModel:s}),r.complete()}},n=>{r.error(new Yn(n.message))});function e(){t=!0}return{unsubscribe:e}};const k2=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"})),j2=Jr(k2);var pa={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var go=function(r,t){return go=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])},go(r,t)};function de(r,t){go(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Cn(r){return typeof r=="function"}var P0=!1,wr={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var t=new Error;""+t.stack}P0=r},get useDeprecatedSynchronousErrorHandling(){return P0}};function wn(r){setTimeout(function(){throw r},0)}var Wi={closed:!0,next:function(r){},error:function(r){if(wr.useDeprecatedSynchronousErrorHandling)throw r;wn(r)},complete:function(){}},br=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}();function va(r){return r!==null&&typeof r=="object"}var q2=function(){function r(t){return Error.call(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,n){return n+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r}(),Kn=q2,tr=function(){function r(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return r.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this,n=e._parentOrParents,s=e._ctorUnsubscribe,i=e._unsubscribe,u=e._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var g=0;g<n.length;++g){var w=n[g];w.remove(this)}if(Cn(i)){s&&(this._unsubscribe=void 0);try{i.call(this)}catch(N){t=N instanceof Kn?L0(N.errors):[N]}}if(br(u))for(var g=-1,F=u.length;++g<F;){var I=u[g];if(va(I))try{I.unsubscribe()}catch(L){t=t||[],L instanceof Kn?t=t.concat(L0(L.errors)):t.push(L)}}if(t)throw new Kn(t)}},r.prototype.add=function(t){var e=t;if(!t)return r.EMPTY;switch(typeof t){case"function":e=new r(t);case"object":if(e===this||e.closed||typeof e.unsubscribe!="function")return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof r)){var n=e;e=new r,e._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var s=e._parentOrParents;if(s===null)e._parentOrParents=this;else if(s instanceof r){if(s===this)return e;e._parentOrParents=[s,this]}else if(s.indexOf(this)===-1)s.push(this);else return e;var i=this._subscriptions;return i===null?this._subscriptions=[e]:i.push(e),e},r.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}},r.EMPTY=function(t){return t.closed=!0,t}(new r),r}();function L0(r){return r.reduce(function(t,e){return t.concat(e instanceof Kn?e.errors:e)},[])}var Hi=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Ze=function(r){de(t,r);function t(e,n,s){var i=r.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=Wi;break;case 1:if(!e){i.destination=Wi;break}if(typeof e=="object"){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new $0(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new $0(i,e,n,s);break}return i}return t.prototype[Hi]=function(){return this},t.create=function(e,n,s){var i=new t(e,n,s);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(tr),$0=function(r){de(t,r);function t(e,n,s,i){var u=r.call(this)||this;u._parentSubscriber=e;var g,w=u;return Cn(n)?g=n:n&&(g=n.next,s=n.error,i=n.complete,n!==Wi&&(w=Object.create(n),Cn(w.unsubscribe)&&u.add(w.unsubscribe.bind(w)),w.unsubscribe=u.unsubscribe.bind(u))),u._context=w,u._next=g,u._error=s,u._complete=i,u}return t.prototype.next=function(e){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!wr.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,e):this.__tryOrSetError(n,this._next,e)&&this.unsubscribe()}},t.prototype.error=function(e){if(!this.isStopped){var n=this._parentSubscriber,s=wr.useDeprecatedSynchronousErrorHandling;if(this._error)!s||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,e),this.unsubscribe()):(this.__tryOrSetError(n,this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)s?(n.syncErrorValue=e,n.syncErrorThrown=!0):wn(e),this.unsubscribe();else{if(this.unsubscribe(),s)throw e;wn(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var s=function(){return e._complete.call(e._context)};!wr.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(s),this.unsubscribe()):(this.__tryOrSetError(n,s),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,n){try{e.call(this._context,n)}catch(s){if(this.unsubscribe(),wr.useDeprecatedSynchronousErrorHandling)throw s;wn(s)}},t.prototype.__tryOrSetError=function(e,n,s){if(!wr.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,s)}catch(i){return wr.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(wn(i),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Ze);function ga(r){for(;r;){var t=r,e=t.closed,n=t.destination,s=t.isStopped;if(e||s)return!1;n&&n instanceof Ze?r=n:r=null}return!0}function W2(r,t,e){if(r){if(r instanceof Ze)return r;if(r[Hi])return r[Hi]()}return!r&&!t&&!e?new Ze(Wi):new Ze(r,t,e)}var Nn=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Bn(r){return r}function H2(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return ah(r)}function ah(r){return r.length===0?Bn:r.length===1?r[0]:function(e){return r.reduce(function(n,s){return s(n)},e)}}var be=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var s=this.operator,i=W2(t,e,n);if(s?i.add(s.call(i,this.source)):i.add(this.source||wr.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),wr.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){wr.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),ga(t)?t.error(e):console.warn(e)}},r.prototype.forEach=function(t,e){var n=this;return e=O0(e),new e(function(s,i){var u;u=n.subscribe(function(g){try{t(g)}catch(w){i(w),u&&u.unsubscribe()}},i,s)})},r.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},r.prototype[Nn]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length===0?this:ah(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=O0(t),new t(function(n,s){var i;e.subscribe(function(u){return i=u},function(u){return s(u)},function(){return n(i)})})},r.create=function(t){return new r(t)},r}();function O0(r){if(r||(r=wr.Promise||Promise),!r)throw new Error("no Promise impl found");return r}var K2=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}(),Hr=K2,fh=function(r){de(t,r);function t(e,n){var s=r.call(this)||this;return s.subject=e,s.subscriber=n,s.closed=!1,s}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,n=e.observers;if(this.subject=null,!(!n||n.length===0||e.isStopped||e.closed)){var s=n.indexOf(this.subscriber);s!==-1&&n.splice(s,1)}}},t}(tr),lh=function(r){de(t,r);function t(e){var n=r.call(this,e)||this;return n.destination=e,n}return t}(Ze),Un=function(r){de(t,r);function t(){var e=r.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype[Hi]=function(){return new lh(this)},t.prototype.lift=function(e){var n=new k0(this,this);return n.operator=e,n},t.prototype.next=function(e){if(this.closed)throw new Hr;if(!this.isStopped)for(var n=this.observers,s=n.length,i=n.slice(),u=0;u<s;u++)i[u].next(e)},t.prototype.error=function(e){if(this.closed)throw new Hr;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var n=this.observers,s=n.length,i=n.slice(),u=0;u<s;u++)i[u].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Hr;this.isStopped=!0;for(var e=this.observers,n=e.length,s=e.slice(),i=0;i<n;i++)s[i].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(e){if(this.closed)throw new Hr;return r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){if(this.closed)throw new Hr;return this.hasError?(e.error(this.thrownError),tr.EMPTY):this.isStopped?(e.complete(),tr.EMPTY):(this.observers.push(e),new fh(this,e))},t.prototype.asObservable=function(){var e=new be;return e.source=this,e},t.create=function(e,n){return new k0(e,n)},t}(be),k0=function(r){de(t,r);function t(e,n){var s=r.call(this)||this;return s.destination=e,s.source=n,s}return t.prototype.next=function(e){var n=this.destination;n&&n.next&&n.next(e)},t.prototype.error=function(e){var n=this.destination;n&&n.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var n=this.source;return n?this.source.subscribe(e):tr.EMPTY},t}(Un);function hh(){return function(t){return t.lift(new V2(t))}}var V2=function(){function r(t){this.connectable=t}return r.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var s=new G2(t,n),i=e.subscribe(s);return s.closed||(s.connection=n.connect()),i},r}(),G2=function(r){de(t,r);function t(e,n){var s=r.call(this,e)||this;return s.connectable=n,s}return t.prototype._unsubscribe=function(){var e=this.connectable;if(!e){this.connection=null;return}this.connectable=null;var n=e._refCount;if(n<=0){this.connection=null;return}if(e._refCount=n-1,n>1){this.connection=null;return}var s=this.connection,i=e._connection;this.connection=null,i&&(!s||i===s)&&i.unsubscribe()},t}(Ze),uh=function(r){de(t,r);function t(e,n){var s=r.call(this)||this;return s.source=e,s.subjectFactory=n,s._refCount=0,s._isComplete=!1,s}return t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new tr,e.add(this.source.subscribe(new Y2(this.getSubject(),this))),e.closed&&(this._connection=null,e=tr.EMPTY)),e},t.prototype.refCount=function(){return hh()(this)},t}(be),z2=function(){var r=uh.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}}(),Y2=function(r){de(t,r);function t(e,n){var s=r.call(this,e)||this;return s.connectable=n,s}return t.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}},t}(lh),Z2=function(r){de(t,r);function t(e,n,s){var i=r.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=s,i}return t.prototype._subscribe=function(e){var n=new tr,s=this,i=s.refCountSubscription,u=s.groupSubject;return i&&!i.closed&&n.add(new J2(i)),n.add(u.subscribe(e)),n},t}(be),J2=function(r){de(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,e.count++,n}return t.prototype.unsubscribe=function(){var e=this.parent;!e.closed&&!this.closed&&(r.prototype.unsubscribe.call(this),e.count-=1,e.count===0&&e.attemptedToUnsubscribe&&e.unsubscribe())},t}(tr),X2=function(r){de(t,r);function t(e){var n=r.call(this)||this;return n._value=e,n}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(e){var n=r.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Hr;return this._value},t.prototype.next=function(e){r.prototype.next.call(this,this._value=e)},t}(Un),Q2=function(r){de(t,r);function t(e,n){return r.call(this)||this}return t.prototype.schedule=function(e,n){return this},t}(tr),ii=function(r){de(t,r);function t(e,n){var s=r.call(this,e,n)||this;return s.scheduler=e,s.work=n,s.pending=!1,s}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),this.closed)return this;this.state=e;var s=this.id,i=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(i,s,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this},t.prototype.requestAsyncId=function(e,n,s){return s===void 0&&(s=0),setInterval(e.flush.bind(e,this),s)},t.prototype.recycleAsyncId=function(e,n,s){if(s===void 0&&(s=0),s!==null&&this.delay===s&&this.pending===!1)return n;clearInterval(n)},t.prototype.execute=function(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(e,n);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,n){var s=!1,i=void 0;try{this.work(e)}catch(u){s=!0,i=!!u&&u||new Error(u)}if(s)return this.unsubscribe(),i},t.prototype._unsubscribe=function(){var e=this.id,n=this.scheduler,s=n.actions,i=s.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,i!==-1&&s.splice(i,1),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null},t}(Q2),t3=function(r){de(t,r);function t(e,n){var s=r.call(this,e,n)||this;return s.scheduler=e,s.work=n,s}return t.prototype.schedule=function(e,n){return n===void 0&&(n=0),n>0?r.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},t.prototype.execute=function(e,n){return n>0||this.closed?r.prototype.execute.call(this,e,n):this._execute(e,n)},t.prototype.requestAsyncId=function(e,n,s){return s===void 0&&(s=0),s!==null&&s>0||s===null&&this.delay>0?r.prototype.requestAsyncId.call(this,e,n,s):e.flush(this)},t}(ii),mo=function(){function r(t,e){e===void 0&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,n){return e===void 0&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},r.now=function(){return Date.now()},r}(),si=function(r){de(t,r);function t(e,n){n===void 0&&(n=mo.now);var s=r.call(this,e,function(){return t.delegate&&t.delegate!==s?t.delegate.now():n()})||this;return s.actions=[],s.active=!1,s.scheduled=void 0,s}return t.prototype.schedule=function(e,n,s){return n===void 0&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,s):r.prototype.schedule.call(this,e,n,s)},t.prototype.flush=function(e){var n=this.actions;if(this.active){n.push(e);return}var s;this.active=!0;do if(s=e.execute(e.state,e.delay))break;while(e=n.shift());if(this.active=!1,s){for(;e=n.shift();)e.unsubscribe();throw s}},t}(mo),e3=function(r){de(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t}(si),ch=new e3(t3),dh=ch,Mn=new be(function(r){return r.complete()});function ms(r){return r?r3(r):Mn}function r3(r){return new be(function(t){return r.schedule(function(){return t.complete()})})}function zr(r){return r&&typeof r.schedule=="function"}var ph=function(r){return function(t){for(var e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()}};function ma(r,t){return new be(function(e){var n=new tr,s=0;return n.add(t.schedule(function(){if(s===r.length){e.complete();return}e.next(r[s++]),e.closed||n.add(this.schedule())})),n})}function oi(r,t){return t?ma(r,t):new be(ph(r))}function ya(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return zr(e)?(r.pop(),ma(r,e)):oi(r)}function vh(r,t){return t?new be(function(e){return t.schedule(n3,0,{error:r,subscriber:e})}):new be(function(e){return e.error(r)})}function n3(r){var t=r.error,e=r.subscriber;e.error(t)}var yo;yo||(yo={});var Pi=function(){function r(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue=t==="N"}return r.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},r.prototype.do=function(t,e,n){var s=this.kind;switch(s){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},r.prototype.accept=function(t,e,n){return t&&typeof t.next=="function"?this.observe(t):this.do(t,e,n)},r.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return ya(this.value);case"E":return vh(this.error);case"C":return ms()}throw new Error("unexpected notification kind value")},r.createNext=function(t){return typeof t<"u"?new r("N",t):r.undefinedValueNotification},r.createError=function(t){return new r("E",void 0,t)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}(),i3=function(r){de(t,r);function t(e,n,s){s===void 0&&(s=0);var i=r.call(this,e)||this;return i.scheduler=n,i.delay=s,i}return t.dispatch=function(e){var n=e.notification,s=e.destination;n.observe(s),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var n=this.destination;n.add(this.scheduler.schedule(t.dispatch,this.delay,new s3(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(Pi.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(Pi.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(Pi.createComplete()),this.unsubscribe()},t}(Ze),s3=function(){function r(t,e){this.notification=t,this.destination=e}return r}(),o3=function(r){de(t,r);function t(e,n,s){e===void 0&&(e=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var i=r.call(this)||this;return i.scheduler=s,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return t.prototype.nextInfiniteTimeWindow=function(e){if(!this.isStopped){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift()}r.prototype.next.call(this,e)},t.prototype.nextTimeWindow=function(e){this.isStopped||(this._events.push(new a3(this._getNow(),e)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){var n=this._infiniteTimeWindow,s=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,u=s.length,g;if(this.closed)throw new Hr;if(this.isStopped||this.hasError?g=tr.EMPTY:(this.observers.push(e),g=new fh(this,e)),i&&e.add(e=new i3(e,i)),n)for(var w=0;w<u&&!e.closed;w++)e.next(s[w]);else for(var w=0;w<u&&!e.closed;w++)e.next(s[w].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),g},t.prototype._getNow=function(){return(this.scheduler||dh).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),n=this._bufferSize,s=this._windowTime,i=this._events,u=i.length,g=0;g<u&&!(e-i[g].time<s);)g++;return u>n&&(g=Math.max(g,u-n)),g>0&&i.splice(0,g),i},t}(Un),a3=function(){function r(t,e){this.time=t,this.value=e}return r}(),ai=function(r){de(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return t.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),tr.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),tr.EMPTY):r.prototype._subscribe.call(this,e)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(e){this.hasCompleted||r.prototype.error.call(this,e)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},t}(Un),f3=1,l3=function(){return Promise.resolve()}(),wo={};function j0(r){return r in wo?(delete wo[r],!0):!1}var q0={setImmediate:function(r){var t=f3++;return wo[t]=!0,l3.then(function(){return j0(t)&&r()}),t},clearImmediate:function(r){j0(r)}},h3=function(r){de(t,r);function t(e,n){var s=r.call(this,e,n)||this;return s.scheduler=e,s.work=n,s}return t.prototype.requestAsyncId=function(e,n,s){return s===void 0&&(s=0),s!==null&&s>0?r.prototype.requestAsyncId.call(this,e,n,s):(e.actions.push(this),e.scheduled||(e.scheduled=q0.setImmediate(e.flush.bind(e,null))))},t.prototype.recycleAsyncId=function(e,n,s){if(s===void 0&&(s=0),s!==null&&s>0||s===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,s);e.actions.length===0&&(q0.clearImmediate(n),e.scheduled=void 0)},t}(ii),u3=function(r){de(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,s,i=-1,u=n.length;e=e||n.shift();do if(s=e.execute(e.state,e.delay))break;while(++i<u&&(e=n.shift()));if(this.active=!1,s){for(;++i<u&&(e=n.shift());)e.unsubscribe();throw s}},t}(si),gh=new u3(h3),c3=gh,mh=new si(ii),Ki=mh,d3=function(r){de(t,r);function t(e,n){var s=r.call(this,e,n)||this;return s.scheduler=e,s.work=n,s}return t.prototype.requestAsyncId=function(e,n,s){return s===void 0&&(s=0),s!==null&&s>0?r.prototype.requestAsyncId.call(this,e,n,s):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},t.prototype.recycleAsyncId=function(e,n,s){if(s===void 0&&(s=0),s!==null&&s>0||s===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,e,n,s);e.actions.length===0&&(cancelAnimationFrame(n),e.scheduled=void 0)},t}(ii),p3=function(r){de(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var n=this.actions,s,i=-1,u=n.length;e=e||n.shift();do if(s=e.execute(e.state,e.delay))break;while(++i<u&&(e=n.shift()));if(this.active=!1,s){for(;++i<u&&(e=n.shift());)e.unsubscribe();throw s}},t}(si),yh=new p3(d3),v3=yh,g3=function(r){de(t,r);function t(e,n){e===void 0&&(e=wh),n===void 0&&(n=Number.POSITIVE_INFINITY);var s=r.call(this,e,function(){return s.frame})||this;return s.maxFrames=n,s.frame=0,s.index=-1,s}return t.prototype.flush=function(){for(var e=this,n=e.actions,s=e.maxFrames,i,u;(u=n[0])&&u.delay<=s&&(n.shift(),this.frame=u.delay,!(i=u.execute(u.state,u.delay))););if(i){for(;u=n.shift();)u.unsubscribe();throw i}},t.frameTimeFactor=10,t}(si),wh=function(r){de(t,r);function t(e,n,s){s===void 0&&(s=e.index+=1);var i=r.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=s,i.active=!0,i.index=e.index=s,i}return t.prototype.schedule=function(e,n){if(n===void 0&&(n=0),!this.id)return r.prototype.schedule.call(this,e,n);this.active=!1;var s=new t(this.scheduler,this.work);return this.add(s),s.schedule(e,n)},t.prototype.requestAsyncId=function(e,n,s){s===void 0&&(s=0),this.delay=e.frame+s;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,n,s){},t.prototype._execute=function(e,n){if(this.active===!0)return r.prototype._execute.call(this,e,n)},t.sortActions=function(e,n){return e.delay===n.delay?e.index===n.index?0:e.index>n.index?1:-1:e.delay>n.delay?1:-1},t}(ii);function Sr(){}function m3(r){return!!r&&(r instanceof be||typeof r.lift=="function"&&typeof r.subscribe=="function")}var y3=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r}(),bh=y3,w3=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r}(),wa=w3,b3=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r}(),E3=b3;function un(r,t){return function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new x3(r,t))}}var x3=function(){function r(t,e){this.project=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new A3(t,this.project,this.thisArg))},r}(),A3=function(r){de(t,r);function t(e,n,s){var i=r.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=s||i,i}return t.prototype._next=function(e){var n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(s){this.destination.error(s);return}this.destination.next(n)},t}(Ze);function Eh(r,t,e){if(t)if(zr(t))e=t;else return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return Eh(r,e).apply(void 0,n).pipe(un(function(i){return br(i)?t.apply(void 0,i):t(i)}))};return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var i=this,u,g={context:i,subject:u,callbackFunc:r,scheduler:e};return new be(function(w){if(e){var I={args:n,subscriber:w,params:g};return e.schedule(C3,0,I)}else{if(!u){u=new ai;var F=function(){for(var N=[],L=0;L<arguments.length;L++)N[L]=arguments[L];u.next(N.length<=1?N[0]:N),u.complete()};try{r.apply(i,n.concat([F]))}catch(N){ga(u)?u.error(N):console.warn(N)}}return u.subscribe(w)}})}}function C3(r){var t=this,e=r.args,n=r.subscriber,s=r.params,i=s.callbackFunc,u=s.context,g=s.scheduler,w=s.subject;if(!w){w=s.subject=new ai;var F=function(){for(var I=[],N=0;N<arguments.length;N++)I[N]=arguments[N];var L=I.length<=1?I[0]:I;t.add(g.schedule(B3,0,{value:L,subject:w}))};try{i.apply(u,e.concat([F]))}catch(I){w.error(I)}}this.add(w.subscribe(n))}function B3(r){var t=r.value,e=r.subject;e.next(t),e.complete()}function xh(r,t,e){if(t)if(zr(t))e=t;else return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return xh(r,e).apply(void 0,n).pipe(un(function(i){return br(i)?t.apply(void 0,i):t(i)}))};return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var i={subject:void 0,args:n,callbackFunc:r,scheduler:e,context:this};return new be(function(u){var g=i.context,w=i.subject;if(e)return e.schedule(M3,0,{params:i,subscriber:u,context:g});if(!w){w=i.subject=new ai;var F=function(){for(var I=[],N=0;N<arguments.length;N++)I[N]=arguments[N];var L=I.shift();if(L){w.error(L);return}w.next(I.length<=1?I[0]:I),w.complete()};try{r.apply(g,n.concat([F]))}catch(I){ga(w)?w.error(I):console.warn(I)}}return w.subscribe(u)})}}function M3(r){var t=this,e=r.params,n=r.subscriber,s=r.context,i=e.callbackFunc,u=e.args,g=e.scheduler,w=e.subject;if(!w){w=e.subject=new ai;var F=function(){for(var I=[],N=0;N<arguments.length;N++)I[N]=arguments[N];var L=I.shift();if(L)t.add(g.schedule(W0,0,{err:L,subject:w}));else{var q=I.length<=1?I[0]:I;t.add(g.schedule(_3,0,{value:q,subject:w}))}};try{i.apply(s,u.concat([F]))}catch(I){this.add(g.schedule(W0,0,{err:I,subject:w}))}}this.add(w.subscribe(n))}function _3(r){var t=r.value,e=r.subject;e.next(t),e.complete()}function W0(r){var t=r.err,e=r.subject;e.error(t)}var Ah=function(r){de(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e,n,s,i,u){this.destination.next(n)},t.prototype.notifyError=function(e,n){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Ze),F3=function(r){de(t,r);function t(e,n,s){var i=r.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=s,i.index=0,i}return t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Ze),S3=function(r){return function(t){return r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,wn),t}};function D3(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yr=D3(),I3=function(r){return function(t){var e=r[Yr]();do{var n=void 0;try{n=e.next()}catch(s){return t.error(s),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}while(!0);return typeof e.return=="function"&&t.add(function(){e.return&&e.return()}),t}},T3=function(r){return function(t){var e=r[Nn]();if(typeof e.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}},Ch=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function Bh(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}var Zn=function(r){if(r&&typeof r[Nn]=="function")return T3(r);if(Ch(r))return ph(r);if(Bh(r))return S3(r);if(r&&typeof r[Yr]=="function")return I3(r);var t=va(r)?"an invalid object":"'"+r+"'",e="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(e)};function Mh(r,t,e,n,s){if(s===void 0&&(s=new F3(r,e,n)),!s.closed)return t instanceof be?t.subscribe(s):Zn(t)(s)}var H0={};function R3(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=void 0,n=void 0;return zr(r[r.length-1])&&(n=r.pop()),typeof r[r.length-1]=="function"&&(e=r.pop()),r.length===1&&br(r[0])&&(r=r[0]),oi(r,n).lift(new N3(e))}var N3=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new U3(t,this.resultSelector))},r}(),U3=function(r){de(t,r);function t(e,n){var s=r.call(this,e)||this;return s.resultSelector=n,s.active=0,s.values=[],s.observables=[],s}return t.prototype._next=function(e){this.values.push(H0),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var s=0;s<n;s++){var i=e[s];this.add(Mh(this,i,void 0,s))}}},t.prototype.notifyComplete=function(e){(this.active-=1)===0&&this.destination.complete()},t.prototype.notifyNext=function(e,n,s){var i=this.values,u=i[s],g=this.toRespond?u===H0?--this.toRespond:this.toRespond:0;i[s]=n,g===0&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))},t.prototype._tryResultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(s){this.destination.error(s);return}this.destination.next(n)},t}(Ah);function P3(r,t){return new be(function(e){var n=new tr;return n.add(t.schedule(function(){var s=r[Nn]();n.add(s.subscribe({next:function(i){n.add(t.schedule(function(){return e.next(i)}))},error:function(i){n.add(t.schedule(function(){return e.error(i)}))},complete:function(){n.add(t.schedule(function(){return e.complete()}))}}))})),n})}function L3(r,t){return new be(function(e){var n=new tr;return n.add(t.schedule(function(){return r.then(function(s){n.add(t.schedule(function(){e.next(s),n.add(t.schedule(function(){return e.complete()}))}))},function(s){n.add(t.schedule(function(){return e.error(s)}))})})),n})}function $3(r,t){if(!r)throw new Error("Iterable cannot be null");return new be(function(e){var n=new tr,s;return n.add(function(){s&&typeof s.return=="function"&&s.return()}),n.add(t.schedule(function(){s=r[Yr](),n.add(t.schedule(function(){if(!e.closed){var i,u;try{var g=s.next();i=g.value,u=g.done}catch(w){e.error(w);return}u?e.complete():(e.next(i),this.schedule())}}))})),n})}function O3(r){return r&&typeof r[Nn]=="function"}function k3(r){return r&&typeof r[Yr]=="function"}function _h(r,t){if(r!=null){if(O3(r))return P3(r,t);if(Bh(r))return L3(r,t);if(Ch(r))return ma(r,t);if(k3(r)||typeof r=="string")return $3(r,t)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}function cn(r,t){return t?_h(r,t):r instanceof be?r:new be(Zn(r))}var Fh=function(r){de(t,r);function t(e){var n=r.call(this)||this;return n.parent=e,n}return t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(Ze),Sh=function(r){de(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(Ze);function Dh(r,t){if(!t.closed){if(r instanceof be)return r.subscribe(t);var e;try{e=Zn(r)(t)}catch(n){t.error(n)}return e}}function Ih(r,t,e){return e===void 0&&(e=Number.POSITIVE_INFINITY),typeof t=="function"?function(n){return n.pipe(Ih(function(s,i){return cn(r(s,i)).pipe(un(function(u,g){return t(s,u,i,g)}))},e))}:(typeof t=="number"&&(e=t),function(n){return n.lift(new j3(r,e))})}var j3=function(){function r(t,e){e===void 0&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return r.prototype.call=function(t,e){return e.subscribe(new q3(t,this.project,this.concurrent))},r}(),q3=function(r){de(t,r);function t(e,n,s){s===void 0&&(s=Number.POSITIVE_INFINITY);var i=r.call(this,e)||this;return i.project=n,i.concurrent=s,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var n,s=this.index++;try{n=this.project(e,s)}catch(i){this.destination.error(i);return}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var n=new Fh(this),s=this.destination;s.add(n);var i=Dh(e,n);i!==n&&s.add(i)},t.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},t}(Sh);function Th(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),Ih(Bn,r)}function W3(){return Th(1)}function H3(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return W3()(ya.apply(void 0,r))}function ba(r){return new be(function(t){var e;try{e=r()}catch(s){t.error(s);return}var n=e?cn(e):ms();return n.subscribe(t)})}function K3(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1){var e=r[0];if(br(e))return _i(e,null);if(va(e)&&Object.getPrototypeOf(e)===Object.prototype){var n=Object.keys(e);return _i(n.map(function(i){return e[i]}),n)}}if(typeof r[r.length-1]=="function"){var s=r.pop();return r=r.length===1&&br(r[0])?r[0]:r,_i(r,null).pipe(un(function(i){return s.apply(void 0,i)}))}return _i(r,null)}function _i(r,t){return new be(function(e){var n=r.length;if(n===0){e.complete();return}for(var s=new Array(n),i=0,u=0,g=function(F){var I=cn(r[F]),N=!1;e.add(I.subscribe({next:function(L){N||(N=!0,u++),s[F]=L},error:function(L){return e.error(L)},complete:function(){i++,(i===n||!N)&&(u===n&&e.next(t?t.reduce(function(L,q,Z){return L[q]=s[Z],L},{}):s),e.complete())}}))},w=0;w<n;w++)g(w)})}function Rh(r,t,e,n){return Cn(e)&&(n=e,e=void 0),n?Rh(r,t,e).pipe(un(function(s){return br(s)?n.apply(void 0,s):n(s)})):new be(function(s){function i(u){arguments.length>1?s.next(Array.prototype.slice.call(arguments)):s.next(u)}Nh(r,t,i,s,e)})}function Nh(r,t,e,n,s){var i;if(z3(r)){var u=r;r.addEventListener(t,e,s),i=function(){return u.removeEventListener(t,e,s)}}else if(G3(r)){var g=r;r.on(t,e),i=function(){return g.off(t,e)}}else if(V3(r)){var w=r;r.addListener(t,e),i=function(){return w.removeListener(t,e)}}else if(r&&r.length)for(var F=0,I=r.length;F<I;F++)Nh(r[F],t,e,n,s);else throw new TypeError("Invalid event target");n.add(i)}function V3(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function G3(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}function z3(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}function Uh(r,t,e){return e?Uh(r,t).pipe(un(function(n){return br(n)?e.apply(void 0,n):e(n)})):new be(function(n){var s=function(){for(var u=[],g=0;g<arguments.length;g++)u[g]=arguments[g];return n.next(u.length===1?u[0]:u)},i;try{i=r(s)}catch(u){n.error(u);return}if(Cn(t))return function(){return t(s,i)}})}function Y3(r,t,e,n,s){var i,u;if(arguments.length==1){var g=r;u=g.initialState,t=g.condition,e=g.iterate,i=g.resultSelector||Bn,s=g.scheduler}else n===void 0||zr(n)?(u=r,i=Bn,s=n):(u=r,i=n);return new be(function(w){var F=u;if(s)return s.schedule(Z3,0,{subscriber:w,iterate:e,condition:t,resultSelector:i,state:F});do{if(t){var I=void 0;try{I=t(F)}catch(L){w.error(L);return}if(!I){w.complete();break}}var N=void 0;try{N=i(F)}catch(L){w.error(L);return}if(w.next(N),w.closed)break;try{F=e(F)}catch(L){w.error(L);return}}while(!0)})}function Z3(r){var t=r.subscriber,e=r.condition;if(!t.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(i){t.error(i);return}else r.needIterate=!0;if(e){var n=void 0;try{n=e(r.state)}catch(i){t.error(i);return}if(!n){t.complete();return}if(t.closed)return}var s;try{s=r.resultSelector(r.state)}catch(i){t.error(i);return}if(!t.closed&&(t.next(s),!t.closed))return this.schedule(r)}}function J3(r,t,e){return t===void 0&&(t=Mn),e===void 0&&(e=Mn),ba(function(){return r()?t:e})}function bo(r){return!br(r)&&r-parseFloat(r)+1>=0}function X3(r,t){return r===void 0&&(r=0),t===void 0&&(t=Ki),(!bo(r)||r<0)&&(r=0),(!t||typeof t.schedule!="function")&&(t=Ki),new be(function(e){return e.add(t.schedule(Q3,r,{subscriber:e,counter:0,period:r})),e})}function Q3(r){var t=r.subscriber,e=r.counter,n=r.period;t.next(e),this.schedule({subscriber:t,counter:e+1,period:n},n)}function Eo(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=Number.POSITIVE_INFINITY,n=null,s=r[r.length-1];return zr(s)?(n=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(e=r.pop())):typeof s=="number"&&(e=r.pop()),n===null&&r.length===1&&r[0]instanceof be?r[0]:Th(e)(oi(r,n))}var Ph=new be(Sr);function tb(){return Ph}function xo(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===0)return Mn;var e=r[0],n=r.slice(1);return r.length===1&&br(e)?xo.apply(void 0,e):new be(function(s){var i=function(){return s.add(xo.apply(void 0,n).subscribe(s))};return cn(e).subscribe({next:function(u){s.next(u)},error:i,complete:i})})}function eb(r,t){return t?new be(function(e){var n=Object.keys(r),s=new tr;return s.add(t.schedule(rb,0,{keys:n,index:0,subscriber:e,subscription:s,obj:r})),s}):new be(function(e){for(var n=Object.keys(r),s=0;s<n.length&&!e.closed;s++){var i=n[s];r.hasOwnProperty(i)&&e.next([i,r[i]])}e.complete()})}function rb(r){var t=r.keys,e=r.index,n=r.subscriber,s=r.subscription,i=r.obj;if(!n.closed)if(e<t.length){var u=t[e];n.next([u,i[u]]),s.add(this.schedule({keys:t,index:e+1,subscriber:n,subscription:s,obj:i}))}else n.complete()}function nb(r,t){function e(){return!e.pred.apply(e.thisArg,arguments)}return e.pred=r,e.thisArg=t,e}function Ao(r,t){return function(n){return n.lift(new ib(r,t))}}var ib=function(){function r(t,e){this.predicate=t,this.thisArg=e}return r.prototype.call=function(t,e){return e.subscribe(new sb(t,this.predicate,this.thisArg))},r}(),sb=function(r){de(t,r);function t(e,n,s){var i=r.call(this,e)||this;return i.predicate=n,i.thisArg=s,i.count=0,i}return t.prototype._next=function(e){var n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(s){this.destination.error(s);return}n&&this.destination.next(e)},t}(Ze);function ob(r,t,e){return[Ao(t,e)(new be(Zn(r))),Ao(nb(t,e))(new be(Zn(r)))]}function ab(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];if(r.length===1)if(br(r[0]))r=r[0];else return r[0];return oi(r,void 0).lift(new fb)}var fb=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new lb(t))},r}(),lb=function(r){de(t,r);function t(e){var n=r.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,n=e.length;if(n===0)this.destination.complete();else{for(var s=0;s<n&&!this.hasFirst;s++){var i=e[s],u=Mh(this,i,void 0,s);this.subscriptions&&this.subscriptions.push(u),this.add(u)}this.observables=null}},t.prototype.notifyNext=function(e,n,s){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==s){var u=this.subscriptions[i];u.unsubscribe(),this.remove(u)}this.subscriptions=null}this.destination.next(n)},t}(Ah);function hb(r,t,e){return r===void 0&&(r=0),new be(function(n){t===void 0&&(t=r,r=0);var s=0,i=r;if(e)return e.schedule(ub,0,{index:s,count:t,start:r,subscriber:n});do{if(s++>=t){n.complete();break}if(n.next(i++),n.closed)break}while(!0)})}function ub(r){var t=r.start,e=r.index,n=r.count,s=r.subscriber;if(e>=n){s.complete();return}s.next(t),!s.closed&&(r.index=e+1,r.start=t+1,this.schedule(r))}function cb(r,t,e){r===void 0&&(r=0);var n=-1;return bo(t)?n=Number(t)<1&&1||Number(t):zr(t)&&(e=t),zr(e)||(e=Ki),new be(function(s){var i=bo(r)?r:+r-e.now();return e.schedule(db,i,{index:0,period:n,subscriber:s})})}function db(r){var t=r.index,e=r.period,n=r.subscriber;if(n.next(t),!n.closed){if(e===-1)return n.complete();r.index=t+1,this.schedule(r,e)}}function pb(r,t){return new be(function(e){var n;try{n=r()}catch(g){e.error(g);return}var s;try{s=t(n)}catch(g){e.error(g);return}var i=s?cn(s):Mn,u=i.subscribe(e);return function(){u.unsubscribe(),n&&n.unsubscribe()}})}function vb(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=r[r.length-1];return typeof e=="function"&&r.pop(),oi(r,void 0).lift(new gb(e))}var gb=function(){function r(t){this.resultSelector=t}return r.prototype.call=function(t,e){return e.subscribe(new mb(t,this.resultSelector))},r}(),mb=function(r){de(t,r);function t(e,n,s){var i=r.call(this,e)||this;return i.resultSelector=n,i.iterators=[],i.active=0,i.resultSelector=typeof n=="function"?n:void 0,i}return t.prototype._next=function(e){var n=this.iterators;br(e)?n.push(new wb(e)):typeof e[Yr]=="function"?n.push(new yb(e[Yr]())):n.push(new bb(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,n=e.length;if(this.unsubscribe(),n===0){this.destination.complete();return}this.active=n;for(var s=0;s<n;s++){var i=e[s];if(i.stillUnsubscribed){var u=this.destination;u.add(i.subscribe())}else this.active--}},t.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,n=e.length,s=this.destination,i=0;i<n;i++){var u=e[i];if(typeof u.hasValue=="function"&&!u.hasValue())return}for(var g=!1,w=[],i=0;i<n;i++){var u=e[i],F=u.next();if(u.hasCompleted()&&(g=!0),F.done){s.complete();return}w.push(F.value)}this.resultSelector?this._tryresultSelector(w):s.next(w),g&&s.complete()},t.prototype._tryresultSelector=function(e){var n;try{n=this.resultSelector.apply(this,e)}catch(s){this.destination.error(s);return}this.destination.next(n)},t}(Ze),yb=function(){function r(t){this.iterator=t,this.nextResult=t.next()}return r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},r.prototype.hasCompleted=function(){var t=this.nextResult;return!!(t&&t.done)},r}(),wb=function(){function r(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return r.prototype[Yr]=function(){return this},r.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),bb=function(r){de(t,r);function t(e,n,s){var i=r.call(this,e)||this;return i.parent=n,i.observable=s,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return t.prototype[Yr]=function(){return this},t.prototype.next=function(){var e=this.buffer;return e.length===0&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Dh(this.observable,new Fh(this))},t}(Sh);const Eb=Object.freeze(Object.defineProperty({__proto__:null,ArgumentOutOfRangeError:bh,AsyncSubject:ai,BehaviorSubject:X2,ConnectableObservable:uh,EMPTY:Mn,EmptyError:wa,GroupedObservable:Z2,NEVER:Ph,Notification:Pi,get NotificationKind(){return yo},ObjectUnsubscribedError:Hr,Observable:be,ReplaySubject:o3,Scheduler:mo,Subject:Un,Subscriber:Ze,Subscription:tr,TimeoutError:E3,UnsubscriptionError:Kn,VirtualAction:wh,VirtualTimeScheduler:g3,animationFrame:v3,animationFrameScheduler:yh,asap:c3,asapScheduler:gh,async:Ki,asyncScheduler:mh,bindCallback:Eh,bindNodeCallback:xh,combineLatest:R3,concat:H3,config:wr,defer:ba,empty:ms,forkJoin:K3,from:cn,fromEvent:Rh,fromEventPattern:Uh,generate:Y3,identity:Bn,iif:J3,interval:X3,isObservable:m3,merge:Eo,never:tb,noop:Sr,observable:Nn,of:ya,onErrorResumeNext:xo,pairs:eb,partition:ob,pipe:H2,queue:dh,queueScheduler:ch,race:ab,range:hb,scheduled:_h,throwError:vh,timer:cb,using:pb,zip:vb},Symbol.toStringTag,{value:"Module"})),Lh=Jr(Eb),$h=Jr(D2);Object.defineProperty(pa,"__esModule",{value:!0});var Oh=pa.sendAPDU=void 0,xb=Lh,K0=$h;const Ab=5;function Cb(r,t){const e=[];for(let n=0,s=t(0);n<r.length;n+=s,s=t(n))e.push(r.slice(n,n+s));return e}const Bb=(r,t,e)=>{const n=Cb(t,s=>e-(s===0?5:3)).map((s,i)=>{const u=Buffer.alloc(i===0?5:3);return u.writeUInt8(Ab,0),u.writeUInt16BE(i,1),i===0&&u.writeUInt16BE(t.length,3),Buffer.concat([u,s])});return xb.Observable.create(s=>{let i=!1;async function u(){for(const w of n){if(i)return;await r(w)}}return u().then(()=>{i=!0,s.complete()},w=>{i=!0,(0,K0.log)("ble-error","sendAPDU failure "+String(w)),s.error(w)}),()=>{i||((0,K0.log)("ble-verbose","sendAPDU interruption"),i=!0)}})};Oh=pa.sendAPDU=Bb;var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});var kh=Ea.receiveAPDU=void 0,Fi=Zl,Mb=Lh,_b=$h;const Fb=5,Sb=r=>Mb.Observable.create(t=>{let e=0,n=0,s=Buffer.alloc(0);const i=r.subscribe({complete:()=>{t.error(new Fi.DisconnectedDevice),i.unsubscribe()},error:u=>{(0,_b.log)("ble-error","in receiveAPDU "+String(u)),t.error(u),i.unsubscribe()},next:u=>{const g=u.readUInt8(0),w=u.readUInt16BE(1);let F=u.slice(3);if(g!==Fb){t.error(new Fi.TransportError("Invalid tag "+g.toString(16),"InvalidTag"));return}if(e!==w){t.error(new Fi.TransportError("BLE: Invalid sequence number. discontinued chunk. Received "+w+" but expected "+e,"InvalidSequence"));return}if(w===0&&(n=F.readUInt16BE(0),F=F.slice(2)),e++,s=Buffer.concat([s,F]),s.length>n){t.error(new Fi.TransportError("BLE: received too much data. discontinued chunk. Received "+s.length+" but expected "+n,"BLETooMuchData"));return}s.length===n&&(t.next(s),t.complete(),i.unsubscribe())}});return()=>{i.unsubscribe()}});kh=Ea.receiveAPDU=Sb;function Db(r){return r===void 0&&(r=null),function(t){return t.lift(new Ib(r))}}var Ib=function(){function r(t){this.defaultValue=t}return r.prototype.call=function(t,e){return e.subscribe(new Tb(t,this.defaultValue))},r}(),Tb=function(r){de(t,r);function t(e,n){var s=r.call(this,e)||this;return s.defaultValue=n,s.isEmpty=!0,s}return t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Ze);function Rb(r){return r===void 0&&(r=Pb),function(t){return t.lift(new Nb(r))}}var Nb=function(){function r(t){this.errorFactory=t}return r.prototype.call=function(t,e){return e.subscribe(new Ub(t,this.errorFactory))},r}(),Ub=function(r){de(t,r);function t(e,n){var s=r.call(this,e)||this;return s.errorFactory=n,s.hasValue=!1,s}return t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)},t}(Ze);function Pb(){return new wa}function Lb(r){return function(t){return r===0?ms():t.lift(new $b(r))}}var $b=function(){function r(t){if(this.total=t,this.total<0)throw new bh}return r.prototype.call=function(t,e){return e.subscribe(new Ob(t,this.total))},r}(),Ob=function(r){de(t,r);function t(e,n){var s=r.call(this,e)||this;return s.total=n,s.count=0,s}return t.prototype._next=function(e){var n=this.total,s=++this.count;s<=n&&(this.destination.next(e),s===n&&(this.destination.complete(),this.unsubscribe()))},t}(Ze);function kb(r,t){var e=arguments.length>=2;return function(n){return n.pipe(r?Ao(function(s,i){return r(s,i,n)}):Bn,Lb(1),e?Db(t):Rb(function(){return new wa}))}}function jb(){return function(t){return t.lift(new qb)}}var qb=function(){function r(){}return r.prototype.call=function(t,e){return e.subscribe(new Wb(t))},r}(),Wb=function(r){de(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype._next=function(e){},t}(Ze);function Hb(r,t){return function(n){var s;if(typeof r=="function"?s=r:s=function(){return r},typeof t=="function")return n.lift(new Kb(s,t));var i=Object.create(n,z2);return i.source=n,i.subjectFactory=s,i}}var Kb=function(){function r(t,e){this.subjectFactory=t,this.selector=e}return r.prototype.call=function(t,e){var n=this.selector,s=this.subjectFactory(),i=n(s).subscribe(t);return i.add(e.subscribe(s)),i},r}();function Vb(){return new Un}function Gb(){return function(r){return hh()(Hb(Vb)(r))}}function zb(r,t,e){return function(s){return s.lift(new Yb(r,t,e))}}var Yb=function(){function r(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return r.prototype.call=function(t,e){return e.subscribe(new Zb(t,this.nextOrObserver,this.error,this.complete))},r}(),Zb=function(r){de(t,r);function t(e,n,s,i){var u=r.call(this,e)||this;return u._tapNext=Sr,u._tapError=Sr,u._tapComplete=Sr,u._tapError=s||Sr,u._tapComplete=i||Sr,Cn(n)?(u._context=u,u._tapNext=n):n&&(u._context=n,u._tapNext=n.next||Sr,u._tapError=n.error||Sr,u._tapComplete=n.complete||Sr),u}return t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(n){this.destination.error(n);return}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){this.destination.error(e);return}return this.destination.complete()},t}(Ze);const Jb=r=>be.create(t=>{Je("ble-verbose","start monitor "+r.uuid);function e(n){const s=n.target;s.value&&t.next(Buffer.from(s.value.buffer))}return r.startNotifications().then(()=>{r.addEventListener("characteristicvaluechanged",e)}),()=>{Je("ble-verbose","end monitor "+r.uuid),r.stopNotifications()}}),ys=()=>{const{bluetooth:r}=navigator;if(typeof r>"u")throw new Error("web bluetooth not supported");return r},Xb=()=>be.create(r=>{const t=ys(),e=s=>{r.next(s.value)};t.addEventListener("availabilitychanged",e);let n=!1;return t.getAvailability().then(s=>{n||r.next(s)}),()=>{n=!0,t.removeEventListener("availabilitychanged",e)}}),Hn={},jh=()=>({filters:M2().map(r=>({services:[r]}))}),Qb=async r=>{if(!r.gatt)throw new Error("bluetooth gatt not found");const[t]=await r.gatt.getPrimaryServices();if(!t)throw new Error("bluetooth service not found");const e=_2(t.uuid);if(!e)throw new Error("bluetooth service infos not found");return[t,e]};async function qh(r,t){let e;if(typeof r=="string"){if(Hn[r])return Je("ble-verbose","Transport in cache, using that."),Hn[r];e=await ys().requestDevice(jh())}else e=r;e.gatt.connected||(Je("ble-verbose","not connected. connecting..."),await e.gatt.connect());const[n,s]=await Qb(e),{deviceModel:i,writeUuid:u,notifyUuid:g}=s,[w,F]=await Promise.all([n.getCharacteristic(u),n.getCharacteristic(g)]),I=Jb(F).pipe(zb(tt=>{Je("ble-frame","<= "+tt.toString("hex"))}),Gb()),N=I.subscribe(),L=new Pn(e,w,I,i);if(!e.gatt.connected)throw new os;Hn[L.id]=L;const q=tt=>{console.log("onDisconnect!",tt),delete Hn[L.id],L.notYetDisconnected=!1,N.unsubscribe(),e.removeEventListener("gattserverdisconnected",q),Je("ble-verbose",`BleTransport(${L.id}) disconnected`),L.emit("disconnect",tt)};e.addEventListener("gattserverdisconnected",q);let Z=Date.now();try{await L.inferMTU()}finally{Date.now()-Z<1e3&&(t=!1),t&&(await e.gatt.disconnect(),await new Promise(et=>setTimeout(et,4e3)))}return t?qh(e,!1):L}let Pn=class extends $r{static listen(t){Je("ble-verbose","listen...");let e;ys().requestDevice(jh()).then(async i=>{e||(t.next({type:"add",descriptor:i}),t.complete())},i=>{t.error(new Yn(i.message))});function s(){e=!0}return{unsubscribe:s}}static async open(t){return qh(t,!0)}constructor(t,e,n,s){super(),this.id=void 0,this.device=void 0,this.mtuSize=20,this.writeCharacteristic=void 0,this.notifyObservable=void 0,this.notYetDisconnected=!0,this.deviceModel=void 0,this.exchange=i=>this.exchangeAtomicImpl(async()=>{try{const u=i.toString("hex");Je("apdu",`=> ${u}`);const g=await Eo(this.notifyObservable.pipe(kh),Oh(this.write,i,this.mtuSize)).toPromise(),w=g.toString("hex");return Je("apdu",`<= ${w}`),g}catch(u){throw Je("ble-error","exchange got "+String(u)),this.notYetDisconnected&&this.device.gatt.disconnect(),u}}),this.write=async i=>{Je("ble-frame","=> "+i.toString("hex")),await this.writeCharacteristic.writeValue(i)},this.id=t.id,this.device=t,this.writeCharacteristic=e,this.notifyObservable=n,this.deviceModel=s,Je("ble-verbose",`BleTransport(${String(this.id)}) new instance`)}async inferMTU(){let t=23;if(await this.exchangeAtomicImpl(async()=>{try{t=await Eo(this.notifyObservable.pipe(kb(e=>e.readUInt8(0)===8),un(e=>e.readUInt8(5))),ba(()=>cn(this.write(Buffer.from([8,0,0,0,0])))).pipe(jb())).toPromise()+3}catch(e){throw Je("ble-error","inferMTU got "+String(e)),this.device.gatt.disconnect(),e}}),t>23){const e=t-3;Je("ble-verbose",`BleTransport(${String(this.id)}) mtu set to ${String(e)}`),this.mtuSize=e}return this.mtuSize}setScrambleKey(){}async close(){this.exchangeBusyPromise&&await this.exchangeBusyPromise}};Pn.isSupported=()=>Promise.resolve().then(ys).then(()=>!0,()=>!1);Pn.observeAvailability=r=>Xb.subscribe(r);Pn.list=()=>Promise.resolve([]);Pn.disconnect=async r=>{Je("ble-verbose",`user disconnect(${r})`);const t=Hn[r];t&&t.device.gatt.disconnect()};const tE=Object.freeze(Object.defineProperty({__proto__:null,default:Pn},Symbol.toStringTag,{value:"Module"})),eE=Jr(tE);var Wh={},Hh={};const{parseAddress:rE}=Er,{AdnlAddress:nE,StorageBagId:iE,BN:V0,sha256:sE,bytesToHex:oE,bytesToBase64:aE}=Ge,{Cell:fi}=je,Co="dns_next_resolver",Kh="wallet",Vh="site",Gh="storage",zh=async r=>{if(!r)return new V0(0);const t=new TextEncoder().encode(r),e=new Uint8Array(await sE(t));return new V0(oE(e),16)},fE=r=>{const t=new fi;return t.bits.writeUint(40915,16),t.bits.writeAddress(r),t.bits.writeUint(0,8),t},lE=r=>{const t=new fi;return t.bits.writeUint(44289,16),t.bits.writeBytes(r.bytes),t.bits.writeUint(0,8),t},hE=r=>{const t=new fi;return t.bits.writeUint(29811,16),t.bits.writeBytes(r.bytes),t},uE=r=>{const t=new fi;return t.bits.writeUint(47763,16),t.bits.writeAddress(r),t},Yh=(r,t,e)=>{if(r.bits.array[0]!==t||r.bits.array[1]!==e)throw new Error("Invalid dns record value prefix");return r.bits.array=r.bits.array.slice(2),rE(r)},Zh=r=>Yh(r,159,211),Bo=r=>Yh(r,186,147),Jh=r=>{if(r.bits.array[0]!==173||r.bits.array[1]!==1)throw new Error("Invalid dns record value prefix");const t=r.bits.array.slice(2,2+32);return new nE(t)},xa=r=>{if(r.bits.array[0]!==116||r.bits.array[1]!==115)throw new Error("Invalid dns record value prefix");const t=r.bits.array.slice(2,2+32);return new iE(t)},Xh=r=>r?r.bits.array[0]===173||r.bits.array[1]===1?Jh(r):xa(r):null,Qh=async(r,t,e,n,s)=>{const i=e.length*8,u=new fi;u.bits.writeBytes(e);const g=await zh(n),w=await r.call2(t,"dnsresolve",[["tvm.Slice",aE(await u.toBoc(!1))],["num",g.toString()]]);if(w.length!==2)throw new Error("Invalid dnsresolve response");const F=w[0].toNumber();let I=w[1];if(I instanceof Array&&I.length===0&&(I=null),I&&!I.bits)throw new Error("Invalid dnsresolve response");if(F===0)return null;if(F%8!==0)throw new Error("domain split not at a component boundary");if(F>i)throw new Error("invalid response "+F+"/"+i);if(F===i)return n===Co?I?Bo(I):null:n===Kh?I?Zh(I):null:n===Vh?I?Xh(I):null:n===Gh?I?xa(I):null:I;if(I){const N=Bo(I);return s?n===Co?N:null:await Qh(r,N.toString(),e.slice(F/8),n,!1)}else return null},tu=r=>{if(!r||!r.length)throw new Error("empty domain");if(r===".")return new Uint8Array([0]);r=r.toLowerCase();for(let n=0;n<r.length;n++)if(r.charCodeAt(n)<=32)throw new Error("bytes in range 0..32 are not allowed in domain names");for(let n=0;n<r.length;n++){const s=r.substring(n,n+1);for(let i=127;i<=159;i++)if(s===String.fromCharCode(i))throw new Error("bytes in range 127..159 are not allowed in domain names")}const t=r.split(".");t.forEach(n=>{if(!n.length)throw new Error("domain name cannot have an empty component")});let e=t.reverse().join("\0")+"\0";return e.length<126&&(e="\0"+e),new TextEncoder().encode(e)},cE=async(r,t,e,n,s)=>{const i=tu(e);return Qh(r,t,i,n,s)};var Aa={DNS_CATEGORY_NEXT_RESOLVER:Co,DNS_CATEGORY_SITE:Vh,DNS_CATEGORY_WALLET:Kh,DNS_CATEGORY_STORAGE:Gh,categoryToBN:zh,domainToBytes:tu,createSmartContractAddressRecord:fE,createAdnlAddressRecord:lE,createNextResolverRecord:uE,parseSmartContractAddressRecord:Zh,parseAdnlAddressRecord:Jh,parseStorageBagIdRecord:xa,parseSiteRecord:Xh,parseNextResolverRecord:Bo,createStorageBagIdRecord:hE,dnsResolve:cE};const{Address:dE,bytesToHex:pE}=Ge,{DNS_CATEGORY_NEXT_RESOLVER:vE,DNS_CATEGORY_SITE:eu,DNS_CATEGORY_WALLET:ru,DNS_CATEGORY_STORAGE:gE,createSmartContractAddressRecord:mE,createAdnlAddressRecord:yE,createStorageBagIdRecord:wE,createNextResolverRecord:bE,parseSmartContractAddressRecord:EE,parseAdnlAddressRecord:xE,parseStorageBagIdRecord:AE,parseSiteRecord:CE,parseNextResolverRecord:BE,dnsResolve:nu}=Aa;let fr=class{constructor(t){this.provider=t}async getRootDnsAddress(){const e=(await this.provider.getConfigParam(4)).bits.array;if(e.length!==256/8)throw new Error("Invalid ConfigParam 4 length "+e.length);const n=pE(e);return new dE("-1:"+n)}async resolve(t,e,n){const s=await this.getRootDnsAddress();return nu(this.provider,s.toString(),t,e,n)}getWalletAddress(t){return this.resolve(t,ru)}getSiteAddress(t){return this.resolve(t,eu)}};fr.resolve=nu;fr.createSmartContractAddressRecord=mE;fr.createAdnlAddressRecord=yE;fr.createStorageBagIdRecord=wE;fr.createNextResolverRecord=bE;fr.parseNextResolverRecord=BE;fr.parseAdnlAddressRecord=xE;fr.parseStorageBagIdRecord=AE;fr.parseSiteRecord=CE;fr.parseSmartContractAddressRecord=EE;fr.DNS_CATEGORY_NEXT_RESOLVER=vE;fr.DNS_CATEGORY_WALLET=ru;fr.DNS_CATEGORY_SITE=eu;fr.DNS_CATEGORY_STORAGE=gE;Hh.default=fr;const{Contract:ME}=ur,{Cell:G0}=je,{parseAddress:_E}=Er,{dnsResolve:FE}=Aa,{parseOffchainUriCell:SE}=Er;let DE=class extends ME{constructor(t,e){if(e.wc=0,e.code=e.code,super(t,e),!e.collectionContent&&!e.address)throw new Error("required collectionContent cell");this.methods.getCollectionData=this.getCollectionData.bind(this),this.methods.getNftItemAddressByIndex=this.getNftItemAddressByIndex.bind(this),this.methods.getNftItemContent=this.getNftItemContent.bind(this),this.methods.resolve=this.resolve.bind(this)}createDataCell(){const t=new G0;return t.refs[0]=this.options.collectionContent,t.refs[1]=G0.oneFromBoc(this.options.dnsItemCodeHex),t}async getCollectionData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_collection_data"),n=e[0].toNumber(),s=e[1];return{collectionContentUri:SE(s),collectionContent:s,ownerAddress:null,nextItemIndex:n}}async getNftItemContent(t){return await t.getData()}async getNftItemAddressByIndex(t){const e=await this.getAddress(),n=await this.provider.call2(e.toString(),"get_nft_address_by_index",[["num",t.toString()]]);return _E(n)}async resolve(t,e,n){const s=await this.getAddress();return FE(this.provider,s.toString(),t,e,n)}};var IE={DnsCollection:DE};const{Contract:TE}=ur,{Cell:Li}=je,{Address:nC,BN:RE}=Ge,{parseAddress:Gs}=Er,{dnsResolve:NE,categoryToBN:UE}=Aa;let iu=class extends TE{constructor(t,e){e.wc=0,e.code=e.code,super(t,e),this.methods.getData=this.getData.bind(this),this.methods.getDomain=this.getDomain.bind(this),this.methods.getAuctionInfo=this.getAuctionInfo.bind(this),this.methods.getLastFillUpTime=this.getLastFillUpTime.bind(this),this.methods.resolve=this.resolve.bind(this)}createDataCell(){const t=new Li;return t.bits.writeUint(this.options.index,256),t.bits.writeAddress(this.options.collectionAddress),t}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_nft_data"),n=e[0].toNumber()===-1,s=e[1],i=Gs(e[2]),u=n?Gs(e[3]):null,g=e[4];return{isInitialized:n,index:s,collectionAddress:i,ownerAddress:u,contentCell:g}}async createTransferBody(t){const e=new Li;return e.bits.writeUint(1607220500,32),e.bits.writeUint(t.queryId||0,64),e.bits.writeAddress(t.newOwnerAddress),e.bits.writeAddress(t.responseAddress),e.bits.writeBit(!1),e.bits.writeCoins(t.forwardAmount||new RE(0)),e.bits.writeBit(!1),t.forwardPayload&&e.bits.writeBytes(t.forwardPayload),e}createGetStaticDataBody(t){const e=new Li;return e.bits.writeUint(801842850,32),e.bits.writeUint(t.queryId||0,64),e}async getDomain(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_domain");return new TextDecoder().decode(e.bits.array.buffer)}async getAuctionInfo(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_auction_info"),n=Gs(e[0]),s=e[1],i=e[2].toNumber();return{maxBidAddress:n,maxBidAmount:s,auctionEndTime:i}}async getLastFillUpTime(){const t=await this.getAddress();return(await this.provider.call2(t.toString(),"get_last_fill_up_time")).toNumber()}async resolve(t,e,n){const s=await this.getAddress();return NE(this.provider,s.toString(),t,e,n)}};iu.createChangeContentEntryBody=async r=>{const t=new Li;return t.bits.writeUint(1320284409,32),t.bits.writeUint(r.queryId||0,64),t.bits.writeUint(await UE(r.category),256),r.value&&(t.refs[0]=r.value),t};var PE={DnsItem:iu};const LE=Hh.default,{DnsCollection:$E}=IE,{DnsItem:OE}=PE;Wh.default={Dns:LE,DnsCollection:$E,DnsItem:OE};const Vi=Ge,su=Vi.Address,ou=je,kE=A1,au=Wf.default,{Contract:fu}=ur,lu=Vf.default,hu=ll.default,jE=hl.default,z0=yl.default,{BlockSubscription:uu,InMemoryBlockStorage:cu}=Vp,{SubscriptionContract:qE}=zp,{Payments:du,PaymentChannel:WE}=$v,HE=P2.default,KE=j2.default,VE=eE.default,{Dns:pu,DnsCollection:GE,DnsItem:zE}=Wh.default,vu="0.0.60";class er{constructor(t){this.version=vu,this.utils=Vi,this.Address=su,this.boc=ou,this.Contract=fu,this.BlockSubscription=uu,this.InMemoryBlockStorage=cu,this.provider=t||new au,this.dns=new pu(this.provider),this.wallet=new lu(this.provider),this.payments=new du(this.provider),this.lockupWallet=hu}async getTransactions(t,e=20,n=void 0,s=void 0,i=void 0){return this.provider.getTransactions(t.toString(),e,n,s,i)}async getBalance(t){return this.provider.getBalance(t.toString())}async sendBoc(t){return this.provider.sendBoc(Vi.bytesToBase64(t))}async call(t,e,n=[]){return this.provider.call(t.toString(),e,n)}}er.version=vu;er.utils=Vi;er.Address=su;er.boc=ou;er.HttpProvider=au;er.Contract=fu;er.Wallets=lu;er.LockupWallets=hu;er.SubscriptionContract=qE;er.BlockSubscription=uu;er.InMemoryBlockStorage=cu;er.ledger={TransportWebUSB:HE,TransportWebHID:KE,BluetoothTransport:VE,AppTon:kE};er.token={nft:jE,ft:z0,jetton:z0};er.dns=pu;er.dns.DnsCollection=GE;er.dns.DnsItem=zE;er.payments=du;er.payments.PaymentChannel=WE;var YE=er;const Le=ti(YE),ZE=`
query {
  transactions(
    address_friendly: "Ef8gIwUCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASB6"
    page_size: 50
    page: 0
  ) {
    in_msg_src_addr_workchain_id
    in_msg_src_addr_address_hex
    in_msg_value_grams
    gen_utime
  }
}
`,Mo="te6ccgECCAEAAroAART/APSkE/S88sgLAQPk0wHQ0wMBcbCPZiHHAJJfA49dAdMfAYIQJOXxyrqPTAH6QDAB0x/UMO1E0PQE0z8BIlFCQxRHZts8FL7y4IxujoSIcPsA3oIQF9eEAHCAEMjLBVADzxYB+gLLiotkJvdW50eYzxbJcPsA7VSSXwPi4uMNAgcDAfbtRCT4I6EBggGGoPlBMFiAEvgz+Cj6RDABgCD0DG+hMIAo1yHTPwOoAtM/MFADqKABqKsPcFM1vI4SMDWCCC3GwFFCoRSoIRA1UEQDkTTiAqof+CWCEDuAAAGpCLFUQReAQPQ38uCqVBBDAsj0ABLLPwHPFskC+COhUiAEAexfA/gA7UTQ9ATTPwEC+CMhgED0h2+lnFMTArOSW3CTqx++4o4TAXD7AFiAQPRbMCCAQPSHb6UQNOhfAyBujiIwMXBwgBDIywVQA88WAfoCy4qLZCb3VudHmM8WyYEAoPsAjpICAsj0ABLLPwHPFsntVIhw+wDiBwGKAYIBhqD5QTBYgBL4M/go+kQwAYAg9AxvoTCAKNch0z8DqALTPzBQA6igAairD1ADoYIQBfXhAAGCEBfXhACgUAOgWKACBQHccAHQ0wABntMAAcAB8uBk+kAx+kAxjkcx0wIBc7Dy0G76QI0IZ/kBGCgQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDL6QFnHBfLQb/oA9AQBbvLgcPoAMfoAMeKAYNch0wAB4wDTADAwEqAGAJzTAAGOJdQB0NMAAZN11yHe0wABk3LXId7TAAGS1DHe0wABktQx3vQEMTCOIdMAAZN11yHe0wABk3LXId7TAAGS1DHe0wABktQx3vQEMeIAaGJ/kBGCgQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgJiWgAAAAAAAAAAAAAAAAAAA=",JE="https://programcrafter.github.io/ton-stable-timer/tonconnect-manifest.json";async function XE(r=!1){if(r)throw new Error("testnet not implemented");const t=await yf(),e=new Le.HttpProvider(t),s=(await(await fetch("https://dton.io/graphql/",{method:"POST",body:JSON.stringify({query:ZE}),headers:{"Content-Type":"application/json"}})).json()).data.transactions,i=Le.boc.Cell.oneFromBoc(Le.utils.base64ToBytes(Mo)),u=Le.utils.bytesToHex(await i.hash());let g=[],w=new Map;for(let F of s){const I=F.in_msg_src_addr_workchain_id+":"+F.in_msg_src_addr_address_hex,N=new Le.Address(I).toString(!0,!0,!0);if(w.has(I))continue;w.set(I,!0);const L=await e.getAddressInfo(N);if(L.state=="uninitialized"){console.log("Found deactivated timer",N);continue}else{if(L.code!=Mo){const et=Le.boc.Cell.oneFromBoc(Le.utils.base64ToBytes(L.code));if(Le.utils.bytesToHex(await et.hash())!=u){console.warn("Possible fraud attempt: contract with code != timer",N);continue}}let q=Le.boc.Cell.oneFromBoc(Le.utils.base64ToBytes(L.data)),Z=new Le.boc.Cell;Z.bits.writeUint(0,7),Z.writeCell(q);let tt=Le.utils.readNBytesUIntFromArray(8,Z.bits.array.slice(1));g.push({address:N,time_limit:new Date(tt*1e3)})}}return g}function gu(r,t){let e=BigInt(Math.ceil(Math.max(0,+r.amount.time_limit-+t.time_limit)/1e3));return{address:t.address,stateInit:void 0,payload:r.payload,amount:""+(r.amount.base_amount+r.amount.add_per_second*e)}}async function mu(r){if(+r.value_ton<.1)throw new Error("send requires >= 0.1 TON");let t=new Le.boc.Cell;t.bits.writeUint(16,6),t.bits.writeAddress(new Le.Address(r.destination)),t.bits.writeCoins(Le.utils.toNano(r.value_ton));try{let s=Le.boc.Cell.oneFromBoc(Le.utils.base64ToBytes(r.message));t.bits.writeUint(1,107),t.refs.push(s)}catch{t.bits.writeUint(0,139),t.bits.writeString(r.message)}let e=new Le.boc.Cell;e.bits.writeUint(619049418,32),e.bits.writeUint(Math.ceil(+new Date(r.time)/1e3),32),e.refs.push(t),e.print();let n=await e.toBoc(!1);return{amount:{base_amount:600n*1000000n+BigInt(+r.value_ton*1e9),add_per_second:3000000n,time_limit:new Date(r.time)},payload:Le.utils.bytesToBase64(n)}}async function QE(r,t){let e=await mu(r),n=new Le.boc.Cell;n.bits.writeUint(0,1),n.bits.writeUint(Math.ceil(+new Date/1e3),64),n.bits.writeAddress(new Le.Address(t.bounty_address));let s=Le.boc.Cell.oneFromBoc(Le.utils.base64ToBytes(Mo)),i=new Le.boc.Cell;i.bits.writeUint(6,5),i.refs.push(s),i.refs.push(n);let u="0:"+Le.utils.bytesToHex(await i.hash()),g=new Le.Address(u).toString(!0,!0,!0),w=gu(e,{address:g,time_limit:new Date});return w.stateInit=Le.utils.bytesToBase64(await i.toBoc(!1)),w}var yu={exports:{}};(function(r){(function(t,e){r.exports?r.exports=e():(t.nacl||(t.nacl={}),t.nacl.util=e())})(Gr,function(){var t={};function e(n){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(n))throw new TypeError("invalid encoding")}return t.decodeUTF8=function(n){if(typeof n!="string")throw new TypeError("expected string");var s,i=unescape(encodeURIComponent(n)),u=new Uint8Array(i.length);for(s=0;s<i.length;s++)u[s]=i.charCodeAt(s);return u},t.encodeUTF8=function(n){var s,i=[];for(s=0;s<n.length;s++)i.push(String.fromCharCode(n[s]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(t.encodeBase64=function(n){return Buffer.from(n).toString("base64")},t.decodeBase64=function(n){return e(n),new Uint8Array(Array.prototype.slice.call(Buffer.from(n,"base64"),0))}):(t.encodeBase64=function(n){return new Buffer(n).toString("base64")},t.decodeBase64=function(n){return e(n),new Uint8Array(Array.prototype.slice.call(new Buffer(n,"base64"),0))}):(t.encodeBase64=function(n){var s,i=[],u=n.length;for(s=0;s<u;s++)i.push(String.fromCharCode(n[s]));return btoa(i.join(""))},t.decodeBase64=function(n){e(n);var s,i=atob(n),u=new Uint8Array(i.length);for(s=0;s<i.length;s++)u[s]=i.charCodeAt(s);return u}),t})})(yu);var tx=yu.exports;const Jn=ti(tx);var Wr;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",r[r.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Wr||(Wr={}));var Y0;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Y0||(Y0={}));var bn;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(bn||(bn={}));var Z0;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(Z0||(Z0={}));var J0;(function(r){r[r.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",r[r.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",r[r.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",r[r.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(J0||(J0={}));var Gi;(function(r){r.MAINNET="-239",r.TESTNET="-3"})(Gi||(Gi={}));function ex(r,t){const e=Jn.encodeBase64(r);return t?encodeURIComponent(e):e}function rx(r,t){return t&&(r=decodeURIComponent(r)),Jn.decodeBase64(r)}function nx(r,t=!1){let e;return r instanceof Uint8Array?e=r:(typeof r!="string"&&(r=JSON.stringify(r)),e=Jn.decodeUTF8(r)),ex(e,t)}function ix(r,t=!1){const e=rx(r,t);return{toString(){return Jn.encodeUTF8(e)},toObject(){try{return JSON.parse(Jn.encodeUTF8(e))}catch{return null}},toUint8Array(){return e}}}const wu={encode:nx,decode:ix};function sx(r,t){const e=new Uint8Array(r.length+t.length);return e.set(r),e.set(t,r.length),e}function ox(r,t){if(t>=r.length)throw new Error("Index is out of buffer");const e=r.slice(0,t),n=r.slice(t);return[e,n]}function zs(r){let t="";return r.forEach(e=>{t+=("0"+(e&255).toString(16)).slice(-2)}),t}function zi(r){if(r.length%2!==0)throw new Error(`Cannot convert ${r} to bytesArray`);const t=new Uint8Array(r.length/2);for(let e=0;e<r.length;e+=2)t[e/2]=parseInt(r.slice(e,e+2),16);return t}class bu{constructor(t){this.nonceLength=24,this.keyPair=t?this.createKeypairFromString(t):this.createKeypair(),this.sessionId=zs(this.keyPair.publicKey)}createKeypair(){return ci.box.keyPair()}createKeypairFromString(t){return{publicKey:zi(t.publicKey),secretKey:zi(t.secretKey)}}createNonce(){return ci.randomBytes(this.nonceLength)}encrypt(t,e){const n=new TextEncoder().encode(t),s=this.createNonce(),i=ci.box(n,s,e,this.keyPair.secretKey);return sx(s,i)}decrypt(t,e){const[n,s]=ox(t,this.nonceLength),i=ci.box.open(s,n,e,this.keyPair.secretKey);if(!i)throw new Error(`Decryption error: 
 message: ${t.toString()} 
 sender pubkey: ${e.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);return new TextDecoder().decode(i)}stringifyKeypair(){return{publicKey:zs(this.keyPair.publicKey),secretKey:zs(this.keyPair.secretKey)}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ax(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(e[n[s]]=r[n[s]]);return e}function me(r,t,e,n){function s(i){return i instanceof e?i:new e(function(u){u(i)})}return new(e||(e=Promise))(function(i,u){function g(I){try{F(n.next(I))}catch(N){u(N)}}function w(I){try{F(n.throw(I))}catch(N){u(N)}}function F(I){I.done?i(I.value):s(I.value).then(g,w)}F((n=n.apply(r,t||[])).next())})}class ke extends Error{constructor(t,e){super(t,e),this.message=`${ke.prefix} ${this.constructor.name}${this.info?": "+this.info:""}${t?`
`+t:""}`,Object.setPrototypeOf(this,ke.prototype)}get info(){return""}}ke.prefix="[TON_CONNECT_SDK_ERROR]";class Ca extends ke{get info(){return"Passed DappMetadata is in incorrect format."}constructor(...t){super(...t),Object.setPrototypeOf(this,Ca.prototype)}}class ws extends ke{get info(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...t){super(...t),Object.setPrototypeOf(this,ws.prototype)}}class bs extends ke{get info(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...t){super(...t),Object.setPrototypeOf(this,bs.prototype)}}class Ba extends ke{get info(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}constructor(...t){super(...t),Object.setPrototypeOf(this,Ba.prototype)}}class Yi extends ke{get info(){return"Send transaction or other protocol methods called while wallet is not connected."}constructor(...t){super(...t),Object.setPrototypeOf(this,Yi.prototype)}}function fx(r){return"jsBridgeKey"in r}class Es extends ke{get info(){return"User rejects the action in the wallet."}constructor(...t){super(...t),Object.setPrototypeOf(this,Es.prototype)}}class xs extends ke{get info(){return"Request to the wallet contains errors."}constructor(...t){super(...t),Object.setPrototypeOf(this,xs.prototype)}}class As extends ke{get info(){return"App tries to send rpc request to the injected wallet while not connected."}constructor(...t){super(...t),Object.setPrototypeOf(this,As.prototype)}}class Ma extends ke{get info(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}constructor(...t){super(...t),Object.setPrototypeOf(this,Ma.prototype)}}class _a extends ke{get info(){return"Storage was not specified in the `DappMetadata` and default `localStorage` was not detected in the environment."}constructor(...t){super(...t),Object.setPrototypeOf(this,_a.prototype)}}class Fa extends ke{get info(){return"An error occurred while fetching the wallets list."}constructor(...t){super(...t),Object.setPrototypeOf(this,Fa.prototype)}}class Zr extends ke{constructor(...t){super(...t),Object.setPrototypeOf(this,Zr.prototype)}}const X0={[Wr.UNKNOWN_ERROR]:Zr,[Wr.USER_REJECTS_ERROR]:Es,[Wr.BAD_REQUEST_ERROR]:xs,[Wr.UNKNOWN_APP_ERROR]:As,[Wr.MANIFEST_NOT_FOUND_ERROR]:bs,[Wr.MANIFEST_CONTENT_ERROR]:ws};class lx{parseError(t){let e=Zr;return t.code in X0&&(e=X0[t.code]||Zr),new e(t.message)}}const hx=new lx;class ux{isError(t){return"error"in t}}const Q0={[bn.UNKNOWN_ERROR]:Zr,[bn.USER_REJECTS_ERROR]:Es,[bn.BAD_REQUEST_ERROR]:xs,[bn.UNKNOWN_APP_ERROR]:As};class cx extends ux{convertToRpcRequest(t){return{method:"sendTransaction",params:[JSON.stringify(t)]}}parseAndThrowError(t){let e=Zr;throw t.error.code in Q0&&(e=Q0[t.error.code]||Zr),new e(t.error.message)}convertFromRpcResponse(t){return{boc:t.result}}}const Si=new cx;class dx{constructor(t,e){this.storage=t,this.storeKey="ton-connect-storage_http-bridge-gateway::"+e}storeLastEventId(t){return me(this,void 0,void 0,function*(){return this.storage.setItem(this.storeKey,t)})}removeLastEventId(){return me(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return me(this,void 0,void 0,function*(){const t=yield this.storage.getItem(this.storeKey);return t||null})}}function px(r){return r.slice(-1)==="/"?r.slice(0,-1):r}function tf(r,t){return px(r)+"/"+t}class Ys{constructor(t,e,n,s,i){this.bridgeUrl=e,this.sessionId=n,this.listener=s,this.errorsListener=i,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.isClosed=!1,this.bridgeGatewayStorage=new dx(t,e)}registerSession(){return me(this,void 0,void 0,function*(){const t=new URL(tf(this.bridgeUrl,this.ssePath));t.searchParams.append("client_id",this.sessionId);const e=yield this.bridgeGatewayStorage.getLastEventId();if(!this.isClosed)return e&&t.searchParams.append("last_event_id",e),this.eventSource=new EventSource(t.toString()),new Promise((n,s)=>{this.eventSource.onerror=s,this.eventSource.onopen=()=>{this.eventSource.onerror=this.errorsHandler.bind(this),this.eventSource.onmessage=this.messagesHandler.bind(this),n()}})})}send(t,e,n,s){return me(this,void 0,void 0,function*(){const i=new URL(tf(this.bridgeUrl,this.postPath));i.searchParams.append("client_id",this.sessionId),i.searchParams.append("to",e),i.searchParams.append("ttl",(s||this.defaultTtl).toString()),i.searchParams.append("topic",n),yield fetch(i,{method:"post",body:wu.encode(t)})})}pause(){var t;(t=this.eventSource)===null||t===void 0||t.close()}unPause(){return this.registerSession()}close(){var t;this.isClosed=!0,(t=this.eventSource)===null||t===void 0||t.close()}setListener(t){this.listener=t}setErrorsListener(t){this.errorsListener=t}errorsHandler(t){var e,n;if(!this.isClosed){if(((e=this.eventSource)===null||e===void 0?void 0:e.readyState)===EventSource.CLOSED){this.eventSource.close(),this.registerSession();return}if(((n=this.eventSource)===null||n===void 0?void 0:n.readyState)===EventSource.CONNECTING){console.debug("[TON_CONNET_SDK_ERROR]: Bridge error",JSON.stringify(t));return}this.errorsListener(t)}}messagesHandler(t){return me(this,void 0,void 0,function*(){if(t.data!==this.heartbeatMessage&&(yield this.bridgeGatewayStorage.storeLastEventId(t.lastEventId),!this.isClosed)){let e;try{e=JSON.parse(t.data)}catch(n){throw new ke(`Bridge message parse failed, message ${n.data}`)}this.listener(e)}})}}class Xn{constructor(t){this.storage=t,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(t){return me(this,void 0,void 0,function*(){if(t.type==="injected")return this.storage.setItem(this.storeKey,JSON.stringify(t));const e={sessionKeyPair:t.session.sessionCrypto.stringifyKeypair(),walletPublicKey:t.session.walletPublicKey,bridgeUrl:t.session.bridgeUrl},n={type:"http",connectEvent:t.connectEvent,session:e,lastWalletEventId:t.lastWalletEventId,nextRpcRequestId:t.nextRpcRequestId};return this.storage.setItem(this.storeKey,JSON.stringify(n))})}removeConnection(){return me(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return me(this,void 0,void 0,function*(){const t=yield this.storage.getItem(this.storeKey);if(!t)return null;const e=JSON.parse(t);if(e.type==="injected")return e;const n=new bu(e.session.sessionKeyPair);return{type:"http",connectEvent:e.connectEvent,lastWalletEventId:e.lastWalletEventId,nextRpcRequestId:e.nextRpcRequestId,session:{sessionCrypto:n,bridgeUrl:e.session.bridgeUrl,walletPublicKey:e.session.walletPublicKey}}})}getHttpConnection(){return me(this,void 0,void 0,function*(){const t=yield this.getConnection();if(!t)throw new ke("Trying to read HTTP connection source while nothing is stored");if(t.type==="injected")throw new ke("Trying to read HTTP connection source while injected connection is stored");return t})}getInjectedConnection(){return me(this,void 0,void 0,function*(){const t=yield this.getConnection();if(!t)throw new ke("Trying to read Injected bridge connection source while nothing is stored");if((t==null?void 0:t.type)==="http")throw new ke("Trying to read Injected bridge connection source while HTTP connection is stored");return t})}storedConnectionType(){return me(this,void 0,void 0,function*(){const t=yield this.storage.getItem(this.storeKey);return t?JSON.parse(t).type:null})}storeLastWalletEventId(t){return me(this,void 0,void 0,function*(){const e=yield this.getConnection();if(e&&e.type==="http")return e.lastWalletEventId=t,this.storeConnection(e)})}getLastWalletEventId(){return me(this,void 0,void 0,function*(){const t=yield this.getConnection();if(t&&"lastWalletEventId"in t)return t.lastWalletEventId})}increaseNextRpcRequestId(){return me(this,void 0,void 0,function*(){const t=yield this.getConnection();if(t){const e=t.nextRpcRequestId||0;return t.nextRpcRequestId=e+1,this.storeConnection(t)}})}getNextRpcRequestId(){return me(this,void 0,void 0,function*(){const t=yield this.getConnection();return t&&t.nextRpcRequestId||0})}}const Eu=2;function mr(...r){try{console.debug("[TON_CONNECT_SDK]",...r)}catch{}}function $i(...r){try{console.error("[TON_CONNECT_SDK]",...r)}catch{}}function vx(...r){try{console.warn("[TON_CONNECT_SDK]",...r)}catch{}}class Zi{constructor(t,e){this.storage=t,this.walletConnectionSource=e,this.type="http",this.standardUniversalLink="tc://",this.pendingRequests=new Map,this.session=null,this.gateway=null,this.pendingGateways=[],this.listeners=[],this.connectionStorage=new Xn(t)}static fromStorage(t){return me(this,void 0,void 0,function*(){const n=yield new Xn(t).getHttpConnection();return new Zi(t,{bridgeUrl:n.session.bridgeUrl})})}connect(t){this.closeGateways();const e=new bu;let n="",s=this.standardUniversalLink;return Array.isArray(this.walletConnectionSource)?(this.pendingGateways=this.walletConnectionSource.map(i=>{const u=new Ys(this.storage,i.bridgeUrl,e.sessionId,()=>{},g=>{console.error(g)});return u.setListener(g=>this.pendingGatewaysListener(u,i.bridgeUrl,g)),u}),this.pendingGateways.forEach(i=>i.registerSession())):(n=this.walletConnectionSource.bridgeUrl,this.walletConnectionSource.universalLink&&(s=this.walletConnectionSource.universalLink),this.gateway=new Ys(this.storage,this.walletConnectionSource.bridgeUrl,e.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),this.gateway.registerSession()),this.session={sessionCrypto:e,bridgeUrl:n},this.generateUniversalLink(s,t)}restoreConnection(){return me(this,void 0,void 0,function*(){if(Array.isArray(this.walletConnectionSource))throw new ke("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");this.closeGateways();const t=yield this.connectionStorage.getHttpConnection();t&&(this.session=t.session,this.gateway=new Ys(this.storage,this.walletConnectionSource.bridgeUrl,t.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),yield this.gateway.registerSession(),this.listeners.forEach(e=>e(t.connectEvent)))})}sendRequest(t,e){return new Promise((n,s)=>me(this,void 0,void 0,function*(){if(!this.gateway||!this.session||!("walletPublicKey"in this.session))throw new ke("Trying to send bridge request without session");const i=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),mr("Send http-bridge request:",Object.assign(Object.assign({},t),{id:i}));const u=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{id:i})),zi(this.session.walletPublicKey));this.gateway.send(u,this.session.walletPublicKey,t.method).catch(s),this.pendingRequests.set(i.toString(),n),e==null||e()}))}closeConnection(){this.closeGateways(),this.listeners=[],this.session=null,this.gateway=null}disconnect(){return me(this,void 0,void 0,function*(){return new Promise(t=>me(this,void 0,void 0,function*(){let e=!1;const n=()=>{e=!0,this.removeBridgeAndSession().then(t)};try{yield this.sendRequest({method:"disconnect",params:[]},n)}catch(s){console.debug(s),e||this.removeBridgeAndSession().then(t)}}))})}listen(t){return this.listeners.push(t),()=>this.listeners=this.listeners.filter(e=>e!==t)}pause(){var t;(t=this.gateway)===null||t===void 0||t.pause(),this.pendingGateways.forEach(e=>e.pause())}unPause(){return me(this,void 0,void 0,function*(){const t=this.pendingGateways.map(e=>e.unPause());this.gateway&&t.push(this.gateway.unPause()),yield Promise.all(t)})}pendingGatewaysListener(t,e,n){return me(this,void 0,void 0,function*(){if(!this.pendingGateways.includes(t)){t.close();return}return this.closeGateways({except:t}),this.session.bridgeUrl=e,this.gateway=t,this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)),this.gateway.setListener(this.gatewayListener.bind(this)),this.gatewayListener(n)})}gatewayListener(t){return me(this,void 0,void 0,function*(){const e=JSON.parse(this.session.sessionCrypto.decrypt(wu.decode(t.message).toUint8Array(),zi(t.from)));if(mr("Wallet message received:",e),!("event"in e)){const s=e.id.toString(),i=this.pendingRequests.get(s);if(!i){mr(`Response id ${s} doesn't match any request's id`);return}i(e),this.pendingRequests.delete(s);return}if(e.id!==void 0){const s=yield this.connectionStorage.getLastWalletEventId();if(s!==void 0&&e.id<=s){$i(`Received event id (=${e.id}) must be greater than stored last wallet event id (=${s}) `);return}e.event!=="connect"&&(yield this.connectionStorage.storeLastWalletEventId(e.id))}const n=this.listeners;e.event==="connect"&&(yield this.updateSession(e,t.from)),e.event==="disconnect"&&(yield this.removeBridgeAndSession()),n.forEach(s=>s(e))})}gatewayErrorsListener(t){return me(this,void 0,void 0,function*(){throw new ke(`Bridge error ${JSON.stringify(t)}`)})}updateSession(t,e){return me(this,void 0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:e});const n=t.payload.items.find(i=>i.name==="ton_addr"),s=Object.assign(Object.assign({},t),{payload:Object.assign(Object.assign({},t.payload),{items:[n]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,lastWalletEventId:t.id,connectEvent:s,nextRpcRequestId:0})})}removeBridgeAndSession(){return me(this,void 0,void 0,function*(){this.closeConnection(),yield this.connectionStorage.removeConnection()})}generateUniversalLink(t,e){const n=new URL(t);return n.searchParams.append("v",Eu.toString()),n.searchParams.append("id",this.session.sessionCrypto.sessionId),n.searchParams.append("r",JSON.stringify(e)),n.toString()}closeGateways(t){var e;(e=this.gateway)===null||e===void 0||e.close(),this.pendingGateways.filter(n=>n!==(t==null?void 0:t.except)).forEach(n=>n.close()),this.pendingGateways=[]}}function ef(r,t){return xu(r,[t])}function xu(r,t){return!r||typeof r!="object"?!1:t.every(e=>e in r)}function gx(r){try{return!ef(r,"tonconnect")||!ef(r.tonconnect,"walletInfo")?!1:xu(r.tonconnect.walletInfo,["name","image","about_url"])}catch{return!1}}function Sa(){if(!(typeof window>"u"))return window}function mx(){if(!(typeof document>"u"))return document}function yx(){var r;const t=(r=Sa())===null||r===void 0?void 0:r.location.origin;return t?t+"/tonconnect-manifest.json":""}class hr{constructor(t,e){this.injectedWalletKey=e,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];const n=hr.window;if(!hr.isWindowContainsWallet(n,e))throw new Ma;this.connectionStorage=new Xn(t),this.injectedWallet=n[e].tonconnect}static fromStorage(t){return me(this,void 0,void 0,function*(){const n=yield new Xn(t).getInjectedConnection();return new hr(t,n.jsBridgeKey)})}static isWalletInjected(t){return hr.isWindowContainsWallet(this.window,t)}static isInsideWalletBrowser(t){return hr.isWindowContainsWallet(this.window,t)?this.window[t].tonconnect.isWalletBrowser:!1}static getCurrentlyInjectedWallets(){return this.window?Object.entries(this.window).filter(([e,n])=>gx(n)).map(([e,n])=>({name:n.tonconnect.walletInfo.name,aboutUrl:n.tonconnect.walletInfo.about_url,imageUrl:n.tonconnect.walletInfo.image,tondns:n.tonconnect.walletInfo.tondns,jsBridgeKey:e,injected:!0,embedded:n.tonconnect.isWalletBrowser})):[]}static isWindowContainsWallet(t,e){return!!t&&e in t&&typeof t[e]=="object"&&"tonconnect"in t[e]}connect(t){this._connect(Eu,t)}restoreConnection(){return me(this,void 0,void 0,function*(){try{mr("Injected Provider restoring connection...");const t=yield this.injectedWallet.restoreConnection();mr("Injected Provider restoring connection response",t),t.event==="connect"?(this.makeSubscriptions(),this.listeners.forEach(e=>e(t))):yield this.connectionStorage.removeConnection()}catch(t){yield this.connectionStorage.removeConnection(),console.error(t)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(){return me(this,void 0,void 0,function*(){return new Promise(t=>{const e=()=>{this.closeAllListeners(),this.connectionStorage.removeConnection().then(t)};try{this.injectedWallet.disconnect(),e()}catch(n){mr(n),this.sendRequest({method:"disconnect",params:[]},e)}})})}closeAllListeners(){var t;this.listenSubscriptions=!1,this.listeners=[],(t=this.unsubscribeCallback)===null||t===void 0||t.call(this)}listen(t){return this.listeners.push(t),()=>this.listeners=this.listeners.filter(e=>e!==t)}sendRequest(t,e){return me(this,void 0,void 0,function*(){const n=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),mr("Send injected-bridge request:",Object.assign(Object.assign({},t),{id:n}));const s=this.injectedWallet.send(Object.assign(Object.assign({},t),{id:n}));return s.then(i=>mr("Wallet message received:",i)),e==null||e(),s})}_connect(t,e){return me(this,void 0,void 0,function*(){try{mr(`Injected Provider connect request: protocolVersion: ${t}, message:`,e);const n=yield this.injectedWallet.connect(t,e);mr("Injected Provider connect response:",n),n.event==="connect"&&(yield this.updateSession(),this.makeSubscriptions()),this.listeners.forEach(s=>s(n))}catch(n){mr(n);const s={event:"connect_error",payload:{code:0,message:n==null?void 0:n.toString()}};this.listeners.forEach(i=>i(s))}})}makeSubscriptions(){this.listenSubscriptions=!0,this.unsubscribeCallback=this.injectedWallet.listen(t=>{mr("Wallet message received:",t),this.listenSubscriptions&&this.listeners.forEach(e=>e(t)),t.event==="disconnect"&&this.disconnect()})}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey,nextRpcRequestId:0})}}hr.window=Sa();class wx{constructor(){const t=Sa();if(!(t!=null&&t.localStorage))throw new _a;this.window=t}getItem(t){return me(this,void 0,void 0,function*(){return Promise.resolve(this.window.localStorage.getItem(t))})}removeItem(t){return me(this,void 0,void 0,function*(){return this.window.localStorage.removeItem(t),Promise.resolve()})}setItem(t,e){return this.window.localStorage.setItem(t,e),Promise.resolve()}}function bx(r){return xx(r)&&r.injected}function Ex(r){return bx(r)&&r.embedded}function xx(r){return"jsBridgeKey"in r}const Ax=[{name:"Tonkeeper",image:"https://tonkeeper.com/assets/tonconnect-icon.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com",universal_url:"https://app.tonkeeper.com/ton-connect",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"},{type:"js",key:"tonkeeper"}]},{name:"OpenMask",image:"https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",about_url:"https://www.openmask.app/",bridge:[{type:"js",key:"openmask"}]},{name:"MyTonWallet",image:"https://mytonwallet.io/icon-256.png",about_url:"https://mytonwallet.io",bridge:[{type:"js",key:"mytonwallet"}]}];class _o{constructor(t){this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null,this.walletsListSource="https://raw.githubusercontent.com/ton-blockchain/wallets-list/main/wallets.json",t!=null&&t.walletsListSource&&(this.walletsListSource=t.walletsListSource),t!=null&&t.cacheTTLMs&&(this.cacheTTLMs=t.cacheTTLMs)}getWallets(){return me(this,void 0,void 0,function*(){return this.cacheTTLMs&&this.walletsListCacheCreationTimestamp&&Date.now()>this.walletsListCacheCreationTimestamp+this.cacheTTLMs&&(this.walletsListCache=null),this.walletsListCache||(this.walletsListCache=this.fetchWalletsList(),this.walletsListCache.then(()=>{this.walletsListCacheCreationTimestamp=Date.now()}).catch(()=>{this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null})),this.walletsListCache})}getEmbeddedWallet(){return me(this,void 0,void 0,function*(){const e=(yield this.getWallets()).filter(Ex);return e.length!==1?null:e[0]})}fetchWalletsList(){return me(this,void 0,void 0,function*(){let t=[];try{if(t=yield(yield fetch(this.walletsListSource)).json(),!Array.isArray(t))throw new Fa("Wrong wallets list format, wallets list must be an array.");const s=t.filter(i=>!this.isCorrectWalletConfigDTO(i));s.length&&($i(`Wallet(s) ${s.map(i=>i.name).join(", ")} config format is wrong. They were removed from the wallets list.`),t=t.filter(i=>this.isCorrectWalletConfigDTO(i)))}catch(n){$i(n),t=Ax}let e=[];try{e=hr.getCurrentlyInjectedWallets()}catch(n){$i(n)}return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(t),e)})}walletConfigDTOListToWalletConfigList(t){return t.map(e=>{const n={name:e.name,imageUrl:e.image,aboutUrl:e.about_url,tondns:e.tondns};return e.bridge.forEach(s=>{if(s.type==="sse"&&(n.bridgeUrl=s.url,n.universalLink=e.universal_url,n.deepLink=e.deepLink),s.type==="js"){const i=s.key;n.jsBridgeKey=i,n.injected=hr.isWalletInjected(i),n.embedded=hr.isInsideWalletBrowser(i)}}),n})}mergeWalletsLists(t,e){return[...new Set(t.concat(e).map(s=>s.name)).values()].map(s=>{const i=t.find(g=>g.name===s),u=e.find(g=>g.name===s);return Object.assign(Object.assign({},i&&Object.assign({},i)),u&&Object.assign({},u))})}isCorrectWalletConfigDTO(t){if(!t||typeof t!="object")return!1;const e="name"in t,n="image"in t,s="about_url"in t;if(!e||!n||!s||!("bridge"in t)||!Array.isArray(t.bridge)||!t.bridge.length)return!1;const i=t.bridge;if(i.some(w=>!w||typeof w!="object"||!("type"in w)))return!1;const u=i.find(w=>w.type==="sse");if(u&&(!("url"in u)||!u.url||!t.universal_url))return!1;const g=i.find(w=>w.type==="js");return!(g&&(!("key"in g)||!g.key))}}class Ji extends ke{get info(){return"Wallet doesn't support requested feature method."}constructor(...t){super(...t),Object.setPrototypeOf(this,Ji.prototype)}}function Cx(r,t){const e=r.includes("SendTransaction"),n=r.find(s=>s&&typeof s=="object"&&s.name==="SendTransaction");if(!e&&!n)throw new Ji("Wallet doesn't support SendTransaction feature.");if(n&&n.maxMessages!==void 0){if(n.maxMessages<t.requiredMessagesNumber)throw new Ji(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${n.maxMessages}, but ${t.requiredMessagesNumber} is required.`);return}vx("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}class Cs{constructor(t){if(this.walletsList=new _o,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.dappSettings={manifestUrl:(t==null?void 0:t.manifestUrl)||yx(),storage:(t==null?void 0:t.storage)||new wx},this.walletsList=new _o({walletsListSource:t==null?void 0:t.walletsListSource,cacheTTLMs:t==null?void 0:t.walletsListCacheTTLMs}),!this.dappSettings.manifestUrl)throw new Ca("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new Xn(this.dappSettings.storage),t!=null&&t.disableAutoPauseConnection||this.addWindowFocusAndBlurSubscriptions()}static getWallets(){return this.walletsList.getWallets()}get connected(){return this._wallet!==null}get account(){var t;return((t=this._wallet)===null||t===void 0?void 0:t.account)||null}get wallet(){return this._wallet}set wallet(t){this._wallet=t,this.statusChangeSubscriptions.forEach(e=>e(this._wallet))}getWallets(){return this.walletsList.getWallets()}onStatusChange(t,e){return this.statusChangeSubscriptions.push(t),e&&this.statusChangeErrorSubscriptions.push(e),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(n=>n!==t),e&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(n=>n!==e))}}connect(t,e){var n;if(this.connected)throw new Ba;return(n=this.provider)===null||n===void 0||n.closeConnection(),this.provider=this.createProvider(t),this.provider.connect(this.createConnectRequest(e))}restoreConnection(){return me(this,void 0,void 0,function*(){const[t,e]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);try{switch(t){case"http":this.provider=yield Zi.fromStorage(this.dappSettings.storage);break;case"injected":this.provider=yield hr.fromStorage(this.dappSettings.storage);break;default:if(e)this.provider=yield this.createProvider(e);else return}}catch{yield this.bridgeConnectionStorage.removeConnection(),this.provider=null;return}return this.provider.listen(this.walletEventsListener.bind(this)),this.provider.restoreConnection()})}sendTransaction(t){return me(this,void 0,void 0,function*(){this.checkConnection(),Cx(this.wallet.device.features,{requiredMessagesNumber:t.messages.length});const{validUntil:e}=t,n=ax(t,["validUntil"]),s=t.from||this.account.address,i=t.network||this.account.chain,u=yield this.provider.sendRequest(Si.convertToRpcRequest(Object.assign(Object.assign({},n),{valid_until:e,from:s,network:i})));return Si.isError(u)?Si.parseAndThrowError(u):Si.convertFromRpcResponse(u)})}disconnect(){return me(this,void 0,void 0,function*(){if(!this.connected)throw new Yi;yield this.provider.disconnect(),this.onWalletDisconnected()})}pauseConnection(){var t;((t=this.provider)===null||t===void 0?void 0:t.type)==="http"&&this.provider.pause()}unPauseConnection(){var t;return((t=this.provider)===null||t===void 0?void 0:t.type)!=="http"?Promise.resolve():this.provider.unPause()}addWindowFocusAndBlurSubscriptions(){const t=mx();if(t)try{t.addEventListener("visibilitychange",()=>{t.hidden?this.pauseConnection():this.unPauseConnection()})}catch(e){console.error("Cannot subscribe to the document.visibilitychange: ",e)}}createProvider(t){let e;return!Array.isArray(t)&&fx(t)?e=new hr(this.dappSettings.storage,t.jsBridgeKey):e=new Zi(this.dappSettings.storage,t),e.listen(this.walletEventsListener.bind(this)),e}walletEventsListener(t){switch(t.event){case"connect":this.onWalletConnected(t.payload);break;case"connect_error":this.onWalletConnectError(t.payload);break;case"disconnect":this.onWalletDisconnected()}}onWalletConnected(t){const e=t.items.find(i=>i.name==="ton_addr"),n=t.items.find(i=>i.name==="ton_proof");if(!e)throw new ke("ton_addr connection item was not found");const s={device:t.device,provider:this.provider.type,account:{address:e.address,chain:e.network,walletStateInit:e.walletStateInit,publicKey:e.publicKey}};n&&(s.connectItems={tonProof:n}),this.wallet=s}onWalletConnectError(t){const e=hx.parseError(t);if(this.statusChangeErrorSubscriptions.forEach(n=>n(e)),console.debug(e),e instanceof bs||e instanceof ws)throw console.error(e),e}onWalletDisconnected(){this.wallet=null}checkConnection(){if(!this.connected)throw new Yi}createConnectRequest(t){const e=[{name:"ton_addr"}];return t!=null&&t.tonProof&&e.push({name:"ton_proof",payload:t.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:e}}}Cs.walletsList=new _o;Cs.isWalletInjected=r=>hr.isWalletInjected(r);Cs.isInsideWalletBrowser=r=>hr.isInsideWalletBrowser(r);for(let r=0;r<=255;r++){let t=r.toString(16);t.length<2&&(t="0"+t)}let dr=null;function Au(){return dr==null&&(dr=new Cs({manifestUrl:JE})),dr}async function Bx(){let r=Au();return await r.restoreConnection(),r.connected}async function Mx(){let r=Au();if(r.connected)return null;let e=(await r.getWallets())[0],n=r.connect({bridgeUrl:e.bridgeUrl,universalLink:e.universalLink});return console.log("TON Connect 2 link:",n),n}function _x(r){return{c:Ne,l:Ne,m:Ne,p:Ne,d:Ne}}function Fx(r){let t;function e(i,u){return i[6]?Dx:Sx}let n=e(r),s=n(r);return{c(){s.c(),t=An()},l(i){s.l(i),t=An()},m(i,u){s.m(i,u),Ye(i,t,u)},p(i,u){n===(n=e(i))&&s?s.p(i,u):(s.d(1),s=n(i),s&&(s.c(),s.m(t.parentNode,t)))},d(i){s.d(i),i&&Pt(t)}}}function Sx(r){let t,e,n,s,i;return{c(){t=ie("button"),e=ie("span"),n=$e("Connect wallet"),this.h()},l(u){t=se(u,"BUTTON",{class:!0});var g=ce(t);e=se(g,"SPAN",{class:!0});var w=ce(e);n=Oe(w,"Connect wallet"),w.forEach(Pt),g.forEach(Pt),this.h()},h(){$t(e,"class","svelte-1yoiiv0"),$t(t,"class","svelte-1yoiiv0")},m(u,g){Ye(u,t,g),wt(t,e),wt(e,n),s||(i=xr(t,"click",r[2]),s=!0)},p:Ne,d(u){u&&Pt(t),s=!1,i()}}}function Dx(r){let t,e,n,s,i;return{c(){t=ie("button"),e=ie("span"),n=$e("Disconnect wallet"),this.h()},l(u){t=se(u,"BUTTON",{class:!0});var g=ce(t);e=se(g,"SPAN",{class:!0});var w=ce(e);n=Oe(w,"Disconnect wallet"),w.forEach(Pt),g.forEach(Pt),this.h()},h(){$t(e,"class","svelte-1yoiiv0"),$t(t,"class","svelte-1yoiiv0")},m(u,g){Ye(u,t,g),wt(t,e),wt(e,n),s||(i=xr(t,"click",r[5]),s=!0)},p:Ne,d(u){u&&Pt(t),s=!1,i()}}}function Ix(r){let t,e,n;return{c(){t=ie("button"),e=ie("span"),n=$e("Checking connection"),this.h()},l(s){t=se(s,"BUTTON",{class:!0});var i=ce(t);e=se(i,"SPAN",{class:!0});var u=ce(e);n=Oe(u,"Checking connection"),u.forEach(Pt),i.forEach(Pt),this.h()},h(){$t(e,"class","svelte-1yoiiv0"),$t(t,"class","greyout svelte-1yoiiv0"),t.disabled=!0},m(s,i){Ye(s,t,i),wt(t,e),wt(e,n)},p:Ne,d(s){s&&Pt(t)}}}function Tx(r){let t,e,n,s,i,u,g,w,F,I,N,L,q,Z=r[0]?"testnet":"mainnet",tt,et,X,Q,G,k,J,st,ut,at,Gt,E,a,l,o,h={ctx:r,current:null,token:null,hasCatch:!1,pending:Ix,then:Fx,catch:_x,value:6};return ro(a=r[1],h),{c(){t=ie("header"),e=ie("div"),n=ie("img"),i=ie("span"),u=$e("TON Timer"),g=qe(),w=ie("button"),F=ie("img"),N=qe(),L=ie("span"),q=$e("Now: "),tt=$e(Z),et=qe(),X=ie("div"),Q=qe(),G=ie("span"),k=ie("a"),J=$e("TON Foundation site"),st=qe(),ut=ie("span"),at=ie("a"),Gt=$e("Source code"),E=qe(),h.block.c(),this.h()},l(c){t=se(c,"HEADER",{class:!0});var p=ce(t);e=se(p,"DIV",{class:!0});var b=ce(e);n=se(b,"IMG",{src:!0,class:!0,alt:!0}),i=se(b,"SPAN",{class:!0});var v=ce(i);u=Oe(v,"TON Timer"),v.forEach(Pt),b.forEach(Pt),g=We(p),w=se(p,"BUTTON",{class:!0});var f=ce(w);F=se(f,"IMG",{class:!0,src:!0,alt:!0}),N=We(f),L=se(f,"SPAN",{class:!0});var d=ce(L);q=Oe(d,"Now: "),tt=Oe(d,Z),d.forEach(Pt),f.forEach(Pt),et=We(p),X=se(p,"DIV",{class:!0}),ce(X).forEach(Pt),Q=We(p),G=se(p,"SPAN",{class:!0});var m=ce(G);k=se(m,"A",{href:!0});var B=ce(k);J=Oe(B,"TON Foundation site"),B.forEach(Pt),m.forEach(Pt),st=We(p),ut=se(p,"SPAN",{class:!0});var O=ce(ut);at=se(O,"A",{href:!0});var W=ce(at);Gt=Oe(W,"Source code"),W.forEach(Pt),O.forEach(Pt),E=We(p),h.block.l(p),p.forEach(Pt),this.h()},h(){Ua(n.src,s=zu+"/logo.png")||$t(n,"src",s),$t(n,"class","icon svelte-1yoiiv0"),$t(n,"alt","TON Timer logo"),$t(i,"class","svelte-1yoiiv0"),$t(e,"class","logo svelte-1yoiiv0"),$t(F,"class","icon svelte-1yoiiv0"),Ua(F.src,I="https://ton.org/download/ton_symbol.svg")||$t(F,"src",I),$t(F,"alt","TON logo"),Oi(F,"flip",r[0]),$t(L,"class","svelte-1yoiiv0"),$t(w,"class","greyout svelte-1yoiiv0"),w.disabled=!0,$t(X,"class","fill-space svelte-1yoiiv0"),$t(k,"href","https://ton.org/"),$t(G,"class","svelte-1yoiiv0"),$t(at,"href","https://github.com/ProgramCrafter/ton-stable-timer/"),$t(ut,"class","svelte-1yoiiv0"),$t(t,"class","svelte-1yoiiv0")},m(c,p){Ye(c,t,p),wt(t,e),wt(e,n),wt(e,i),wt(i,u),wt(t,g),wt(t,w),wt(w,F),wt(w,N),wt(w,L),wt(L,q),wt(L,tt),wt(t,et),wt(t,X),wt(t,Q),wt(t,G),wt(G,k),wt(k,J),wt(t,st),wt(t,ut),wt(ut,at),wt(at,Gt),wt(t,E),h.block.m(t,h.anchor=null),h.mount=()=>t,h.anchor=null,l||(o=xr(w,"click",r[4]),l=!0)},p(c,[p]){r=c,p&1&&Oi(F,"flip",r[0]),p&1&&Z!==(Z=r[0]?"testnet":"mainnet")&&Gn(tt,Z),h.ctx=r,p&2&&a!==(a=r[1])&&ro(a,h)||ff(h,r,p)},i:Ne,o:Ne,d(c){c&&Pt(t),h.block.d(),h.token=null,h=null,l=!1,o()}}}function Rx(r,t,e){let{is_testnet:n=!0}=t,{popup_link:s=""}=t,i=Bx();dr==null||dr.onStatusChange(F=>{e(1,i=dr?Promise.resolve(dr.connected):Promise.reject("sdk unavailable")),F&&e(3,s="")});async function u(){e(3,s=await Mx()??"")}const g=()=>{e(0,n=!n)},w=()=>{dr==null||dr.disconnect()};return r.$$set=F=>{"is_testnet"in F&&e(0,n=F.is_testnet),"popup_link"in F&&e(3,s=F.popup_link)},[n,i,u,s,g,w]}class Nx extends fn{constructor(t){super(),ln(this,t,Rx,Tx,hn,{is_testnet:0,popup_link:3})}}function Ux(r){let t;return{c(){t=ie("div"),this.h()},l(e){t=se(e,"DIV",{style:!0,class:!0}),ce(t).forEach(Pt),this.h()},h(){ui(t,"--margin",r[0]+"px"),ui(t,"--color",r[1]),$t(t,"class","svelte-6a3pxo")},m(e,n){Ye(e,t,n)},p(e,[n]){n&1&&ui(t,"--margin",e[0]+"px"),n&2&&ui(t,"--color",e[1])},i:Ne,o:Ne,d(e){e&&Pt(t)}}}function Px(r,t,e){let{margin:n=4}=t,{color:s="grey"}=t;return r.$$set=i=>{"margin"in i&&e(0,n=i.margin),"color"in i&&e(1,s=i.color)},[n,s]}class Zs extends fn{constructor(t){super(),ln(this,t,Px,Ux,hn,{margin:0,color:1})}}function Lx(r){let t,e,n,s,i,u,g,w,F,I,N,L,q,Z,tt,et,X,Q,G,k,J,st,ut,at,Gt,E,a,l;return{c(){t=ie("form"),e=ie("p"),n=$e("Schedule message"),s=qe(),i=ie("div"),u=ie("span"),g=$e("Destination"),w=ie("input"),F=qe(),I=ie("span"),N=$e("UTC datetime"),L=ie("input"),q=qe(),Z=ie("div"),tt=ie("span"),et=$e("Bounty* addr"),X=ie("input"),Q=qe(),G=ie("span"),k=$e("Value (TON)"),J=ie("input"),st=qe(),ut=ie("div"),at=ie("span"),Gt=$e("Message"),E=ie("input"),this.h()},l(o){t=se(o,"FORM",{class:!0});var h=ce(t);e=se(h,"P",{class:!0});var c=ce(e);n=Oe(c,"Schedule message"),c.forEach(Pt),s=We(h),i=se(h,"DIV",{class:!0});var p=ce(i);u=se(p,"SPAN",{class:!0});var b=ce(u);g=Oe(b,"Destination"),b.forEach(Pt),w=se(p,"INPUT",{class:!0,type:!0,placeholder:!0}),F=We(p),I=se(p,"SPAN",{class:!0});var v=ce(I);N=Oe(v,"UTC datetime"),v.forEach(Pt),L=se(p,"INPUT",{type:!0,class:!0}),q=We(p),p.forEach(Pt),Z=se(h,"DIV",{class:!0});var f=ce(Z);tt=se(f,"SPAN",{class:!0});var d=ce(tt);et=Oe(d,"Bounty* addr"),d.forEach(Pt),X=se(f,"INPUT",{class:!0,type:!0,placeholder:!0}),Q=We(f),G=se(f,"SPAN",{class:!0});var m=ce(G);k=Oe(m,"Value (TON)"),m.forEach(Pt),J=se(f,"INPUT",{type:!0,placeholder:!0,min:!0,step:!0,class:!0}),f.forEach(Pt),st=We(h),ut=se(h,"DIV",{class:!0});var B=ce(ut);at=se(B,"SPAN",{class:!0});var O=ce(at);Gt=Oe(O,"Message"),O.forEach(Pt),E=se(B,"INPUT",{type:!0,placeholder:!0,class:!0}),B.forEach(Pt),h.forEach(Pt),this.h()},h(){$t(e,"class","svelte-1aa3dcg"),$t(u,"class","svelte-1aa3dcg"),$t(w,"class","wide svelte-1aa3dcg"),$t(w,"type","text"),$t(w,"placeholder","www.ton"),$t(I,"class","svelte-1aa3dcg"),$t(L,"type","datetime-local"),$t(L,"class","svelte-1aa3dcg"),$t(i,"class","row svelte-1aa3dcg"),$t(tt,"class","svelte-1aa3dcg"),$t(X,"class","wide svelte-1aa3dcg"),$t(X,"type","text"),$t(X,"placeholder","ratelance.ton"),$t(G,"class","svelte-1aa3dcg"),$t(J,"type","number"),$t(J,"placeholder","1.000000000 (min 1 TON)"),$t(J,"min","0.1"),$t(J,"step","0.000000001"),$t(J,"class","svelte-1aa3dcg"),$t(Z,"class","row svelte-1aa3dcg"),$t(at,"class","svelte-1aa3dcg"),$t(E,"type","text"),$t(E,"placeholder","TON Timer is a great service"),$t(E,"class","svelte-1aa3dcg"),$t(ut,"class","row svelte-1aa3dcg"),$t(t,"class","svelte-1aa3dcg")},m(o,h){Ye(o,t,h),wt(t,e),wt(e,n),wt(t,s),wt(t,i),wt(i,u),wt(u,g),wt(i,w),Mr(w,r[0]),wt(i,F),wt(i,I),wt(I,N),wt(i,L),Mr(L,r[4]),wt(i,q),wt(t,Z),wt(Z,tt),wt(tt,et),wt(Z,X),Mr(X,r[1]),wt(Z,Q),wt(Z,G),wt(G,k),wt(Z,J),Mr(J,r[2]),wt(t,st),wt(t,ut),wt(ut,at),wt(at,Gt),wt(ut,E),Mr(E,r[3]),a||(l=[xr(w,"input",r[7]),xr(L,"input",r[8]),xr(X,"input",r[9]),xr(J,"input",r[10]),xr(E,"input",r[11])],a=!0)},p(o,[h]){h&1&&w.value!==o[0]&&Mr(w,o[0]),h&16&&Mr(L,o[4]),h&2&&X.value!==o[1]&&Mr(X,o[1]),h&4&&lf(J.value)!==o[2]&&Mr(J,o[2]),h&8&&E.value!==o[3]&&Mr(E,o[3])},i:Ne,o:Ne,d(o){o&&Pt(t),a=!1,Wu(l)}}}function $x(r,t,e){let{send_parameters:n}=t,{deploy_parameters:s}=t,i="EQCD39VS5jcptHL8vMjEXrzGaRcCVYto7HUn4bpAOg8xqB2N",u="EQCyoez1VF4HbNNq5Rbqfr3zKuoAjKorhK-YZr7LIIiVrSD7",g="1.6",w="",F=new Date().toISOString().slice(0,-8);function I(){i=this.value,e(0,i)}function N(){F=this.value,e(4,F)}function L(){u=this.value,e(1,u)}function q(){g=lf(this.value),e(2,g)}function Z(){w=this.value,e(3,w)}return r.$$set=tt=>{"send_parameters"in tt&&e(5,n=tt.send_parameters),"deploy_parameters"in tt&&e(6,s=tt.deploy_parameters)},r.$$.update=()=>{r.$$.dirty&29&&e(5,n={destination:i,time:F+"Z",value_ton:g.toString(),message:w}),r.$$.dirty&2&&e(6,s={bounty_address:u})},[i,u,g,w,F,n,s,I,N,L,q,Z]}class Ox extends fn{constructor(t){super(),ln(this,t,$x,Lx,hn,{send_parameters:5,deploy_parameters:6})}}function kx(r){let t,e,n,s,i,u,g,w,F,I,N,L,q,Z;return{c(){t=ie("div"),e=ie("button"),n=$e("Join existing timer"),s=qe(),i=ie("span"),u=ie("i"),g=$e(r[1]),w=qe(),F=ie("span"),I=$e("Scheduling cost: "),N=$e(r[2]),L=$e(" TON"),this.h()},l(tt){t=se(tt,"DIV",{class:!0});var et=ce(t);e=se(et,"BUTTON",{class:!0});var X=ce(e);n=Oe(X,"Join existing timer"),X.forEach(Pt),s=We(et),i=se(et,"SPAN",{class:!0});var Q=ce(i);u=se(Q,"I",{class:!0});var G=ce(u);g=Oe(G,r[1]),G.forEach(Pt),Q.forEach(Pt),w=We(et),F=se(et,"SPAN",{class:!0});var k=ce(F);I=Oe(k,"Scheduling cost: "),N=Oe(k,r[2]),L=Oe(k," TON"),k.forEach(Pt),et.forEach(Pt),this.h()},h(){$t(e,"class","svelte-1hsad7c"),$t(u,"class","svelte-1hsad7c"),$t(i,"class","svelte-1hsad7c"),$t(F,"class","svelte-1hsad7c"),$t(t,"class","svelte-1hsad7c")},m(tt,et){Ye(tt,t,et),wt(t,e),wt(e,n),wt(t,s),wt(t,i),wt(i,u),wt(u,g),wt(t,w),wt(t,F),wt(F,I),wt(F,N),wt(F,L),q||(Z=xr(e,"click",r[3]),q=!0)},p(tt,et){et&2&&Gn(g,tt[1]),et&4&&Gn(N,tt[2])},d(tt){tt&&Pt(t),q=!1,Z()}}}function jx(r){let t,e,n,s,i,u,g,w,F,I,N,L,q,Z,tt,et;return{c(){t=ie("div"),e=ie("button"),n=$e("Deploy new timer"),s=qe(),i=ie("span"),u=ie("i"),g=$e(r[1]),w=qe(),F=ie("span"),I=$e("Scheduling cost: "),N=$e(r[2]),L=$e(" TON "),q=ie("i"),Z=$e("*with 0.4 returned"),this.h()},l(X){t=se(X,"DIV",{class:!0});var Q=ce(t);e=se(Q,"BUTTON",{class:!0});var G=ce(e);n=Oe(G,"Deploy new timer"),G.forEach(Pt),s=We(Q),i=se(Q,"SPAN",{class:!0});var k=ce(i);u=se(k,"I",{class:!0});var J=ce(u);g=Oe(J,r[1]),J.forEach(Pt),k.forEach(Pt),w=We(Q),F=se(Q,"SPAN",{class:!0});var st=ce(F);I=Oe(st,"Scheduling cost: "),N=Oe(st,r[2]),L=Oe(st," TON "),q=se(st,"I",{class:!0});var ut=ce(q);Z=Oe(ut,"*with 0.4 returned"),ut.forEach(Pt),st.forEach(Pt),Q.forEach(Pt),this.h()},h(){$t(e,"class","svelte-1hsad7c"),$t(u,"class","svelte-1hsad7c"),$t(i,"class","svelte-1hsad7c"),$t(q,"class","svelte-1hsad7c"),$t(F,"class","svelte-1hsad7c"),$t(t,"class","nt svelte-1hsad7c")},m(X,Q){Ye(X,t,Q),wt(t,e),wt(e,n),wt(t,s),wt(t,i),wt(i,u),wt(u,g),wt(t,w),wt(t,F),wt(F,I),wt(F,N),wt(F,L),wt(F,q),wt(q,Z),tt||(et=xr(e,"click",r[3]),tt=!0)},p(X,Q){Q&2&&Gn(g,X[1]),Q&4&&Gn(N,X[2])},d(X){X&&Pt(t),tt=!1,et()}}}function qx(r){let t;function e(i,u){return i[0]?jx:kx}let n=e(r),s=n(r);return{c(){s.c(),t=An()},l(i){s.l(i),t=An()},m(i,u){s.m(i,u),Ye(i,t,u)},p(i,[u]){n===(n=e(i))&&s?s.p(i,u):(s.d(1),s=n(i),s&&(s.c(),s.m(t.parentNode,t)))},i:Ne,o:Ne,d(i){s.d(i),i&&Pt(t)}}}function Wx(r,t,e){let{use_message_promise:n}=t,{is_testnet:s=!0}=t,{popup_link:i=""}=t,u=null,g=null,w=null;async function F(){var N,L;let I=await n;if(dr.connected)dr.sendTransaction({validUntil:Math.ceil(Date.now()/1e3+300),from:void 0,network:s?Gi.TESTNET:Gi.MAINNET,messages:[I]});else{let q=(L=(N=I.stateInit)==null?void 0:N.replaceAll("+","-"))==null?void 0:L.replaceAll("/","_"),Z="ton://transfer/"+I.address+"?amount="+I.amount+"&bin="+I.payload.replaceAll("+","-").replaceAll("/","_")+(q?"&init="+q:"");e(4,i=Z),console.log("Link to use timer",I.address,"=",Z)}}return r.$$set=I=>{"use_message_promise"in I&&e(5,n=I.use_message_promise),"is_testnet"in I&&e(6,s=I.is_testnet),"popup_link"in I&&e(4,i=I.popup_link)},r.$$.update=()=>{r.$$.dirty&32&&n.then(I=>{e(0,u=I.stateInit!=null),e(1,g=I.address),e(2,w=+I.amount/1e9)}).catch(()=>{e(0,u=null),e(1,g=null),e(2,w=null)})},[u,g,w,F,i,n,s]}class Cu extends fn{constructor(t){super(),ln(this,t,Wx,qx,hn,{use_message_promise:5,is_testnet:6,popup_link:4})}}var li={},Hx=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Bu={},pr={};let Da;const Kx=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];pr.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};pr.getSymbolTotalCodewords=function(t){return Kx[t]};pr.getBCHDigit=function(r){let t=0;for(;r!==0;)t++,r>>>=1;return t};pr.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Da=t};pr.isKanjiModeEnabled=function(){return typeof Da<"u"};pr.toSJIS=function(t){return Da(t)};var Bs={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+e)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return t(n)}catch{return s}}})(Bs);function Mu(){this.buffer=[],this.length=0}Mu.prototype={get:function(r){const t=Math.floor(r/8);return(this.buffer[t]>>>7-r%8&1)===1},put:function(r,t){for(let e=0;e<t;e++)this.putBit((r>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),r&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Vx=Mu;function hi(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}hi.prototype.set=function(r,t,e,n){const s=r*this.size+t;this.data[s]=e,n&&(this.reservedBit[s]=!0)};hi.prototype.get=function(r,t){return this.data[r*this.size+t]};hi.prototype.xor=function(r,t,e){this.data[r*this.size+t]^=e};hi.prototype.isReserved=function(r,t){return this.reservedBit[r*this.size+t]};var Gx=hi,_u={};(function(r){const t=pr.getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=t(n),u=i===145?26:Math.ceil((i-13)/(2*s-2))*2,g=[i-7];for(let w=1;w<s-1;w++)g[w]=g[w-1]-u;return g.push(6),g.reverse()},r.getPositions=function(n){const s=[],i=r.getRowColCoords(n),u=i.length;for(let g=0;g<u;g++)for(let w=0;w<u;w++)g===0&&w===0||g===0&&w===u-1||g===u-1&&w===0||s.push([i[g],i[w]]);return s}})(_u);var Fu={};const zx=pr.getSymbolSize,rf=7;Fu.getPositions=function(t){const e=zx(t);return[[0,0],[e-rf,0],[0,e-rf]]};var Su={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const i=s.size;let u=0,g=0,w=0,F=null,I=null;for(let N=0;N<i;N++){g=w=0,F=I=null;for(let L=0;L<i;L++){let q=s.get(N,L);q===F?g++:(g>=5&&(u+=t.N1+(g-5)),F=q,g=1),q=s.get(L,N),q===I?w++:(w>=5&&(u+=t.N1+(w-5)),I=q,w=1)}g>=5&&(u+=t.N1+(g-5)),w>=5&&(u+=t.N1+(w-5))}return u},r.getPenaltyN2=function(s){const i=s.size;let u=0;for(let g=0;g<i-1;g++)for(let w=0;w<i-1;w++){const F=s.get(g,w)+s.get(g,w+1)+s.get(g+1,w)+s.get(g+1,w+1);(F===4||F===0)&&u++}return u*t.N2},r.getPenaltyN3=function(s){const i=s.size;let u=0,g=0,w=0;for(let F=0;F<i;F++){g=w=0;for(let I=0;I<i;I++)g=g<<1&2047|s.get(F,I),I>=10&&(g===1488||g===93)&&u++,w=w<<1&2047|s.get(I,F),I>=10&&(w===1488||w===93)&&u++}return u*t.N3},r.getPenaltyN4=function(s){let i=0;const u=s.data.length;for(let w=0;w<u;w++)i+=s.data[w];return Math.abs(Math.ceil(i*100/u/5)-10)*t.N4};function e(n,s,i){switch(n){case r.Patterns.PATTERN000:return(s+i)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(s+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return s*i%2+s*i%3===0;case r.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case r.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,i){const u=i.size;for(let g=0;g<u;g++)for(let w=0;w<u;w++)i.isReserved(w,g)||i.xor(w,g,e(s,w,g))},r.getBestMask=function(s,i){const u=Object.keys(r.Patterns).length;let g=0,w=1/0;for(let F=0;F<u;F++){i(F),r.applyMask(F,s);const I=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(F,s),I<w&&(w=I,g=F)}return g}})(Su);var Ms={};const Vr=Bs,Di=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ii=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ms.getBlocksCount=function(t,e){switch(e){case Vr.L:return Di[(t-1)*4+0];case Vr.M:return Di[(t-1)*4+1];case Vr.Q:return Di[(t-1)*4+2];case Vr.H:return Di[(t-1)*4+3];default:return}};Ms.getTotalCodewordsCount=function(t,e){switch(e){case Vr.L:return Ii[(t-1)*4+0];case Vr.M:return Ii[(t-1)*4+1];case Vr.Q:return Ii[(t-1)*4+2];case Vr.H:return Ii[(t-1)*4+3];default:return}};var Du={},_s={};const Vn=new Uint8Array(512),Xi=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)Vn[e]=t,Xi[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)Vn[e]=Vn[e-255]})();_s.log=function(t){if(t<1)throw new Error("log("+t+")");return Xi[t]};_s.exp=function(t){return Vn[t]};_s.mul=function(t,e){return t===0||e===0?0:Vn[Xi[t]+Xi[e]]};(function(r){const t=_s;r.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let u=0;u<n.length;u++)for(let g=0;g<s.length;g++)i[u+g]^=t.mul(n[u],s[g]);return i},r.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const u=i[0];for(let w=0;w<s.length;w++)i[w]^=t.mul(s[w],u);let g=0;for(;g<i.length&&i[g]===0;)g++;i=i.slice(g)}return i},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=r.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(Du);const Iu=Du;function Ia(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}Ia.prototype.initialize=function(t){this.degree=t,this.genPoly=Iu.generateECPolynomial(this.degree)};Ia.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=Iu.mod(e,this.genPoly),s=this.degree-n.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(n,s),i}return n};var Yx=Ia,Tu={},Xr={},Ta={};Ta.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Tr={};const Ru="[0-9]+",Zx="[A-Z $%*+\\-./:]+";let Qn="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Qn=Qn.replace(/u/g,"\\u");const Jx="(?:(?![A-Z0-9 $%*+\\-./:]|"+Qn+`)(?:.|[\r
]))+`;Tr.KANJI=new RegExp(Qn,"g");Tr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Tr.BYTE=new RegExp(Jx,"g");Tr.NUMERIC=new RegExp(Ru,"g");Tr.ALPHANUMERIC=new RegExp(Zx,"g");const Xx=new RegExp("^"+Qn+"$"),Qx=new RegExp("^"+Ru+"$"),t6=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Tr.testKanji=function(t){return Xx.test(t)};Tr.testNumeric=function(t){return Qx.test(t)};Tr.testAlphanumeric=function(t){return t6.test(t)};(function(r){const t=Ta,e=Tr;r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,u){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?i.ccBits[0]:u<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return e.testNumeric(i)?r.NUMERIC:e.testAlphanumeric(i)?r.ALPHANUMERIC:e.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(i,u){if(r.isValid(i))return i;try{return n(i)}catch{return u}}})(Xr);(function(r){const t=pr,e=Ms,n=Bs,s=Xr,i=Ta,u=7973,g=t.getBCHDigit(u);function w(L,q,Z){for(let tt=1;tt<=40;tt++)if(q<=r.getCapacity(tt,Z,L))return tt}function F(L,q){return s.getCharCountIndicator(L,q)+4}function I(L,q){let Z=0;return L.forEach(function(tt){const et=F(tt.mode,q);Z+=et+tt.getBitsLength()}),Z}function N(L,q){for(let Z=1;Z<=40;Z++)if(I(L,Z)<=r.getCapacity(Z,q,s.MIXED))return Z}r.from=function(q,Z){return i.isValid(q)?parseInt(q,10):Z},r.getCapacity=function(q,Z,tt){if(!i.isValid(q))throw new Error("Invalid QR Code version");typeof tt>"u"&&(tt=s.BYTE);const et=t.getSymbolTotalCodewords(q),X=e.getTotalCodewordsCount(q,Z),Q=(et-X)*8;if(tt===s.MIXED)return Q;const G=Q-F(tt,q);switch(tt){case s.NUMERIC:return Math.floor(G/10*3);case s.ALPHANUMERIC:return Math.floor(G/11*2);case s.KANJI:return Math.floor(G/13);case s.BYTE:default:return Math.floor(G/8)}},r.getBestVersionForData=function(q,Z){let tt;const et=n.from(Z,n.M);if(Array.isArray(q)){if(q.length>1)return N(q,et);if(q.length===0)return 1;tt=q[0]}else tt=q;return w(tt.mode,tt.getLength(),et)},r.getEncodedBits=function(q){if(!i.isValid(q)||q<7)throw new Error("Invalid QR Code version");let Z=q<<12;for(;t.getBCHDigit(Z)-g>=0;)Z^=u<<t.getBCHDigit(Z)-g;return q<<12|Z}})(Tu);var Nu={};const Fo=pr,Uu=1335,e6=21522,nf=Fo.getBCHDigit(Uu);Nu.getEncodedBits=function(t,e){const n=t.bit<<3|e;let s=n<<10;for(;Fo.getBCHDigit(s)-nf>=0;)s^=Uu<<Fo.getBCHDigit(s)-nf;return(n<<10|s)^e6};var Pu={};const r6=Xr;function _n(r){this.mode=r6.NUMERIC,this.data=r.toString()}_n.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};_n.prototype.getLength=function(){return this.data.length};_n.prototype.getBitsLength=function(){return _n.getBitsLength(this.data.length)};_n.prototype.write=function(t){let e,n,s;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),s=parseInt(n,10),t.put(s,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),s=parseInt(n,10),t.put(s,i*3+1))};var n6=_n;const i6=Xr,Js=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Fn(r){this.mode=i6.ALPHANUMERIC,this.data=r}Fn.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Fn.prototype.getLength=function(){return this.data.length};Fn.prototype.getBitsLength=function(){return Fn.getBitsLength(this.data.length)};Fn.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=Js.indexOf(this.data[e])*45;n+=Js.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(Js.indexOf(this.data[e]),6)};var s6=Fn,o6=function(t){for(var e=[],n=t.length,s=0;s<n;s++){var i=t.charCodeAt(s);if(i>=55296&&i<=56319&&n>s+1){var u=t.charCodeAt(s+1);u>=56320&&u<=57343&&(i=(i-55296)*1024+u-56320+65536,s+=1)}if(i<128){e.push(i);continue}if(i<2048){e.push(i>>6|192),e.push(i&63|128);continue}if(i<55296||i>=57344&&i<65536){e.push(i>>12|224),e.push(i>>6&63|128),e.push(i&63|128);continue}if(i>=65536&&i<=1114111){e.push(i>>18|240),e.push(i>>12&63|128),e.push(i>>6&63|128),e.push(i&63|128);continue}e.push(239,191,189)}return new Uint8Array(e).buffer};const a6=o6,f6=Xr;function Sn(r){this.mode=f6.BYTE,typeof r=="string"&&(r=a6(r)),this.data=new Uint8Array(r)}Sn.getBitsLength=function(t){return t*8};Sn.prototype.getLength=function(){return this.data.length};Sn.prototype.getBitsLength=function(){return Sn.getBitsLength(this.data.length)};Sn.prototype.write=function(r){for(let t=0,e=this.data.length;t<e;t++)r.put(this.data[t],8)};var l6=Sn;const h6=Xr,u6=pr;function Dn(r){this.mode=h6.KANJI,this.data=r}Dn.getBitsLength=function(t){return t*13};Dn.prototype.getLength=function(){return this.data.length};Dn.prototype.getBitsLength=function(){return Dn.getBitsLength(this.data.length)};Dn.prototype.write=function(r){let t;for(t=0;t<this.data.length;t++){let e=u6.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),r.put(e,13)}};var c6=Dn,Lu={exports:{}};(function(r){var t={single_source_shortest_paths:function(e,n,s){var i={},u={};u[n]=0;var g=t.PriorityQueue.make();g.push(n,0);for(var w,F,I,N,L,q,Z,tt,et;!g.empty();){w=g.pop(),F=w.value,N=w.cost,L=e[F]||{};for(I in L)L.hasOwnProperty(I)&&(q=L[I],Z=N+q,tt=u[I],et=typeof u[I]>"u",(et||tt>Z)&&(u[I]=Z,g.push(I,Z),i[I]=F))}if(typeof s<"u"&&typeof u[s]>"u"){var X=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(X)}return i},extract_shortest_path_from_predecessor_list:function(e,n){for(var s=[],i=n;i;)s.push(i),e[i],i=e[i];return s.reverse(),s},find_path:function(e,n,s){var i=t.single_source_shortest_paths(e,n,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,s={},i;e=e||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=e.sorter||n.default_sorter,s},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var s={value:e,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=t})(Lu);var d6=Lu.exports;(function(r){const t=Xr,e=n6,n=s6,s=l6,i=c6,u=Tr,g=pr,w=d6;function F(X){return unescape(encodeURIComponent(X)).length}function I(X,Q,G){const k=[];let J;for(;(J=X.exec(G))!==null;)k.push({data:J[0],index:J.index,mode:Q,length:J[0].length});return k}function N(X){const Q=I(u.NUMERIC,t.NUMERIC,X),G=I(u.ALPHANUMERIC,t.ALPHANUMERIC,X);let k,J;return g.isKanjiModeEnabled()?(k=I(u.BYTE,t.BYTE,X),J=I(u.KANJI,t.KANJI,X)):(k=I(u.BYTE_KANJI,t.BYTE,X),J=[]),Q.concat(G,k,J).sort(function(ut,at){return ut.index-at.index}).map(function(ut){return{data:ut.data,mode:ut.mode,length:ut.length}})}function L(X,Q){switch(Q){case t.NUMERIC:return e.getBitsLength(X);case t.ALPHANUMERIC:return n.getBitsLength(X);case t.KANJI:return i.getBitsLength(X);case t.BYTE:return s.getBitsLength(X)}}function q(X){return X.reduce(function(Q,G){const k=Q.length-1>=0?Q[Q.length-1]:null;return k&&k.mode===G.mode?(Q[Q.length-1].data+=G.data,Q):(Q.push(G),Q)},[])}function Z(X){const Q=[];for(let G=0;G<X.length;G++){const k=X[G];switch(k.mode){case t.NUMERIC:Q.push([k,{data:k.data,mode:t.ALPHANUMERIC,length:k.length},{data:k.data,mode:t.BYTE,length:k.length}]);break;case t.ALPHANUMERIC:Q.push([k,{data:k.data,mode:t.BYTE,length:k.length}]);break;case t.KANJI:Q.push([k,{data:k.data,mode:t.BYTE,length:F(k.data)}]);break;case t.BYTE:Q.push([{data:k.data,mode:t.BYTE,length:F(k.data)}])}}return Q}function tt(X,Q){const G={},k={start:{}};let J=["start"];for(let st=0;st<X.length;st++){const ut=X[st],at=[];for(let Gt=0;Gt<ut.length;Gt++){const E=ut[Gt],a=""+st+Gt;at.push(a),G[a]={node:E,lastCount:0},k[a]={};for(let l=0;l<J.length;l++){const o=J[l];G[o]&&G[o].node.mode===E.mode?(k[o][a]=L(G[o].lastCount+E.length,E.mode)-L(G[o].lastCount,E.mode),G[o].lastCount+=E.length):(G[o]&&(G[o].lastCount=E.length),k[o][a]=L(E.length,E.mode)+4+t.getCharCountIndicator(E.mode,Q))}}J=at}for(let st=0;st<J.length;st++)k[J[st]].end=0;return{map:k,table:G}}function et(X,Q){let G;const k=t.getBestModeForData(X);if(G=t.from(Q,k),G!==t.BYTE&&G.bit<k.bit)throw new Error('"'+X+'" cannot be encoded with mode '+t.toString(G)+`.
 Suggested mode is: `+t.toString(k));switch(G===t.KANJI&&!g.isKanjiModeEnabled()&&(G=t.BYTE),G){case t.NUMERIC:return new e(X);case t.ALPHANUMERIC:return new n(X);case t.KANJI:return new i(X);case t.BYTE:return new s(X)}}r.fromArray=function(Q){return Q.reduce(function(G,k){return typeof k=="string"?G.push(et(k,null)):k.data&&G.push(et(k.data,k.mode)),G},[])},r.fromString=function(Q,G){const k=N(Q,g.isKanjiModeEnabled()),J=Z(k),st=tt(J,G),ut=w.find_path(st.map,"start","end"),at=[];for(let Gt=1;Gt<ut.length-1;Gt++)at.push(st.table[ut[Gt]].node);return r.fromArray(q(at))},r.rawSplit=function(Q){return r.fromArray(N(Q,g.isKanjiModeEnabled()))}})(Pu);const Fs=pr,Xs=Bs,p6=Vx,v6=Gx,g6=_u,m6=Fu,So=Su,Do=Ms,y6=Yx,Qi=Tu,w6=Nu,b6=Xr,Qs=Pu;function E6(r,t){const e=r.size,n=m6.getPositions(t);for(let s=0;s<n.length;s++){const i=n[s][0],u=n[s][1];for(let g=-1;g<=7;g++)if(!(i+g<=-1||e<=i+g))for(let w=-1;w<=7;w++)u+w<=-1||e<=u+w||(g>=0&&g<=6&&(w===0||w===6)||w>=0&&w<=6&&(g===0||g===6)||g>=2&&g<=4&&w>=2&&w<=4?r.set(i+g,u+w,!0,!0):r.set(i+g,u+w,!1,!0))}}function x6(r){const t=r.size;for(let e=8;e<t-8;e++){const n=e%2===0;r.set(e,6,n,!0),r.set(6,e,n,!0)}}function A6(r,t){const e=g6.getPositions(t);for(let n=0;n<e.length;n++){const s=e[n][0],i=e[n][1];for(let u=-2;u<=2;u++)for(let g=-2;g<=2;g++)u===-2||u===2||g===-2||g===2||u===0&&g===0?r.set(s+u,i+g,!0,!0):r.set(s+u,i+g,!1,!0)}}function C6(r,t){const e=r.size,n=Qi.getEncodedBits(t);let s,i,u;for(let g=0;g<18;g++)s=Math.floor(g/3),i=g%3+e-8-3,u=(n>>g&1)===1,r.set(s,i,u,!0),r.set(i,s,u,!0)}function to(r,t,e){const n=r.size,s=w6.getEncodedBits(t,e);let i,u;for(i=0;i<15;i++)u=(s>>i&1)===1,i<6?r.set(i,8,u,!0):i<8?r.set(i+1,8,u,!0):r.set(n-15+i,8,u,!0),i<8?r.set(8,n-i-1,u,!0):i<9?r.set(8,15-i-1+1,u,!0):r.set(8,15-i-1,u,!0);r.set(n-8,8,1,!0)}function B6(r,t){const e=r.size;let n=-1,s=e-1,i=7,u=0;for(let g=e-1;g>0;g-=2)for(g===6&&g--;;){for(let w=0;w<2;w++)if(!r.isReserved(s,g-w)){let F=!1;u<t.length&&(F=(t[u]>>>i&1)===1),r.set(s,g-w,F),i--,i===-1&&(u++,i=7)}if(s+=n,s<0||e<=s){s-=n,n=-n;break}}}function M6(r,t,e){const n=new p6;e.forEach(function(w){n.put(w.mode.bit,4),n.put(w.getLength(),b6.getCharCountIndicator(w.mode,r)),w.write(n)});const s=Fs.getSymbolTotalCodewords(r),i=Do.getTotalCodewordsCount(r,t),u=(s-i)*8;for(n.getLengthInBits()+4<=u&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const g=(u-n.getLengthInBits())/8;for(let w=0;w<g;w++)n.put(w%2?17:236,8);return _6(n,r,t)}function _6(r,t,e){const n=Fs.getSymbolTotalCodewords(t),s=Do.getTotalCodewordsCount(t,e),i=n-s,u=Do.getBlocksCount(t,e),g=n%u,w=u-g,F=Math.floor(n/u),I=Math.floor(i/u),N=I+1,L=F-I,q=new y6(L);let Z=0;const tt=new Array(u),et=new Array(u);let X=0;const Q=new Uint8Array(r.buffer);for(let ut=0;ut<u;ut++){const at=ut<w?I:N;tt[ut]=Q.slice(Z,Z+at),et[ut]=q.encode(tt[ut]),Z+=at,X=Math.max(X,at)}const G=new Uint8Array(n);let k=0,J,st;for(J=0;J<X;J++)for(st=0;st<u;st++)J<tt[st].length&&(G[k++]=tt[st][J]);for(J=0;J<L;J++)for(st=0;st<u;st++)G[k++]=et[st][J];return G}function F6(r,t,e,n){let s;if(Array.isArray(r))s=Qs.fromArray(r);else if(typeof r=="string"){let F=t;if(!F){const I=Qs.rawSplit(r);F=Qi.getBestVersionForData(I,e)}s=Qs.fromString(r,F||40)}else throw new Error("Invalid data");const i=Qi.getBestVersionForData(s,e);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const u=M6(t,e,s),g=Fs.getSymbolSize(t),w=new v6(g);return E6(w,t),x6(w),A6(w,t),to(w,e,0),t>=7&&C6(w,t),B6(w,u),isNaN(n)&&(n=So.getBestMask(w,to.bind(null,w,e))),So.applyMask(n,w),to(w,e,n),{modules:w,version:t,errorCorrectionLevel:e,maskPattern:n,segments:s}}Bu.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let n=Xs.M,s,i;return typeof e<"u"&&(n=Xs.from(e.errorCorrectionLevel,Xs.M),s=Qi.from(e.version),i=So.from(e.maskPattern),e.toSJISFunc&&Fs.setToSJISFunction(e.toSJISFunc)),F6(t,s,n,i)};var $u={},Ra={};(function(r){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,u=n.scale||4;return{width:i,scale:i?4:u,margin:s,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const i=r.getScale(n,s);return Math.floor((n+s.margin*2)*i)},r.qrToImageData=function(n,s,i){const u=s.modules.size,g=s.modules.data,w=r.getScale(u,i),F=Math.floor((u+i.margin*2)*w),I=i.margin*w,N=[i.color.light,i.color.dark];for(let L=0;L<F;L++)for(let q=0;q<F;q++){let Z=(L*F+q)*4,tt=i.color.light;if(L>=I&&q>=I&&L<F-I&&q<F-I){const et=Math.floor((L-I)/w),X=Math.floor((q-I)/w);tt=N[g[et*u+X]?1:0]}n[Z++]=tt.r,n[Z++]=tt.g,n[Z++]=tt.b,n[Z]=tt.a}}})(Ra);(function(r){const t=Ra;function e(s,i,u){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=u,i.width=u,i.style.height=u+"px",i.style.width=u+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,u,g){let w=g,F=u;typeof w>"u"&&(!u||!u.getContext)&&(w=u,u=void 0),u||(F=n()),w=t.getOptions(w);const I=t.getImageWidth(i.modules.size,w),N=F.getContext("2d"),L=N.createImageData(I,I);return t.qrToImageData(L.data,i,w),e(N,F,I),N.putImageData(L,0,0),F},r.renderToDataURL=function(i,u,g){let w=g;typeof w>"u"&&(!u||!u.getContext)&&(w=u,u=void 0),w||(w={});const F=r.render(i,u,w),I=w.type||"image/png",N=w.rendererOpts||{};return F.toDataURL(I,N.quality)}})($u);var Ou={};const S6=Ra;function sf(r,t){const e=r.a/255,n=t+'="'+r.hex+'"';return e<1?n+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':n}function eo(r,t,e){let n=r+t;return typeof e<"u"&&(n+=" "+e),n}function D6(r,t,e){let n="",s=0,i=!1,u=0;for(let g=0;g<r.length;g++){const w=Math.floor(g%t),F=Math.floor(g/t);!w&&!i&&(i=!0),r[g]?(u++,g>0&&w>0&&r[g-1]||(n+=i?eo("M",w+e,.5+F+e):eo("m",s,0),s=0,i=!1),w+1<t&&r[g+1]||(n+=eo("h",u),u=0)):s++}return n}Ou.render=function(t,e,n){const s=S6.getOptions(e),i=t.modules.size,u=t.modules.data,g=i+s.margin*2,w=s.color.light.a?"<path "+sf(s.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",F="<path "+sf(s.color.dark,"stroke")+' d="'+D6(u,i,s.margin)+'"/>',I='viewBox="0 0 '+g+" "+g+'"',L='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+I+' shape-rendering="crispEdges">'+w+F+`</svg>
`;return typeof n=="function"&&n(null,L),L};const I6=Hx,Io=Bu,ku=$u,T6=Ou;function Na(r,t,e,n,s){const i=[].slice.call(arguments,1),u=i.length,g=typeof i[u-1]=="function";if(!g&&!I6())throw new Error("Callback required as last argument");if(g){if(u<2)throw new Error("Too few arguments provided");u===2?(s=e,e=t,t=n=void 0):u===3&&(t.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=e,e=t,t=void 0))}else{if(u<1)throw new Error("Too few arguments provided");return u===1?(e=t,t=n=void 0):u===2&&!t.getContext&&(n=e,e=t,t=void 0),new Promise(function(w,F){try{const I=Io.create(e,n);w(r(I,t,n))}catch(I){F(I)}})}try{const w=Io.create(e,n);s(null,r(w,t,n))}catch(w){s(w)}}li.create=Io.create;li.toCanvas=Na.bind(null,ku.render);li.toDataURL=Na.bind(null,ku.renderToDataURL);li.toString=Na.bind(null,function(r,t,e){return T6.render(r,e)});function R6(r){let t,e,n,s;return{c(){t=ie("div"),e=ie("canvas"),this.h()},l(i){t=se(i,"DIV",{class:!0});var u=ce(t);e=se(u,"CANVAS",{class:!0}),ce(e).forEach(Pt),u.forEach(Pt),this.h()},h(){$t(e,"class","svelte-56nh8c"),$t(t,"class","popup svelte-56nh8c"),Oi(t,"empty",!r[0])},m(i,u){Ye(i,t,u),wt(t,e),r[2](e),n||(s=xr(t,"click",r[3]),n=!0)},p(i,[u]){u&1&&Oi(t,"empty",!i[0])},i:Ne,o:Ne,d(i){i&&Pt(t),r[2](null),n=!1,s()}}}function N6(r,t,e){let{popup_link:n=""}=t,s;function i(g){jr[g?"unshift":"push"](()=>{s=g,e(1,s)})}const u=()=>{e(0,n="")};return r.$$set=g=>{"popup_link"in g&&e(0,n=g.popup_link)},r.$$.update=()=>{if(r.$$.dirty&3&&s)if(n)li.toCanvas(s,n);else{let g=s.getContext("2d");g.fillStyle="white",g.fillRect(0,0,320,320)}},[n,s,i,u]}class U6 extends fn{constructor(t){super(),ln(this,t,N6,R6,hn,{popup_link:0})}}function of(r,t,e){const n=r.slice();return n[16]=t[e],n}function P6(r){return{c:Ne,l:Ne,m:Ne,p:Ne,i:Ne,o:Ne,d:Ne}}function L6(r){let t,e,n=r[15],s=[];for(let u=0;u<n.length;u+=1)s[u]=af(of(r,n,u));const i=u=>yr(s[u],1,1,()=>{s[u]=null});return{c(){for(let u=0;u<s.length;u+=1)s[u].c();t=An()},l(u){for(let g=0;g<s.length;g+=1)s[g].l(u);t=An()},m(u,g){for(let w=0;w<s.length;w+=1)s[w]&&s[w].m(u,g);Ye(u,t,g),e=!0},p(u,g){if(g&104){n=u[15];let w;for(w=0;w<n.length;w+=1){const F=of(u,n,w);s[w]?(s[w].p(F,g),cr(s[w],1)):(s[w]=af(F),s[w].c(),cr(s[w],1),s[w].m(t.parentNode,t))}for(Ku(),w=n.length;w<s.length;w+=1)i(w);Vu()}},i(u){if(!e){for(let g=0;g<n.length;g+=1)cr(s[g]);e=!0}},o(u){s=s.filter(Boolean);for(let g=0;g<s.length;g+=1)yr(s[g]);e=!1},d(u){Gu(s,u),u&&Pt(t)}}}function af(r){let t,e,n;function s(...g){return r[12](r[16],...g)}function i(g){r[13](g)}let u={use_message_promise:r[3].then(s)};return r[5]!==void 0&&(u.popup_link=r[5]),t=new Cu({props:u}),jr.push(()=>en(t,"popup_link",i)),{c(){Nr(t.$$.fragment)},l(g){Ur(t.$$.fragment,g)},m(g,w){Pr(t,g,w),n=!0},p(g,w){r=g;const F={};w&8&&(F.use_message_promise=r[3].then(s)),!e&&w&32&&(e=!0,F.popup_link=r[5],rn(()=>e=!1)),t.$set(F)},i(g){n||(cr(t.$$.fragment,g),n=!0)},o(g){yr(t.$$.fragment,g),n=!1},d(g){Lr(t,g)}}}function $6(r){let t,e;return{c(){t=ie("span"),e=$e("Loading timers...")},l(n){t=se(n,"SPAN",{});var s=ce(t);e=Oe(s,"Loading timers..."),s.forEach(Pt)},m(n,s){Ye(n,t,s),wt(t,e)},p:Ne,i:Ne,o:Ne,d(n){n&&Pt(t)}}}function O6(r){let t,e,n,s,i,u,g,w,F,I,N,L,q,Z,tt,et,X,Q,G,k,J,st,ut,at;function Gt(d){r[7](d)}function E(d){r[8](d)}let a={};r[2]!==void 0&&(a.is_testnet=r[2]),r[5]!==void 0&&(a.popup_link=r[5]),s=new Nx({props:a}),jr.push(()=>en(s,"is_testnet",Gt)),jr.push(()=>en(s,"popup_link",E)),w=new Zs({props:{margin:8,color:"#b2d4fc"}});function l(d){r[9](d)}function o(d){r[10](d)}let h={};r[0]!==void 0&&(h.send_parameters=r[0]),r[1]!==void 0&&(h.deploy_parameters=r[1]),I=new Ox({props:h}),jr.push(()=>en(I,"send_parameters",l)),jr.push(()=>en(I,"deploy_parameters",o)),Z=new Zs({props:{margin:8,color:"#b2d4fc"}});function c(d){r[11](d)}let p={use_message_promise:r[4]};r[5]!==void 0&&(p.popup_link=r[5]),et=new Cu({props:p}),jr.push(()=>en(et,"popup_link",c));let b={ctx:r,current:null,token:null,hasCatch:!1,pending:$6,then:L6,catch:P6,value:15,blocks:[,,,]};ro(r[6],b),k=new Zs({props:{margin:8,color:"#b2d4fc"}});function v(d){r[14](d)}let f={};return r[5]!==void 0&&(f.popup_link=r[5]),st=new U6({props:f}),jr.push(()=>en(st,"popup_link",v)),{c(){t=ie("style"),e=$e(`html {
      background: #a0dfff66;
      color: #232328;
    }
    body {
      background: #f7f9fb;
      width: 1020px; height: auto; min-height: calc(100% - 16px); box-sizing: content-box;
      margin: 0 auto;
      border-left: #b2d4fc 1px solid;
      border-right: #b2d4fc 1px solid;
    }`),n=qe(),Nr(s.$$.fragment),g=qe(),Nr(w.$$.fragment),F=qe(),Nr(I.$$.fragment),q=qe(),Nr(Z.$$.fragment),tt=qe(),Nr(et.$$.fragment),Q=qe(),b.block.c(),G=qe(),Nr(k.$$.fragment),J=qe(),Nr(st.$$.fragment)},l(d){const m=Hu("svelte-t3ifu7",document.head);t=se(m,"STYLE",{});var B=ce(t);e=Oe(B,`html {
      background: #a0dfff66;
      color: #232328;
    }
    body {
      background: #f7f9fb;
      width: 1020px; height: auto; min-height: calc(100% - 16px); box-sizing: content-box;
      margin: 0 auto;
      border-left: #b2d4fc 1px solid;
      border-right: #b2d4fc 1px solid;
    }`),B.forEach(Pt),m.forEach(Pt),n=We(d),Ur(s.$$.fragment,d),g=We(d),Ur(w.$$.fragment,d),F=We(d),Ur(I.$$.fragment,d),q=We(d),Ur(Z.$$.fragment,d),tt=We(d),Ur(et.$$.fragment,d),Q=We(d),b.block.l(d),G=We(d),Ur(k.$$.fragment,d),J=We(d),Ur(st.$$.fragment,d)},m(d,m){wt(document.head,t),wt(t,e),Ye(d,n,m),Pr(s,d,m),Ye(d,g,m),Pr(w,d,m),Ye(d,F,m),Pr(I,d,m),Ye(d,q,m),Pr(Z,d,m),Ye(d,tt,m),Pr(et,d,m),Ye(d,Q,m),b.block.m(d,b.anchor=m),b.mount=()=>G.parentNode,b.anchor=G,Ye(d,G,m),Pr(k,d,m),Ye(d,J,m),Pr(st,d,m),at=!0},p(d,[m]){r=d;const B={};!i&&m&4&&(i=!0,B.is_testnet=r[2],rn(()=>i=!1)),!u&&m&32&&(u=!0,B.popup_link=r[5],rn(()=>u=!1)),s.$set(B);const O={};!N&&m&1&&(N=!0,O.send_parameters=r[0],rn(()=>N=!1)),!L&&m&2&&(L=!0,O.deploy_parameters=r[1],rn(()=>L=!1)),I.$set(O);const W={};m&16&&(W.use_message_promise=r[4]),!X&&m&32&&(X=!0,W.popup_link=r[5],rn(()=>X=!1)),et.$set(W),ff(b,r,m);const K={};!ut&&m&32&&(ut=!0,K.popup_link=r[5],rn(()=>ut=!1)),st.$set(K)},i(d){at||(cr(s.$$.fragment,d),cr(w.$$.fragment,d),cr(I.$$.fragment,d),cr(Z.$$.fragment,d),cr(et.$$.fragment,d),cr(b.block),cr(k.$$.fragment,d),cr(st.$$.fragment,d),at=!0)},o(d){yr(s.$$.fragment,d),yr(w.$$.fragment,d),yr(I.$$.fragment,d),yr(Z.$$.fragment,d),yr(et.$$.fragment,d);for(let m=0;m<3;m+=1){const B=b.blocks[m];yr(B)}yr(k.$$.fragment,d),yr(st.$$.fragment,d),at=!1},d(d){Pt(t),d&&Pt(n),Lr(s,d),d&&Pt(g),Lr(w,d),d&&Pt(F),Lr(I,d),d&&Pt(q),Lr(Z,d),d&&Pt(tt),Lr(et,d),d&&Pt(Q),b.block.d(d),b.token=null,b=null,d&&Pt(G),Lr(k,d),d&&Pt(J),Lr(st,d)}}}function k6(r,t,e){let n=!1,s,i,u=XE(),g=Promise.reject("unavailable"),w=Promise.reject("unavailable"),F="";function I(Q){n=Q,e(2,n)}function N(Q){F=Q,e(5,F)}function L(Q){s=Q,e(0,s)}function q(Q){i=Q,e(1,i)}function Z(Q){F=Q,e(5,F)}const tt=(Q,G)=>gu(G,Q);function et(Q){F=Q,e(5,F)}function X(Q){F=Q,e(5,F)}return r.$$.update=()=>{r.$$.dirty&1&&s&&e(3,g=mu(s)),r.$$.dirty&3&&s&&i&&e(4,w=QE(s,i))},[s,i,n,g,w,F,u,I,N,L,q,Z,tt,et,X]}class j6 extends fn{constructor(t){super(),ln(this,t,k6,O6,hn,{})}}function q6(r){let t,e;return t=new j6({}),{c(){Nr(t.$$.fragment)},l(n){Ur(t.$$.fragment,n)},m(n,s){Pr(t,n,s),e=!0},p:Ne,i(n){e||(cr(t.$$.fragment,n),e=!0)},o(n){yr(t.$$.fragment,n),e=!1},d(n){Lr(t,n)}}}class sC extends fn{constructor(t){super(),ln(this,t,null,q6,hn,{})}}export{sC as component,G6 as universal};
